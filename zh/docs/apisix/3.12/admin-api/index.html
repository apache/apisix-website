<!doctype html>
<html class="docs-version-3.12" lang="zh" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="ahrefs-site-verification" content="c2f7370ecf46173f4fb25f114e74c97e0a2976d4f02f61c9b00a9d7d34e34698">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="search" type="application/opensearchdescription+xml" title="Apache APISIXÂ® -- Cloud-Native API Gateway and AI Gateway" href="/zh/opensearch.xml">
<script type="application/ld+json">{"@context":"https://schema.org","@type":"WebSite","name":"Apache APISIX","url":"https://apisix.apache.org"}</script>
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="24b59d9a-682e-4c3d-9e83-bf2ee85cdc19" data-project-name="APISIX" data-project-color="#E8442E" data-project-logo="https://static.apiseven.com/202202/apache-apisix.png" data-modal-disclaimer="This is a custom LLM for APISIX with access to all developer documentation, GitHub issues and discussions." data-modal-example-questions="How to set up canary release in APISIX?,How to develop a custom APISIX plugin?,How to use custom NGINX configuration in APISIX?,How to configure mTLS between clients and APISIX?,How to only allow a specific APISIX consumer to access special services or routes?" async></script><title data-react-helmet="true">Admin API | Apache APISIXÂ® -- Cloud-Native API Gateway and AI Gateway</title><meta data-react-helmet="true" property="og:image" content="https://static.apiseven.com/202202/apache-apisix.png"><meta data-react-helmet="true" name="twitter:image" content="https://static.apiseven.com/202202/apache-apisix.png"><meta data-react-helmet="true" property="og:url" content="https://apisix.apache.org/zh/docs/apisix/3.12/admin-api/"><meta data-react-helmet="true" name="docsearch:language" content="zh"><meta data-react-helmet="true" name="docsearch:version" content="3.12"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-docs-apisix-3.12"><meta data-react-helmet="true" name="robots" content="index,follow"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" property="og:title" content="Admin API | Apache APISIXÂ® -- Cloud-Native API Gateway and AI Gateway"><meta data-react-helmet="true" name="description" content="æœ¬æ–‡ä»‹ç»äº† Apache APISIX Admin API æ”¯æŒçš„åŠŸèƒ½ï¼Œä½ å¯ä»¥é€šè¿‡ Admin API æ¥è·å–ã€åˆ›å»ºã€æ›´æ–°ä»¥åŠåˆ é™¤èµ„æºã€‚"><meta data-react-helmet="true" property="og:description" content="æœ¬æ–‡ä»‹ç»äº† Apache APISIX Admin API æ”¯æŒçš„åŠŸèƒ½ï¼Œä½ å¯ä»¥é€šè¿‡ Admin API æ¥è·å–ã€åˆ›å»ºã€æ›´æ–°ä»¥åŠåˆ é™¤èµ„æºã€‚"><meta data-react-helmet="true" name="keywords" content="APISIX,API ç½‘å…³,Admin API,è·¯ç”±,æ’ä»¶,ä¸Šæ¸¸"><link data-react-helmet="true" rel="shortcut icon" href="https://static.apiseven.com/202202/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://apisix.apache.org/zh/docs/apisix/3.12/admin-api/"><link data-react-helmet="true" rel="alternate" href="https://apisix.apache.org/docs/apisix/3.12/admin-api/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://apisix.apache.org/zh/docs/apisix/3.12/admin-api/" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://apisix.apache.org/docs/apisix/3.12/admin-api/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://38VC84A2WJ-dsn.algolia.net" crossorigin="anonymous"><link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Medium.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Bold.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Light.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Demi.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-ExtraBold.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://apisix-website-static.apiseven.com/zh/assets/js/runtime~main.f0ea08ab.js" as="script">
<link rel="preload" href="https://apisix-website-static.apiseven.com/zh/assets/js/main.dbcb65bd.js" as="script">
<link rel="stylesheet" href="https://apisix-website-static.apiseven.com/zh/assets/css/styles.8de0825e.css">

<script>var _paq=window._paq=window._paq||[];_paq.push(["disableCookies"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var a="https://analytics.apache.org/";_paq.push(["setTrackerUrl",a+"matomo.php"]),_paq.push(["setSiteId","17"]);var e=document,p=e.createElement("script"),t=e.getElementsByTagName("script")[0];p.async=!0,p.src=a+"matomo.js",t.parentNode.insertBefore(p,t)}()</script>

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><div class="announcementBar_axC9" style="background-color:#e8433e;color:white" role="banner"><div class="announcementBarPlaceholder_xYHE"></div><div class="announcementBarContent_6uhP">ğŸ¤” Introducing APISIX AI Gateway â€“ Built for LLMs and AI workloads. <a target="_blank" rel="noopener noreferrer" href="/ai-gateway/"> Learn More</a></div><button type="button" class="clean-btn close announcementBarClose_A3A1" aria-label="Close"><svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor"><path d="M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"></path></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_RReh"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a target="_parent" class="navbar__brand" href="/zh/"><img src="/zh/img/logo2.svg" alt="Apache APISIXÂ®" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/zh/img/logo2.svg" alt="Apache APISIXÂ®" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Apache APISIXÂ®</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link" target="_parent" href="/zh/docs/">æ–‡æ¡£</a><ul class="dropdown__menu"><li><a class="dropdown__link" target="_parent" href="/zh/docs/apisix/getting-started/">Apache APISIXÂ®ï¸</a></li><li><a class="dropdown__link" target="_parent" href="/zh/docs/apisix/next/dashboard/">Apache APISIXÂ®ï¸ Dashboard</a></li><li><a class="dropdown__link" target="_parent" href="/zh/docs/ingress-controller/overview/">Apache APISIXÂ®ï¸ Ingress Controller</a></li><li><a class="dropdown__link" target="_parent" href="/zh/docs/helm-chart/apisix/">Apache APISIXÂ®ï¸ Helm Charts</a></li><li><a class="dropdown__link" target="_parent" href="/zh/docs/docker/build/">Apache APISIXÂ®ï¸ Docker</a></li><li><a class="dropdown__link" target="_parent" href="/zh/docs/java-plugin-runner/development/">Apache APISIXÂ®ï¸ Java Plugin Runner</a></li><li><a class="dropdown__link" target="_parent" href="/zh/docs/go-plugin-runner/getting-started/">Apache APISIXÂ®ï¸ Go Plugin Runner</a></li><li><a class="dropdown__link" target="_parent" href="/zh/docs/python-plugin-runner/getting-started/">Apache APISIXÂ®ï¸ Python Plugin Runner</a></li><li><a class="dropdown__link" target="_parent" href="/zh/docs/general/join/">General</a></li></ul></div><a class="navbar__item navbar__link" target="_parent" href="/zh/blog/">åšå®¢</a><a class="navbar__item navbar__link" target="_parent" href="/zh/blog/tags/case-studies/">ç”¨æˆ·æ¡ˆä¾‹</a><a class="navbar__item navbar__link" target="_parent" href="/zh/downloads/">ä¸‹è½½</a><a class="navbar__item navbar__link" target="_parent" href="/zh/help/">å¸®åŠ©</a><a class="navbar__item navbar__link" target="_parent" href="/zh/team/">å›¢é˜Ÿ</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">ç›¸å…³èµ„æº</a><ul class="dropdown__menu"><li><a class="dropdown__link" target="_parent" href="/zh/showcase/">ä½¿ç”¨æ¡ˆä¾‹</a></li><li><a class="dropdown__link" target="_parent" href="/zh/docs/general/code-samples/">Code Samples</a></li><li><a class="dropdown__link" target="_parent" href="/zh/plugins/">æ’ä»¶å¸‚åœº</a></li><li><a class="dropdown__link" target="_parent" href="/zh/docs/general/join/">åŠ å…¥ç¤¾åŒº</a></li><li><a class="dropdown__link" target="_parent" href="/zh/docs/general/events/">ç¤¾åŒºæ´»åŠ¨</a></li><li><a href="https://github.com/apache/apisix/milestones" target="_parent" rel="noopener noreferrer" class="dropdown__link">Roadmap</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_zID8"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>ç®€ä½“ä¸­æ–‡</span></span></a><ul class="dropdown__menu"><li><a href="/docs/apisix/3.12/admin-api/" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">English</a></li><li><a href="/zh/docs/apisix/3.12/admin-api/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">ç®€ä½“ä¸­æ–‡</a></li></ul></div><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ğŸŒ</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_fBfG"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_GMj9"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_k0Pq"><div class="sidebar_LIo8 sidebarWithHideableNavbar_CMI-"><a target="_parent" tabindex="-1" class="sidebarLogo_P87M" href="/zh/"><img src="/zh/img/logo2.svg" alt="Apache APISIXÂ®" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/zh/img/logo2.svg" alt="Apache APISIXÂ®" class="themedImage_TMUO themedImage--dark_uzRr"><b>Apache APISIXÂ®</b></a><div class="sidebarVersionSwitch_0QIZ">Version:<div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" href="/zh/docs/apisix/3.12/getting-started/README/">3.12</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh/docs/apisix/next/admin-api/"><div>Next</div></a></li><li><a class="dropdown__link" href="/zh/docs/apisix/admin-api/"><div>3.15<div class="badge_6FVu Latest_oyqS">Latest</div></div></a></li><li><a class="dropdown__link" href="/zh/docs/apisix/3.14/admin-api/"><div>3.14</div></a></li><li><a class="dropdown__link" href="/zh/docs/apisix/3.13/admin-api/"><div>3.13</div></a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zh/docs/apisix/3.12/admin-api/"><div>3.12</div></a></li><li><a class="dropdown__link" href="/zh/docs/apisix/3.11/admin-api/"><div>3.11</div></a></li><li><a class="dropdown__link" href="/zh/docs/apisix/3.10/admin-api/"><div>3.10</div></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/3.9/getting-started/readme/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>3.9<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/3.8/getting-started/readme/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>3.8<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/3.7/getting-started/readme/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>3.7<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/3.6/getting-started/readme/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>3.6<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/3.5/getting-started/readme/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>3.5<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/3.4/getting-started/readme/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>3.4<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/3.3/getting-started/readme/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>3.3<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/3.2/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>3.2<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/3.1/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>3.1<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/3.0/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>3.0<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.15/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.15<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.14/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.14<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.13/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.13<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.12/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.12<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.11/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.11<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.10/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.10<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.9/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.9<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.8/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.8<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.7/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.7<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.6/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.6<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.5/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.5<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.4/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.4<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><nav class="menu thin-scrollbar menu_oAhv menuWithAnnouncementBar_IVfW"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/zh/docs/apisix/3.12/installation-guide/">APISIX å®‰è£…æŒ‡å—</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/zh/docs/apisix/3.12/architecture-design/apisix/">è½¯ä»¶æ¶æ„</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tutorials</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Terminology</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Plugins</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">API</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh/docs/apisix/3.12/admin-api/">Admin API</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/apisix/3.12/control-api/">Control API</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Development</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/zh/docs/apisix/3.12/deployment-modes/">Deployment modes</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/zh/docs/apisix/3.12/FAQ/">å¸¸è§é—®é¢˜</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Others</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a href="https://github.com/apache/apisix/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="menu__link"><span>CHANGELOG<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/zh/docs/apisix/3.12/upgrade-guide-from-2.15.x-to-3.0.0/">å‡çº§æŒ‡å—</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_EBxv"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_AF9Q"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_Q970"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for Apache APISIXÂ® -- Cloud-Native API Gateway and AI Gateway <b>3.12</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/zh/docs/apisix/admin-api/">latest version</a></b> (3.15).</div></div><div class="docItemContainer_oiyr"><article><span class="theme-doc-version-badge badge badge--secondary">Version: 3.12</span><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Admin API</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="description"></a>æè¿°<a class="hash-link" href="#description" title="Direct link to heading">#</a></h2><p>Admin API æ˜¯ä¸€ç»„ç”¨äºé…ç½® Apache APISIX è·¯ç”±ã€ä¸Šæ¸¸ã€æœåŠ¡ã€SSL è¯ä¹¦ç­‰åŠŸèƒ½çš„ RESTful APIã€‚</p><p>ä½ å¯ä»¥é€šè¿‡ Admin API æ¥è·å–ã€åˆ›å»ºã€æ›´æ–°ä»¥åŠåˆ é™¤èµ„æºã€‚åŒæ—¶å¾—ç›Šäº APISIX çš„çƒ­åŠ è½½èƒ½åŠ›ï¼Œèµ„æºé…ç½®å®Œæˆå APISIX å°†ä¼šè‡ªåŠ¨æ›´æ–°é…ç½®ï¼Œæ— éœ€é‡å¯æœåŠ¡ã€‚å¦‚æœä½ æƒ³è¦äº†è§£å…¶å·¥ä½œåŸç†ï¼Œè¯·å‚è€ƒ <a href="/zh/docs/apisix/3.12/architecture-design/apisix/">Architecture Design</a>ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="basic-configuration"></a>ç›¸å…³é…ç½®<a class="hash-link" href="#basic-configuration" title="Direct link to heading">#</a></h2><p>å½“ APISIX å¯åŠ¨æ—¶ï¼ŒAdmin API é»˜è®¤æƒ…å†µä¸‹å°†ä¼šç›‘å¬ <code>9180</code> ç«¯å£ï¼Œå¹¶ä¸”ä¼šå ç”¨å‰ç¼€ä¸º <code>/apisix/admin</code> çš„ APIã€‚</p><p>å› æ­¤ï¼Œä¸ºäº†é¿å…ä½ è®¾è®¡çš„ API ä¸ <code>/apisix/admin</code> å†²çªï¼Œä½ å¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶ <a href="https://github.com/apache/apisix/blob/master/conf/config.yaml" rel="noopener noreferrer"><code>/conf/config.yaml</code></a> ä¸­çš„é…ç½®ä¿®æ”¹é»˜è®¤ç›‘å¬ç«¯å£ã€‚</p><p>APISIX æ”¯æŒè®¾ç½® Admin API çš„ IP è®¿é—®ç™½åå•ï¼Œé˜²æ­¢ APISIX è¢«éæ³•è®¿é—®å’Œæ”»å‡»ã€‚ä½ å¯ä»¥åœ¨ <code>./conf/config.yaml</code> æ–‡ä»¶ä¸­çš„ <code>deployment.admin.allow_admin</code> é€‰é¡¹ä¸­ï¼Œé…ç½®å…è®¸è®¿é—®çš„ IP åœ°å€ã€‚</p><p>åœ¨ä¸‹æ–‡å‡ºç°çš„ <code>X-API-KEY</code> æŒ‡çš„æ˜¯ <code>./conf/config.yaml</code> æ–‡ä»¶ä¸­çš„ <code>deployment.admin.admin_key.key</code>ï¼Œå®ƒæ˜¯ Admin API çš„è®¿é—® tokenã€‚</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>æç¤º</h5></div><div class="admonition-content"><p>å»ºè®®ä½ ä¿®æ”¹ Admin API é»˜è®¤çš„ç›‘å¬ç«¯å£ã€IP è®¿é—®ç™½åå•ä»¥åŠ Admin API çš„ tokenï¼Œä»¥ä¿è¯ä½ çš„ API å®‰å…¨ã€‚</p></div></div><div class="codeBlockContainer_EiTO"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_PQMO">./conf/config.yaml</div><div class="codeBlockContent_X2I6 yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">deployment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">admin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">admin_key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> edd1c9f034335f136f87ad84b625c8f1  </span><span class="token comment" style="color:#999988;font-style:italic"># ä½¿ç”¨é»˜è®¤çš„ Admin API Key å­˜åœ¨å®‰å…¨é£é™©ï¼Œéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒæ—¶è¯·åŠæ—¶æ›´æ–°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">role</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">allow_admin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic"># http://nginx.org/en/docs/http/ngx_http_access_module.html#allow</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 127.0.0.0/24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">admin_listen</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">ip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 0.0.0.0                 </span><span class="token comment" style="color:#999988;font-style:italic"># Admin API ç›‘å¬çš„ IPï¼Œå¦‚æœä¸è®¾ç½®ï¼Œé»˜è®¤ä¸ºâ€œ0.0.0.0â€ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9180</span><span class="token plain">                  </span><span class="token comment" style="color:#999988;font-style:italic"># Admin API ç›‘å¬çš„ ç«¯å£ï¼Œå¿…é¡»ä½¿ç”¨ä¸ node_listen ä¸åŒçš„ç«¯å£ã€‚</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="using-environment-variables"></a>ä½¿ç”¨ç¯å¢ƒå˜é‡<a class="hash-link" href="#using-environment-variables" title="Direct link to heading">#</a></h3><p>è¦é€šè¿‡ç¯å¢ƒå˜é‡è¿›è¡Œé…ç½®ï¼Œå¯ä»¥ä½¿ç”¨ <code>${{VAR}}</code> è¯­æ³•ã€‚ä¾‹å¦‚ï¼š</p><div class="codeBlockContainer_EiTO"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_PQMO">./conf/config.yaml</div><div class="codeBlockContent_X2I6 yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">deployment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">admin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">admin_key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">ADMIN_KEY</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">role</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">allow_admin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 127.0.0.0/24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">admin_listen</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 0.0.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9180</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>ç„¶ååœ¨ <code>make init</code> ä¹‹å‰è¿è¡Œ <code>export ADMIN_KEY=$your_admin_key</code>.</p><p>å¦‚æœæ‰¾ä¸åˆ°é…ç½®çš„ç¯å¢ƒå˜é‡ï¼Œå°†æŠ›å‡ºé”™è¯¯ã€‚</p><p>æ­¤å¤–ï¼Œå¦‚æœè¦åœ¨æœªè®¾ç½®ç¯å¢ƒå˜é‡æ—¶ä½¿ç”¨é»˜è®¤å€¼ï¼Œè¯·æ”¹ç”¨ <code>${{VAR:=default_value}}</code>ã€‚ä¾‹å¦‚ï¼š</p><div class="codeBlockContainer_EiTO"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_PQMO">./conf/config.yaml</div><div class="codeBlockContent_X2I6 yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">deployment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">admin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">admin_key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">ADMIN_KEY</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">=edd1c9f034335f136f87ad84b625c8f1</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">role</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">allow_admin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 127.0.0.0/24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">admin_listen</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 0.0.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9180</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>é¦–å…ˆæŸ¥æ‰¾ç¯å¢ƒå˜é‡ <code>ADMIN_KEY</code>ï¼Œå¦‚æœè¯¥ç¯å¢ƒå˜é‡ä¸å­˜åœ¨ï¼Œå®ƒå°†ä½¿ç”¨ <code>edd1c9f034335f136f87ad84b625c8f1</code> ä½œä¸ºé»˜è®¤å€¼ã€‚</p><p>æ‚¨è¿˜å¯ä»¥åœ¨ yaml é”®ä¸­æŒ‡å®šç¯å¢ƒå˜é‡ã€‚è¿™åœ¨ <code>standalone</code> æ¨¡å¼ ä¸­ç‰¹åˆ«æœ‰ç”¨ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­æŒ‡å®šä¸Šæ¸¸èŠ‚ç‚¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="codeBlockContainer_EiTO"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_PQMO">./conf/apisix.yaml</div><div class="codeBlockContent_X2I6 yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">routes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">uri</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/test&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">upstream</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">nodes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">&quot;${{HOST_IP}}:${{PORT}}&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> roundrobin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#END</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="force-delete"></a>å¼ºåˆ¶åˆ é™¤<a class="hash-link" href="#force-delete" title="Direct link to heading">#</a></h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒAdmin API ä¼šæ£€æŸ¥èµ„æºé—´çš„å¼•ç”¨å…³ç³»ï¼Œå°†ä¼šæ‹’ç»åˆ é™¤æ­£åœ¨ä½¿ç”¨ä¸­çš„èµ„æºã€‚</p><p>å¯ä»¥é€šè¿‡åœ¨åˆ é™¤è¯·æ±‚ä¸­æ·»åŠ è¯·æ±‚å‚æ•° <code>force=true</code> æ¥è¿›è¡Œå¼ºåˆ¶åˆ é™¤ï¼Œä¾‹å¦‚ï¼š</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>æ‚¨å¯ä»¥è¿™æ ·ä» <code>config.yaml</code> ä¸­è·å– <code>admin_key</code> å¹¶å­˜å…¥ç¯å¢ƒå˜é‡ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">admin_key</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">yq </span><span class="token variable string" style="color:#e3116c">&#x27;.deployment.admin.admin_key[0].key&#x27;</span><span class="token variable" style="color:#36acaa"> conf/config.yaml </span><span class="token variable operator" style="color:#393A34">|</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable function" style="color:#d73a49">sed</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable string" style="color:#e3116c">&#x27;s/&quot;//g&#x27;</span><span class="token variable" style="color:#36acaa">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/upstreams/1 -H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PUT -d </span><span class="token string" style="color:#e3116c">&#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;nodes&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;127.0.0.1:8080&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;type&quot;: &quot;roundrobin&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/routes/1 -H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PUT -d </span><span class="token string" style="color:#e3116c">&#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;uri&quot;: &quot;/*&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;upstream_id&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;value&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;priority&quot;</span><span class="token plain">:0,</span><span class="token string" style="color:#e3116c">&quot;upstream_id&quot;</span><span class="token plain">:1,</span><span class="token string" style="color:#e3116c">&quot;uri&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;/*&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;create_time&quot;</span><span class="token plain">:1689038794,</span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;status&quot;</span><span class="token plain">:1,</span><span class="token string" style="color:#e3116c">&quot;update_time&quot;</span><span class="token plain">:1689038916</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;key&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;/apisix/routes/1&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/upstreams/1 -H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X DELETE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;error_msg&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;can not delete this upstream, route [1] is still using it now&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http://127.0.0.1:9180/apisix/admin/upstreams/1?force=anyvalue&quot;</span><span class="token plain"> -H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X DELETE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;error_msg&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;can not delete this upstream, route [1] is still using it now&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http://127.0.0.1:9180/apisix/admin/upstreams/1?force=true&quot;</span><span class="token plain"> -H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X DELETE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;deleted&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;key&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;/apisix/upstreams/1&quot;</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="v3-new-function"></a>v3 ç‰ˆæœ¬æ–°åŠŸèƒ½<a class="hash-link" href="#v3-new-function" title="Direct link to heading">#</a></h2><p>åœ¨ APISIX v3 ç‰ˆæœ¬ä¸­ï¼ŒAdmin API æ”¯æŒäº†ä¸€äº›ä¸å‘ä¸‹å…¼å®¹çš„æ–°ç‰¹æ€§ï¼Œæ¯”å¦‚æ”¯æŒæ–°çš„å“åº”ä½“æ ¼å¼ã€æ”¯æŒåˆ†é¡µæŸ¥è¯¢ã€æ”¯æŒè¿‡æ»¤èµ„æºç­‰ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="support-new-response-body-format"></a>æ”¯æŒæ–°çš„å“åº”ä½“æ ¼å¼<a class="hash-link" href="#support-new-response-body-format" title="Direct link to heading">#</a></h3><p>APISIX åœ¨ v3 ç‰ˆæœ¬å¯¹å“åº”ä½“åšäº†ä»¥ä¸‹è°ƒæ•´ï¼š</p><ul><li>ç§»é™¤æ—§ç‰ˆæœ¬å“åº”ä½“ä¸­çš„ <code>action</code> å­—æ®µï¼›</li><li>è°ƒæ•´è·å–èµ„æºåˆ—è¡¨æ—¶çš„å“åº”ä½“ç»“æ„ï¼Œæ–°çš„å“åº”ä½“ç»“æ„ç¤ºä¾‹å¦‚ä¸‹ï¼š</li></ul><p>è¿”å›å•ä¸ªèµ„æºï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 json"><pre tabindex="0" class="prism-code language-json codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;modifiedIndex&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2685183</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;key&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/apisix/routes/1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;createdIndex&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2684956</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>è¿”å›å¤šä¸ªèµ„æºï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 json"><pre tabindex="0" class="prism-code language-json codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;list&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;modifiedIndex&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2685183</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;key&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/apisix/routes/1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;createdIndex&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2684956</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;modifiedIndex&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2685163</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;key&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/apisix/routes/2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;createdIndex&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2685163</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;total&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="support-paging-query"></a>æ”¯æŒåˆ†é¡µæŸ¥è¯¢<a class="hash-link" href="#support-paging-query" title="Direct link to heading">#</a></h3><p>è·å–èµ„æºåˆ—è¡¨æ—¶æ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼Œç›®å‰æ”¯æŒåˆ†é¡µæŸ¥è¯¢çš„èµ„æºå¦‚ä¸‹ï¼š</p><ul><li><a href="#consumer">Consumer</a></li><li><a href="#consumer-group">Consumer Group</a></li><li><a href="#global-rules">Global Rules</a></li><li><a href="#plugin-config">Plugin Config</a></li><li><a href="https://apisix.apache.org/zh/docs/apisix/plugins/grpc-transcode/#%E5%90%AF%E7%94%A8%E6%8F%92%E4%BB%B6" rel="noopener noreferrer">Protos</a></li><li><a href="#route">Route</a></li><li><a href="#service">Service</a></li><li><a href="#ssl">SSL</a></li><li><a href="#stream-route">Stream Route</a></li><li><a href="#upstream">Upstream</a></li></ul><p>å‚æ•°å¦‚ä¸‹ï¼š</p><table><thead><tr><th>åç§°</th><th>é»˜è®¤å€¼</th><th>èŒƒå›´</th><th>æè¿°</th></tr></thead><tbody><tr><td>page</td><td>1</td><td>[1, ...]</td><td>é¡µæ•°ï¼Œé»˜è®¤å±•ç¤ºç¬¬ä¸€é¡µã€‚</td></tr><tr><td>page_size</td><td></td><td>[10, 500]</td><td>æ¯é¡µèµ„æºæ•°é‡ã€‚å¦‚æœä¸é…ç½®è¯¥å‚æ•°ï¼Œåˆ™å±•ç¤ºæ‰€æœ‰æŸ¥è¯¢åˆ°çš„èµ„æºã€‚</td></tr></tbody></table><p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http://127.0.0.1:9180/apisix/admin/routes?page=1&amp;page_size=10&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X GET</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 json"><pre tabindex="0" class="prism-code language-json codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;total&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;list&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="support-filtering-query"></a>æ”¯æŒè¿‡æ»¤èµ„æº<a class="hash-link" href="#support-filtering-query" title="Direct link to heading">#</a></h3><p>åœ¨ APISIX v3 ç‰ˆæœ¬ä¸­ï¼Œåœ¨è·å–èµ„æºåˆ—è¡¨æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>name</code>ã€<code>label</code> å’Œ <code>uri</code> å‚æ•°è¿‡æ»¤èµ„æºã€‚æ”¯æŒå‚æ•°å¦‚ä¸‹ï¼š</p><table><thead><tr><th>åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td>name</td><td>æ ¹æ®èµ„æºçš„ <code>name</code> å±æ€§è¿›è¡ŒæŸ¥è¯¢ï¼Œå¦‚æœèµ„æºæœ¬èº«æ²¡æœ‰ <code>name</code> å±æ€§åˆ™ä¸ä¼šå‡ºç°åœ¨æŸ¥è¯¢ç»“æœä¸­ã€‚</td></tr><tr><td>label</td><td>æ ¹æ®èµ„æºçš„ <code>label</code> å±æ€§è¿›è¡ŒæŸ¥è¯¢ï¼Œå¦‚æœèµ„æºæœ¬èº«æ²¡æœ‰ <code>label</code> å±æ€§åˆ™ä¸ä¼šå‡ºç°åœ¨æŸ¥è¯¢ç»“æœä¸­ã€‚</td></tr><tr><td>uri</td><td>è¯¥å‚æ•°ä»…åœ¨ Route èµ„æºä¸Šæ”¯æŒã€‚å¦‚æœ Route çš„ <code>uri</code> ç­‰äºæŸ¥è¯¢çš„ <code>uri</code> æˆ– <code>uris</code> åŒ…å«æŸ¥è¯¢çš„ <code>uri</code>ï¼Œåˆ™è¯¥ Route èµ„æºå‡ºç°åœ¨æŸ¥è¯¢ç»“æœä¸­ã€‚</td></tr></tbody></table><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>æç¤º</h5></div><div class="admonition-content"><p>å½“ä½¿ç”¨å¤šä¸ªè¿‡æ»¤å‚æ•°æ—¶ï¼ŒAPISIX å°†å¯¹ä¸åŒè¿‡æ»¤å‚æ•°çš„æŸ¥è¯¢ç»“æœå–äº¤é›†ã€‚</p></div></div><p>ä»¥ä¸‹ç¤ºä¾‹å°†è¿”å›ä¸€ä¸ªè·¯ç”±åˆ—è¡¨ï¼Œè¯¥è·¯ç”±åˆ—è¡¨ä¸­çš„æ‰€æœ‰è·¯ç”±éœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼šè·¯ç”±çš„ <code>name</code> åŒ…å«å­—ç¬¦ä¸² <code>test</code>ï¼›<code>uri</code> åŒ…å«å­—ç¬¦ä¸² <code>foo</code>ï¼›å¯¹è·¯ç”±çš„ <code>label</code> æ²¡æœ‰é™åˆ¶ï¼Œå› ä¸º <code>label</code> ä¸ºç©ºå­—ç¬¦ä¸²ã€‚</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;http://127.0.0.1:9180/apisix/admin/routes?name=test&amp;uri=foo&amp;label=&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X GET</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>è¿”å›ç»“æœï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 json"><pre tabindex="0" class="prism-code language-json codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;total&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;list&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="route"></a>Route<a class="hash-link" href="#route" title="Direct link to heading">#</a></h2><p>Route ä¹Ÿç§°ä¹‹ä¸ºè·¯ç”±ï¼Œå¯ä»¥é€šè¿‡å®šä¹‰ä¸€äº›è§„åˆ™æ¥åŒ¹é…å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œç„¶åæ ¹æ®åŒ¹é…ç»“æœåŠ è½½å¹¶æ‰§è¡Œç›¸åº”çš„æ’ä»¶ï¼Œå¹¶æŠŠè¯·æ±‚è½¬å‘ç»™åˆ°æŒ‡å®š Upstreamï¼ˆä¸Šæ¸¸ï¼‰ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="route-uri"></a>è¯·æ±‚åœ°å€<a class="hash-link" href="#route-uri" title="Direct link to heading">#</a></h3><p>è·¯ç”±èµ„æºè¯·æ±‚åœ°å€ï¼š/apisix/admin/routes/{id}?ttl=0</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="route-request-methods"></a>è¯·æ±‚æ–¹æ³•<a class="hash-link" href="#route-request-methods" title="Direct link to heading">#</a></h3><table><thead><tr><th>åç§°</th><th>è¯·æ±‚ URI</th><th>è¯·æ±‚ body</th><th>æè¿°</th></tr></thead><tbody><tr><td>GET</td><td>/apisix/admin/routes</td><td>æ— </td><td>è·å–èµ„æºåˆ—è¡¨ã€‚</td></tr><tr><td>GET</td><td>/apisix/admin/routes/{id}</td><td>æ— </td><td>è·å–èµ„æºã€‚</td></tr><tr><td>PUT</td><td>/apisix/admin/routes/{id}</td><td>{...}</td><td>æ ¹æ® id åˆ›å»ºèµ„æºã€‚</td></tr><tr><td>POST</td><td>/apisix/admin/routes</td><td>{...}</td><td>åˆ›å»ºèµ„æºï¼Œid å°†ä¼šè‡ªåŠ¨ç”Ÿæˆã€‚</td></tr><tr><td>DELETE</td><td>/apisix/admin/routes/{id}</td><td>æ— </td><td>åˆ é™¤æŒ‡å®šèµ„æºã€‚</td></tr><tr><td>PATCH</td><td>/apisix/admin/routes/{id}</td><td>{...}</td><td>æ ‡å‡† PATCHï¼Œä¿®æ”¹æŒ‡å®š Route çš„éƒ¨åˆ†å±æ€§ï¼Œå…¶ä»–ä¸æ¶‰åŠçš„å±æ€§ä¼šåŸæ ·ä¿ç•™ï¼›å¦‚æœä½ éœ€è¦åˆ é™¤æŸä¸ªå±æ€§ï¼Œå¯ä»¥å°†è¯¥å±æ€§çš„å€¼è®¾ç½®ä¸º <code>null</code>ï¼›å½“éœ€è¦ä¿®æ”¹å±æ€§çš„å€¼ä¸ºæ•°ç»„æ—¶ï¼Œè¯¥å±æ€§å°†å…¨é‡æ›´æ–°ã€‚</td></tr><tr><td>PATCH</td><td>/apisix/admin/routes/{id}/{path}</td><td>{...}</td><td>SubPath PATCHï¼Œé€šè¿‡ <code>{path}</code> æŒ‡å®š Route è¦æ›´æ–°çš„å±æ€§ï¼Œå…¨é‡æ›´æ–°è¯¥å±æ€§çš„æ•°æ®ï¼Œå…¶ä»–ä¸æ¶‰åŠçš„å±æ€§ä¼šåŸæ ·ä¿ç•™ã€‚ä¸¤ç§ PATCH çš„åŒºåˆ«ï¼Œè¯·å‚è€ƒä½¿ç”¨ç¤ºä¾‹ã€‚</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="route-uri-request-parameters"></a>URI è¯·æ±‚å‚æ•°<a class="hash-link" href="#route-uri-request-parameters" title="Direct link to heading">#</a></h3><table><thead><tr><th>åç§°</th><th>å¿…é€‰é¡¹</th><th>ç±»å‹</th><th>æè¿°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>ttl</td><td>å¦</td><td>è¾…åŠ©</td><td>è·¯ç”±çš„æœ‰æ•ˆæœŸã€‚è¶…è¿‡å®šä¹‰çš„æ—¶é—´ï¼ŒAPISIX å°†ä¼šè‡ªåŠ¨åˆ é™¤è·¯ç”±ï¼Œå•ä½ä¸ºç§’ã€‚</td><td>ttl=1</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="route-request-body-parameters"></a>body è¯·æ±‚å‚æ•°<a class="hash-link" href="#route-request-body-parameters" title="Direct link to heading">#</a></h3><table><thead><tr><th>åç§°</th><th>å¿…é€‰é¡¹</th><th>ç±»å‹</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>uri</td><td>æ˜¯ï¼Œä¸ <code>uris</code> äºŒé€‰ä¸€ã€‚</td><td>åŒ¹é…è§„åˆ™</td><td>é™¤äº†å¦‚ <code>/foo/bar</code>ã€<code>/foo/gloo</code> è¿™ç§å…¨é‡åŒ¹é…å¤–ï¼Œä½¿ç”¨ä¸åŒ <a href="/zh/docs/apisix/3.12/terminology/router/">Router</a> è¿˜å…è®¸æ›´é«˜çº§åŒ¹é…ï¼Œæ›´å¤šä¿¡æ¯è¯·å‚è€ƒ <a href="/zh/docs/apisix/3.12/terminology/router/">Router</a>ã€‚</td><td>&quot;/hello&quot;</td></tr><tr><td>uris</td><td>æ˜¯ï¼Œä¸èƒ½ä¸ <code>uri</code> äºŒé€‰ä¸€ã€‚</td><td>åŒ¹é…è§„åˆ™</td><td>éç©ºæ•°ç»„å½¢å¼ï¼Œå¯ä»¥åŒ¹é…å¤šä¸ª <code>uri</code>ã€‚</td><td>[&quot;/hello&quot;, &quot;/world&quot;]</td></tr><tr><td>plugins</td><td>å¦</td><td>Plugin</td><td>Plugin é…ç½®ï¼Œè¯·å‚è€ƒ <a href="/zh/docs/apisix/3.12/terminology/plugin/">Plugin</a>ã€‚</td><td></td></tr><tr><td>script</td><td>å¦</td><td>Script</td><td>Script é…ç½®ï¼Œè¯·å‚è€ƒ <a href="/zh/docs/apisix/3.12/terminology/script/">Script</a>ã€‚</td><td></td></tr><tr><td>upstream</td><td>å¦</td><td>Upstream</td><td>Upstream é…ç½®ï¼Œè¯·å‚è€ƒ <a href="/zh/docs/apisix/3.12/terminology/upstream/">Upstream</a>ã€‚</td><td></td></tr><tr><td>upstream_id</td><td>å¦</td><td>Upstream</td><td>éœ€è¦ä½¿ç”¨çš„ Upstream idï¼Œè¯·å‚è€ƒ <a href="/zh/docs/apisix/3.12/terminology/upstream/">Upstream</a>ã€‚</td><td></td></tr><tr><td>service_id</td><td>å¦</td><td>Service</td><td>éœ€è¦ç»‘å®šçš„ Service idï¼Œè¯·å‚è€ƒ <a href="/zh/docs/apisix/3.12/terminology/service/">Service</a>ã€‚</td><td></td></tr><tr><td>plugin_config_id</td><td>å¦ï¼Œä¸èƒ½ä¸ Script å…±åŒä½¿ç”¨ã€‚</td><td>Plugin</td><td>éœ€è¦ç»‘å®šçš„ Plugin Config idï¼Œè¯·å‚è€ƒ <a href="/zh/docs/apisix/3.12/terminology/plugin-config/">Plugin Config</a>ã€‚</td><td></td></tr><tr><td>name</td><td>å¦</td><td>è¾…åŠ©</td><td>è·¯ç”±åç§°ã€‚</td><td>route-test</td></tr><tr><td>desc</td><td>å¦</td><td>è¾…åŠ©</td><td>è·¯ç”±æè¿°ä¿¡æ¯ã€‚</td><td>ç”¨æ¥æµ‹è¯•çš„è·¯ç”±ã€‚</td></tr><tr><td>host</td><td>å¦ï¼Œä¸ <code>hosts</code> äºŒé€‰ä¸€ã€‚</td><td>åŒ¹é…è§„åˆ™</td><td>å½“å‰è¯·æ±‚åŸŸåï¼Œæ¯”å¦‚ <code>foo.com</code>ï¼›ä¹Ÿæ”¯æŒæ³›åŸŸåï¼Œæ¯”å¦‚ <code>*.foo.com</code>ã€‚</td><td>&quot;foo.com&quot;</td></tr><tr><td>hosts</td><td>å¦ï¼Œä¸ <code>host</code> äºŒé€‰ä¸€ã€‚</td><td>åŒ¹é…è§„åˆ™</td><td>éç©ºåˆ—è¡¨å½¢æ€çš„ <code>host</code>ï¼Œè¡¨ç¤ºå…è®¸æœ‰å¤šä¸ªä¸åŒ <code>host</code>ï¼ŒåŒ¹é…å…¶ä¸­ä»»æ„ä¸€ä¸ªå³å¯ã€‚</td><td>[&quot;foo.com&quot;, &quot;*.bar.com&quot;]</td></tr><tr><td>remote_addr</td><td>å¦ï¼Œä¸ <code>remote_addrs</code> äºŒé€‰ä¸€ã€‚</td><td>åŒ¹é…è§„åˆ™</td><td>å®¢æˆ·ç«¯è¯·æ±‚çš„ IP åœ°å€ã€‚æ”¯æŒ IPv4 åœ°å€ï¼Œå¦‚ï¼š<code>192.168.1.101</code> ä»¥åŠ CIDR æ ¼å¼çš„æ”¯æŒ <code>192.168.1.0/24</code>ï¼›æ”¯æŒ IPv6 åœ°å€åŒ¹é…ï¼Œå¦‚ <code>::1</code>ï¼Œ<code>fe80::1</code>ï¼Œ<code>fe80::1/64</code> ç­‰ã€‚</td><td>&quot;192.168.1.0/24&quot;</td></tr><tr><td>remote_addrs</td><td>å¦ï¼Œä¸ <code>remote_addr</code> äºŒé€‰ä¸€ã€‚</td><td>åŒ¹é…è§„åˆ™</td><td>éç©ºåˆ—è¡¨å½¢æ€çš„ <code>remote_addr</code>ï¼Œè¡¨ç¤ºå…è®¸æœ‰å¤šä¸ªä¸åŒ IP åœ°å€ï¼Œç¬¦åˆå…¶ä¸­ä»»æ„ä¸€ä¸ªå³å¯ã€‚</td><td>[&quot;127.0.0.1&quot;, &quot;192.0.0.0/8&quot;, &quot;::1&quot;]</td></tr><tr><td>methods</td><td>å¦</td><td>åŒ¹é…è§„åˆ™</td><td>å¦‚æœä¸ºç©ºæˆ–æ²¡æœ‰è¯¥é€‰é¡¹ï¼Œåˆ™è¡¨ç¤ºæ²¡æœ‰ä»»ä½• <code>method</code> é™åˆ¶ã€‚ä½ ä¹Ÿå¯ä»¥é…ç½®ä¸€ä¸ªæˆ–å¤šä¸ªçš„ç»„åˆï¼š<code>GET</code>ï¼Œ<code>POST</code>ï¼Œ<code>PUT</code>ï¼Œ<code>DELETE</code>ï¼Œ<code>PATCH</code>ï¼Œ<code>HEAD</code>ï¼Œ<code>OPTIONS</code>ï¼Œ<code>CONNECT</code>ï¼Œ<code>TRACE</code>ï¼Œ<code>PURGE</code>ã€‚</td><td>[&quot;GET&quot;, &quot;POST&quot;]</td></tr><tr><td>priority</td><td>å¦</td><td>åŒ¹é…è§„åˆ™</td><td>å¦‚æœä¸åŒè·¯ç”±åŒ…å«ç›¸åŒçš„ <code>uri</code>ï¼Œåˆ™æ ¹æ®å±æ€§ <code>priority</code> ç¡®å®šå“ªä¸ª <code>route</code> è¢«ä¼˜å…ˆåŒ¹é…ï¼Œå€¼è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼Œé»˜è®¤å€¼ä¸º <code>0</code>ã€‚</td><td>priority = 10</td></tr><tr><td>vars</td><td>å¦</td><td>åŒ¹é…è§„åˆ™</td><td>ç”±ä¸€ä¸ªæˆ–å¤šä¸ª<code>[var, operator, val]</code>å…ƒç´ ç»„æˆçš„åˆ—è¡¨ï¼Œç±»ä¼¼ <code>[[var, operator, val], [var, operator, val], ...]]</code>ã€‚ä¾‹å¦‚ï¼š<code>[&quot;arg_name&quot;, &quot;==&quot;, &quot;json&quot;]</code> åˆ™è¡¨ç¤ºå½“å‰è¯·æ±‚å‚æ•° <code>name</code> æ˜¯ <code>json</code>ã€‚æ­¤å¤„ <code>var</code> ä¸ NGINX å†…éƒ¨è‡ªèº«å˜é‡å‘½åæ˜¯ä¿æŒä¸€è‡´çš„ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>request_uri</code>ã€<code>host</code> ç­‰ã€‚æ›´å¤šç»†èŠ‚è¯·å‚è€ƒ <a href="https://github.com/api7/lua-resty-expr" target="_blank" rel="noopener noreferrer">lua-resty-expr</a>ã€‚</td><td>[[&quot;arg_name&quot;, &quot;==&quot;, &quot;json&quot;], [&quot;arg_age&quot;, &quot;&gt;&quot;, 18]]</td></tr><tr><td>filter_func</td><td>å¦</td><td>åŒ¹é…è§„åˆ™</td><td>ç”¨æˆ·è‡ªå®šä¹‰çš„è¿‡æ»¤å‡½æ•°ã€‚å¯ä»¥ä½¿ç”¨å®ƒæ¥å®ç°ç‰¹æ®Šåœºæ™¯çš„åŒ¹é…è¦æ±‚å®ç°ã€‚è¯¥å‡½æ•°é»˜è®¤æ¥å—ä¸€ä¸ªåä¸º <code>vars</code> çš„è¾“å…¥å‚æ•°ï¼Œå¯ä»¥ç”¨å®ƒæ¥è·å– NGINX å˜é‡ã€‚</td><td>function(vars) return vars[&quot;arg_name&quot;] == &quot;json&quot; end</td></tr><tr><td>labels</td><td>å¦</td><td>åŒ¹é…è§„åˆ™</td><td>æ ‡è¯†é™„åŠ å±æ€§çš„é”®å€¼å¯¹ã€‚</td><td>{&quot;version&quot;:&quot;v2&quot;,&quot;build&quot;:&quot;16&quot;,&quot;env&quot;:&quot;production&quot;}</td></tr><tr><td>timeout</td><td>å¦</td><td>è¾…åŠ©</td><td>ä¸º Route è®¾ç½® Upstream è¿æ¥ã€å‘é€æ¶ˆæ¯å’Œæ¥æ”¶æ¶ˆæ¯çš„è¶…æ—¶æ—¶é—´ï¼ˆå•ä½ä¸ºç§’ï¼‰ã€‚è¯¥é…ç½®å°†ä¼šè¦†ç›–åœ¨ Upstream ä¸­é…ç½®çš„ <a href="#upstream">timeout</a> é€‰é¡¹ã€‚</td><td>{&quot;connect&quot;: 3, &quot;send&quot;: 3, &quot;read&quot;: 3}</td></tr><tr><td>enable_websocket</td><td>å¦</td><td>è¾…åŠ©</td><td>å½“è®¾ç½®ä¸º <code>true</code> æ—¶ï¼Œå¯ç”¨ <code>websocket</code>(boolean), é»˜è®¤å€¼ä¸º <code>false</code>ã€‚</td><td></td></tr><tr><td>status</td><td>å¦</td><td>è¾…åŠ©</td><td>å½“è®¾ç½®ä¸º <code>1</code> æ—¶ï¼Œå¯ç”¨è¯¥è·¯ç”±ï¼Œé»˜è®¤å€¼ä¸º <code>1</code>ã€‚</td><td><code>1</code> è¡¨ç¤ºå¯ç”¨ï¼Œ<code>0</code> è¡¨ç¤ºç¦ç”¨ã€‚</td></tr></tbody></table><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>æ³¨æ„</h5></div><div class="admonition-content"><ul><li>å¯¹äºåŒä¸€ç±»å‚æ•°æ¯”å¦‚ <code>uri</code>ä¸ <code>uris</code>ï¼Œ<code>upstream</code> ä¸ <code>upstream_id</code>ï¼Œ<code>host</code> ä¸ <code>hosts</code>ï¼Œ<code>remote_addr</code> ä¸ <code>remote_addrs</code> ç­‰ï¼Œæ˜¯ä¸èƒ½åŒæ—¶å­˜åœ¨ï¼ŒäºŒè€…åªèƒ½é€‰æ‹©å…¶ä¸€ã€‚å¦‚æœåŒæ—¶å¯ç”¨ï¼Œåˆ™ä¼šå‡ºç°å¼‚å¸¸ã€‚</li><li>åœ¨ <code>vars</code> ä¸­ï¼Œå½“è·å– Cookie çš„å€¼æ—¶ï¼ŒCookie name æ˜¯<strong>åŒºåˆ†å¤§å°å†™å­—æ¯</strong>çš„ã€‚ä¾‹å¦‚ï¼š<code>var = cookie_x_foo</code> ä¸ <code>var  = cookie_X_Foo</code> è¡¨ç¤ºä¸åŒçš„ <code>cookie</code>ã€‚</li></ul></div></div><p>Route å¯¹è±¡ JSON é…ç½®ç¤ºä¾‹ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain">,                            </span><span class="token comment" style="color:#999988;font-style:italic"># idï¼Œéå¿…å¡«</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;uris&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;/a&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;/b&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">,                  </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸€ç»„ URL è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;methods&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;GET&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;POST&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">,            </span><span class="token comment" style="color:#999988;font-style:italic"># å¯ä»¥å¡«å¤šä¸ªæ–¹æ³•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;hosts&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;a.com&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;b.com&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">,           </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸€ç»„ host åŸŸå</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;plugins&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,                        </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®š route ç»‘å®šçš„æ’ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;priority&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">,                        </span><span class="token comment" style="color:#999988;font-style:italic"># apisix æ”¯æŒå¤šç§åŒ¹é…æ–¹å¼ï¼Œå¯èƒ½ä¼šåœ¨ä¸€æ¬¡åŒ¹é…ä¸­åŒæ—¶åŒ¹é…åˆ°å¤šæ¡è·¯ç”±ï¼Œæ­¤æ—¶ä¼˜å…ˆçº§é«˜çš„ä¼˜å…ˆåŒ¹é…ä¸­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;è·¯ç”± xxx&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;desc&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hello world&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;remote_addrs&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;127.0.0.1&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">,        </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸€ç»„å®¢æˆ·ç«¯è¯·æ±‚ IP åœ°å€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;vars&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;http_user&quot;</span><span class="token plain">, </span><span class="token string" style="color:#e3116c">&quot;==&quot;</span><span class="token plain">, </span><span class="token string" style="color:#e3116c">&quot;ios&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">, </span><span class="token comment" style="color:#999988;font-style:italic"># ç”±ä¸€ä¸ªæˆ–å¤šä¸ª [var, operator, val] å…ƒç´ ç»„æˆçš„åˆ—è¡¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;upstream_id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain">,                   </span><span class="token comment" style="color:#999988;font-style:italic"># upstream å¯¹è±¡åœ¨ etcd ä¸­çš„ idï¼Œå»ºè®®ä½¿ç”¨æ­¤å€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;upstream&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,                       </span><span class="token comment" style="color:#999988;font-style:italic"># upstream ä¿¡æ¯å¯¹è±¡ï¼Œå»ºè®®å°½é‡ä¸è¦ä½¿ç”¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;timeout&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">                          </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸º route è®¾ç½® upstream çš„è¿æ¥ã€å‘é€æ¶ˆæ¯ã€æ¥æ”¶æ¶ˆæ¯çš„è¶…æ—¶æ—¶é—´ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;connect&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;send&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;read&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;filter_func&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain">                     </span><span class="token comment" style="color:#999988;font-style:italic"># ç”¨æˆ·è‡ªå®šä¹‰çš„è¿‡æ»¤å‡½æ•°ï¼Œéå¿…å¡«</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="route-example"></a>ä½¿ç”¨ç¤ºä¾‹<a class="hash-link" href="#route-example" title="Direct link to heading">#</a></h3><ul><li><p>åˆ›å»ºä¸€ä¸ªè·¯ç”±ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/routes/1 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PUT -i -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;uri&quot;: &quot;/index.html&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;hosts&quot;: [&quot;foo.com&quot;, &quot;*.bar.com&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;remote_addrs&quot;: [&quot;127.0.0.0/8&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;methods&quot;: [&quot;PUT&quot;, &quot;GET&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;enable_websocket&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;upstream&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;type&quot;: &quot;roundrobin&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;nodes&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;127.0.0.1:1980&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">201</span><span class="token plain"> Created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Date: Sat, </span><span class="token number" style="color:#36acaa">31</span><span class="token plain"> Aug </span><span class="token number" style="color:#36acaa">2019</span><span class="token plain"> 01:17:15 GMT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></li><li><p>åˆ›å»ºä¸€ä¸ªæœ‰æ•ˆæœŸä¸º 60 ç§’çš„è·¯ç”±ï¼Œè¿‡æœŸåè‡ªåŠ¨åˆ é™¤ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;http://127.0.0.1:9180/apisix/admin/routes/2?ttl=60&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PUT -i -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;uri&quot;: &quot;/aa/index.html&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;upstream&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;type&quot;: &quot;roundrobin&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;nodes&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;127.0.0.1:1980&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">201</span><span class="token plain"> Created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Date: Sat, </span><span class="token number" style="color:#36acaa">31</span><span class="token plain"> Aug </span><span class="token number" style="color:#36acaa">2019</span><span class="token plain"> 01:17:15 GMT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></li><li><p>åœ¨è·¯ç”±ä¸­æ–°å¢ä¸€ä¸ªä¸Šæ¸¸èŠ‚ç‚¹ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/routes/1 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PATCH -i -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;upstream&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;nodes&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;127.0.0.1:1981&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>  æ‰§è¡ŒæˆåŠŸåï¼Œä¸Šæ¸¸èŠ‚ç‚¹å°†æ›´æ–°ä¸ºï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1:1980&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1:1981&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></li><li><p>æ›´æ–°è·¯ç”±ä¸­ä¸Šæ¸¸èŠ‚ç‚¹çš„æƒé‡ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/routes/1 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PATCH -i -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;upstream&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;nodes&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;127.0.0.1:1981&quot;: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>  æ‰§è¡ŒæˆåŠŸåï¼Œä¸Šæ¸¸èŠ‚ç‚¹å°†æ›´æ–°ä¸ºï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1:1980&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1:1981&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></li><li><p>ä»è·¯ç”±ä¸­åˆ é™¤ä¸€ä¸ªä¸Šæ¸¸èŠ‚ç‚¹ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/routes/1 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PATCH -i -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;upstream&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;nodes&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;127.0.0.1:1980&quot;: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>  æ‰§è¡ŒæˆåŠŸåï¼ŒUpstream <code>nodes</code> å°†æ›´æ–°ä¸ºï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1:1981&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></li><li><p>æ›´æ–°è·¯ç”±ä¸­çš„ <code>methods</code> æ•°ç»„</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/routes/1 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PATCH -i -d </span><span class="token string" style="color:#e3116c">&#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;methods&quot;: [&quot;GET&quot;, &quot;POST&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>  æ‰§è¡ŒæˆåŠŸåï¼Œ<code>methods</code> å°†ä¸ä¿ç•™åŸæ¥çš„æ•°æ®ï¼Œå°†æ›´æ–°ä¸ºï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;GET&quot;</span><span class="token plain">, </span><span class="token string" style="color:#e3116c">&quot;POST&quot;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></li><li><p>ä½¿ç”¨ <code>sub path</code> æ›´æ–°è·¯ç”±ä¸­çš„ä¸Šæ¸¸èŠ‚ç‚¹ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/routes/1/upstream/nodes </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PATCH -i -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;127.0.0.1:1982&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>  æ‰§è¡ŒæˆåŠŸåï¼Œ<code>nodes</code> å°†ä¸ä¿ç•™åŸæ¥çš„æ•°æ®ï¼Œæ•´ä¸ªæ›´æ–°ä¸ºï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1:1982&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></li><li><p>ä½¿ç”¨ <code>sub path</code> æ›´æ–°è·¯ç”±ä¸­çš„ <code>methods</code>ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/routes/1/methods </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PATCH -i -d </span><span class="token string" style="color:#e3116c">&#x27;[&quot;POST&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;]&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>  æ‰§è¡ŒæˆåŠŸåï¼Œ<code>methods</code> å°†ä¸ä¿ç•™åŸæ¥çš„æ•°æ®ï¼Œæ›´æ–°ä¸ºï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;POST&quot;</span><span class="token plain">, </span><span class="token string" style="color:#e3116c">&quot;DELETE&quot;</span><span class="token plain">, </span><span class="token string" style="color:#e3116c">&quot;PATCH&quot;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></li><li><p>ç¦ç”¨è·¯ç”±</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/routes/1 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PATCH -i -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;status&quot;: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>  æ‰§è¡ŒæˆåŠŸåï¼Œ<code>status</code> å°†æ›´æ–°ä¸ºï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></li><li><p>å¯ç”¨è·¯ç”±</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/routes/1 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PATCH -i -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;status&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>  æ‰§è¡ŒæˆåŠŸåï¼Œ<code>status</code> å°†æ›´æ–°ä¸ºï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="route-response-parameters"></a>åº”ç­”å‚æ•°<a class="hash-link" href="#route-response-parameters" title="Direct link to heading">#</a></h3><p>ç›®å‰æ˜¯ç›´æ¥è¿”å›ä¸ etcd äº¤äº’åçš„ç»“æœã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="service"></a>Service<a class="hash-link" href="#service" title="Direct link to heading">#</a></h2><p>Service æ˜¯æŸç±» API çš„æŠ½è±¡ï¼ˆä¹Ÿå¯ä»¥ç†è§£ä¸ºä¸€ç»„ Route çš„æŠ½è±¡ï¼‰ã€‚å®ƒé€šå¸¸ä¸ä¸Šæ¸¸æœåŠ¡æŠ½è±¡æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œ<code>Route</code> ä¸ <code>Service</code> ä¹‹é—´ï¼Œé€šå¸¸æ˜¯ N:1 çš„å…³ç³»ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="service-uri"></a>è¯·æ±‚åœ°å€<a class="hash-link" href="#service-uri" title="Direct link to heading">#</a></h3><p>æœåŠ¡èµ„æºè¯·æ±‚åœ°å€ï¼š/apisix/admin/services/{id}</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="service-request-methods"></a>è¯·æ±‚æ–¹æ³•<a class="hash-link" href="#service-request-methods" title="Direct link to heading">#</a></h3><table><thead><tr><th>åç§°</th><th>è¯·æ±‚ URI</th><th>è¯·æ±‚ body</th><th>æè¿°</th></tr></thead><tbody><tr><td>GET</td><td>/apisix/admin/services</td><td>æ— </td><td>è·å–èµ„æºåˆ—è¡¨ã€‚</td></tr><tr><td>GET</td><td>/apisix/admin/services/{id}</td><td>æ— </td><td>è·å–èµ„æºã€‚</td></tr><tr><td>PUT</td><td>/apisix/admin/services/{id}</td><td>{...}</td><td>åˆ›å»ºæŒ‡å®š id èµ„æºã€‚</td></tr><tr><td>POST</td><td>/apisix/admin/services</td><td>{...}</td><td>åˆ›å»ºèµ„æºï¼Œid ç”±åå°æœåŠ¡è‡ªåŠ¨ç”Ÿæˆã€‚</td></tr><tr><td>DELETE</td><td>/apisix/admin/services/{id}</td><td>æ— </td><td>åˆ é™¤èµ„æºã€‚</td></tr><tr><td>PATCH</td><td>/apisix/admin/services/{id}</td><td>{...}</td><td>æ ‡å‡† PATCHï¼Œä¿®æ”¹å·²æœ‰ Service çš„éƒ¨åˆ†å±æ€§ï¼Œå…¶ä»–ä¸æ¶‰åŠçš„å±æ€§ä¼šåŸæ ·ä¿ç•™ï¼›å¦‚æœä½ è¦åˆ é™¤æŸä¸ªå±æ€§ï¼Œå°†è¯¥å±æ€§çš„å€¼è®¾ç½®ä¸º null å³å¯åˆ é™¤ï¼›<strong>æ³¨æ„</strong>ï¼šå½“éœ€è¦ä¿®æ”¹å±æ€§çš„å€¼ä¸ºæ•°ç»„æ—¶ï¼Œè¯¥å±æ€§å°†å…¨é‡æ›´æ–°ã€‚</td></tr><tr><td>PATCH</td><td>/apisix/admin/services/{id}/{path}</td><td>{...}</td><td>SubPath PATCHï¼Œé€šè¿‡ {path} æŒ‡å®š Service éœ€è¦æ›´æ–°çš„å±æ€§ï¼Œå…¨é‡æ›´æ–°è¯¥å±æ€§çš„æ•°æ®ï¼Œå…¶ä»–ä¸æ¶‰åŠçš„å±æ€§ä¼šåŸæ ·ä¿ç•™ã€‚</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="service-request-body-parameters"></a>body è¯·æ±‚å‚æ•°<a class="hash-link" href="#service-request-body-parameters" title="Direct link to heading">#</a></h3><table><thead><tr><th>åç§°</th><th>å¿…é€‰é¡¹</th><th>ç±»å‹</th><th>æè¿°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>plugins</td><td>å¦</td><td>Plugin</td><td>Plugin é…ç½®ï¼Œè¯·å‚è€ƒ <a href="/zh/docs/apisix/3.12/terminology/plugin/">Plugin</a>ã€‚</td><td></td></tr><tr><td>upstream</td><td>ä¸ <code>upstream_id</code> äºŒé€‰ä¸€ã€‚</td><td>Upstream</td><td>Upstream é…ç½®ï¼Œè¯·å‚è€ƒ <a href="/zh/docs/apisix/3.12/terminology/upstream/">Upstream</a>ã€‚</td><td></td></tr><tr><td>upstream_id</td><td>ä¸ <code>upstream</code> äºŒé€‰ä¸€ã€‚</td><td>Upstream</td><td>éœ€è¦ä½¿ç”¨çš„ upstream idï¼Œè¯·å‚è€ƒ <a href="/zh/docs/apisix/3.12/terminology/upstream/">Upstream</a>ã€‚</td><td></td></tr><tr><td>name</td><td>å¦</td><td>è¾…åŠ©</td><td>æœåŠ¡åç§°ã€‚</td><td></td></tr><tr><td>desc</td><td>å¦</td><td>è¾…åŠ©</td><td>æœåŠ¡æè¿°ã€‚</td><td></td></tr><tr><td>labels</td><td>å¦</td><td>åŒ¹é…è§„åˆ™</td><td>æ ‡è¯†é™„åŠ å±æ€§çš„é”®å€¼å¯¹ã€‚</td><td>{&quot;version&quot;:&quot;v2&quot;,&quot;build&quot;:&quot;16&quot;,&quot;env&quot;:&quot;production&quot;}</td></tr><tr><td>enable_websocket</td><td>å¦</td><td>è¾…åŠ©</td><td><code>websocket</code>(boolean) é…ç½®ï¼Œé»˜è®¤å€¼ä¸º <code>false</code>ã€‚</td><td></td></tr><tr><td>hosts</td><td>å¦</td><td>åŒ¹é…è§„åˆ™</td><td>éç©ºåˆ—è¡¨å½¢æ€çš„ <code>host</code>ï¼Œè¡¨ç¤ºå…è®¸æœ‰å¤šä¸ªä¸åŒ <code>host</code>ï¼ŒåŒ¹é…å…¶ä¸­ä»»æ„ä¸€ä¸ªå³å¯ã€‚</td><td>[&quot;foo.com&quot;, &quot;*.bar.com&quot;]</td></tr></tbody></table><p>Service å¯¹è±¡ JSON é…ç½®ç¤ºä¾‹ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain">,                </span><span class="token comment" style="color:#999988;font-style:italic"># id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;plugins&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,            </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®š service ç»‘å®šçš„æ’ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;upstream_id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain">,       </span><span class="token comment" style="color:#999988;font-style:italic"># upstream å¯¹è±¡åœ¨ etcd ä¸­çš„ idï¼Œå»ºè®®ä½¿ç”¨æ­¤å€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;upstream&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,           </span><span class="token comment" style="color:#999988;font-style:italic"># upstream ä¿¡æ¯å¯¹è±¡ï¼Œä¸å»ºè®®ä½¿ç”¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;test svc&quot;</span><span class="token plain">,       </span><span class="token comment" style="color:#999988;font-style:italic"># service åç§°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;desc&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hello world&quot;</span><span class="token plain">,    </span><span class="token comment" style="color:#999988;font-style:italic"># service æè¿°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;enable_websocket&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> true, </span><span class="token comment" style="color:#999988;font-style:italic"># å¯åŠ¨ websocket åŠŸèƒ½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;hosts&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;foo.com&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="service-example"></a>ä½¿ç”¨ç¤ºä¾‹<a class="hash-link" href="#service-example" title="Direct link to heading">#</a></h3><ul><li><p>åˆ›å»ºä¸€ä¸ª Serviceï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/services/201  </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PUT -i -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;plugins&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;limit-count&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;count&quot;: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;time_window&quot;: 60,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;rejected_code&quot;: 503,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;key&quot;: &quot;remote_addr&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;enable_websocket&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;upstream&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;type&quot;: &quot;roundrobin&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;nodes&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;127.0.0.1:1980&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">201</span><span class="token plain"> Created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></li><li><p>åœ¨ Service ä¸­æ·»åŠ ä¸€ä¸ªä¸Šæ¸¸èŠ‚ç‚¹ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/services/201 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PATCH -i -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;upstream&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;nodes&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;127.0.0.1:1981&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>  æ‰§è¡ŒæˆåŠŸåï¼Œä¸Šæ¸¸èŠ‚ç‚¹å°†æ›´æ–°ä¸ºï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 json"><pre tabindex="0" class="prism-code language-json codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;127.0.0.1:1980&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;127.0.0.1:1981&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></li><li><p>æ›´æ–°ä¸€ä¸ªä¸Šæ¸¸èŠ‚ç‚¹çš„æƒé‡ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/services/201 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PATCH -i -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;upstream&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;nodes&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;127.0.0.1:1981&quot;: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>  æ‰§è¡ŒæˆåŠŸåï¼Œä¸Šæ¸¸èŠ‚ç‚¹å°†æ›´æ–°ä¸ºï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1:1980&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1:1981&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></li><li><p>åˆ é™¤ Service ä¸­çš„ä¸€ä¸ªä¸Šæ¸¸èŠ‚ç‚¹ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/services/201 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PATCH -i -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;upstream&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;nodes&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;127.0.0.1:1980&quot;: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>  æ‰§è¡ŒæˆåŠŸåï¼Œä¸Šæ¸¸èŠ‚ç‚¹å°†æ›´æ–°ä¸ºï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1:1981&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></li><li><p>æ›¿æ¢ Service çš„ä¸Šæ¸¸èŠ‚ç‚¹ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/services/201/upstream/nodes </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PATCH -i -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;127.0.0.1:1982&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>  æ‰§è¡ŒæˆåŠŸåï¼Œä¸Šæ¸¸èŠ‚ç‚¹ä¸å†ä¿ç•™åŸæ¥çš„æ•°æ®ï¼Œå°†æ›´æ–°ä¸ºï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1:1982&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="service-response-parameters"></a>åº”ç­”å‚æ•°<a class="hash-link" href="#service-response-parameters" title="Direct link to heading">#</a></h3><p>ç›®å‰æ˜¯ç›´æ¥è¿”å›ä¸ etcd äº¤äº’åçš„ç»“æœã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="consumer"></a>Consumer<a class="hash-link" href="#consumer" title="Direct link to heading">#</a></h2><p>Consumer æ˜¯æŸç±»æœåŠ¡çš„æ¶ˆè´¹è€…ï¼Œéœ€è¦ä¸ç”¨æˆ·è®¤è¯ä½“ç³»é…åˆæ‰èƒ½ä½¿ç”¨ã€‚Consumer ä½¿ç”¨ <code>username</code> ä½œä¸ºå”¯ä¸€æ ‡è¯†ï¼Œä»…æ”¯æŒä½¿ç”¨ HTTP <code>PUT</code> æ–¹æ³•åˆ›å»º Consumerã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="consumer-uri"></a>è¯·æ±‚åœ°å€<a class="hash-link" href="#consumer-uri" title="Direct link to heading">#</a></h3><p>Consumer èµ„æºè¯·æ±‚åœ°å€ï¼š/apisix/admin/consumers/{username}</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="consumer-request-methods"></a>è¯·æ±‚æ–¹æ³•<a class="hash-link" href="#consumer-request-methods" title="Direct link to heading">#</a></h3><table><thead><tr><th>åç§°</th><th>è¯·æ±‚ URI</th><th>è¯·æ±‚ body</th><th>æè¿°</th></tr></thead><tbody><tr><td>GET</td><td>/apisix/admin/consumers</td><td>æ— </td><td>è·å–èµ„æºåˆ—è¡¨ã€‚</td></tr><tr><td>GET</td><td>/apisix/admin/consumers/{username}</td><td>æ— </td><td>è·å–èµ„æºã€‚</td></tr><tr><td>PUT</td><td>/apisix/admin/consumers</td><td>{...}</td><td>åˆ›å»ºèµ„æºã€‚</td></tr><tr><td>DELETE</td><td>/apisix/admin/consumers/{username}</td><td>æ— </td><td>åˆ é™¤èµ„æºã€‚</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="consumer-body-request-methods"></a>body è¯·æ±‚å‚æ•°<a class="hash-link" href="#consumer-body-request-methods" title="Direct link to heading">#</a></h3><table><thead><tr><th>åç§°</th><th>å¿…é€‰é¡¹</th><th>ç±»å‹</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>username</td><td>æ˜¯</td><td>è¾…åŠ©</td><td>Consumer åç§°ã€‚</td><td></td></tr><tr><td>group_id</td><td>å¦</td><td>è¾…åŠ©</td><td>Consumer Group åç§°ã€‚</td><td></td></tr><tr><td>plugins</td><td>å¦</td><td>Plugin</td><td>è¯¥ Consumer å¯¹åº”çš„æ’ä»¶é…ç½®ï¼Œå®ƒçš„ä¼˜å…ˆçº§æ˜¯æœ€é«˜çš„ï¼šConsumer &gt; Route &gt; Plugin Config &gt; Serviceã€‚å¯¹äºå…·ä½“æ’ä»¶é…ç½®ï¼Œè¯·å‚è€ƒ <a href="#plugin">Plugins</a>ã€‚</td><td></td></tr><tr><td>desc</td><td>å¦</td><td>è¾…åŠ©</td><td>consumer æè¿°ã€‚</td><td></td></tr><tr><td>labels</td><td>å¦</td><td>åŒ¹é…è§„åˆ™</td><td>æ ‡è¯†é™„åŠ å±æ€§çš„é”®å€¼å¯¹ã€‚</td><td>{&quot;version&quot;:&quot;v2&quot;,&quot;build&quot;:&quot;16&quot;,&quot;env&quot;:&quot;production&quot;}</td></tr></tbody></table><p>Consumer å¯¹è±¡ JSON é…ç½®ç¤ºä¾‹ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;plugins&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,          </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®š consumer ç»‘å®šçš„æ’ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token plain">,     </span><span class="token comment" style="color:#999988;font-style:italic"># å¿…å¡«</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;desc&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hello world&quot;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># consumer æè¿°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>å½“è®¤è¯æ’ä»¶ä¸ Consumer ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œéœ€è¦æä¾›ç”¨æˆ·åã€å¯†ç ç­‰ä¿¡æ¯ï¼›å½“è®¤è¯æ’ä»¶ä¸ Route æˆ– Service ç»‘å®šæ—¶ï¼Œåˆ™ä¸éœ€è¦ä»»ä½•å‚æ•°ï¼Œå› ä¸ºæ­¤æ—¶ APISIX æ˜¯æ ¹æ®ç”¨æˆ·è¯·æ±‚æ•°æ®æ¥åˆ¤æ–­ç”¨æˆ·å¯¹åº”çš„æ˜¯å“ªä¸ª Consumerã€‚</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>æ³¨æ„</h5></div><div class="admonition-content"><p>ä» APISIX v2.2 ç‰ˆæœ¬å¼€å§‹ï¼ŒåŒä¸€ä¸ª Consumer å¯ä»¥ç»‘å®šå¤šä¸ªè®¤è¯æ’ä»¶ã€‚</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="consumer-example"></a>ä½¿ç”¨ç¤ºä¾‹<a class="hash-link" href="#consumer-example" title="Direct link to heading">#</a></h3><ul><li><p>åˆ›å»º Consumerï¼Œå¹¶æŒ‡å®šè®¤è¯æ’ä»¶ <code>key-auth</code>ï¼Œå¹¶å¼€å¯æŒ‡å®šæ’ä»¶ <code>limit-count</code>ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/consumers  </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PUT -i -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;username&quot;: &quot;jack&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;plugins&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;key-auth&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;key&quot;: &quot;auth-one&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;limit-count&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;count&quot;: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;time_window&quot;: 60,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;rejected_code&quot;: 503,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;key&quot;: &quot;remote_addr&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Date: Thu, </span><span class="token number" style="color:#36acaa">26</span><span class="token plain"> Dec </span><span class="token number" style="color:#36acaa">2019</span><span class="token plain"> 08:17:49 GMT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;key&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;\/apisix\/consumers\/jack&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;value&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;jack&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;update_time&quot;</span><span class="token plain">:1666260780,</span><span class="token string" style="color:#e3116c">&quot;plugins&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;limit-count&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;key_type&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;var&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;count&quot;</span><span class="token plain">:2,</span><span class="token string" style="color:#e3116c">&quot;rejected_code&quot;</span><span class="token plain">:503,</span><span class="token string" style="color:#e3116c">&quot;show_limit_quota_header&quot;</span><span class="token plain">:true,</span><span class="token string" style="color:#e3116c">&quot;time_window&quot;</span><span class="token plain">:60,</span><span class="token string" style="color:#e3116c">&quot;key&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;remote_addr&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;allow_degradation&quot;</span><span class="token plain">:false,</span><span class="token string" style="color:#e3116c">&quot;policy&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;local&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;key-auth&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;key&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;auth-one&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;create_time&quot;</span><span class="token plain">:1666260780</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="consumer-response-parameters"></a>åº”ç­”å‚æ•°<a class="hash-link" href="#consumer-response-parameters" title="Direct link to heading">#</a></h3><p>ç›®å‰æ˜¯ç›´æ¥è¿”å›ä¸ etcd äº¤äº’åçš„ç»“æœã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="credential"></a>Credential<a class="hash-link" href="#credential" title="Direct link to heading">#</a></h2><p>Credential ç”¨ä»¥å­˜æ”¾ Consumer çš„è®¤è¯å‡­è¯ã€‚å½“éœ€è¦ä¸º Consumer é…ç½®å¤šä¸ªå‡­è¯æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ Credentialã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="credential-uri"></a>è¯·æ±‚åœ°å€<a class="hash-link" href="#credential-uri" title="Direct link to heading">#</a></h3><p>Credential èµ„æºè¯·æ±‚åœ°å€ï¼š/apisix/admin/consumers/{username}/credentials/{credential_id}</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="consumer-request-methods"></a>è¯·æ±‚æ–¹æ³•<a class="hash-link" href="#consumer-request-methods" title="Direct link to heading">#</a></h3><table><thead><tr><th>åç§°</th><th>è¯·æ±‚ URI</th><th>è¯·æ±‚ body</th><th>æè¿°</th></tr></thead><tbody><tr><td>GET</td><td>/apisix/admin/consumers/{username}/credentials</td><td>æ— </td><td>è·å–èµ„æºåˆ—è¡¨ã€‚</td></tr><tr><td>GET</td><td>/apisix/admin/consumers/{username}/credentials/{credential_id}</td><td>æ— </td><td>è·å–èµ„æºã€‚</td></tr><tr><td>PUT</td><td>/apisix/admin/consumers/{username}/credentials/{credential_id}</td><td>{...}</td><td>åˆ›å»ºèµ„æºã€‚</td></tr><tr><td>DELETE</td><td>/apisix/admin/consumers/{username}/credentials/{credential_id}</td><td>æ— </td><td>åˆ é™¤èµ„æºã€‚</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="credential-body-request-methods"></a>body è¯·æ±‚å‚æ•°<a class="hash-link" href="#credential-body-request-methods" title="Direct link to heading">#</a></h3><table><thead><tr><th>åç§°</th><th>å¿…é€‰é¡¹</th><th>ç±»å‹</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>plugins</td><td>æ˜¯</td><td>Plugin</td><td>è¯¥ Credential å¯¹åº”çš„æ’ä»¶é…ç½®ã€‚</td><td></td></tr><tr><td>desc</td><td>å¦</td><td>è¾…åŠ©</td><td>Credential æè¿°ã€‚</td><td></td></tr><tr><td>labels</td><td>å¦</td><td>åŒ¹é…è§„åˆ™</td><td>æ ‡è¯†é™„åŠ å±æ€§çš„é”®å€¼å¯¹ã€‚</td><td>{&quot;version&quot;:&quot;v2&quot;,&quot;build&quot;:&quot;16&quot;,&quot;env&quot;:&quot;production&quot;}</td></tr></tbody></table><p>Credential å¯¹è±¡ JSON é…ç½®ç¤ºä¾‹ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;plugins&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;key-auth&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;key&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;auth-one&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;desc&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hello world&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="credential-example"></a>ä½¿ç”¨ç¤ºä¾‹<a class="hash-link" href="#credential-example" title="Direct link to heading">#</a></h3><p>å‰æï¼šå·²åˆ›å»º Consumer <code>jack</code>ã€‚</p><p>åˆ›å»º Credentialï¼Œå¹¶å¯ç”¨è®¤è¯æ’ä»¶ <code>key-auth</code>ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/consumers/jack/credentials/auth-one  </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PUT -i -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;plugins&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;key-auth&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;key&quot;: &quot;auth-one&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Date: Thu, </span><span class="token number" style="color:#36acaa">26</span><span class="token plain"> Dec </span><span class="token number" style="color:#36acaa">2019</span><span class="token plain"> 08:17:49 GMT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;key&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;\/apisix\/consumers\/jack\/credentials\/auth-one&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;value&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;update_time&quot;</span><span class="token plain">:1666260780,</span><span class="token string" style="color:#e3116c">&quot;plugins&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;key-auth&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;key&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;auth-one&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;create_time&quot;</span><span class="token plain">:1666260780</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="upstream"></a>Upstream<a class="hash-link" href="#upstream" title="Direct link to heading">#</a></h2><p>Upstream æ˜¯è™šæ‹Ÿä¸»æœºæŠ½è±¡ï¼Œå¯¹ç»™å®šçš„å¤šä¸ªæœåŠ¡èŠ‚ç‚¹æŒ‰ç…§é…ç½®è§„åˆ™è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚Upstream çš„åœ°å€ä¿¡æ¯å¯ä»¥ç›´æ¥é…ç½®åˆ° <code>Route</code>ï¼ˆæˆ– <code>Service</code>) ä¸Šï¼Œå½“ Upstream æœ‰é‡å¤æ—¶ï¼Œéœ€è¦ç”¨â€œå¼•ç”¨â€æ–¹å¼é¿å…é‡å¤ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="upstream-uri"></a>è¯·æ±‚åœ°å€<a class="hash-link" href="#upstream-uri" title="Direct link to heading">#</a></h3><p>Upstream èµ„æºè¯·æ±‚åœ°å€ï¼š/apisix/admin/upstreams/{id}</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="upstream-request-methods"></a>è¯·æ±‚æ–¹æ³•<a class="hash-link" href="#upstream-request-methods" title="Direct link to heading">#</a></h3><table><thead><tr><th>åç§°</th><th>è¯·æ±‚ URI</th><th>è¯·æ±‚ body</th><th>æè¿°</th></tr></thead><tbody><tr><td>GET</td><td>/apisix/admin/upstreams/{id}</td><td>æ— </td><td>è·å–èµ„æºã€‚</td></tr><tr><td>PUT</td><td>/apisix/admin/upstreams/{id}</td><td>{...}</td><td>åˆ›å»ºæŒ‡å®š id çš„èµ„æºã€‚</td></tr><tr><td>POST</td><td>/apisix/admin/upstreams</td><td>{...}</td><td>åˆ›å»ºèµ„æºï¼Œid ç”±åå°æœåŠ¡è‡ªåŠ¨ç”Ÿæˆã€‚</td></tr><tr><td>DELETE</td><td>/apisix/admin/upstreams/{id}</td><td>æ— </td><td>åˆ é™¤èµ„æºã€‚</td></tr><tr><td>PATCH</td><td>/apisix/admin/upstreams/{id}</td><td>{...}</td><td>æ ‡å‡† PATCHï¼Œä¿®æ”¹å·²æœ‰ Upstream çš„éƒ¨åˆ†å±æ€§ï¼Œå…¶ä»–ä¸æ¶‰åŠçš„å±æ€§ä¼šåŸæ ·ä¿ç•™ï¼›å¦‚æœéœ€è¦åˆ é™¤æŸä¸ªå±æ€§ï¼Œå¯å°†è¯¥å±æ€§çš„å€¼è®¾ç½®ä¸º <code>null</code>ï¼›<strong>æ³¨æ„</strong>ï¼šå½“éœ€è¦ä¿®æ”¹å±æ€§çš„å€¼ä¸ºæ•°ç»„æ—¶ï¼Œè¯¥å±æ€§å°†å…¨é‡æ›´æ–°ã€‚</td></tr><tr><td>PATCH</td><td>/apisix/admin/upstreams/{id}/{path}</td><td>{...}</td><td>SubPath PATCHï¼Œé€šè¿‡ <code>{path}</code> æŒ‡å®š Upstream éœ€è¦æ›´æ–°çš„å±æ€§ï¼Œå…¨é‡æ›´æ–°è¯¥å±æ€§çš„æ•°æ®ï¼Œå…¶ä»–ä¸æ¶‰åŠçš„å±æ€§ä¼šåŸæ ·ä¿ç•™ã€‚</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="upstream-body-request-methods"></a>body è¯·æ±‚å‚æ•°<a class="hash-link" href="#upstream-body-request-methods" title="Direct link to heading">#</a></h3><p>APISIX çš„ Upstream é™¤äº†åŸºæœ¬çš„è´Ÿè½½å‡è¡¡ç®—æ³•é€‰æ‹©å¤–ï¼Œè¿˜æ”¯æŒå¯¹ä¸Šæ¸¸åšä¸»è¢«åŠ¨å¥åº·æ£€æŸ¥ã€é‡è¯•ç­‰é€»è¾‘ã€‚è¯¦ç»†ä¿¡æ¯å¦‚ä¸‹ï¼š</p><table><thead><tr><th>åç§°</th><th>å¿…é€‰é¡¹</th><th>ç±»å‹</th><th>æè¿°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>type</td><td>å¦</td><td>æšä¸¾</td><td>è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé»˜è®¤å€¼æ˜¯<code>roundrobin</code>ã€‚</td><td></td></tr><tr><td>nodes</td><td>æ˜¯ï¼Œä¸ <code>service_name</code> äºŒé€‰ä¸€ã€‚</td><td>Node</td><td>å“ˆå¸Œè¡¨æˆ–æ•°ç»„ã€‚å½“å®ƒæ˜¯å“ˆå¸Œè¡¨æ—¶ï¼Œå†…éƒ¨å…ƒç´ çš„ key æ˜¯ä¸Šæ¸¸æœºå™¨åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ä¸º<code>åœ°å€ +ï¼ˆå¯é€‰çš„ï¼‰ç«¯å£</code>ï¼Œå…¶ä¸­åœ°å€éƒ¨åˆ†å¯ä»¥æ˜¯ IP ä¹Ÿå¯ä»¥æ˜¯åŸŸåï¼Œæ¯”å¦‚ <code>192.168.1.100:80</code>ã€<code>foo.com:80</code>ç­‰ã€‚å¯¹äºå“ˆå¸Œè¡¨çš„æƒ…å†µï¼Œå¦‚æœ key æ˜¯ IPv6 åœ°å€åŠ ç«¯å£ï¼Œåˆ™å¿…é¡»ç”¨ä¸­æ‹¬å·å°† IPv6 åœ°å€æ‹¬èµ·æ¥ã€‚<code>value</code> åˆ™æ˜¯èŠ‚ç‚¹çš„æƒé‡ã€‚å½“å®ƒæ˜¯æ•°ç»„æ—¶ï¼Œæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œå…¶ä¸­åŒ…å« <code>host</code>ã€<code>weight</code> ä»¥åŠå¯é€‰çš„ <code>port</code>ã€<code>priority</code>ã€‚<code>nodes</code> å¯ä»¥ä¸ºç©ºï¼Œè¿™é€šå¸¸ç”¨ä½œå ä½ç¬¦ã€‚å®¢æˆ·ç«¯å‘½ä¸­è¿™æ ·çš„ä¸Šæ¸¸ä¼šè¿”å› <code>502</code>ã€‚</td><td><code>192.168.1.100:80</code>, <code>[::1]:80</code></td></tr><tr><td>service_name</td><td>æ˜¯ï¼Œä¸ <code>nodes</code> äºŒé€‰ä¸€ã€‚</td><td>string</td><td>æœåŠ¡å‘ç°æ—¶ä½¿ç”¨çš„æœåŠ¡åï¼Œè¯·å‚è€ƒ <a href="/zh/docs/apisix/3.12/discovery/">é›†æˆæœåŠ¡å‘ç°æ³¨å†Œä¸­å¿ƒ</a>ã€‚</td><td><code>a-bootiful-client</code></td></tr><tr><td>discovery_type</td><td>æ˜¯ï¼Œä¸ <code>service_name</code> é…åˆä½¿ç”¨ã€‚</td><td>string</td><td>æœåŠ¡å‘ç°ç±»å‹ï¼Œè¯·å‚è€ƒ <a href="/zh/docs/apisix/3.12/discovery/">é›†æˆæœåŠ¡å‘ç°æ³¨å†Œä¸­å¿ƒ</a>ã€‚</td><td><code>eureka</code></td></tr><tr><td>key</td><td>æ¡ä»¶å¿…éœ€</td><td>åŒ¹é…ç±»å‹</td><td>è¯¥é€‰é¡¹åªæœ‰ç±»å‹æ˜¯ <code>chash</code> æ‰æœ‰æ•ˆã€‚æ ¹æ® <code>key</code> æ¥æŸ¥æ‰¾å¯¹åº”çš„èŠ‚ç‚¹ <code>id</code>ï¼Œç›¸åŒçš„ <code>key</code> åœ¨åŒä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œåˆ™è¿”å›ç›¸åŒ idã€‚ç›®å‰æ”¯æŒçš„ NGINX å†…ç½®å˜é‡æœ‰ <code>uri, server_name, server_addr, request_uri, remote_port, remote_addr, query_string, host, hostname, arg_***</code>ï¼Œå…¶ä¸­ <code>arg_***</code> æ˜¯æ¥è‡ª URL çš„è¯·æ±‚å‚æ•°ï¼Œè¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒ <a href="http://nginx.org/en/docs/varindex.html" target="_blank" rel="noopener noreferrer">NGINX å˜é‡åˆ—è¡¨</a>ã€‚</td><td></td></tr><tr><td>checks</td><td>å¦</td><td>health_checker</td><td>é…ç½®å¥åº·æ£€æŸ¥çš„å‚æ•°ï¼Œè¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒ <a href="/zh/docs/apisix/3.12/tutorials/health-check/">health-check</a>ã€‚</td><td></td></tr><tr><td>retries</td><td>å¦</td><td>æ•´å‹</td><td>ä½¿ç”¨ NGINX é‡è¯•æœºåˆ¶å°†è¯·æ±‚ä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¸Šæ¸¸ï¼Œé»˜è®¤å¯ç”¨é‡è¯•æœºåˆ¶ä¸”æ¬¡æ•°ä¸ºåç«¯å¯ç”¨çš„èŠ‚ç‚¹æ•°é‡ã€‚å¦‚æœæŒ‡å®šäº†å…·ä½“é‡è¯•æ¬¡æ•°ï¼Œå®ƒå°†è¦†ç›–é»˜è®¤å€¼ã€‚å½“è®¾ç½®ä¸º <code>0</code> æ—¶ï¼Œè¡¨ç¤ºä¸å¯ç”¨é‡è¯•æœºåˆ¶ã€‚</td><td></td></tr><tr><td>retry_timeout</td><td>å¦</td><td>number</td><td>é™åˆ¶æ˜¯å¦ç»§ç»­é‡è¯•çš„æ—¶é—´ï¼Œè‹¥ä¹‹å‰çš„è¯·æ±‚å’Œé‡è¯•è¯·æ±‚èŠ±è´¹å¤ªå¤šæ—¶é—´å°±ä¸å†ç»§ç»­é‡è¯•ã€‚å½“è®¾ç½®ä¸º <code>0</code> æ—¶ï¼Œè¡¨ç¤ºä¸å¯ç”¨é‡è¯•è¶…æ—¶æœºåˆ¶ã€‚</td><td></td></tr><tr><td>timeout</td><td>å¦</td><td>è¶…æ—¶æ—¶é—´å¯¹è±¡</td><td>è®¾ç½®è¿æ¥ã€å‘é€æ¶ˆæ¯ã€æ¥æ”¶æ¶ˆæ¯çš„è¶…æ—¶æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚</td><td><code>{&quot;connect&quot;: 0.5,&quot;send&quot;: 0.5,&quot;read&quot;: 0.5}</code></td></tr><tr><td>hash_on</td><td>å¦</td><td>è¾…åŠ©</td><td><code>hash_on</code> æ”¯æŒçš„ç±»å‹æœ‰ <code>vars</code>ï¼ˆNGINX å†…ç½®å˜é‡ï¼‰ï¼Œ<code>header</code>ï¼ˆè‡ªå®šä¹‰ headerï¼‰ï¼Œ<code>cookie</code>ï¼Œ<code>consumer</code>ï¼Œé»˜è®¤å€¼ä¸º <code>vars</code>ã€‚</td><td></td></tr><tr><td>name</td><td>å¦</td><td>è¾…åŠ©</td><td>æ ‡è¯†ä¸Šæ¸¸æœåŠ¡åç§°ã€ä½¿ç”¨åœºæ™¯ç­‰ã€‚</td><td></td></tr><tr><td>desc</td><td>å¦</td><td>è¾…åŠ©</td><td>ä¸Šæ¸¸æœåŠ¡æè¿°ã€ä½¿ç”¨åœºæ™¯ç­‰ã€‚</td><td></td></tr><tr><td>pass_host</td><td>å¦</td><td>æšä¸¾</td><td>è¯·æ±‚å‘ç»™ä¸Šæ¸¸æ—¶çš„ <code>host</code> è®¾ç½®é€‰å‹ã€‚ [<code>pass</code>ï¼Œ<code>node</code>ï¼Œ<code>rewrite</code>] ä¹‹ä¸€ï¼Œé»˜è®¤æ˜¯ <code>pass</code>ã€‚<code>pass</code>: å°†å®¢æˆ·ç«¯çš„ host é€ä¼ ç»™ä¸Šæ¸¸ï¼› <code>node</code>: ä½¿ç”¨ <code>upstream</code> node ä¸­é…ç½®çš„ <code>host</code>ï¼› <code>rewrite</code>: ä½¿ç”¨é…ç½®é¡¹ <code>upstream_host</code> çš„å€¼ã€‚</td><td></td></tr><tr><td>upstream_host</td><td>å¦</td><td>è¾…åŠ©</td><td>æŒ‡å®šä¸Šæ¸¸è¯·æ±‚çš„ hostï¼Œåªåœ¨ <code>pass_host</code> é…ç½®ä¸º <code>rewrite</code> æ—¶æœ‰æ•ˆã€‚</td><td></td></tr><tr><td>scheme</td><td>å¦</td><td>è¾…åŠ©</td><td>è·Ÿä¸Šæ¸¸é€šä¿¡æ—¶ä½¿ç”¨çš„ schemeã€‚å¯¹äº 7 å±‚ä»£ç†ï¼Œå¯é€‰å€¼ä¸º [<code>http</code>, <code>https</code>, <code>grpc</code>, <code>grpcs</code>]ã€‚å¯¹äº 4 å±‚ä»£ç†ï¼Œå¯é€‰å€¼ä¸º [<code>tcp</code>, <code>udp</code>, <code>tls</code>]ã€‚é»˜è®¤å€¼ä¸º <code>http</code>ï¼Œè¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒä¸‹æ–‡ã€‚</td><td></td></tr><tr><td>labels</td><td>å¦</td><td>åŒ¹é…è§„åˆ™</td><td>æ ‡è¯†é™„åŠ å±æ€§çš„é”®å€¼å¯¹ã€‚</td><td>{&quot;version&quot;:&quot;v2&quot;,&quot;build&quot;:&quot;16&quot;,&quot;env&quot;:&quot;production&quot;}</td></tr><tr><td>tls.client_cert</td><td>å¦ï¼Œä¸èƒ½å’Œ <code>tls.client_cert_id</code> ä¸€èµ·ä½¿ç”¨</td><td>https è¯ä¹¦</td><td>è®¾ç½®è·Ÿä¸Šæ¸¸é€šä¿¡æ—¶çš„å®¢æˆ·ç«¯è¯ä¹¦ï¼Œè¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒä¸‹æ–‡ã€‚</td><td></td></tr><tr><td>tls.client_key</td><td>å¦ï¼Œä¸èƒ½å’Œ <code>tls.client_cert_id</code> ä¸€èµ·ä½¿ç”¨</td><td>https è¯ä¹¦ç§é’¥</td><td>è®¾ç½®è·Ÿä¸Šæ¸¸é€šä¿¡æ—¶çš„å®¢æˆ·ç«¯ç§é’¥ï¼Œè¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒä¸‹æ–‡ã€‚</td><td></td></tr><tr><td>tls.client_cert_id</td><td>å¦ï¼Œä¸èƒ½å’Œ <code>tls.client_cert</code>ã€<code>tls.client_key</code> ä¸€èµ·ä½¿ç”¨</td><td>SSL</td><td>è®¾ç½®å¼•ç”¨çš„ SSL idï¼Œè¯¦è§ <a href="#ssl">SSL</a>ã€‚</td><td></td></tr><tr><td>keepalive_pool.size</td><td>å¦</td><td>è¾…åŠ©</td><td>åŠ¨æ€è®¾ç½® <code>keepalive</code> æŒ‡ä»¤ï¼Œè¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒä¸‹æ–‡ã€‚</td><td></td></tr><tr><td>keepalive_pool.idle_timeout</td><td>å¦</td><td>è¾…åŠ©</td><td>åŠ¨æ€è®¾ç½® <code>keepalive_timeout</code> æŒ‡ä»¤ï¼Œè¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒä¸‹æ–‡ã€‚</td><td></td></tr><tr><td>keepalive_pool.requests</td><td>å¦</td><td>è¾…åŠ©</td><td>åŠ¨æ€è®¾ç½® <code>keepalive_requests</code> æŒ‡ä»¤ï¼Œè¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒä¸‹æ–‡ã€‚</td><td></td></tr></tbody></table><p><code>type</code> è¯¦ç»†ä¿¡æ¯å¦‚ä¸‹ï¼š</p><ul><li><code>roundrobin</code>: å¸¦æƒé‡çš„ Round Robinã€‚</li><li><code>chash</code>: ä¸€è‡´æ€§å“ˆå¸Œã€‚</li><li><code>ewma</code>: é€‰æ‹©å»¶è¿Ÿæœ€å°çš„èŠ‚ç‚¹ï¼Œè¯·å‚è€ƒ <a href="https://en.wikipedia.org/wiki/EWMA_chart" target="_blank" rel="noopener noreferrer">EWMA_chart</a>ã€‚</li><li><code>least_conn</code>: é€‰æ‹© <code>(active_conn + 1) / weight</code> æœ€å°çš„èŠ‚ç‚¹ã€‚æ­¤å¤„çš„ <code>active connection</code> æ¦‚å¿µè·Ÿ NGINX çš„ç›¸åŒï¼Œå®ƒæ˜¯å½“å‰æ­£åœ¨è¢«è¯·æ±‚ä½¿ç”¨çš„è¿æ¥ã€‚</li><li>ç”¨æˆ·è‡ªå®šä¹‰çš„ balancerï¼Œéœ€è¦å¯ä»¥é€šè¿‡ <code>require(&quot;apisix.balancer.your_balancer&quot;)</code> æ¥åŠ è½½ã€‚</li></ul><p><code>hash_on</code> è¯¦ç»†ä¿¡æ¯å¦‚ä¸‹ï¼š</p><ul><li>è®¾ä¸º <code>vars</code> æ—¶ï¼Œ<code>key</code> ä¸ºå¿…ä¼ å‚æ•°ï¼Œç›®å‰æ”¯æŒçš„ NGINX å†…ç½®å˜é‡æœ‰ <code>uri, server_name, server_addr, request_uri, remote_port, remote_addr, query_string, host, hostname, arg_***</code>ï¼Œå…¶ä¸­ <code>arg_***</code> æ˜¯æ¥è‡ª URL çš„è¯·æ±‚å‚æ•°ã€‚è¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒ <a href="http://nginx.org/en/docs/varindex.html" target="_blank" rel="noopener noreferrer">NGINX å˜é‡åˆ—è¡¨</a>ã€‚</li><li>è®¾ä¸º <code>header</code> æ—¶ï¼Œ<code>key</code> ä¸ºå¿…ä¼ å‚æ•°ï¼Œå…¶å€¼ä¸ºè‡ªå®šä¹‰çš„ Header nameï¼Œå³ &quot;http_<code>key</code>&quot;ã€‚</li><li>è®¾ä¸º <code>cookie</code> æ—¶ï¼Œ<code>key</code> ä¸ºå¿…ä¼ å‚æ•°ï¼Œå…¶å€¼ä¸ºè‡ªå®šä¹‰çš„ cookie nameï¼Œå³ &quot;cookie_<code>key</code>&quot;ã€‚è¯·æ³¨æ„ cookie name æ˜¯<strong>åŒºåˆ†å¤§å°å†™å­—æ¯</strong>çš„ã€‚ä¾‹å¦‚ï¼š<code>cookie_x_foo</code> ä¸ <code>cookie_X_Foo</code> è¡¨ç¤ºä¸åŒçš„ <code>cookie</code>ã€‚</li><li>è®¾ä¸º <code>consumer</code> æ—¶ï¼Œ<code>key</code> ä¸éœ€è¦è®¾ç½®ã€‚æ­¤æ—¶å“ˆå¸Œç®—æ³•é‡‡ç”¨çš„ <code>key</code> ä¸ºè®¤è¯é€šè¿‡çš„ <code>consumer_name</code>ã€‚</li></ul><p>ä»¥ä¸‹ç‰¹æ€§éœ€è¦ APISIX è¿è¡Œäº <a href="/zh/docs/apisix/3.12/FAQ/#%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA-APISIX-Runtime-%E7%8E%AF%E5%A2%83%EF%BC%9F">APISIX-Runtime</a>ï¼š</p><ul><li><code>scheme</code> å¯ä»¥è®¾ç½®æˆ <code>tls</code>ï¼Œè¡¨ç¤º <code>TLS over TCP</code>ã€‚</li><li><code>tls.client_cert/key</code> å¯ä»¥ç”¨æ¥è·Ÿä¸Šæ¸¸è¿›è¡Œ mTLS é€šä¿¡ã€‚ä»–ä»¬çš„æ ¼å¼å’Œ SSL å¯¹è±¡çš„ <code>cert</code> å’Œ <code>key</code> ä¸€æ ·ã€‚</li><li><code>tls.client_cert_id</code> å¯ä»¥ç”¨æ¥æŒ‡å®šå¼•ç”¨çš„ SSL å¯¹è±¡ã€‚åªæœ‰å½“ SSL å¯¹è±¡çš„ <code>type</code> å­—æ®µä¸º client æ—¶æ‰èƒ½è¢«å¼•ç”¨ï¼Œå¦åˆ™è¯·æ±‚ä¼šè¢« APISIX æ‹’ç»ã€‚å¦å¤–ï¼ŒSSL å¯¹è±¡ä¸­åªæœ‰ <code>cert</code> å’Œ <code>key</code> ä¼šè¢«ä½¿ç”¨ã€‚</li><li><code>keepalive_pool</code> å…è®¸ Upstream æœ‰è‡ªå·±å•ç‹¬çš„è¿æ¥æ± ã€‚å®ƒä¸‹å±çš„å­—æ®µï¼Œæ¯”å¦‚ <code>requests</code>ï¼Œå¯ä»¥ç”¨äºé…ç½®ä¸Šæ¸¸è¿æ¥ä¿æŒçš„å‚æ•°ã€‚</li></ul><p>Upstream å¯¹è±¡ JSON é…ç½®ç¤ºä¾‹ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain">,                  </span><span class="token comment" style="color:#999988;font-style:italic"># id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;retries&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">,               </span><span class="token comment" style="color:#999988;font-style:italic"># è¯·æ±‚é‡è¯•æ¬¡æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;timeout&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic"># è®¾ç½®è¿æ¥ã€å‘é€æ¶ˆæ¯ã€æ¥æ”¶æ¶ˆæ¯çš„è¶…æ—¶æ—¶é—´ï¼Œæ¯é¡¹éƒ½ä¸º 15 ç§’</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;connect&quot;</span><span class="token plain">:15,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;send&quot;</span><span class="token plain">:15,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;read&quot;</span><span class="token plain">:15</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;nodes&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;host:80&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,  </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸Šæ¸¸æœºå™¨åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ä¸º`åœ°å€ + ç«¯å£`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token comment" style="color:#999988;font-style:italic"># ç­‰ä»·äº &quot;nodes&quot;: [ {&quot;host&quot;:&quot;host&quot;, &quot;port&quot;:80, &quot;weight&quot;: 100} ],</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;roundrobin&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;checks&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,               </span><span class="token comment" style="color:#999988;font-style:italic"># é…ç½®å¥åº·æ£€æŸ¥çš„å‚æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;hash_on&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;key&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;upstream-xxx&quot;</span><span class="token plain">,     </span><span class="token comment" style="color:#999988;font-style:italic"># upstream åç§°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;desc&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hello world&quot;</span><span class="token plain">,      </span><span class="token comment" style="color:#999988;font-style:italic"># upstream æè¿°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;scheme&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http&quot;</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># è·Ÿä¸Šæ¸¸é€šä¿¡æ—¶ä½¿ç”¨çš„ schemeï¼Œé»˜è®¤æ˜¯ `http`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="upstream-example"></a>ä½¿ç”¨ç¤ºä¾‹<a class="hash-link" href="#upstream-example" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithHideOnScrollNavbar_3ly5" id="create-upstream"></a>åˆ›å»º Upstream å¹¶å¯¹ <code>nodes</code> çš„æ•°æ®è¿›è¡Œä¿®æ”¹<a class="hash-link" href="#create-upstream" title="Direct link to heading">#</a></h4><ol><li><p>åˆ›å»º Upstreamï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/upstreams/100  </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -i -X PUT -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;type&quot;:&quot;roundrobin&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;nodes&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;127.0.0.1:1980&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">201</span><span class="token plain"> Created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></li><li><p>åœ¨ Upstream ä¸­æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/upstreams/100 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PATCH -i -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;nodes&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;127.0.0.1:1981&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>æ‰§è¡ŒæˆåŠŸåï¼Œ<code>nodes</code> å°†æ›´æ–°ä¸ºï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1:1980&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1:1981&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></li><li><p>æ›´æ–° Upstream ä¸­å•ä¸ªèŠ‚ç‚¹çš„æƒé‡ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/upstreams/100 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PATCH -i -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;nodes&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;127.0.0.1:1981&quot;: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>æ‰§è¡ŒæˆåŠŸåï¼Œ<code>nodes</code> å°†æ›´æ–°ä¸ºï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1:1980&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1:1981&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></li><li><p>åˆ é™¤ Upstream ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/upstreams/100 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PATCH -i -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;nodes&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;127.0.0.1:1980&quot;: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>æ‰§è¡ŒæˆåŠŸåï¼Œ<code>nodes</code> å°†æ›´æ–°ä¸ºï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1:1981&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></li><li><p>æ›´æ–° Upstream çš„ <code>nodes</code>ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/upstreams/100/nodes </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PATCH -i -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;127.0.0.1:1982&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>æ‰§è¡ŒæˆåŠŸåï¼Œ<code>nodes</code> å°†ä¸å†ä¿ç•™åŸæ¥çš„æ•°æ®ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1:1982&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithHideOnScrollNavbar_3ly5" id="proxy-https"></a>å°†å®¢æˆ·ç«¯è¯·æ±‚ä»£ç†åˆ°ä¸Šæ¸¸ <code>https</code> æœåŠ¡<a class="hash-link" href="#proxy-https" title="Direct link to heading">#</a></h4><ol><li><p>åˆ›å»º Route å¹¶é…ç½® Upstream çš„ Scheme ä¸º <code>https</code>ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -i http://127.0.0.1:9180/apisix/admin/routes/1 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PUT -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;uri&quot;: &quot;/get&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;upstream&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;type&quot;: &quot;roundrobin&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;scheme&quot;: &quot;https&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;nodes&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;httpbin.org:443&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>æ‰§è¡ŒæˆåŠŸåï¼Œè¯·æ±‚ä¸ä¸Šæ¸¸é€šä¿¡æ—¶çš„ Scheme å°†ä¸º <code>https</code>ã€‚</p></li><li><p>å‘é€è¯·æ±‚è¿›è¡Œæµ‹è¯•ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9080/get</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;args&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;headers&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;Accept&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;*/*&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;Host&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;User-Agent&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;curl/7.29.0&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;X-Amzn-Trace-Id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Root=1-6058324a-0e898a7f04a5e95b526bb183&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;X-Forwarded-Host&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;origin&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;url&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://127.0.0.1/get&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>è¯·æ±‚æˆåŠŸï¼Œè¡¨ç¤ºä»£ç†ä¸Šæ¸¸ <code>https</code> ç”Ÿæ•ˆäº†ã€‚</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>æç¤º</h5></div><div class="admonition-content"><p>æ¯ä¸ªèŠ‚ç‚¹å‡å¯ä»¥é…ç½®ä¼˜å…ˆçº§ï¼Œåªæœ‰åœ¨é«˜ä¼˜å…ˆçº§çš„èŠ‚ç‚¹ä¸å¯ç”¨æˆ–è€…å°è¯•è¿‡ï¼Œæ‰ä¼šè®¿é—®ä¸€ä¸ªä½ä¼˜å…ˆçº§çš„èŠ‚ç‚¹ã€‚</p></div></div><p>ç”±äºä¸Šæ¸¸èŠ‚ç‚¹çš„é»˜è®¤ä¼˜å…ˆçº§æ˜¯ <code>0</code>ï¼Œä½ å¯ä»¥å°†ä¸€äº›èŠ‚ç‚¹çš„ä¼˜å…ˆçº§è®¾ç½®ä¸ºè´Ÿæ•°ï¼Œè®©å…¶ä½œä¸ºå¤‡ä»½èŠ‚ç‚¹ã€‚ä¾‹å¦‚ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 JSON"><pre tabindex="0" class="prism-code language-JSON codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;uri&quot;: &quot;/hello&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;upstream&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;type&quot;: &quot;roundrobin&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;nodes&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {&quot;host&quot;: &quot;127.0.0.1&quot;, &quot;port&quot;: 1980, &quot;weight&quot;: 2000},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {&quot;host&quot;: &quot;127.0.0.1&quot;, &quot;port&quot;: 1981, &quot;weight&quot;: 1, &quot;priority&quot;: -1}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;checks&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;active&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;http_path&quot;: &quot;/status&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;healthy&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;interval&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;successes&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;unhealthy&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;interval&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;http_failures&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>èŠ‚ç‚¹ <code>127.0.0.2</code> åªæœ‰åœ¨ <code>127.0.0.1</code> ä¸å¯ç”¨æˆ–è€…å°è¯•è¿‡ä¹‹åæ‰ä¼šè¢«è®¿é—®ï¼Œå› æ­¤å®ƒæ˜¯ <code>127.0.0.1</code> çš„å¤‡ä»½ã€‚</p></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="upstream-response-parameters"></a>åº”ç­”å‚æ•°<a class="hash-link" href="#upstream-response-parameters" title="Direct link to heading">#</a></h3><p>ç›®å‰æ˜¯ç›´æ¥è¿”å›ä¸ etcd äº¤äº’åçš„ç»“æœã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="ssl"></a>SSL<a class="hash-link" href="#ssl" title="Direct link to heading">#</a></h2><p>ä½ å¯ä»¥ä½¿ç”¨è¯¥èµ„æºåˆ›å»º SSL è¯ä¹¦ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="ssl-uri"></a>è¯·æ±‚åœ°å€<a class="hash-link" href="#ssl-uri" title="Direct link to heading">#</a></h3><p>SSL èµ„æºè¯·æ±‚åœ°å€ï¼š/apisix/admin/ssls/{id}</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="ssl-request-methods"></a>è¯·æ±‚æ–¹æ³•<a class="hash-link" href="#ssl-request-methods" title="Direct link to heading">#</a></h3><table><thead><tr><th>åç§°</th><th>è¯·æ±‚ URI</th><th>è¯·æ±‚ body</th><th>æè¿°</th></tr></thead><tbody><tr><td>GET</td><td>/apisix/admin/ssls</td><td>æ— </td><td>è·å–èµ„æºåˆ—è¡¨ã€‚</td></tr><tr><td>GET</td><td>/apisix/admin/ssls/{id}</td><td>æ— </td><td>è·å–èµ„æºã€‚</td></tr><tr><td>PUT</td><td>/apisix/admin/ssls/{id}</td><td>{...}</td><td>åˆ›å»ºæŒ‡å®š id çš„èµ„æºã€‚</td></tr><tr><td>POST</td><td>/apisix/admin/ssls</td><td>{...}</td><td>åˆ›å»ºèµ„æºï¼Œid ç”±åå°æœåŠ¡è‡ªåŠ¨ç”Ÿæˆã€‚</td></tr><tr><td>DELETE</td><td>/apisix/admin/ssls/{id}</td><td>æ— </td><td>åˆ é™¤èµ„æºã€‚</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="ssl-body-request-methods"></a>body è¯·æ±‚å‚æ•°<a class="hash-link" href="#ssl-body-request-methods" title="Direct link to heading">#</a></h3><table><thead><tr><th>åç§°</th><th>å¿…é€‰é¡¹</th><th>ç±»å‹</th><th>æè¿°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>cert</td><td>æ˜¯</td><td>è¯ä¹¦</td><td>HTTP è¯ä¹¦ã€‚è¯¥å­—æ®µæ”¯æŒä½¿ç”¨ <a href="/zh/docs/apisix/3.12/terminology/secret/">APISIX Secret</a> èµ„æºï¼Œå°†å€¼ä¿å­˜åœ¨ Secret Manager ä¸­ã€‚</td><td></td></tr><tr><td>key</td><td>æ˜¯</td><td>ç§é’¥</td><td>HTTPS è¯ä¹¦ç§é’¥ã€‚è¯¥å­—æ®µæ”¯æŒä½¿ç”¨ <a href="/zh/docs/apisix/3.12/terminology/secret/">APISIX Secret</a> èµ„æºï¼Œå°†å€¼ä¿å­˜åœ¨ Secret Manager ä¸­ã€‚</td><td></td></tr><tr><td>certs</td><td>å¦</td><td>è¯ä¹¦å­—ç¬¦ä¸²æ•°ç»„</td><td>å½“ä½ æƒ³ç»™åŒä¸€ä¸ªåŸŸåé…ç½®å¤šä¸ªè¯ä¹¦æ—¶ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªè¯ä¹¦éœ€è¦é€šè¿‡ <code>cert</code> ä¼ é€’å¤–ï¼Œå‰©ä¸‹çš„è¯ä¹¦å¯ä»¥é€šè¿‡è¯¥å‚æ•°ä¼ é€’ä¸Šæ¥ã€‚è¯¥å­—æ®µæ”¯æŒä½¿ç”¨ <a href="/zh/docs/apisix/3.12/terminology/secret/">APISIX Secret</a> èµ„æºï¼Œå°†å€¼ä¿å­˜åœ¨ Secret Manager ä¸­ã€‚</td><td></td></tr><tr><td>keys</td><td>å¦</td><td>ç§é’¥å­—ç¬¦ä¸²æ•°ç»„</td><td><code>certs</code> å¯¹åº”çš„è¯ä¹¦ç§é’¥ï¼Œéœ€è¦ä¸ <code>certs</code> ä¸€ä¸€å¯¹åº”ã€‚è¯¥å­—æ®µæ”¯æŒä½¿ç”¨ <a href="/zh/docs/apisix/3.12/terminology/secret/">APISIX Secret</a> èµ„æºï¼Œå°†å€¼ä¿å­˜åœ¨ Secret Manager ä¸­ã€‚</td><td></td></tr><tr><td>client.ca</td><td>å¦</td><td>è¯ä¹¦</td><td>è®¾ç½®å°†ç”¨äºå®¢æˆ·ç«¯è¯ä¹¦æ ¡éªŒçš„ <code>CA</code> è¯ä¹¦ã€‚è¯¥ç‰¹æ€§éœ€è¦ OpenResty ä¸º 1.19 åŠä»¥ä¸Šç‰ˆæœ¬ã€‚</td><td></td></tr><tr><td>client.depth</td><td>å¦</td><td>è¾…åŠ©</td><td>è®¾ç½®å®¢æˆ·ç«¯è¯ä¹¦æ ¡éªŒçš„æ·±åº¦ï¼Œé»˜è®¤ä¸º 1ã€‚è¯¥ç‰¹æ€§éœ€è¦ OpenResty ä¸º 1.19 åŠä»¥ä¸Šç‰ˆæœ¬ã€‚</td><td></td></tr><tr><td>client.skip_mtls_uri_regex</td><td>å¦</td><td>PCRE æ­£åˆ™è¡¨è¾¾å¼æ•°ç»„</td><td>ç”¨æ¥åŒ¹é…è¯·æ±‚çš„ URIï¼Œå¦‚æœåŒ¹é…ï¼Œåˆ™è¯¥è¯·æ±‚å°†ç»•è¿‡å®¢æˆ·ç«¯è¯ä¹¦çš„æ£€æŸ¥ï¼Œä¹Ÿå°±æ˜¯è·³è¿‡ MTLSã€‚</td><td>[&quot;/hello[0-9]+&quot;, &quot;/foobar&quot;]</td></tr><tr><td>snis</td><td>æ˜¯</td><td>åŒ¹é…è§„åˆ™</td><td>éç©ºæ•°ç»„å½¢å¼ï¼Œå¯ä»¥åŒ¹é…å¤šä¸ª SNIã€‚</td><td></td></tr><tr><td>labels</td><td>å¦</td><td>åŒ¹é…è§„åˆ™</td><td>æ ‡è¯†é™„åŠ å±æ€§çš„é”®å€¼å¯¹ã€‚</td><td>{&quot;version&quot;:&quot;v2&quot;,&quot;build&quot;:&quot;16&quot;,&quot;env&quot;:&quot;production&quot;}</td></tr><tr><td>type</td><td>å¦</td><td>è¾…åŠ©</td><td>æ ‡è¯†è¯ä¹¦çš„ç±»å‹ï¼Œé»˜è®¤å€¼ä¸º <code>server</code>ã€‚</td><td><code>client</code> è¡¨ç¤ºè¯ä¹¦æ˜¯å®¢æˆ·ç«¯è¯ä¹¦ï¼ŒAPISIX è®¿é—®ä¸Šæ¸¸æ—¶ä½¿ç”¨ï¼›<code>server</code> è¡¨ç¤ºè¯ä¹¦æ˜¯æœåŠ¡ç«¯è¯ä¹¦ï¼ŒAPISIX éªŒè¯å®¢æˆ·ç«¯è¯·æ±‚æ—¶ä½¿ç”¨ã€‚</td></tr><tr><td>status</td><td>å¦</td><td>è¾…åŠ©</td><td>å½“è®¾ç½®ä¸º <code>1</code> æ—¶ï¼Œå¯ç”¨æ­¤ SSLï¼Œé»˜è®¤å€¼ä¸º <code>1</code>ã€‚</td><td><code>1</code> è¡¨ç¤ºå¯ç”¨ï¼Œ<code>0</code> è¡¨ç¤ºç¦ç”¨</td></tr><tr><td>ssl_protocols</td><td>å¦</td><td>tls åè®®å­—ç¬¦ä¸²æ•°ç»„</td><td>ç”¨äºæ§åˆ¶æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä¹‹é—´ä½¿ç”¨çš„ SSL/TLS åè®®ç‰ˆæœ¬ã€‚æ›´å¤šçš„é…ç½®ç¤ºä¾‹ï¼Œè¯·å‚è€ƒ<a href="/zh/docs/apisix/3.12/ssl-protocol/">SSL åè®®</a>ã€‚</td><td><code>[&quot;TLSv1.1&quot;, &quot;TLSv1.2&quot;, &quot;TLSv1.3&quot;]</code></td></tr></tbody></table><p>SSL å¯¹è±¡ JSON é…ç½®ç¤ºä¾‹ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain">,          </span><span class="token comment" style="color:#999988;font-style:italic"># id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;cert&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;cert&quot;</span><span class="token plain">,     </span><span class="token comment" style="color:#999988;font-style:italic"># è¯ä¹¦</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;key&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;key&quot;</span><span class="token plain">,       </span><span class="token comment" style="color:#999988;font-style:italic"># ç§é’¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;snis&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;t.com&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># HTTPS æ¡æ‰‹æ—¶å®¢æˆ·ç«¯å‘é€çš„ SNI</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>æ›´å¤šçš„é…ç½®ç¤ºä¾‹ï¼Œè¯·å‚è€ƒ<a href="/zh/docs/apisix/3.12/certificate/">è¯ä¹¦</a>ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="global-rules"></a>Global Rules<a class="hash-link" href="#global-rules" title="Direct link to heading">#</a></h2><p>Global Rule å¯ä»¥è®¾ç½®å…¨å±€è¿è¡Œçš„æ’ä»¶ï¼Œè®¾ç½®ä¸ºå…¨å±€è§„åˆ™çš„æ’ä»¶å°†åœ¨æ‰€æœ‰è·¯ç”±çº§åˆ«çš„æ’ä»¶ä¹‹å‰ä¼˜å…ˆè¿è¡Œã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="global-rule-uri"></a>è¯·æ±‚åœ°å€<a class="hash-link" href="#global-rule-uri" title="Direct link to heading">#</a></h3><p>Global Rule èµ„æºè¯·æ±‚åœ°å€ï¼š/apisix/admin/global_rules/{id}</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="global-rule-request-methods"></a>è¯·æ±‚æ–¹æ³•<a class="hash-link" href="#global-rule-request-methods" title="Direct link to heading">#</a></h3><table><thead><tr><th>åç§°</th><th>è¯·æ±‚ URI</th><th>è¯·æ±‚ body</th><th>æè¿°</th></tr></thead><tbody><tr><td>GET</td><td>/apisix/admin/global_rules</td><td>æ— </td><td>è·å–èµ„æºåˆ—è¡¨ã€‚</td></tr><tr><td>GET</td><td>/apisix/admin/global_rules/{id}</td><td>æ— </td><td>è·å–èµ„æºã€‚</td></tr><tr><td>PUT</td><td>/apisix/admin/global_rules/{id}</td><td>{...}</td><td>å°†åˆ›å»ºæŒ‡å®š id çš„èµ„æºã€‚</td></tr><tr><td>DELETE</td><td>/apisix/admin/global_rules/{id}</td><td>æ— </td><td>åˆ é™¤èµ„æºã€‚</td></tr><tr><td>PATCH</td><td>/apisix/admin/global_rules/{id}</td><td>{...}</td><td>æ ‡å‡† PATCHï¼Œä¿®æ”¹å·²æœ‰ Global Rule çš„éƒ¨åˆ†å±æ€§ï¼Œå…¶ä»–ä¸æ¶‰åŠçš„å±æ€§ä¼šåŸæ ·ä¿ç•™ï¼›å¦‚æœä½ è¦åˆ é™¤æŸä¸ªå±æ€§ï¼Œå°†è¯¥å±æ€§çš„å€¼è®¾ç½®ä¸º null å³å¯åˆ é™¤ï¼›<strong>æ³¨æ„</strong>ï¼šå½“éœ€è¦ä¿®æ”¹å±æ€§çš„å€¼ä¸ºæ•°ç»„æ—¶ï¼Œè¯¥å±æ€§å°†å…¨é‡æ›´æ–°ã€‚</td></tr><tr><td>PATCH</td><td>/apisix/admin/global_rules/{id}/{path}</td><td>{...}</td><td>SubPath PATCHï¼Œé€šè¿‡ <code>{path}</code> æŒ‡å®š Global Rule è¦æ›´æ–°çš„å±æ€§ï¼Œå…¨é‡æ›´æ–°è¯¥å±æ€§çš„æ•°æ®ï¼Œå…¶ä»–ä¸æ¶‰åŠçš„å±æ€§ä¼šåŸæ ·ä¿ç•™ã€‚</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="global-rule-body-request-parameters"></a>body è¯·æ±‚å‚æ•°<a class="hash-link" href="#global-rule-body-request-parameters" title="Direct link to heading">#</a></h3><table><thead><tr><th>åç§°</th><th>å¿…é€‰é¡¹</th><th>ç±»å‹</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>plugins</td><td>æ˜¯</td><td>Plugin</td><td>æ’ä»¶é…ç½®ã€‚è¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒ <a href="/zh/docs/apisix/3.12/terminology/plugin/">Plugin</a>ã€‚</td><td></td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="consumer-group"></a>Consumer Group<a class="hash-link" href="#consumer-group" title="Direct link to heading">#</a></h2><p>ä½ å¯ä»¥ä½¿ç”¨è¯¥èµ„æºé…ç½®ä¸€ç»„å¯ä»¥åœ¨ Consumer é—´å¤ç”¨çš„æ’ä»¶ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="consumer-group-uri"></a>è¯·æ±‚åœ°å€<a class="hash-link" href="#consumer-group-uri" title="Direct link to heading">#</a></h3><p>Consumer Group èµ„æºè¯·æ±‚åœ°å€ï¼š/apisix/admin/consumer_groups/{id}</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="consumer-group-request-methods"></a>è¯·æ±‚æ–¹æ³•<a class="hash-link" href="#consumer-group-request-methods" title="Direct link to heading">#</a></h3><table><thead><tr><th>åç§°</th><th>è¯·æ±‚ URI</th><th>è¯·æ±‚ body</th><th>æè¿°</th></tr></thead><tbody><tr><td>GET</td><td>/apisix/admin/consumer_groups</td><td>æ— </td><td>è·å–èµ„æºåˆ—è¡¨ã€‚</td></tr><tr><td>GET</td><td>/apisix/admin/consumer_groups/{id}</td><td>æ— </td><td>è·å–èµ„æºã€‚</td></tr><tr><td>PUT</td><td>/apisix/admin/consumer_groups/{id}</td><td>{...}</td><td>å°†åˆ›å»ºæŒ‡å®š id çš„èµ„æºã€‚</td></tr><tr><td>DELETE</td><td>/apisix/admin/consumer_groups/{id}</td><td>æ— </td><td>åˆ é™¤èµ„æºã€‚</td></tr><tr><td>PATCH</td><td>/apisix/admin/consumer_groups/{id}</td><td>{...}</td><td>æ ‡å‡† PATCHï¼Œä¿®æ”¹å·²æœ‰ Consumer Group çš„éƒ¨åˆ†å±æ€§ï¼Œå…¶ä»–ä¸æ¶‰åŠçš„å±æ€§ä¼šåŸæ ·ä¿ç•™ï¼›å¦‚æœä½ è¦åˆ é™¤æŸä¸ªå±æ€§ï¼Œå°†è¯¥å±æ€§çš„å€¼è®¾ç½®ä¸º null å³å¯åˆ é™¤ï¼›<strong>æ³¨æ„</strong>ï¼šå½“éœ€è¦ä¿®æ”¹å±æ€§çš„å€¼ä¸ºæ•°ç»„æ—¶ï¼Œè¯¥å±æ€§å°†å…¨é‡æ›´æ–°ã€‚</td></tr><tr><td>PATCH</td><td>/apisix/admin/consumer_groups/{id}/{path}</td><td>{...}</td><td>SubPath PATCHï¼Œé€šè¿‡ <code>{path}</code> æŒ‡å®š Consumer Group è¦æ›´æ–°çš„å±æ€§ï¼Œå…¨é‡æ›´æ–°è¯¥å±æ€§çš„æ•°æ®ï¼Œå…¶ä»–ä¸æ¶‰åŠçš„å±æ€§ä¼šåŸæ ·ä¿ç•™ã€‚</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="consumer-group-body-request-parameters"></a>body è¯·æ±‚å‚æ•°<a class="hash-link" href="#consumer-group-body-request-parameters" title="Direct link to heading">#</a></h3><table><thead><tr><th>åç§°</th><th>å¿…é€‰é¡¹</th><th>ç±»å‹</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>plugins</td><td>æ˜¯</td><td>Plugin</td><td>æ’ä»¶é…ç½®ã€‚è¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒ <a href="/zh/docs/apisix/3.12/terminology/plugin/">Plugin</a>ã€‚</td><td></td></tr><tr><td>desc</td><td>å¦</td><td>è¾…åŠ©</td><td>æ ‡è¯†æè¿°ã€ä½¿ç”¨åœºæ™¯ç­‰ã€‚</td><td>Consumer æµ‹è¯•ã€‚</td></tr><tr><td>labels</td><td>å¦</td><td>è¾…åŠ©</td><td>æ ‡è¯†é™„åŠ å±æ€§çš„é”®å€¼å¯¹ã€‚</td><td>{&quot;version&quot;:&quot;v2&quot;,&quot;build&quot;:&quot;16&quot;,&quot;env&quot;:&quot;production&quot;}</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="plugin-config"></a>Plugin Config<a class="hash-link" href="#plugin-config" title="Direct link to heading">#</a></h2><p>ä½ å¯ä»¥ä½¿ç”¨ Plugin Config èµ„æºåˆ›å»ºä¸€ç»„å¯ä»¥åœ¨è·¯ç”±é—´å¤ç”¨çš„æ’ä»¶ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="plugin-config-uri"></a>è¯·æ±‚åœ°å€<a class="hash-link" href="#plugin-config-uri" title="Direct link to heading">#</a></h3><p>Plugin Config èµ„æºè¯·æ±‚åœ°å€ï¼š/apisix/admin/plugin_configs/{id}</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="plugin-config-request-methods"></a>è¯·æ±‚æ–¹æ³•<a class="hash-link" href="#plugin-config-request-methods" title="Direct link to heading">#</a></h3><table><thead><tr><th>åç§°</th><th>è¯·æ±‚ URI</th><th>è¯·æ±‚ body</th><th>æè¿°</th></tr></thead><tbody><tr><td>GET</td><td>/apisix/admin/plugin_configs</td><td>æ— </td><td>è·å–èµ„æºåˆ—è¡¨ã€‚</td></tr><tr><td>GET</td><td>/apisix/admin/plugin_configs/{id}</td><td>æ— </td><td>è·å–èµ„æºã€‚</td></tr><tr><td>PUT</td><td>/apisix/admin/plugin_configs/{id}</td><td>{...}</td><td>æ ¹æ® id åˆ›å»ºèµ„æºã€‚</td></tr><tr><td>DELETE</td><td>/apisix/admin/plugin_configs/{id}</td><td>æ— </td><td>åˆ é™¤èµ„æºã€‚</td></tr><tr><td>PATCH</td><td>/apisix/admin/plugin_configs/{id}</td><td>{...}</td><td>æ ‡å‡† PATCHï¼Œä¿®æ”¹å·²æœ‰ Plugin Config çš„éƒ¨åˆ†å±æ€§ï¼Œå…¶ä»–ä¸æ¶‰åŠçš„å±æ€§ä¼šåŸæ ·ä¿ç•™ï¼›å¦‚æœä½ è¦åˆ é™¤æŸä¸ªå±æ€§ï¼Œå°†è¯¥å±æ€§çš„å€¼è®¾ç½®ä¸º null å³å¯åˆ é™¤ï¼›<strong>æ³¨æ„</strong>ï¼šå½“éœ€è¦ä¿®æ”¹å±æ€§çš„å€¼ä¸ºæ•°ç»„æ—¶ï¼Œè¯¥å±æ€§å°†å…¨é‡æ›´æ–°ã€‚</td></tr><tr><td>PATCH</td><td>/apisix/admin/plugin_configs/{id}/{path}</td><td>{...}</td><td>SubPath PATCHï¼Œé€šè¿‡ {path} æŒ‡å®š Plugin Config è¦æ›´æ–°çš„å±æ€§ï¼Œå…¨é‡æ›´æ–°è¯¥å±æ€§çš„æ•°æ®ï¼Œå…¶ä»–ä¸æ¶‰åŠçš„å±æ€§ä¼šåŸæ ·ä¿ç•™ã€‚</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="plugin-config-body-request-parameters"></a>body è¯·æ±‚å‚æ•°<a class="hash-link" href="#plugin-config-body-request-parameters" title="Direct link to heading">#</a></h3><table><thead><tr><th>åç§°</th><th>å¿…é€‰é¡¹</th><th>ç±»å‹</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>plugins</td><td>æ˜¯</td><td>Plugin</td><td>æ›´å¤šä¿¡æ¯è¯·å‚è€ƒ <a href="/zh/docs/apisix/3.12/terminology/plugin/">Plugin</a>ã€‚</td><td></td></tr><tr><td>desc</td><td>å¦</td><td>è¾…åŠ©</td><td>æ ‡è¯†æè¿°ã€ä½¿ç”¨åœºæ™¯ç­‰ã€‚</td><td>customer xxxx</td></tr><tr><td>labels</td><td>å¦</td><td>è¾…åŠ©</td><td>æ ‡è¯†é™„åŠ å±æ€§çš„é”®å€¼å¯¹ã€‚</td><td>{&quot;version&quot;:&quot;v2&quot;,&quot;build&quot;:&quot;16&quot;,&quot;env&quot;:&quot;production&quot;}</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="plugin-metadata"></a>Plugin Metadata<a class="hash-link" href="#plugin-metadata" title="Direct link to heading">#</a></h2><p>ä½ å¯ä»¥ä½¿ç”¨ Plugin Metadata èµ„æºé…ç½®æ’ä»¶å…ƒæ•°æ®ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="plugin-metadata-uri"></a>è¯·æ±‚åœ°å€<a class="hash-link" href="#plugin-metadata-uri" title="Direct link to heading">#</a></h3><p>Plugin Config èµ„æºè¯·æ±‚åœ°å€ï¼š/apisix/admin/plugin_metadata/{plugin_name}</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="plugin-metadata-request-methods"></a>è¯·æ±‚æ–¹æ³•<a class="hash-link" href="#plugin-metadata-request-methods" title="Direct link to heading">#</a></h3><table><thead><tr><th>Method</th><th>è¯·æ±‚ URI</th><th>è¯·æ±‚ body</th><th>æè¿°</th></tr></thead><tbody><tr><td>GET</td><td>/apisix/admin/plugin_metadata/{plugin_name}</td><td>æ— </td><td>è·å–èµ„æºã€‚</td></tr><tr><td>PUT</td><td>/apisix/admin/plugin_metadata/{plugin_name}</td><td>{...}</td><td>æ ¹æ® <code>plugin name</code> åˆ›å»ºèµ„æºã€‚</td></tr><tr><td>DELETE</td><td>/apisix/admin/plugin_metadata/{plugin_name}</td><td>æ— </td><td>åˆ é™¤èµ„æºã€‚</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="plugin-metadata-body-request-parameters"></a>body è¯·æ±‚å‚æ•°<a class="hash-link" href="#plugin-metadata-body-request-parameters" title="Direct link to heading">#</a></h3><p>æ ¹æ®æ’ä»¶ (<code>{plugin_name}</code>) çš„ <code>metadata_schema</code> å®šä¹‰çš„æ•°æ®ç»“æ„çš„  JSON å¯¹è±¡ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="plugin-metadata-example"></a>ä½¿ç”¨ç¤ºä¾‹<a class="hash-link" href="#plugin-metadata-example" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9180/apisix/admin/plugin_metadata/example-plugin  </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -i -X PUT -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;skey&quot;: &quot;val&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;ikey&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">201</span><span class="token plain"> Created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Date: Thu, </span><span class="token number" style="color:#36acaa">26</span><span class="token plain"> Dec </span><span class="token number" style="color:#36acaa">2019</span><span class="token plain"> 04:19:34 GMT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: text/plain</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="plugin"></a>Plugin<a class="hash-link" href="#plugin" title="Direct link to heading">#</a></h2><p>ä½ å¯ä»¥é€šè¿‡è¯¥èµ„æºè·å–æ’ä»¶åˆ—è¡¨ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="plugin-uri"></a>è¯·æ±‚åœ°å€<a class="hash-link" href="#plugin-uri" title="Direct link to heading">#</a></h3><p>Plugin èµ„æºè¯·æ±‚åœ°å€ï¼š/apisix/admin/plugins/{plugin_name}</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="è¯·æ±‚å‚æ•°"></a>è¯·æ±‚å‚æ•°<a class="hash-link" href="#è¯·æ±‚å‚æ•°" title="Direct link to heading">#</a></h3><table><thead><tr><th>åç§°</th><th>æè¿°</th><th>é»˜è®¤</th></tr></thead><tbody><tr><td>subsystem</td><td>æ’ä»¶å­ç³»ç»Ÿã€‚</td><td>http</td></tr></tbody></table><p>å¯ä»¥åœ¨å­ç³»ç»Ÿä¸Šè¿‡æ»¤æ’ä»¶ï¼Œä»¥ä¾¿åœ¨é€šè¿‡æŸ¥è¯¢å‚æ•°ä¼ é€’çš„å­ç³»ç»Ÿä¸­æœç´¢ ({plugin_name})</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="plugin-request-methods"></a>è¯·æ±‚æ–¹æ³•<a class="hash-link" href="#plugin-request-methods" title="Direct link to heading">#</a></h3><table><thead><tr><th>åç§° Â Â Â Â Â Â </th><th>è¯·æ±‚ URI</th><th>è¯·æ±‚ body</th><th>æè¿° Â Â Â Â Â Â Â Â </th></tr></thead><tbody><tr><td>GETÂ Â Â Â Â Â </td><td>/apisix/admin/plugins/list</td><td>æ— </td><td>è·å–èµ„æºåˆ—è¡¨ã€‚</td></tr><tr><td>GETÂ Â Â Â Â Â </td><td>/apisix/admin/plugins/{plugin_name}</td><td>æ— </td><td>è·å–èµ„æºã€‚</td></tr><tr><td>GET</td><td>/apisix/admin/plugins?all=true</td><td>æ— </td><td>è·å–æ‰€æœ‰æ’ä»¶çš„æ‰€æœ‰å±æ€§ã€‚</td></tr><tr><td>GET</td><td>/apisix/admin/plugins?all=true&amp;subsystem=stream</td><td>æ— </td><td>è·å–æ‰€æœ‰ Stream æ’ä»¶çš„å±æ€§ã€‚</td></tr><tr><td>GET</td><td>/apisix/admin/plugins?all=true&amp;subsystem=http</td><td>æ— </td><td>è·å–æ‰€æœ‰ HTTP æ’ä»¶çš„å±æ€§ã€‚</td></tr><tr><td>PUT</td><td>/apisix/admin/plugins/reload</td><td>æ— </td><td>æ ¹æ®ä»£ç ä¸­æ‰€åšçš„æ›´æ”¹é‡æ–°åŠ è½½æ’ä»¶ã€‚</td></tr><tr><td>GET</td><td>apisix/admin/plugins/{plugin_name}?subsystem=stream</td><td>æ— </td><td>è·å–æŒ‡å®š Stream æ’ä»¶çš„å±æ€§ã€‚</td></tr><tr><td>GET</td><td>apisix/admin/plugins/{plugin_name}?subsystem=http</td><td>æ— </td><td>è·å–æŒ‡å®š HTTP æ’ä»¶çš„å±æ€§ã€‚</td></tr></tbody></table><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>è·å–æ‰€æœ‰æ’ä»¶å±æ€§çš„æ¥å£ <code>/apisix/admin/plugins?all=true</code> å°†å¾ˆå¿«è¢«å¼ƒç”¨ã€‚</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="plugin-example"></a>ä½¿ç”¨ç¤ºä¾‹<a class="hash-link" href="#plugin-example" title="Direct link to heading">#</a></h3><p>è·å–æ’ä»¶ Â (<code>{plugin_name}</code>)Â  æ•°æ®ç»“æ„çš„ JSON å¯¹è±¡ã€‚</p><ul><li><p>è·å–æ’ä»¶åˆ—è¡¨</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain">Â </span><span class="token string" style="color:#e3116c">&quot;http://127.0.0.1:9180/apisix/admin/plugins/list&quot;</span><span class="token plain">Â </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-HÂ </span><span class="token string" style="color:#e3116c">&#x27;X-API-KEY:Â edd1c9f034335f136f87ad84b625c8f1&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;zipkin&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;request-id&quot;</span><span class="token plain">,</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></li><li><p>è·å–æŒ‡å®šæ’ä»¶çš„å±æ€§</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain">Â </span><span class="token string" style="color:#e3116c">&quot;http://127.0.0.1:9180/apisix/admin/plugins/key-auth?subsystem=http&quot;</span><span class="token plain">Â </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-HÂ </span><span class="token string" style="color:#e3116c">&#x27;X-API-KEY:Â edd1c9f034335f136f87ad84b625c8f1&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 json"><pre tabindex="0" class="prism-code language-json codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;$comment&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;this is a mark for our injected plugin schema&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;properties&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;header&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;default&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;apikey&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;string&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;hide_credentials&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;default&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;boolean&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;_meta&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;properties&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;filter&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;array&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;description&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;filter determines whether the plugin needs to be executed at runtime&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;disable&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;boolean&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;error_response&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;oneOf&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;string&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;object&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;priority&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;integer&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;description&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;priority of plugins by customized order&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;object&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;query&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;default&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;apikey&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;string&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;object&quot;</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></li></ul><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>ä½ å¯ä»¥ä½¿ç”¨ <code>/apisix/admin/plugins?all=true</code> æ¥å£è·å–æ‰€æœ‰æ’ä»¶çš„æ‰€æœ‰å±æ€§ï¼Œæ¯ä¸ªæ’ä»¶åŒ…æ‹¬ <code>name</code>ï¼Œ<code>priority</code>ï¼Œ<code>type</code>ï¼Œ<code>schema</code>ï¼Œ<code>consumer_schema</code> å’Œ <code>version</code>ã€‚</p><p>è¿™ä¸ª API å°†å¾ˆå¿«è¢«å¼ƒç”¨ã€‚</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="stream-route"></a>Stream Route<a class="hash-link" href="#stream-route" title="Direct link to heading">#</a></h2><p>Stream Route æ˜¯ç”¨äº TCP/UDP åŠ¨æ€ä»£ç†çš„è·¯ç”±ã€‚è¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒ <a href="/zh/docs/apisix/3.12/stream-proxy/">TCP/UDP åŠ¨æ€ä»£ç†</a>ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="stream-route-uri"></a>è¯·æ±‚åœ°å€<a class="hash-link" href="#stream-route-uri" title="Direct link to heading">#</a></h3><p>Plugin èµ„æºè¯·æ±‚åœ°å€ï¼š/apisix/admin/stream_routes/{id}</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="stream-route-request-methods"></a>è¯·æ±‚æ–¹æ³•<a class="hash-link" href="#stream-route-request-methods" title="Direct link to heading">#</a></h3><table><thead><tr><th>åç§°</th><th>è¯·æ±‚ URI</th><th>è¯·æ±‚ body</th><th>æè¿°</th></tr></thead><tbody><tr><td>GET</td><td>/apisix/admin/stream_routes</td><td>æ— </td><td>è·å–èµ„æºåˆ—è¡¨ã€‚</td></tr><tr><td>GET</td><td>/apisix/admin/stream_routes/{id}</td><td>æ— </td><td>è·å–èµ„æºã€‚</td></tr><tr><td>PUT</td><td>/apisix/admin/stream_routes/{id}</td><td>{...}</td><td>åˆ›å»ºæŒ‡å®š id çš„èµ„æºã€‚</td></tr><tr><td>POST</td><td>/apisix/admin/stream_routes</td><td>{...}</td><td>åˆ›å»ºèµ„æºï¼Œid ç”±åå°æœåŠ¡è‡ªåŠ¨ç”Ÿæˆã€‚</td></tr><tr><td>DELETE</td><td>/apisix/admin/stream_routes/{id}</td><td>æ— </td><td>åˆ é™¤èµ„æºã€‚</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="stream-route-body-request-parameters"></a>body è¯·æ±‚å‚æ•°<a class="hash-link" href="#stream-route-body-request-parameters" title="Direct link to heading">#</a></h3><table><thead><tr><th>åç§°</th><th>å¿…é€‰é¡¹</th><th>ç±»å‹</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>upstream</td><td>å¦</td><td>Upstream</td><td>Upstream é…ç½®ï¼Œè¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒ <a href="/zh/docs/apisix/3.12/terminology/upstream/">Upstream</a>ã€‚</td><td></td></tr><tr><td>upstream_id</td><td>å¦</td><td>Upstream</td><td>éœ€è¦ä½¿ç”¨çš„ Upstream idï¼Œè¯¦ç»†ä¿¡æ¯è¯· <a href="/zh/docs/apisix/3.12/terminology/upstream/">Upstream</a>ã€‚</td><td></td></tr><tr><td>service_id</td><td>å¦</td><td>String</td><td>éœ€è¦ä½¿ç”¨çš„ <a href="/zh/docs/apisix/3.12/terminology/service/">Service</a> id.</td><td></td></tr><tr><td>remote_addr</td><td>å¦</td><td>IPv4, IPv4 CIDR, IPv6</td><td>è¿‡æ»¤é€‰é¡¹ï¼šå¦‚æœå®¢æˆ·ç«¯ IP åŒ¹é…ï¼Œåˆ™è½¬å‘åˆ°ä¸Šæ¸¸</td><td>&quot;127.0.0.1&quot; æˆ– &quot;127.0.0.1/32&quot; æˆ– &quot;::1&quot;</td></tr><tr><td>server_addr</td><td>å¦</td><td>IPv4, IPv4 CIDR, IPv6</td><td>è¿‡æ»¤é€‰é¡¹ï¼šå¦‚æœ APISIX æœåŠ¡å™¨çš„ IP ä¸ <code>server_addr</code> åŒ¹é…ï¼Œåˆ™è½¬å‘åˆ°ä¸Šæ¸¸ã€‚</td><td>&quot;127.0.0.1&quot; æˆ– &quot;127.0.0.1/32&quot; æˆ– &quot;::1&quot;</td></tr><tr><td>server_port</td><td>å¦</td><td>æ•´æ•°</td><td>è¿‡æ»¤é€‰é¡¹ï¼šå¦‚æœ APISIX æœåŠ¡å™¨çš„ç«¯å£ ä¸ <code>server_port</code> åŒ¹é…ï¼Œåˆ™è½¬å‘åˆ°ä¸Šæ¸¸ã€‚</td><td>9090</td></tr><tr><td>sni</td><td>å¦</td><td>Host</td><td>æœåŠ¡å™¨åç§°ã€‚</td><td>&quot;test.com&quot;</td></tr><tr><td>protocol.name</td><td>å¦</td><td>å­—ç¬¦ä¸²</td><td>xRPC æ¡†æ¶ä»£ç†çš„åè®®çš„åç§°ã€‚</td><td>&quot;redis&quot;</td></tr><tr><td>protocol.conf</td><td>å¦</td><td>é…ç½®</td><td>åè®®ç‰¹å®šçš„é…ç½®ã€‚</td><td></td></tr></tbody></table><p>ä½ å¯ä»¥æŸ¥çœ‹ <a href="/zh/docs/apisix/3.12/stream-proxy/#%E6%9B%B4%E5%A4%9A-route-%E5%8C%B9%E9%85%8D%E9%80%89%E9%A1%B9">Stream Proxy</a> äº†è§£æ›´å¤šè¿‡æ»¤å™¨çš„ä¿¡æ¯ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="secret"></a>Secret<a class="hash-link" href="#secret" title="Direct link to heading">#</a></h2><p>Secret æŒ‡çš„æ˜¯ <code>Secrets Management</code>ï¼ˆå¯†é’¥ç®¡ç†ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•æ”¯æŒçš„å¯†é’¥ç®¡ç†å™¨ï¼Œä¾‹å¦‚ <code>vault</code>ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="secret-config-uri"></a>è¯·æ±‚åœ°å€<a class="hash-link" href="#secret-config-uri" title="Direct link to heading">#</a></h3><p>Secret èµ„æºè¯·æ±‚åœ°å€ï¼š/apisix/admin/secrets/{secretmanager}/{id}</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="secret-config-request-methods"></a>è¯·æ±‚æ–¹æ³•<a class="hash-link" href="#secret-config-request-methods" title="Direct link to heading">#</a></h3><table><thead><tr><th align="center">åç§°</th><th align="center">è¯·æ±‚ URI</th><th align="center">è¯·æ±‚ body</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center">GET</td><td align="center">/apisix/admin/secrets</td><td align="center">NULL</td><td align="center">è·å–æ‰€æœ‰ secret çš„åˆ—è¡¨ã€‚</td></tr><tr><td align="center">GET</td><td align="center">/apisix/admin/secrets/{manager}/{id}</td><td align="center">NULL</td><td align="center">æ ¹æ® id è·å–æŒ‡å®šçš„ secretã€‚</td></tr><tr><td align="center">PUT</td><td align="center">/apisix/admin/secrets/{manager}</td><td align="center">{...}</td><td align="center">åˆ›å»ºæ–°çš„ secret é…ç½®ã€‚</td></tr><tr><td align="center">DELETE</td><td align="center">/apisix/admin/secrets/{manager}/{id}</td><td align="center">NULL</td><td align="center">åˆ é™¤å…·æœ‰æŒ‡å®š id çš„ secretã€‚</td></tr><tr><td align="center">PATCH</td><td align="center">/apisix/admin/secrets/{manager}/{id}</td><td align="center">{...}</td><td align="center">æ›´æ–°æŒ‡å®š secret çš„é€‰å®šå±æ€§ã€‚å¦‚æœè¦åˆ é™¤ä¸€ä¸ªå±æ€§ï¼Œå¯ä»¥å°†è¯¥å±æ€§çš„å€¼è®¾ç½®ä¸º nullã€‚</td></tr><tr><td align="center">PATCH</td><td align="center">/apisix/admin/secrets/{manager}/{id}/{path}</td><td align="center">{...}</td><td align="center">æ›´æ–°è·¯å¾„ä¸­æŒ‡å®šçš„å±æ€§ã€‚å…¶ä»–å±æ€§çš„å€¼ä¿æŒä¸å˜ã€‚</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="secret-config-body-requset-parameters"></a>body è¯·æ±‚å‚æ•°<a class="hash-link" href="#secret-config-body-requset-parameters" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithHideOnScrollNavbar_3ly5" id="å½“-secret-manager-æ˜¯-vault-æ—¶"></a>å½“ Secret Manager æ˜¯ Vault æ—¶<a class="hash-link" href="#å½“-secret-manager-æ˜¯-vault-æ—¶" title="Direct link to heading">#</a></h4><table><thead><tr><th>åç§°</th><th>å¿…é€‰é¡¹</th><th>ç±»å‹</th><th>æè¿°</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>uri</td><td>æ˜¯</td><td>URI</td><td>Vault æœåŠ¡å™¨çš„ URI</td><td></td></tr><tr><td>prefix</td><td>æ˜¯</td><td>å­—ç¬¦ä¸²</td><td>å¯†é’¥å‰ç¼€</td><td></td></tr><tr><td>token</td><td>æ˜¯</td><td>å­—ç¬¦ä¸²</td><td>Vault ä»¤ç‰Œ</td><td></td></tr><tr><td>namespace</td><td>å¦</td><td>å­—ç¬¦ä¸²</td><td>Vault å‘½åç©ºé—´ï¼Œè¯¥å­—æ®µæ— é»˜è®¤å€¼</td><td><code>admin</code></td></tr></tbody></table><p>é…ç½®ç¤ºä¾‹ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;uri&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://localhost/vault&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;prefix&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/apisix/kv&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;token&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;343effad&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -i http://127.0.0.1:9180/apisix/admin/secrets/vault/test2 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PUT -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;uri&quot;: &quot;http://xxx/get&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;prefix&quot; : &quot;apisix&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;token&quot; : &quot;apisix&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;key&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;\/apisix\/secrets\/vault\/test2&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;value&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;vault\/test2&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;token&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;apisix&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;prefix&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;apisix&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;update_time&quot;</span><span class="token plain">:1669625828,</span><span class="token string" style="color:#e3116c">&quot;create_time&quot;</span><span class="token plain">:1669625828,</span><span class="token string" style="color:#e3116c">&quot;uri&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;http:\/\/xxx\/get&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithHideOnScrollNavbar_3ly5" id="å½“-secret-manager-æ˜¯-aws-æ—¶"></a>å½“ Secret Manager æ˜¯ AWS æ—¶<a class="hash-link" href="#å½“-secret-manager-æ˜¯-aws-æ—¶" title="Direct link to heading">#</a></h4><table><thead><tr><th>åç§°</th><th>å¿…é€‰é¡¹</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>access_key_id</td><td>æ˜¯</td><td></td><td>AWS è®¿é—®å¯†é’¥ ID</td></tr><tr><td>secret_access_key</td><td>æ˜¯</td><td></td><td>AWS è®¿é—®å¯†é’¥</td></tr><tr><td>session_token</td><td>å¦</td><td></td><td>ä¸´æ—¶è®¿é—®å‡­è¯ä¿¡æ¯</td></tr><tr><td>region</td><td>å¦</td><td>us-east-1</td><td>AWS åŒºåŸŸ</td></tr><tr><td>endpoint_url</td><td>å¦</td><td><a href="https://secretsmanager.%7Bregion%7D.amazonaws.com" target="_blank" rel="noopener noreferrer">https://secretsmanager.{region}.amazonaws.com</a></td><td>AWS Secret Manager åœ°å€</td></tr></tbody></table><p>é…ç½®ç¤ºä¾‹ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 json"><pre tabindex="0" class="prism-code language-json codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;endpoint_url&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http://127.0.0.1:4566&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;region&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;us-east-1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;access_key_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;access&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;secret_access_key&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;secret&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;session_token&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;token&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -i http://127.0.0.1:9180/apisix/admin/secrets/aws/test3 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PUT -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;endpoint_url&quot;: &quot;http://127.0.0.1:4566&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;region&quot;: &quot;us-east-1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;access_key_id&quot;: &quot;access&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;secret_access_key&quot;: &quot;secret&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;session_token&quot;: &quot;token&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;value&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;create_time&quot;</span><span class="token plain">:1726069970,</span><span class="token string" style="color:#e3116c">&quot;endpoint_url&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;http://127.0.0.1:4566&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;region&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;us-east-1&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;access_key_id&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;access&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;secret_access_key&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;secret&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;aws/test3&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;update_time&quot;</span><span class="token plain">:1726069970,</span><span class="token string" style="color:#e3116c">&quot;session_token&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;token&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;key&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;/apisix/secrets/aws/test3&quot;</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithHideOnScrollNavbar_3ly5" id="å½“-secret-manager-æ˜¯-gcp-æ—¶"></a>å½“ Secret Manager æ˜¯ GCP æ—¶<a class="hash-link" href="#å½“-secret-manager-æ˜¯-gcp-æ—¶" title="Direct link to heading">#</a></h4><table><thead><tr><th>åç§°</th><th>å¿…é€‰é¡¹</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>auth_config</td><td>æ˜¯</td><td></td><td><code>auth_config</code> å’Œ <code>auth_file</code> å¿…é¡»é…ç½®ä¸€ä¸ªã€‚</td></tr><tr><td>auth_config.client_email</td><td>æ˜¯</td><td></td><td>è°·æ­ŒæœåŠ¡å¸å·çš„ email å‚æ•°ã€‚</td></tr><tr><td>auth_config.private_key</td><td>æ˜¯</td><td></td><td>è°·æ­ŒæœåŠ¡å¸å·çš„ç§é’¥å‚æ•°ã€‚</td></tr><tr><td>auth_config.project_id</td><td>æ˜¯</td><td></td><td>è°·æ­ŒæœåŠ¡å¸å·çš„é¡¹ç›® IDã€‚</td></tr><tr><td>auth_config.token_uri</td><td>å¦</td><td><a href="https://oauth2.googleapis.com/token" target="_blank" rel="noopener noreferrer">https://oauth2.googleapis.com/token</a></td><td>è¯·æ±‚è°·æ­ŒæœåŠ¡å¸æˆ·çš„ä»¤ç‰Œçš„ URIã€‚</td></tr><tr><td>auth_config.entries_uri</td><td>å¦</td><td><a href="https://secretmanager.googleapis.com/v1" target="_blank" rel="noopener noreferrer">https://secretmanager.googleapis.com/v1</a></td><td>è°·æ­Œå¯†é’¥æœåŠ¡è®¿é—®ç«¯ç‚¹ APIã€‚</td></tr><tr><td>auth_config.scope</td><td>å¦</td><td><a href="https://www.googleapis.com/auth/cloud-platform" target="_blank" rel="noopener noreferrer">https://www.googleapis.com/auth/cloud-platform</a></td><td>è°·æ­ŒæœåŠ¡è´¦å·çš„è®¿é—®èŒƒå›´ï¼Œå¯å‚è€ƒ <a href="https://developers.google.com/identity/protocols/oauth2/scopes" target="_blank" rel="noopener noreferrer">OAuth 2.0 Scopes for Google APIs</a></td></tr><tr><td>auth_file</td><td>æ˜¯</td><td></td><td><code>auth_config</code> å’Œ <code>auth_file</code> å¿…é¡»é…ç½®ä¸€ä¸ªã€‚</td></tr><tr><td>ssl_verify</td><td>å¦</td><td>true</td><td>å½“è®¾ç½®ä¸º <code>true</code> æ—¶ï¼Œå¯ç”¨ <code>SSL</code> éªŒè¯ã€‚</td></tr></tbody></table><p>é…ç½®ç¤ºä¾‹ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 json"><pre tabindex="0" class="prism-code language-json codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;auth_config&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;client_email&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;email@apisix.iam.gserviceaccount.com&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;private_key&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;private_key&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;project_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;apisix-project&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;token_uri&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://oauth2.googleapis.com/token&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;entries_uri&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://secretmanager.googleapis.com/v1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;scope&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;https://www.googleapis.com/auth/cloud-platform&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -i http://127.0.0.1:9180/apisix/admin/secrets/gcp/test4 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: </span><span class="token string variable" style="color:#36acaa">$admin_key</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -X PUT -d </span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;auth_config&quot; : {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;client_email&quot;: &quot;email@apisix.iam.gserviceaccount.com&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;private_key&quot;: &quot;private_key&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;project_id&quot;: &quot;apisix-project&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;token_uri&quot;: &quot;https://oauth2.googleapis.com/token&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;entries_uri&quot;: &quot;https://secretmanager.googleapis.com/v1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;scope&quot;: [&quot;https://www.googleapis.com/auth/cloud-platform&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 shell"><pre tabindex="0" class="prism-code language-shell codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;value&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;gcp/test4&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;ssl_verify&quot;</span><span class="token plain">:true,</span><span class="token string" style="color:#e3116c">&quot;auth_config&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;token_uri&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;https://oauth2.googleapis.com/token&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;scope&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;https://www.googleapis.com/auth/cloud-platform&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;entries_uri&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;https://secretmanager.googleapis.com/v1&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;client_email&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;email@apisix.iam.gserviceaccount.com&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;private_key&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;private_key&quot;</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;project_id&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;apisix-project&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;create_time&quot;</span><span class="token plain">:1726070161,</span><span class="token string" style="color:#e3116c">&quot;update_time&quot;</span><span class="token plain">:1726070161</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><span class="token string" style="color:#e3116c">&quot;key&quot;</span><span class="token builtin class-name">:</span><span class="token string" style="color:#e3116c">&quot;/apisix/secrets/gcp/test4&quot;</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="secret-config-response-parameters"></a>åº”ç­”å‚æ•°<a class="hash-link" href="#secret-config-response-parameters" title="Direct link to heading">#</a></h3><p>å½“å‰çš„å“åº”æ˜¯ä» etcd è¿”å›çš„ã€‚</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="/zh/edit#https://github.com/apache/apisix/edit/release/3.12/docs/zh/latest/admin-api.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/zh/docs/apisix/3.12/plugins/http-dubbo/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« http-dubbo</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/zh/docs/apisix/3.12/control-api/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Control API Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#description" class="table-of-contents__link">æè¿°</a></li><li><a href="#basic-configuration" class="table-of-contents__link">ç›¸å…³é…ç½®</a><ul><li><a href="#using-environment-variables" class="table-of-contents__link">ä½¿ç”¨ç¯å¢ƒå˜é‡</a></li><li><a href="#force-delete" class="table-of-contents__link">å¼ºåˆ¶åˆ é™¤</a></li></ul></li><li><a href="#v3-new-function" class="table-of-contents__link">v3 ç‰ˆæœ¬æ–°åŠŸèƒ½</a><ul><li><a href="#support-new-response-body-format" class="table-of-contents__link">æ”¯æŒæ–°çš„å“åº”ä½“æ ¼å¼</a></li><li><a href="#support-paging-query" class="table-of-contents__link">æ”¯æŒåˆ†é¡µæŸ¥è¯¢</a></li><li><a href="#support-filtering-query" class="table-of-contents__link">æ”¯æŒè¿‡æ»¤èµ„æº</a></li></ul></li><li><a href="#route" class="table-of-contents__link">Route</a><ul><li><a href="#route-uri" class="table-of-contents__link">è¯·æ±‚åœ°å€</a></li><li><a href="#route-request-methods" class="table-of-contents__link">è¯·æ±‚æ–¹æ³•</a></li><li><a href="#route-uri-request-parameters" class="table-of-contents__link">URI è¯·æ±‚å‚æ•°</a></li><li><a href="#route-request-body-parameters" class="table-of-contents__link">body è¯·æ±‚å‚æ•°</a></li><li><a href="#route-example" class="table-of-contents__link">ä½¿ç”¨ç¤ºä¾‹</a></li><li><a href="#route-response-parameters" class="table-of-contents__link">åº”ç­”å‚æ•°</a></li></ul></li><li><a href="#service" class="table-of-contents__link">Service</a><ul><li><a href="#service-uri" class="table-of-contents__link">è¯·æ±‚åœ°å€</a></li><li><a href="#service-request-methods" class="table-of-contents__link">è¯·æ±‚æ–¹æ³•</a></li><li><a href="#service-request-body-parameters" class="table-of-contents__link">body è¯·æ±‚å‚æ•°</a></li><li><a href="#service-example" class="table-of-contents__link">ä½¿ç”¨ç¤ºä¾‹</a></li><li><a href="#service-response-parameters" class="table-of-contents__link">åº”ç­”å‚æ•°</a></li></ul></li><li><a href="#consumer" class="table-of-contents__link">Consumer</a><ul><li><a href="#consumer-uri" class="table-of-contents__link">è¯·æ±‚åœ°å€</a></li><li><a href="#consumer-request-methods" class="table-of-contents__link">è¯·æ±‚æ–¹æ³•</a></li><li><a href="#consumer-body-request-methods" class="table-of-contents__link">body è¯·æ±‚å‚æ•°</a></li><li><a href="#consumer-example" class="table-of-contents__link">ä½¿ç”¨ç¤ºä¾‹</a></li><li><a href="#consumer-response-parameters" class="table-of-contents__link">åº”ç­”å‚æ•°</a></li></ul></li><li><a href="#credential" class="table-of-contents__link">Credential</a><ul><li><a href="#credential-uri" class="table-of-contents__link">è¯·æ±‚åœ°å€</a></li><li><a href="#consumer-request-methods" class="table-of-contents__link">è¯·æ±‚æ–¹æ³•</a></li><li><a href="#credential-body-request-methods" class="table-of-contents__link">body è¯·æ±‚å‚æ•°</a></li><li><a href="#credential-example" class="table-of-contents__link">ä½¿ç”¨ç¤ºä¾‹</a></li></ul></li><li><a href="#upstream" class="table-of-contents__link">Upstream</a><ul><li><a href="#upstream-uri" class="table-of-contents__link">è¯·æ±‚åœ°å€</a></li><li><a href="#upstream-request-methods" class="table-of-contents__link">è¯·æ±‚æ–¹æ³•</a></li><li><a href="#upstream-body-request-methods" class="table-of-contents__link">body è¯·æ±‚å‚æ•°</a></li><li><a href="#upstream-example" class="table-of-contents__link">ä½¿ç”¨ç¤ºä¾‹</a></li><li><a href="#upstream-response-parameters" class="table-of-contents__link">åº”ç­”å‚æ•°</a></li></ul></li><li><a href="#ssl" class="table-of-contents__link">SSL</a><ul><li><a href="#ssl-uri" class="table-of-contents__link">è¯·æ±‚åœ°å€</a></li><li><a href="#ssl-request-methods" class="table-of-contents__link">è¯·æ±‚æ–¹æ³•</a></li><li><a href="#ssl-body-request-methods" class="table-of-contents__link">body è¯·æ±‚å‚æ•°</a></li></ul></li><li><a href="#global-rules" class="table-of-contents__link">Global Rules</a><ul><li><a href="#global-rule-uri" class="table-of-contents__link">è¯·æ±‚åœ°å€</a></li><li><a href="#global-rule-request-methods" class="table-of-contents__link">è¯·æ±‚æ–¹æ³•</a></li><li><a href="#global-rule-body-request-parameters" class="table-of-contents__link">body è¯·æ±‚å‚æ•°</a></li></ul></li><li><a href="#consumer-group" class="table-of-contents__link">Consumer Group</a><ul><li><a href="#consumer-group-uri" class="table-of-contents__link">è¯·æ±‚åœ°å€</a></li><li><a href="#consumer-group-request-methods" class="table-of-contents__link">è¯·æ±‚æ–¹æ³•</a></li><li><a href="#consumer-group-body-request-parameters" class="table-of-contents__link">body è¯·æ±‚å‚æ•°</a></li></ul></li><li><a href="#plugin-config" class="table-of-contents__link">Plugin Config</a><ul><li><a href="#plugin-config-uri" class="table-of-contents__link">è¯·æ±‚åœ°å€</a></li><li><a href="#plugin-config-request-methods" class="table-of-contents__link">è¯·æ±‚æ–¹æ³•</a></li><li><a href="#plugin-config-body-request-parameters" class="table-of-contents__link">body è¯·æ±‚å‚æ•°</a></li></ul></li><li><a href="#plugin-metadata" class="table-of-contents__link">Plugin Metadata</a><ul><li><a href="#plugin-metadata-uri" class="table-of-contents__link">è¯·æ±‚åœ°å€</a></li><li><a href="#plugin-metadata-request-methods" class="table-of-contents__link">è¯·æ±‚æ–¹æ³•</a></li><li><a href="#plugin-metadata-body-request-parameters" class="table-of-contents__link">body è¯·æ±‚å‚æ•°</a></li><li><a href="#plugin-metadata-example" class="table-of-contents__link">ä½¿ç”¨ç¤ºä¾‹</a></li></ul></li><li><a href="#plugin" class="table-of-contents__link">Plugin</a><ul><li><a href="#plugin-uri" class="table-of-contents__link">è¯·æ±‚åœ°å€</a></li><li><a href="#è¯·æ±‚å‚æ•°" class="table-of-contents__link">è¯·æ±‚å‚æ•°</a></li><li><a href="#plugin-request-methods" class="table-of-contents__link">è¯·æ±‚æ–¹æ³•</a></li><li><a href="#plugin-example" class="table-of-contents__link">ä½¿ç”¨ç¤ºä¾‹</a></li></ul></li><li><a href="#stream-route" class="table-of-contents__link">Stream Route</a><ul><li><a href="#stream-route-uri" class="table-of-contents__link">è¯·æ±‚åœ°å€</a></li><li><a href="#stream-route-request-methods" class="table-of-contents__link">è¯·æ±‚æ–¹æ³•</a></li><li><a href="#stream-route-body-request-parameters" class="table-of-contents__link">body è¯·æ±‚å‚æ•°</a></li></ul></li><li><a href="#secret" class="table-of-contents__link">Secret</a><ul><li><a href="#secret-config-uri" class="table-of-contents__link">è¯·æ±‚åœ°å€</a></li><li><a href="#secret-config-request-methods" class="table-of-contents__link">è¯·æ±‚æ–¹æ³•</a></li><li><a href="#secret-config-body-requset-parameters" class="table-of-contents__link">body è¯·æ±‚å‚æ•°</a></li><li><a href="#secret-config-response-parameters" class="table-of-contents__link">åº”ç­”å‚æ•°</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="container_MP5Z"><div class="linksRow_iwpv"><div class="linksCol_a1ec"><div>ASF</div><ul><li class="footer__item"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer"><span></span><span>Foundation</span></a></li><li class="footer__item"><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer"><span></span><span>License</span></a></li><li class="footer__item"><a href="https://www.apache.org/events/" target="_blank" rel="noopener noreferrer"><span></span><span>Events</span></a></li><li class="footer__item"><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer"><span></span><span>Security</span></a></li><li class="footer__item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer"><span></span><span>Sponsorship</span></a></li><li class="footer__item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer"><span></span><span>Thanks</span></a></li></ul></div><div class="linksCol_a1ec"><div>Community</div><ul><li class="footer__item"><a href="https://github.com/apache/apisix/issues" target="_blank" rel="noopener noreferrer"><span></span><span>GitHub</span></a></li><li class="footer__item"><a href="/zh/docs/general/join/"><span></span><span>Slack</span></a></li><li class="footer__item"><a href="https://twitter.com/ApacheAPISIX" target="_blank" rel="noopener noreferrer"><span></span><span>Twitter</span></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCgPD18cMhOg5rmPVnQhAC8g" target="_blank" rel="noopener noreferrer"><span></span><span>YouTube</span></a></li></ul></div><div class="linksCol_a1ec"><div>More</div><ul><li class="footer__item"><a target="_parent" href="/zh/blog/"><span></span><span>Blog</span></a></li><li class="footer__item"><a target="_parent" href="/zh/showcase/"><span></span><span>Showcase</span></a></li><li class="footer__item"><a target="_parent" href="/zh/plugins/"><span></span><span>Plugin Hub</span></a></li><li class="footer__item"><a href="https://github.com/apache/apisix/milestones" target="_parent" rel="noopener noreferrer"><span></span><span>Roadmap</span></a></li></ul></div></div><div class="copyright_ZfFh"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer"><span style="display:inline-block;width:231.25px;height:40px"></span></a><div>Copyright Â© 2019-2026 The Apache Software Foundation. Apache APISIX, APISIXÂ®, Apache, the Apache feather logo, and the Apache APISIX project logo are either registered trademarks or trademarks of the Apache Software Foundation.</div></div></footer></div>
<script src="https://apisix-website-static.apiseven.com/zh/assets/js/runtime~main.f0ea08ab.js"></script>
<script src="https://apisix-website-static.apiseven.com/zh/assets/js/main.dbcb65bd.js"></script>
</body>
</html>