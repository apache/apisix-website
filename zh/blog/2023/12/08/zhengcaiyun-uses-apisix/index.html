<!doctype html>
<html lang="zh" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="ahrefs-site-verification" content="c2f7370ecf46173f4fb25f114e74c97e0a2976d4f02f61c9b00a9d7d34e34698">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="alternate" type="application/rss+xml" href="/zh/blog/rss.xml" title="Apache APISIX® -- Cloud-Native API Gateway and AI Gateway RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh/blog/atom.xml" title="Apache APISIX® -- Cloud-Native API Gateway and AI Gateway Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Apache APISIX® -- Cloud-Native API Gateway and AI Gateway" href="/zh/opensearch.xml">
<script type="application/ld+json">{"@context":"https://schema.org","@type":"WebSite","name":"Apache APISIX","url":"https://apisix.apache.org"}</script>
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="24b59d9a-682e-4c3d-9e83-bf2ee85cdc19" data-project-name="APISIX" data-project-color="#E8442E" data-project-logo="https://static.apiseven.com/202202/apache-apisix.png" data-modal-disclaimer="This is a custom LLM for APISIX with access to all developer documentation, GitHub issues and discussions." data-modal-example-questions="How to set up canary release in APISIX?,How to develop a custom APISIX plugin?,How to use custom NGINX configuration in APISIX?,How to configure mTLS between clients and APISIX?,How to only allow a specific APISIX consumer to access special services or routes?" async></script><title data-react-helmet="true">政采云 APISIX 优化跨网 RPC 性能实践 | Apache APISIX® -- Cloud-Native API Gateway and AI Gateway</title><meta data-react-helmet="true" property="og:url" content="https://apisix.apache.org/zh/blog/2023/12/08/zhengcaiyun-uses-apisix/"><meta data-react-helmet="true" name="docsearch:language" content="zh"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" name="robots" content="index,follow"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" property="og:title" content="政采云 APISIX 优化跨网 RPC 性能实践 | Apache APISIX® -- Cloud-Native API Gateway and AI Gateway"><meta data-react-helmet="true" name="description" content="政采云借力 APISIX 显著提升了网关性能，减少了协议转换的成本，并实现了中间件层面的收敛。"><meta data-react-helmet="true" property="og:description" content="政采云借力 APISIX 显著提升了网关性能，减少了协议转换的成本，并实现了中间件层面的收敛。"><meta data-react-helmet="true" name="keywords" content="开源社区,API 网关,Apache APISIX,政采云"><meta data-react-helmet="true" property="og:image" content="https://static.apiseven.com/uploads/2023/12/08/XDJDiILW_Zheng.jpeg"><meta data-react-helmet="true" name="twitter:image" content="https://static.apiseven.com/uploads/2023/12/08/XDJDiILW_Zheng.jpeg"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2023-12-08T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://github.com/wxbty,https://github.com/JYan00"><meta data-react-helmet="true" property="article:tag" content="Case Studies"><link data-react-helmet="true" rel="shortcut icon" href="https://static.apiseven.com/202202/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://apisix.apache.org/zh/blog/2023/12/08/zhengcaiyun-uses-apisix/"><link data-react-helmet="true" rel="alternate" href="https://apisix.apache.org/zh/blog/2023/12/08/zhengcaiyun-uses-apisix/" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://apisix.apache.org/zh/blog/2023/12/08/zhengcaiyun-uses-apisix/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://38VC84A2WJ-dsn.algolia.net" crossorigin="anonymous"><link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Medium.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Bold.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Light.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Demi.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-ExtraBold.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://apisix-website-static.apiseven.com/zh/assets/js/runtime~main.29e84044.js" as="script">
<link rel="preload" href="https://apisix-website-static.apiseven.com/zh/assets/js/main.74924f0e.js" as="script">
<link rel="stylesheet" href="https://apisix-website-static.apiseven.com/zh/assets/css/styles.e38901c4.css">
<!-- Matomo from the ASF -->
<script>var _paq=window._paq=window._paq||[];_paq.push(["disableCookies"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var a="https://analytics.apache.org/";_paq.push(["setTrackerUrl",a+"matomo.php"]),_paq.push(["setSiteId","17"]);var e=document,p=e.createElement("script"),t=e.getElementsByTagName("script")[0];p.async=!0,p.src=a+"matomo.js",t.parentNode.insertBefore(p,t)}()</script>
<!-- End Matomo Code -->
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><div class="announcementBar_axC9" style="background-color:#e8433e;color:white" role="banner"><div class="announcementBarPlaceholder_xYHE"></div><div class="announcementBarContent_6uhP">🤔 Introducing APISIX AI Gateway – Built for LLMs and AI workloads. <a target="_blank" rel="noopener noreferrer" href="/ai-gateway/"> Learn More</a></div><button type="button" class="clean-btn close announcementBarClose_A3A1" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_RReh"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a target="_parent" class="navbar__brand" href="/zh/"><img src="/zh/img/logo2.svg" alt="Apache APISIX®" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/zh/img/logo2.svg" alt="Apache APISIX®" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Apache APISIX®</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" target="_parent" href="/zh/docs/">文档</a><ul class="dropdown__menu"><li><a class="dropdown__link" target="_parent" href="/zh/docs/apisix/getting-started/">Apache APISIX®️</a></li><li><a class="dropdown__link" target="_parent" href="/zh/docs/apisix/next/dashboard/">Apache APISIX®️ Dashboard</a></li><li><a class="dropdown__link" target="_parent" href="/zh/docs/ingress-controller/overview/">Apache APISIX®️ Ingress Controller</a></li><li><a class="dropdown__link" target="_parent" href="/zh/docs/helm-chart/apisix/">Apache APISIX®️ Helm Charts</a></li><li><a class="dropdown__link" target="_parent" href="/zh/docs/docker/build/">Apache APISIX®️ Docker</a></li><li><a class="dropdown__link" target="_parent" href="/zh/docs/java-plugin-runner/development/">Apache APISIX®️ Java Plugin Runner</a></li><li><a class="dropdown__link" target="_parent" href="/zh/docs/go-plugin-runner/getting-started/">Apache APISIX®️ Go Plugin Runner</a></li><li><a class="dropdown__link" target="_parent" href="/zh/docs/python-plugin-runner/getting-started/">Apache APISIX®️ Python Plugin Runner</a></li><li><a class="dropdown__link" target="_parent" href="/zh/docs/general/join/">General</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" target="_parent" href="/zh/blog/">博客</a><a class="navbar__item navbar__link" target="_parent" href="/zh/blog/tags/case-studies/">用户案例</a><a class="navbar__item navbar__link" target="_parent" href="/zh/downloads/">下载</a><a class="navbar__item navbar__link" target="_parent" href="/zh/help/">帮助</a><a class="navbar__item navbar__link" target="_parent" href="/zh/team/">团队</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">相关资源</a><ul class="dropdown__menu"><li><a class="dropdown__link" target="_parent" href="/zh/showcase/">使用案例</a></li><li><a class="dropdown__link" target="_parent" href="/zh/docs/general/code-samples/">Code Samples</a></li><li><a class="dropdown__link" target="_parent" href="/zh/plugins/">插件市场</a></li><li><a class="dropdown__link" target="_parent" href="/zh/docs/general/join/">加入社区</a></li><li><a class="dropdown__link" target="_parent" href="/zh/docs/general/events/">社区活动</a></li><li><a href="https://github.com/apache/apisix/milestones" target="_parent" rel="noopener noreferrer" class="dropdown__link">Roadmap</a></li></ul></div><a href="/blog" target="_parent" rel="noopener noreferrer" class="localizedBlogLink_+zFD">English Blog</a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_wNuE"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="sticky-outer-wrapper placeholder_84cc"><div class="sticky-inner-wrapper" style="position:relative;top:0px;z-index:199"><div class="tagsHeader_X6A5"><a target="_parent" href="/zh/blog/tags/case-studies/">Case Studies</a><a target="_parent" href="/zh/blog/tags/ecosystem/">Ecosystem</a><a target="_parent" href="/zh/blog/tags/authentication/">Authentication</a><a target="_parent" href="/zh/blog/tags/plugins/">Plugins</a><a target="_parent" href="/zh/blog/tags/community/">Community</a><a target="_parent" href="/zh/blog/tags/vulnerabilities/">Vulnerabilities</a></div></div></div><div class="container margin-vert--lg"><div class="row" style="justify-content:center"><div class="col col--9"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_d4p0" itemprop="headline">政采云 APISIX 优化跨网 RPC 性能实践</h1><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2023-12-08T00:00:00.000Z" itemprop="datePublished">2023年12月8日</time> · <!-- -->阅读需约 37 分钟</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_9YPI"><div class="avatar margin-bottom--sm"><a href="https://github.com/wxbty" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_4bUw" src="https://github.com/wxbty.png" alt="王晓彬"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/wxbty" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">王晓彬</span></a></div><small class="avatar__subtitle" itemprop="description">Author</small></div></div></div><div class="col col--6 authorCol_9YPI"><div class="avatar margin-bottom--sm"><a href="https://github.com/JYan00" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_4bUw" src="https://github.com/JYan00.png" alt="Jing Yan"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/JYan00" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jing Yan</span></a></div><small class="avatar__subtitle" itemprop="description">Technical Writer</small></div></div></div></div></header><meta itemprop="image" content="https://static.apiseven.com/uploads/2023/12/08/XDJDiILW_Zheng.jpeg"><div class="markdown" itemprop="articleBody"><section class="shareSection_2nCp"><div><button aria-label="linkedin" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#007fb1"></circle><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></svg></button><button aria-label="twitter" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#00aced"></circle><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></svg></button><button aria-label="reddit" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#ff4500"></circle><path d="m 52.8165,31.942362 c 0,-2.4803 -2.0264,-4.4965 -4.5169,-4.4965 -1.2155,0 -2.3171,0.4862 -3.128,1.2682 -3.077,-2.0247 -7.2403,-3.3133 -11.8507,-3.4782 l 2.5211,-7.9373 6.8272,1.5997 -0.0102,0.0986 c 0,2.0281 1.6575,3.6771 3.6958,3.6771 2.0366,0 3.6924,-1.649 3.6924,-3.6771 0,-2.0281 -1.6575,-3.6788 -3.6924,-3.6788 -1.564,0 -2.8968,0.9758 -3.4357,2.3443 l -7.3593,-1.7255 c -0.3213,-0.0782 -0.6477,0.1071 -0.748,0.4233 L 32,25.212062 c -4.8246,0.0578 -9.1953,1.3566 -12.41,3.4425 -0.8058,-0.7446 -1.8751,-1.2104 -3.0583,-1.2104 -2.4905,0 -4.5152,2.0179 -4.5152,4.4982 0,1.649 0.9061,3.0787 2.2389,3.8607 -0.0884,0.4794 -0.1462,0.9639 -0.1462,1.4569 0,6.6487 8.1736,12.0581 18.2223,12.0581 10.0487,0 18.224,-5.4094 18.224,-12.0581 0,-0.4658 -0.0493,-0.9248 -0.1275,-1.377 1.4144,-0.7599 2.3885,-2.2304 2.3885,-3.9406 z m -29.2808,3.0872 c 0,-1.4756 1.207,-2.6775 2.6894,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 -1.4824,0 -2.6894,-1.2002 -2.6894,-2.6758 z m 15.4037,7.9373 c -1.3549,1.3481 -3.4816,2.0043 -6.5008,2.0043 l -0.0221,-0.0051 -0.0221,0.0051 c -3.0209,0 -5.1476,-0.6562 -6.5008,-2.0043 -0.2465,-0.2448 -0.2465,-0.6443 0,-0.8891 0.2465,-0.2465 0.6477,-0.2465 0.8942,0 1.105,1.0999 2.9393,1.6337 5.6066,1.6337 l 0.0221,0.0051 0.0221,-0.0051 c 2.6673,0 4.5016,-0.5355 5.6066,-1.6354 0.2465,-0.2465 0.6477,-0.2448 0.8942,0 0.2465,0.2465 0.2465,0.6443 0,0.8908 z m -0.3213,-5.2615 c -1.4824,0 -2.6877,-1.2002 -2.6877,-2.6758 0,-1.4756 1.2053,-2.6775 2.6877,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 z" fill="white"></path></svg></button></div></section><blockquote><p>作者：王晓彬，Apache Dubbo Commiter、政采云资深开发工程师。</p></blockquote><p>为解决数据跨网问题，政采云搭建了一条基于 Dubbo 的“高速公路”，同时采用了 APISIX 作为中心网关，为网络路由、公共特性提供支持。本文将重点介绍政采云“高速公路”工程建设中如何优化网关和协议的性能以应对挑战。</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="背景介绍">背景介绍<a aria-hidden="true" class="hash-link" href="#背景介绍" title="Direct link to heading">​</a></h2><p>政采云平台是一个政府采购专属平台，为各级政府部门和国有企业提供支持。从网络架构的角度来看，政采云平台是一个集合了公有云、私有云和政务云的混合云网络。</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/ngOYh85r_ZCY-1.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/ngOYh85r_ZCY-1.webp, https://static.apiseven.com/uploads/2023/12/08/ngOYh85r_ZCY-1.png" alt="Zhengcaiyun_platform" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/ngOYh85r_ZCY-1.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/ngOYh85r_ZCY-1.webp, https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/ngOYh85r_ZCY-1.png" alt="Zhengcaiyun_platform" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/ngOYh85r_ZCY-1.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>例如，浙江政府部门在政采云平台上进行采购时，实际上是在云平台上进行操作。该云平台是部署在浙江的一个微服务网络体系，是公司自行部署和运维的平台。除了浙江，还有广西等六七个地区都在云平台上进行采购。</p><p>此外，我们还会为一些分支机构提供服务，例如设立在各个省份的分公司。这些分公司可能有着各自的需求，根据不同省份的行政区划，在当地环境部署同一套微服务框架。同时，一些其他非区划机构，如银行、军队等可能也会选择私有部署。</p><p>以上的这些微服务，就构成了混合云网络的一部分。所以对于业务来说，跨网数据传输是一个常见的需求场景。</p><p>为了满足这种需求，政采云“高速公路”工程于 2022 年底启动，旨在整合现有的网络传输方案，提供一致、便捷和高速的跨网业务体验。随着跨网方案整合的推进，公司的跨网流量越来越多地流向了新型基础设施——政采云“高速公路”工程。</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="高速公路工程">“高速公路”工程<a aria-hidden="true" class="hash-link" href="#高速公路工程" title="Direct link to heading">​</a></h2><p>“高速公路”工程一共分为三个阶段。第一阶段是基于 Dubbo 的“高速公路”工程落地；第二阶段则将之前的一些方案整合到新方案中；第三阶段将解决前两个阶段产生的问题，并进行进一步的优化。</p><p>第一阶段基于 Dubbo 构建了一个新型的架构，其中心是 APISIX。每个节点代表一个岛端，即不同的省或其他区划。云平台其实也是一个特殊的岛端，我们的平台会涉及多个岛端，形成一个混合云网络。</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/vyV7DBH3_ZCY-2.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/vyV7DBH3_ZCY-2.webp, https://static.apiseven.com/uploads/2023/12/08/vyV7DBH3_ZCY-2.png" alt="Highway_structure1" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/vyV7DBH3_ZCY-2.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/vyV7DBH3_ZCY-2.webp, https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/vyV7DBH3_ZCY-2.png" alt="Highway_structure1" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/vyV7DBH3_ZCY-2.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>为什么要采用这个星型的网络架构呢？因为跨网的需求从一开始就存在，在政采云创立初期，业务就会点对点跨网传输数据，然后逐渐形成了网状架构。我们之前有多个与跨网相关的项目或方案，有基础平台提供的，也有业务自行开发的。“高速公路”项目的目的，是将它们整合在一起，提供统一的技术底座，降低各自运维和跑各种流程的成本，让业务方能聚焦在自己的业务上，也能集成更多的公共特性。一方面，如果每个业务都自己开发，在功能上会有一些限制，因为各业务线只关注于各自特定的领域；另一方面，如果将业务开放供他人使用，又可能会面临多种问题，比如需要支持定制本业务线不关心的特性。</p><p>“高速公路”的星型架构也是整合的结果。在之前的网状结构中，每个岛段之间的互联需要经过一系列流程。比如，我们需要和山西和上海这两个省份的运维沟通交流，让他们开一些端口，基于他们的端口进行服务部署后，再实现网络交互。这样一来，网状结构的线很多，也很复杂。如果一共有 n 个岛，可能就有 n 个平方的线。而这个星型架构的好处在于它简洁，相较于之前的网状结构，避免了两两互联的复杂性。</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="挑战">挑战<a aria-hidden="true" class="hash-link" href="#挑战" title="Direct link to heading">​</a></h2><p>“高速公路”方案得到了公司的大力支持，在 2023 年上半年通过新业务的试点后，下半年开始陆续迁移历史跨网方案的业务。从监控中，我们感受到了来自流量的压力。具体表现为：</p><ul><li><p><strong>心跳应用告警频繁发生</strong>：我们在每个路段都部署了一个心跳应用，以确保高速公路的稳定性。这个应用是通用的，负责网络互通，一旦出现问题就会触发告警。举例来说，如果在某个时间段内请求变得缓慢，一次请求超过 1 秒，我们就会收到告警，从而意识到存在问题。而在监控中，心跳应用告警频繁发生。</p></li><li><p><strong>监控指标如响应时间（RT）和吞吐量下降</strong>：我们还使用了 Prometheus 的格式化界面 BRAF。在该界面上，一些关于响应量和吞吐量的曲线明显有下降的趋势。</p></li></ul><p>这两个方面的压力随着我们历史方案切入“高速公路”后，随着流量的增加而逐渐显现。</p><p>为了确保业务的稳定性并提高用户体验，我们采取了各种优化措施。总体而言，我们主要探索了三种思路：</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/5vj9xKBr_ZCY-3.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/5vj9xKBr_ZCY-3.webp, https://static.apiseven.com/uploads/2023/12/08/5vj9xKBr_ZCY-3.png" alt="Optimization_solutions" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/5vj9xKBr_ZCY-3.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/5vj9xKBr_ZCY-3.webp, https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/5vj9xKBr_ZCY-3.png" alt="Optimization_solutions" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/5vj9xKBr_ZCY-3.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><ul><li><p><strong>资源优化</strong>：这种优化思路相对较简单，主要涉及资源的重新调配。具体措施包括对单点的中心网关和 Dubbo 网关进行资源隔离，以最小化故障对系统的影响。此外，通过直接增加 pod 、升级 CPU 等方式，也能有效缓解压力。这样可以确保在资源方面有足够的储备，以满足系统在高负载情况下的需求。然而，这种方法并不能从根本上解决问题，因为如果架构存在短板，某些资源上做不到能水平扩展，那么在一定条件下就会出现故障，有可能不能在短时间内解决。</p></li><li><p><strong>性能优化</strong>：这一思路需要在架构层面进行深入优化，以尽可能填补木桶模型的短板。这是非常重要的，因为只有通过性能的最大化利用，才能实现系统的水平扩展。</p></li><li><p><strong>最佳实践引导</strong>：每个框架都有一些缺陷或不合适的地方，我们需要引导用户，避免一些可能引起问题的操作。如果用户执意采取某些操作，我们也需要给出合理的建议。例如，基于跨网的 Dubbo 框架默认支持大流量但小请求的并发，基于 Dubbo 的高速公路也有相同的特性。如果用户基于 Dubbo 传输大文件，可能会给我们造成较大的压力，因此我们需要给出建议，让他们用其他的方法去传输。</p></li></ul><p>综合考虑这几种思路，我们在资源准备充足的同时，通过性能优化，确保系统的稳定性和高可用性，并引导用户进行合理操作。</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="问题与目标">问题与目标<a aria-hidden="true" class="hash-link" href="#问题与目标" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="rpc-请求过程">RPC 请求过程<a aria-hidden="true" class="hash-link" href="#rpc-请求过程" title="Direct link to heading">​</a></h3><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/9z9QAsg5_ZCY-4.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/9z9QAsg5_ZCY-4.webp, https://static.apiseven.com/uploads/2023/12/08/9z9QAsg5_ZCY-4.png" alt="Highway_structure2" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/9z9QAsg5_ZCY-4.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/9z9QAsg5_ZCY-4.webp, https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/9z9QAsg5_ZCY-4.png" alt="Highway_structure2" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/9z9QAsg5_ZCY-4.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>在我们的架构中，例如在 A 省和 B 省之间，需要进行跨网的 RPC 请求。这一请求可能涉及不同省份的微服务架构。每个省份的微服务架构事实上是相同的一套代码，无论是在集群 A 还是集群 B 中，都有 APP1 和 APP2。区别在于，某些岛可能不需要 APP2，比如文件服务在三线城市是不需要的，因此不予部署。在存在跨网需求的情况下，例如需要调用短信服务，那么 APP2 就是必需的。</p><p>在 APP1 调用 APP2 时，如果没有路由信息的正常情况下，通常会是本地集群的调用。但是，我们在 APP1 中引入了“高速公路”的 SDK，该 SDK 允许 APP1 在 Dubbo 调用时携带路由信息，而这些路由信息可能有多种方式。因此，我们可以指定请求要到达的地方，比如 B 省。</p><p>APP1 中的 SDK 会将流量切换到 A 集群的 Dubbo 网关，然后由 Dubbo 网关将 Dubbo 请求转换为 HTTP 请求，再转发到新型网络架构中的 APISIX，随后由 APISIX 将 HTTP 请求传递到目标服务。</p><p>APISIX 首先解析请求中的一些路由信息，发现需要转到 B 省，然后将请求发送到 B 省的 Dubbo 网关。此时，B 省的 Dubbo 网关获得路由信息、参数、请求、序列化协议等信息后，再次使用 Dubbo 的泛化调用，最终将请求真正发送到 B 省的 APP2 上。</p><p>这就是一次跨网的 RPC 请求过程。</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="为何需要-dubbo-网关">为何需要 Dubbo 网关<a aria-hidden="true" class="hash-link" href="#为何需要-dubbo-网关" title="Direct link to heading">​</a></h3><p>在这一过程中，可能会引发一些问题，例如公司内部可能会对为何需要一个 Dubbo 网关提出疑问。Dubbo 网关的功能在于将协议数据转换成 HTTP，那是否可以省略 Dubbo 网关，直接将请求发送至中心网关呢？</p><p>关于这个问题，我们有以下几个方面需要考虑。首先，Dubbo 网关的作用是将 Dubbo 协议的数据还原为 HTTP 协议。尽管在某些情况下可能会节省一个步骤，但在这一步骤中，有一些 IP 收敛和功能收敛需要完成，这些功能与第一个版本的特性有关。此外，Dubbo 网关的实现存在一些问题，它是一个 Java 实现 的 Spring Boot 程序，并且引入了 Dubbo SDK。当 APP 的请求切换过来时，在没有相应 provider 的情况下，Dubbo 默认返回“Service not found”，类似于 HTTP 的“404 not found”。</p><p>为了解决这个问题，我们增强了 Dubbo，对源码进行了定制化开发，即可以转发请求，并将其成果贡献给了 Dubbo 社区。</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="总体架构中的网关">总体架构中的网关<a aria-hidden="true" class="hash-link" href="#总体架构中的网关" title="Direct link to heading">​</a></h3><p>总体架构中包括三个网关，其中包括中心网关和两个 Dubbo 网关。中心网关采用了 APISIX，在第一个版本中已经使用过。主要的使用场景是执行路由（反向代理），根据 HTTP Header 信息将请求转发至不同网络的集群。使用 APISIX 过程中，也遇到了 Dashboard 相关的一些问题，例如，将测试环境的路由配置导出到生产环境，Dashboard 会报错。总体来说，这里对APISIX 的使用，就是普通的网关场景。</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="跨网-rpc-性能分析">跨网 RPC 性能分析<a aria-hidden="true" class="hash-link" href="#跨网-rpc-性能分析" title="Direct link to heading">​</a></h2><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/h5uPd3Rf_ZCY-5.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/h5uPd3Rf_ZCY-5.webp, https://static.apiseven.com/uploads/2023/12/08/h5uPd3Rf_ZCY-5.png" alt="RPC_analysis" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/h5uPd3Rf_ZCY-5.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/h5uPd3Rf_ZCY-5.webp, https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/h5uPd3Rf_ZCY-5.png" alt="RPC_analysis" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/h5uPd3Rf_ZCY-5.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><ul><li><p><strong>客户端</strong>：客户端已整合 Dubbo 的 SDK，该 SDK 的行为包括生成代理、方法调用、参数序列化以及发起网络请求等。当前情况下，这一组件难以更改，因为我们采用的是统一的 Dubbo，因此 SDK 的行为不会发生变化。</p></li><li><p><strong>本地网络</strong>：在本地集群中，存在一个切流量的动作，因此本地网络会涉及 Dubbo 的传输。这涉及 I/O 模型、Dubbo 协议、数据格式（如参数）等。Dubbo 使用了基于 Netty 的异步非阻塞模型的 I/O 模型，对于 Dubbo 来说，使用这种 I/O 模型本身是没有问题的，符合其性能要求。而 Dubbo 协议的数据包采用了简洁而灵活的结构，没有冗余的头部信息，而是根据需求灵活携带必要的数据，以二进制格式进行高效的编码和解码。</p></li><li><p><strong>Dubbo 网关</strong>：在这一过程中，Dubbo 网关充当流量转发角色，不负责业务处理。在这个情境中，牵涉到消息接收的 I/O 模型：是选择阻塞式接收消息，还是采用异步方式呢？同时也牵涉到数据包的解析：这一过程会有一些消耗，因为 Dubbo 数据需要转化成 HTTP 数据，其中会涉及到一系列序列化和反序列化的动作；此外，还有自定义的扩展，即基于本地集群还包括一些公共特性，如限流、鉴权等。</p></li><li><p><strong>公网网络</strong>：网关请求处理完成后，将通过 HTTP 转发到 APISIX 的中心网关，转出去的时候通过了 HttpClient。因为 HttpClient 在默认情况下是阻塞式的，所以性能稍显不足。之所以选择自研网关而非使用现有解决方案，是因为第一个版本将迅速实现并投入使用视为首要因素，而性能优化则作为后续工作。然而，这个方案产生的问题是，Dubbo 协议转换为 HTTP 的行为是自定义的，目前没有任何网关能够支持这种自定义行为。因此，我们采用基于 Netty 的 Java 应用进行自研。同时，在公网端也涉及一些 I/O 模型、HTTP 协议、数据格式等问题，我们选择了性能极佳的 APISIX 来解决这些问题。</p></li><li><p><strong>中心网关</strong>：在整个架构中，中心网关 APISIX 扮演着关键角色，尤其是在公司级公共功能方面，它负责处理流量，具备高效的转发效率和公共扩展。在新型网络架构下，中心网关成为单点，因此我们需要关注单点故障等问题。我们目前的立场是将公共扩展看作公司级公共功能，可以在这一层面上进行一些扩展工作，如拦截流量并执行相应操作。 APISIX 插件式的特性使我们能够对其进行其他一些扩展，例如，在审计时，我们不鼓励无序的跨域调用，而是通过控制台注册信息（如应用名、责任人等）校验后，再进行审计。在中心网关中，我们也处理了单点故障的问题，进行了故障隔离和资源隔离。我们对稳定性和扩展性的要求很高，而 APISIX 很好地满足了我们的需求。</p></li><li><p><strong>目标集群</strong>：中心网关请求转发后，与之前的本地网络相似。因为只是一个中点调用，形式有所不同而已。由于经过一系列操作，Dubbo 数据包此时已通过 HTTP 封装，解析出来后，并不能进行点对点调用，仍需使用 Dubbo 的泛化调用，需要了解接口名、参数等，然后进行调用，调用后再按原路返回。</p></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="优化目标提高吞吐量">优化目标：提高吞吐量<a aria-hidden="true" class="hash-link" href="#优化目标提高吞吐量" title="Direct link to heading">​</a></h2><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/fhnNz8Ez_ZCY-6.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/fhnNz8Ez_ZCY-6.webp, https://static.apiseven.com/uploads/2023/12/08/fhnNz8Ez_ZCY-6.png" alt="Optimization_goal" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/fhnNz8Ez_ZCY-6.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/fhnNz8Ez_ZCY-6.webp, https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/fhnNz8Ez_ZCY-6.png" alt="Optimization_goal" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/fhnNz8Ez_ZCY-6.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>性能压测是在第一版架构上线之前进行的，目的是深入了解跨网的 RPC 架构可能存在的瓶颈。若没有进行性能压测，缺乏数据支撑，我们将无法确定系统的底线。因此，我们经过一系列性能压测，以更好地优化我们的系统。</p><p>压测脚本与请求量实际上存在关联，例如，请求的数据大小逐渐增大，从 2KB 到 8KB。在进行压测时，我们设定了一些前置条件，如当 CPU 占用率达到 80% 左右，磁盘开关达到 80% 左右时，即停止压测。这时，我们可以观察性能表现。通过设置前置条件和逐渐增加数据，我们能够查看最终的性能指标。</p><p>我们发现瓶颈主要在于带宽，即在带宽存在差异的情况下，性能的差异最为显著。我们通过修改网关和 CPU 的参数重新进行压力测试，但是得到的结果和原本的相差不大，从而排除了这些可能的影响因素；而在网络上存在数据过载时，性能会受到限制。因而，我们推断出瓶颈在带宽。尤其对于不同的岛端，由于每个岛端具有不同的带宽，因此需要与每个岛端的运维机构进行协调。例如，上海可能有 30 兆的带宽，而山西可能有 50 兆的带宽，显然，山西的表现更为出色。</p><p>综合之前的分析，我们认为问题一是流量网关，问题二是需要优化 HTTP 协议。</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="网关优化实践">网关优化实践<a aria-hidden="true" class="hash-link" href="#网关优化实践" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="自研-dubbo-网关的问题">自研 Dubbo 网关的问题<a aria-hidden="true" class="hash-link" href="#自研-dubbo-网关的问题" title="Direct link to heading">​</a></h3><p>在使用自研 Dubbo 网关时，我们也遇到了一些问题：</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/EyDZm1nV_ZCY-7.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/EyDZm1nV_ZCY-7.webp, https://static.apiseven.com/uploads/2023/12/08/EyDZm1nV_ZCY-7.png" alt="Dubbo_challenges" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/EyDZm1nV_ZCY-7.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/EyDZm1nV_ZCY-7.webp, https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/EyDZm1nV_ZCY-7.png" alt="Dubbo_challenges" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/EyDZm1nV_ZCY-7.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><ul><li><p><strong>I/O 模式</strong>：将 Dubbo 转换为 HTTP 实际上是采用了一种隧道机制。由于网络的复杂性，我们选择使用 HTTP 来承载这个隧道，通过这个隧道将数据传输到目的地，一旦到达目的地，我们再解开。隧道机制的一个不太理想的方面是，在这个隧道中需要转换协议的数据，尤其是在到达 Dubbo 网关时，而我们自行编写的一些组件，性能可能也无法达到最佳水平。</p></li><li><p><strong>两次序列化</strong>：在进行两次序列化时，涉及一个 JavaBeanDescriptor 对象，这是 Dubbo 中的一个 API。在进行序列化和反序列化时，由于业务对象在参数中无法直接进行序列化，因此需要在 SDK 中进行封装，将 JavaBean 转换为 Dubbo 内部的一种结构，在到达目的地后再进行解封操作。这样的处理方式才能够确保参数中的业务对象能够顺利地进行序列化和反序列化。此外，还有一层问题是 Dubbo 本身采用的序列化方式，即使用 Hessian2。进行两次序列化时，使用 Hessian2 可能对性能造成相当大的消耗。</p></li><li><p><strong>其他业务扩展</strong>：Dubbo 网关需要一些业务扩展，不仅仅是在中心网关上，本地集群网关也是必要的。另外，我们还需要一些即插即用的功能，例如限流等。</p></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="选择-apisix-的原因">选择 APISIX 的原因<a aria-hidden="true" class="hash-link" href="#选择-apisix-的原因" title="Direct link to heading">​</a></h3><p>目前，我们选择使用 APISIX 来替代自己研发的 Dubbo 网关。因为我们自行开发的网关存在一些潜在问题，所以我们并不打算在这方面投入过多资源，而是计划引入现成的专业解决方案并立即投入使用，以节省开发资源，提高效率。选择 APISIX 的原因如下，可供大家参考：</p><ul><li><p><strong>社区活跃，代码质量高</strong>：APISIX 开源社区的活跃度极高，代码质量有一定保障。</p></li><li><p><strong>架构合理，高性能</strong>：APISIX 是基于高性能的 OpenResty 开发的，从架构和设计角度对性能追求极致，因此可以满足我们对网关性能的基本要求。</p></li><li><p><strong>高扩展性</strong>：APISIX 具有出色的扩展性，能够满足我们的自定义需求。简而言之，我们既希望享有类似 NGINX 的高性能，又希望可以根据需要扩展功能。</p></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="协议优化实践">协议优化实践<a aria-hidden="true" class="hash-link" href="#协议优化实践" title="Direct link to heading">​</a></h2><p>协议方面，我们尝试使用了 Dubbo 协议作为隧道协议，替换掉了 HTTP 协议。</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/SAygDDdv_ZCY-8.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/SAygDDdv_ZCY-8.webp, https://static.apiseven.com/uploads/2023/12/08/SAygDDdv_ZCY-8.jpeg" alt="Dubbo_optimization" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/SAygDDdv_ZCY-8.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/SAygDDdv_ZCY-8.webp, https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/SAygDDdv_ZCY-8.jpeg" alt="Dubbo_optimization" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/SAygDDdv_ZCY-8.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="优点">优点<a aria-hidden="true" class="hash-link" href="#优点" title="Direct link to heading">​</a></h3><p>使用 Dubbo 协议作为隧道协议有以下几个优点：</p><ul><li><p><strong>使用 APISIX 网关，避免协议转化</strong>：由于我们的网关采用了 APISIX 网关，因而希望 Dubbo 能够直线转为 Dubbo，这样可以避免两次序列化，也能规避那些主设施的调用。正如前文提到的 HttpClient 计划，采用单线程同步调用的方式，需要等待调用完成后才继续执行后续操作。在高并发情况下，这种方式是非常低效的，并且之前使用的其他方案也逐渐无法支撑我们不断增加的业务量，因此需要进行更新。</p></li><li><p><strong>二进制协议</strong>：总体而言，二进制协议相较于文本更为出色，也是相对经典的一种协议。</p></li><li><p><strong>避免无效头部</strong>：HTTP 的各种客户端可能会携带一些多余的 Header 信息，而使用 Dubbo 协议能避免携带这些无效的冗余信息。</p></li><li><p><strong>长连接多路复用</strong>：APISIX 可以实现多路复用。长连接可以将很多请求一起发送，而 HTTP 虽然可以将很多请求一直发出去，但必须等待一个请求回来后，才能继续接下来的请求。HTTP 和 Dubbo 在并发效率上会有一些差异。</p></li><li><p><strong>四层协议扩展框架</strong>：APISIX 实现了 xRPC 四层协议扩展框架，允许开发人员自定义特定于应用程序的协议。基于 xRPC 框架，APISIX 可以提供几种主要应用协议的代理实现，用户还可以基于该框架支持自己私有的基于 TCP 的应用协议，使其具有类似于 HTTP 协议代理的精确粒度和更高级别的 7 层控制。通过使用 APISIX 的 xRPC 扩展，我们成功地增加了对 Dubbo 协议的直接转发功能，从而实现了全链路 Dubbo 协议传输。</p></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="缺点">缺点<a aria-hidden="true" class="hash-link" href="#缺点" title="Direct link to heading">​</a></h3><p>当然，在使用过程中，Dubbo 协议也存在一些自身特有的缺点：</p><ul><li><p><strong>穿透性不足</strong>：Dubbo 协议存在一个明显的问题，即其穿透性不足。毕竟 Dubbo 是一种私有协议，而我们的网络可能会经过许多物理设备，除了软件层面的网关（APISIX/NGINX/WAF），还涉及一些物理设备，这实际上可能会遇到一些阻碍。</p></li><li><p><strong>无法只读取关键信息</strong>：HTTP 协议可以只读取 Header 信息到网关内存，且 Body 以零拷贝的形式直接转发，但是 Dubbo 协议无法做到这一点。</p></li></ul><p>在这次实践中，尽管我们使用了 Dubbo，但实际上是更偏向于一种调研性质的尝试。我们能够利用的是我们内部基础设施。尽管内部集群的网络是通畅的，但由于我们已经采用 K8s 实现了容器化，K8s 中也有不同的 namespace。在这种情况下，它们之间的调用可能只能通过域名进行。</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="效果">效果<a aria-hidden="true" class="hash-link" href="#效果" title="Direct link to heading">​</a></h3><p>在将 Dubbo 协议投入使用后，我们发现它为我们带来的的优化效果十分显著：</p><ul><li><strong>减少包的大小，提高网络吞吐量</strong></li></ul><p>Dubbo 协议更加精简，承载的头部信息更少。协议设计上很紧凑，能用 1 个 bit 表示的，不会用一个 byte 来表示，比如 boolean 类型的标识。HTTP 为了更好的兼容性，请求头部携带了很多上下文和元数据。对于内部通信来说，服务端和客户端相对固定，很多信息是没有必要的。以下是 Dubbo 官方性能测试，Tps（每秒处理事务量）Dubbo 协议比 HTTP 高 30%-50% 左右（最常见的高并发小数据量场景）。</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/ly2rVObV_ZCY-9.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/ly2rVObV_ZCY-9.webp, https://static.apiseven.com/uploads/2023/12/08/ly2rVObV_ZCY-9.png" alt="Dubbo_test" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/ly2rVObV_ZCY-9.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/ly2rVObV_ZCY-9.webp, https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/ly2rVObV_ZCY-9.png" alt="Dubbo_test" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/ly2rVObV_ZCY-9.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>另外，Dubbo 使用长连接，可以重复使用已经建立的 TCP 连接，减少了连接建立的开销。</p><ul><li><strong>传输协议开销</strong></li></ul><p>由于整条链路使用了相同协议，可以避免不同协议间的装包和解包。</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="本轮改造不足">本轮改造不足<a aria-hidden="true" class="hash-link" href="#本轮改造不足" title="Direct link to heading">​</a></h2><p>2022 年下半年，我们对各跨岛方案，进行了整合升级，也就是现在的“高速公路”方案，保障跨岛标准化同时，解决了之前方案实践过程中面临的很多业务痛点。通过替换隧道协议，我们希望优化网络 I/O 模型，提高链路转发效率。经初步测试，单次 2k 包请求 RT 可以降低 1/3 左右。</p><p>但是，在实践业务场景中，该架构下一些痛点也开始逐渐显现。</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="支持场景不足">支持场景不足<a aria-hidden="true" class="hash-link" href="#支持场景不足" title="Direct link to heading">​</a></h3><p>对云岛业务结构的公司来说，云平台属于公司内部、完全可控的局域网，而岛端则是有自己安全网络策略的独立内部网络。我们的跨网 RPC 需要穿透混合云网络中的各种设备和网关，到达云岛的另一头服务。Dubbo 协议作为私有协议，在大部分的跨岛场景中并不适用。</p><p>目前，这种模式只能在内部的一些网络使用，比如独立搭建的 AI 集群和平台业务集群的通信。当然，基于“高速公路”架构的良好扩展性，我们可以做到不同场景自动切换协议，在获得 Dubbo 协议优势的前提下，也能退化 HTTP 协议兜底。我们对协议的扩展，并不会删除已有协议。</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="对网络吞吐量的优化不足">对网络吞吐量的优化不足<a aria-hidden="true" class="hash-link" href="#对网络吞吐量的优化不足" title="Direct link to heading">​</a></h3><p>接口需要发送大量数据时，这些数据无法被放在一个 RPC 的请求或响应中，需要分批发送。Dubbo 协议下，这种情况只能串行发送。Dubbo 协议在单次请求下性能较好，但是整体吞吐量的提升仍然不够。</p><p>如前文所言，在我们的跨网第一个版本上线前，曾经做过性能压力测试。测试场景如下：云端调岛，上行数据，30M 带宽，发送 2KB 数据，逐步增大并发量。30M 入口带宽，发送 2KB 数据，TPS 大于 500/s，入口带宽将成为瓶颈。当发送数据增加到 80KB，TPS 下降约 16 倍，RT 上升约 1.5 倍。从监控上看，tps 到达一定量后，带宽即达到上限。</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/zoVrWkHq_ZCY-11.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/zoVrWkHq_ZCY-11.webp, https://static.apiseven.com/uploads/2023/12/08/zoVrWkHq_ZCY-11.png" alt="Highway_test" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/zoVrWkHq_ZCY-11.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/zoVrWkHq_ZCY-11.webp, https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/zoVrWkHq_ZCY-11.png" alt="Highway_test" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/zoVrWkHq_ZCY-11.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>可以看到，当前“高速公路”的实际业务场景下，吞吐量是“高速公路”第一个版本最大的一个瓶颈。此次网关和协议的升级，显著降低了 RT 指标，一定程度提升了整体吞吐量。</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="后续规划">后续规划<a aria-hidden="true" class="hash-link" href="#后续规划" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="triple-协议调研">Triple 协议调研<a aria-hidden="true" class="hash-link" href="#triple-协议调研" title="Direct link to heading">​</a></h3><p>经过对 APISIX 的协议扩展，我们使用 APISIX 代替了 Dubbo 自研网关，基本实现了对通信效率的预期优化。但是，我们也有支持场景和通信效率两个明显的痛点需要解决。为此，我们重点调研了 Dubbo3 主力通信协议——Triple 协议。</p><p>Triple 协议是 Dubbo3 设计的基于 HTTP 的 RPC 通信协议规范，它完全兼容 gRPC 协议，支持 Request-Response、Streaming 流式等通信模型，可同时运行在 HTTP/1 和 HTTP/2 之上。对于我们项目来说，Triple 协议的几个特性刚好是我们欠缺的。</p><ul><li><p>完全兼容基于 HTTP/2 的 gRPC 协议：Triple 协议听起来是个私有协议，实际上则是标准的公有协议，兼容 HTTP/1 和 HTTP/2。这意味着穿透性强，痛点之一的场景支持就不再是问题了。</p></li><li><p>兼容 HTTP/1 和 HTTP/2，穿透性强。</p></li><li><p>二进制分帧带来的并行效率提升，首部压缩减少大量包体，在网络吞吐量上，HTTP/2在性能上有了极大提升。</p></li><li><p>作为 Dubbo 主力协议，仍然保留着避免协议转换的优势，与“高速公路”架构契合。</p></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="apisix-对-triple-的扩展">APISIX 对 Triple 的扩展<a aria-hidden="true" class="hash-link" href="#apisix-对-triple-的扩展" title="Direct link to heading">​</a></h3><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/LFmuvivP_ZCY-12.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/LFmuvivP_ZCY-12.webp, https://static.apiseven.com/uploads/2023/12/08/LFmuvivP_ZCY-12.png" alt="APISIX_triple" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/LFmuvivP_ZCY-12.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/LFmuvivP_ZCY-12.webp, https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/LFmuvivP_ZCY-12.png" alt="APISIX_triple" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/LFmuvivP_ZCY-12.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>APISIX 能够通过其 xRPC 机制来实现对新应用协议的扩展。xRPC 为我们提供了接口回放的功能，使得自定义协议的实现变得更为直观。此外，先前的实践案例，例如 Redis，已经为这样的扩展提供了可行的范例。</p><p>在我处理许多协议扩展的实际经验中，APISIX 作为基于 NGINX 的平台，能够对 TCP 四层协议进行转发。如果想将 Dubbo 通过 NGINX 转发到其他网络集群，这是完全可行的，因为 NGINX 专注于对 TCP 四层协议进行处理。然而，我们选择对 APISIX 进行扩展的原因在于，我们不仅需要进行 TCP 协议和数据的转发，还需要读取这些数据。这是因为我们需要处理一些公共特性，无论是限流还是其他功能，我们都需要在这一层面进行实现。</p><p>在这个过程中，通过为 APISIX 添加 Triple 协议的扩展，我们可以将数据放入类似于会话 session 的结构中。也就是说，在编写插件时，能够将读取到的头信息等内容传递到插件中，从而实现对功能的扩展，这很利于匹配我们的架构。</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="推动公司-triple-协议的升级">推动公司 Triple 协议的升级<a aria-hidden="true" class="hash-link" href="#推动公司-triple-协议的升级" title="Direct link to heading">​</a></h3><p>经过 Dubbo2 协议的实践与总结，我们将着力推动 Triple 协议的升级，解决性能问题。</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="性能压测验证">性能压测验证<a aria-hidden="true" class="hash-link" href="#性能压测验证" title="Direct link to heading">​</a></h3><p>对于当前架构，之前做了完整的压力测试，也明白瓶颈所在。后续我们将持续测试，深挖这一基础设施的性能潜力。</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="未来的高速公路架构">未来的高速公路架构<a aria-hidden="true" class="hash-link" href="#未来的高速公路架构" title="Direct link to heading">​</a></h3><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/qGJP1dKu_ZCY-13.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/qGJP1dKu_ZCY-13.webp, https://static.apiseven.com/uploads/2023/12/08/qGJP1dKu_ZCY-13.png" alt="Highway_future" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/uploads/2023/12/08/qGJP1dKu_ZCY-13.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/qGJP1dKu_ZCY-13.webp, https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/qGJP1dKu_ZCY-13.png" alt="Highway_future" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/uploads/2023/12/08/qGJP1dKu_ZCY-13.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>从架构的角度来看，未来可能会呈现如下变化：过去是由 Java 编写的 Dubbo 网关，而现在已经转变为 APISIX。在我们的测试环境和调研中，我们已经着手采用这种方式。然而，目前在生产环境中还未进行替换，因为我们计划在 Triple 完全实现后，再进行整个集群的升级。</p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_xD8n"><div class="col"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/zh/blog/tags/case-studies/">Case Studies</a></li></ul></div></footer></article><section class="shareSection_2nCp"><div><button aria-label="linkedin" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#007fb1"></circle><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></svg></button><button aria-label="twitter" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#00aced"></circle><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></svg></button><button aria-label="reddit" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#ff4500"></circle><path d="m 52.8165,31.942362 c 0,-2.4803 -2.0264,-4.4965 -4.5169,-4.4965 -1.2155,0 -2.3171,0.4862 -3.128,1.2682 -3.077,-2.0247 -7.2403,-3.3133 -11.8507,-3.4782 l 2.5211,-7.9373 6.8272,1.5997 -0.0102,0.0986 c 0,2.0281 1.6575,3.6771 3.6958,3.6771 2.0366,0 3.6924,-1.649 3.6924,-3.6771 0,-2.0281 -1.6575,-3.6788 -3.6924,-3.6788 -1.564,0 -2.8968,0.9758 -3.4357,2.3443 l -7.3593,-1.7255 c -0.3213,-0.0782 -0.6477,0.1071 -0.748,0.4233 L 32,25.212062 c -4.8246,0.0578 -9.1953,1.3566 -12.41,3.4425 -0.8058,-0.7446 -1.8751,-1.2104 -3.0583,-1.2104 -2.4905,0 -4.5152,2.0179 -4.5152,4.4982 0,1.649 0.9061,3.0787 2.2389,3.8607 -0.0884,0.4794 -0.1462,0.9639 -0.1462,1.4569 0,6.6487 8.1736,12.0581 18.2223,12.0581 10.0487,0 18.224,-5.4094 18.224,-12.0581 0,-0.4658 -0.0493,-0.9248 -0.1275,-1.377 1.4144,-0.7599 2.3885,-2.2304 2.3885,-3.9406 z m -29.2808,3.0872 c 0,-1.4756 1.207,-2.6775 2.6894,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 -1.4824,0 -2.6894,-1.2002 -2.6894,-2.6758 z m 15.4037,7.9373 c -1.3549,1.3481 -3.4816,2.0043 -6.5008,2.0043 l -0.0221,-0.0051 -0.0221,0.0051 c -3.0209,0 -5.1476,-0.6562 -6.5008,-2.0043 -0.2465,-0.2448 -0.2465,-0.6443 0,-0.8891 0.2465,-0.2465 0.6477,-0.2465 0.8942,0 1.105,1.0999 2.9393,1.6337 5.6066,1.6337 l 0.0221,0.0051 0.0221,-0.0051 c 2.6673,0 4.5016,-0.5355 5.6066,-1.6354 0.2465,-0.2465 0.6477,-0.2448 0.8942,0 0.2465,0.2465 0.2465,0.6443 0,0.8908 z m -0.3213,-5.2615 c -1.4824,0 -2.6877,-1.2002 -2.6877,-2.6758 0,-1.4756 1.2053,-2.6775 2.6877,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 z" fill="white"></path></svg></button></div></section><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/zh/blog/2023/12/15/high-availability-of-apisix-and-api7/"><div class="pagination-nav__sublabel sublabel_Mno9">Newer Post</div><div class="pagination-nav__label">借力 APISIX 的高可用，实现企业亿级流量</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/zh/blog/2023/12/04/bi-weekly-report/"><div class="pagination-nav__sublabel sublabel_Mno9">Older Post</div><div class="pagination-nav__label">社区双周报 (11.20 - 12.03)</div></a></div></nav></div></div></div></div><footer class="container_f2sD"><div class="linksRow_znki"><div class="linksCol_JEh6"><div>ASF</div><ul><li class="footer__item"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer"><span></span><span>Foundation</span></a></li><li class="footer__item"><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer"><span></span><span>License</span></a></li><li class="footer__item"><a href="https://www.apache.org/events/" target="_blank" rel="noopener noreferrer"><span></span><span>Events</span></a></li><li class="footer__item"><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer"><span></span><span>Security</span></a></li><li class="footer__item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer"><span></span><span>Sponsorship</span></a></li><li class="footer__item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer"><span></span><span>Thanks</span></a></li></ul></div><div class="linksCol_JEh6"><div>Community</div><ul><li class="footer__item"><a href="https://github.com/apache/apisix/issues" target="_blank" rel="noopener noreferrer"><span></span><span>GitHub</span></a></li><li class="footer__item"><a href="/zh/docs/general/join/"><span></span><span>Slack</span></a></li><li class="footer__item"><a href="https://twitter.com/ApacheAPISIX" target="_blank" rel="noopener noreferrer"><span></span><span>Twitter</span></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCgPD18cMhOg5rmPVnQhAC8g" target="_blank" rel="noopener noreferrer"><span></span><span>YouTube</span></a></li></ul></div><div class="linksCol_JEh6"><div>More</div><ul><li class="footer__item"><a target="_parent" href="/zh/blog/"><span></span><span>Blog</span></a></li><li class="footer__item"><a target="_parent" href="/zh/showcase/"><span></span><span>Showcase</span></a></li><li class="footer__item"><a target="_parent" href="/zh/plugins/"><span></span><span>Plugin Hub</span></a></li><li class="footer__item"><a href="https://github.com/apache/apisix/milestones" target="_parent" rel="noopener noreferrer"><span></span><span>Roadmap</span></a></li></ul></div></div><div class="copyright_wR9d"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer"><span style="display:inline-block;width:231.25px;height:40px"></span></a><div>Copyright © 2019-2026 The Apache Software Foundation. Apache APISIX, APISIX®, Apache, the Apache feather logo, and the Apache APISIX project logo are either registered trademarks or trademarks of the Apache Software Foundation.</div></div></footer></div>
<script src="https://apisix-website-static.apiseven.com/zh/assets/js/runtime~main.29e84044.js"></script>
<script src="https://apisix-website-static.apiseven.com/zh/assets/js/main.74924f0e.js"></script>
</body>
</html>