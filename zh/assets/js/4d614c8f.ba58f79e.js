"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[17893],{3905:(n,e,t)=>{t.d(e,{Zo:()=>u,kt:()=>m});var a=t(67294);function r(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function i(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,a)}return t}function p(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?i(Object(t),!0).forEach((function(e){r(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function l(n,e){if(null==n)return{};var t,a,r=function(n,e){if(null==n)return{};var t,a,r={},i=Object.keys(n);for(a=0;a<i.length;a++)t=i[a],e.indexOf(t)>=0||(r[t]=n[t]);return r}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(a=0;a<i.length;a++)t=i[a],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}var s=a.createContext({}),o=function(n){var e=a.useContext(s),t=e;return n&&(t="function"==typeof n?n(e):p(p({},e),n)),t},u=function(n){var e=o(n.components);return a.createElement(s.Provider,{value:e},n.children)},c={inlineCode:"code",wrapper:function(n){var e=n.children;return a.createElement(a.Fragment,{},e)}},d=a.forwardRef((function(n,e){var t=n.components,r=n.mdxType,i=n.originalType,s=n.parentName,u=l(n,["components","mdxType","originalType","parentName"]),d=o(t),m=r,h=d["".concat(s,".").concat(m)]||d[m]||c[m]||i;return t?a.createElement(h,p(p({ref:e},u),{},{components:t})):a.createElement(h,p({ref:e},u))}));function m(n,e){var t=arguments,r=e&&e.mdxType;if("string"==typeof n||r){var i=t.length,p=new Array(i);p[0]=d;var l={};for(var s in e)hasOwnProperty.call(e,s)&&(l[s]=e[s]);l.originalType=n,l.mdxType="string"==typeof n?n:r,p[1]=l;for(var o=2;o<i;o++)p[o]=t[o];return a.createElement.apply(null,p)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},96756:(n,e,t)=>{t.r(e),t.d(e,{contentTitle:()=>p,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var a=t(87462),r=(t(67294),t(3905));const i={title:"public-api",keywords:["APISIX","API \u7f51\u5173","Public API"],description:"public-api \u63d2\u4ef6\u516c\u5f00\u4e86\u4e00\u4e2a\u5185\u90e8 API \u7aef\u70b9\uff0c\u4f7f\u5176\u53ef\u88ab\u516c\u5f00\u8bbf\u95ee\u3002\u8be5\u63d2\u4ef6\u7684\u4e3b\u8981\u7528\u9014\u4e4b\u4e00\u662f\u516c\u5f00\u7531\u5176\u4ed6\u63d2\u4ef6\u521b\u5efa\u7684\u5185\u90e8\u7aef\u70b9\u3002"},p=void 0,l={unversionedId:"plugins/public-api",id:"version-3.12/plugins/public-api",isDocsHomePage:!1,title:"public-api",description:"public-api \u63d2\u4ef6\u516c\u5f00\u4e86\u4e00\u4e2a\u5185\u90e8 API \u7aef\u70b9\uff0c\u4f7f\u5176\u53ef\u88ab\u516c\u5f00\u8bbf\u95ee\u3002\u8be5\u63d2\u4ef6\u7684\u4e3b\u8981\u7528\u9014\u4e4b\u4e00\u662f\u516c\u5f00\u7531\u5176\u4ed6\u63d2\u4ef6\u521b\u5efa\u7684\u5185\u90e8\u7aef\u70b9\u3002",source:"@site/i18n/zh/docusaurus-plugin-content-docs-docs-apisix/version-3.12/plugins/public-api.md",sourceDirName:"plugins",slug:"/plugins/public-api",permalink:"/zh/docs/apisix/3.12/plugins/public-api",editUrl:"/zh/edit#https://github.com/apache/apisix/edit/release/3.12/docs/zh/latest/plugins/public-api.md",tags:[],version:"3.12",frontMatter:{title:"public-api",keywords:["APISIX","API \u7f51\u5173","Public API"],description:"public-api \u63d2\u4ef6\u516c\u5f00\u4e86\u4e00\u4e2a\u5185\u90e8 API \u7aef\u70b9\uff0c\u4f7f\u5176\u53ef\u88ab\u516c\u5f00\u8bbf\u95ee\u3002\u8be5\u63d2\u4ef6\u7684\u4e3b\u8981\u7528\u9014\u4e4b\u4e00\u662f\u516c\u5f00\u7531\u5176\u4ed6\u63d2\u4ef6\u521b\u5efa\u7684\u5185\u90e8\u7aef\u70b9\u3002"},sidebar:"version-3.12/docs",previous:{title:"csrf",permalink:"/zh/docs/apisix/3.12/plugins/csrf"},next:{title:"GM",permalink:"/zh/docs/apisix/3.12/plugins/gm"}},s=[{value:"\u63cf\u8ff0",id:"\u63cf\u8ff0",children:[]},{value:"\u5c5e\u6027",id:"\u5c5e\u6027",children:[]},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",children:[{value:"\u5728\u81ea\u5b9a\u4e49\u7aef\u70b9\u66b4\u9732 Prometheus \u6307\u6807",id:"\u5728\u81ea\u5b9a\u4e49\u7aef\u70b9\u66b4\u9732-prometheus-\u6307\u6807",children:[]},{value:"\u66b4\u9732\u6279\u91cf\u8bf7\u6c42\u7aef\u70b9",id:"\u66b4\u9732\u6279\u91cf\u8bf7\u6c42\u7aef\u70b9",children:[]}]}],o={toc:s};function u(n){let{components:e,...t}=n;return(0,r.kt)("wrapper",(0,a.Z)({},o,t,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("head",null,(0,r.kt)("link",{rel:"canonical",href:"https://docs.api7.ai/hub/public-api"})),(0,r.kt)("h2",{id:"\u63cf\u8ff0"},"\u63cf\u8ff0"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"public-api")," \u63d2\u4ef6\u516c\u5f00\u4e86\u4e00\u4e2a\u5185\u90e8 API \u7aef\u70b9\uff0c\u4f7f\u5176\u53ef\u88ab\u516c\u5f00\u8bbf\u95ee\u3002\u8be5\u63d2\u4ef6\u7684\u4e3b\u8981\u7528\u9014\u4e4b\u4e00\u662f\u516c\u5f00\u7531\u5176\u4ed6\u63d2\u4ef6\u521b\u5efa\u7684\u5185\u90e8\u7aef\u70b9\u3002"),(0,r.kt)("h2",{id:"\u5c5e\u6027"},"\u5c5e\u6027"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u540d\u79f0"),(0,r.kt)("th",{parentName:"tr",align:null},"\u7c7b\u578b"),(0,r.kt)("th",{parentName:"tr",align:null},"\u5fc5\u9009\u9879"),(0,r.kt)("th",{parentName:"tr",align:null},"\u9ed8\u8ba4\u503c"),(0,r.kt)("th",{parentName:"tr",align:null},"\u6709\u6548\u503c"),(0,r.kt)("th",{parentName:"tr",align:null},"\u63cf\u8ff0"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"uri"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5426"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"\u5185\u90e8\u7aef\u70b9\u7684 URI\u3002\u5982\u679c\u672a\u914d\u7f6e\uff0c\u5219\u66b4\u9732\u8def\u7531\u7684 URI\u3002")))),(0,r.kt)("h2",{id:"\u793a\u4f8b"},"\u793a\u4f8b"),(0,r.kt)("p",null,"\u4ee5\u4e0b\u793a\u4f8b\u5c55\u793a\u4e86\u5982\u4f55\u5728\u4e0d\u540c\u573a\u666f\u4e2d\u914d\u7f6e ",(0,r.kt)("inlineCode",{parentName:"p"},"public-api"),"\u3002"),(0,r.kt)("h3",{id:"\u5728\u81ea\u5b9a\u4e49\u7aef\u70b9\u66b4\u9732-prometheus-\u6307\u6807"},"\u5728\u81ea\u5b9a\u4e49\u7aef\u70b9\u66b4\u9732 Prometheus \u6307\u6807"),(0,r.kt)("p",null,"\u4ee5\u4e0b\u793a\u4f8b\u6f14\u793a\u5982\u4f55\u7981\u7528\u9ed8\u8ba4\u5728\u7aef\u53e3 ",(0,r.kt)("inlineCode",{parentName:"p"},"9091")," \u4e0a\u66b4\u9732\u7aef\u70b9\u7684 Prometheus \u5bfc\u51fa\u670d\u52a1\u5668\uff0c\u5e76\u5728 APISIX \u7528\u4e8e\u76d1\u542c\u5176\u4ed6\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u7aef\u53e3 ",(0,r.kt)("inlineCode",{parentName:"p"},"9080")," \u4e0a\uff0c\u901a\u8fc7\u65b0\u7684\u516c\u5171 API \u7aef\u70b9\u66b4\u9732 APISIX \u7684 Prometheus \u6307\u6807\u3002"),(0,r.kt)("p",null,"\u6b64\u5916\uff0c\u8fd8\u4f1a\u914d\u7f6e\u8def\u7531\uff0c\u4f7f\u5185\u90e8\u7aef\u70b9 ",(0,r.kt)("inlineCode",{parentName:"p"},"/apisix/prometheus/metrics")," \u901a\u8fc7\u81ea\u5b9a\u4e49\u7aef\u70b9\u5bf9\u5916\u516c\u5f00\u3002"),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"\u5982\u679c\u6536\u96c6\u4e86\u5927\u91cf\u6307\u6807\uff0c\u63d2\u4ef6\u53ef\u80fd\u4f1a\u5360\u7528\u5927\u91cf CPU \u8d44\u6e90\u7528\u4e8e\u8ba1\u7b97\uff0c\u4ece\u800c\u5f71\u54cd\u6b63\u5e38\u8bf7\u6c42\u7684\u5904\u7406\u3002"),(0,r.kt)("p",{parentName:"div"},"\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cAPISIX \u4f7f\u7528 ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/openresty/lua-resty-core/blob/master/lib/ngx/process.md#enable_privileged_agent"},"\u7279\u6743\u4ee3\u7406\u8fdb\u7a0b")," \uff0c\u5e76\u5c06\u6307\u6807\u8ba1\u7b97\u5378\u8f7d\u81f3\u72ec\u7acb\u8fdb\u7a0b\u3002\u5982\u679c\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u4e2d ",(0,r.kt)("inlineCode",{parentName:"p"},"plugin_attr.prometheus.export_addr")," \u8bbe\u5b9a\u7684\u6307\u6807\u7aef\u70b9\uff0c\u8be5\u4f18\u5316\u5c06\u81ea\u52a8\u751f\u6548\u3002\u4f46\u5982\u679c\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"public-api")," \u63d2\u4ef6\u66b4\u9732\u6307\u6807\u7aef\u70b9\uff0c\u5219\u4e0d\u4f1a\u53d7\u76ca\u4e8e\u6b64\u4f18\u5316\u3002"))),(0,r.kt)("p",null,"\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u7981\u7528 Prometheus \u5bfc\u51fa\u670d\u52a1\u5668\uff0c\u5e76\u91cd\u65b0\u52a0\u8f7d APISIX \u4ee5\u4f7f\u66f4\u6539\u751f\u6548\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"plugin_attr:\n  prometheus:\n    enable_export_server: false\n")),(0,r.kt)("p",null,"\u63a5\u4e0b\u6765\uff0c\u521b\u5efa\u4e00\u4e2a\u5e26\u6709 ",(0,r.kt)("inlineCode",{parentName:"p"},"public-api")," \u63d2\u4ef6\u7684\u8def\u7531\uff0c\u5e76\u4e3a APISIX \u6307\u6807\u66b4\u9732\u4e00\u4e2a\u516c\u5171 API \u7aef\u70b9\u3002\u4f60\u5e94\u5c06\u8def\u7531\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"uri")," \u8bbe\u7f6e\u4e3a\u81ea\u5b9a\u4e49\u7aef\u70b9\u8def\u5f84\uff0c\u5e76\u5c06\u63d2\u4ef6\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"uri")," \u8bbe\u7f6e\u4e3a\u8981\u66b4\u9732\u7684\u5185\u90e8\u7aef\u70b9\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl "http://127.0.0.1:9180/apisix/admin/routes" -X PUT \\\n  -H \'X-API-KEY: ${admin_key}\' \\\n  -d \'{\n    "id": "prometheus-metrics",\n    "uri": "/prometheus_metrics",\n    "plugins": {\n      "public-api": {\n        "uri": "/apisix/prometheus/metrics"\n      }\n    }\n  }\'\n')),(0,r.kt)("p",null,"\u5411\u81ea\u5b9a\u4e49\u6307\u6807\u7aef\u70b9\u53d1\u9001\u8bf7\u6c42\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"curl http://127.0.0.1:9080/prometheus_metrics\n")),(0,r.kt)("p",null,"\u4f60\u5e94\u770b\u5230\u7c7b\u4f3c\u4ee5\u4e0b\u7684\u8f93\u51fa\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},'# HELP apisix_http_requests_total The total number of client requests since APISIX started\n# TYPE apisix_http_requests_total gauge\napisix_http_requests_total 1\n# HELP apisix_nginx_http_current_connections Number of HTTP connections\n# TYPE apisix_nginx_http_current_connections gauge\napisix_nginx_http_current_connections{state="accepted"} 1\napisix_nginx_http_current_connections{state="active"} 1\napisix_nginx_http_current_connections{state="handled"} 1\napisix_nginx_http_current_connections{state="reading"} 0\napisix_nginx_http_current_connections{state="waiting"} 0\napisix_nginx_http_current_connections{state="writing"} 1\n...\n')),(0,r.kt)("h3",{id:"\u66b4\u9732\u6279\u91cf\u8bf7\u6c42\u7aef\u70b9"},"\u66b4\u9732\u6279\u91cf\u8bf7\u6c42\u7aef\u70b9"),(0,r.kt)("p",null,"\u4ee5\u4e0b\u793a\u4f8b\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"public-api")," \u63d2\u4ef6\u6765\u66b4\u9732 ",(0,r.kt)("inlineCode",{parentName:"p"},"batch-requests")," \u63d2\u4ef6\u7684\u7aef\u70b9\uff0c\u8be5\u63d2\u4ef6\u7528\u4e8e\u5c06\u591a\u4e2a\u8bf7\u6c42\u7ec4\u5408\u6210\u4e00\u4e2a\u8bf7\u6c42\uff0c\u7136\u540e\u5c06\u5b83\u4eec\u53d1\u9001\u5230\u7f51\u5173\u3002"),(0,r.kt)("p",null,"\u521b\u5efa\u4e00\u4e2a\u6837\u672c\u8def\u7531\u5230 httpbin \u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"/anything")," \u7aef\u70b9\uff0c\u7528\u4e8e\u9a8c\u8bc1\u76ee\u7684\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl "http://127.0.0.1:9180/apisix/admin/routes" -X PUT \\\n  -H "X-API-KEY: ${admin_key}" \\\n  -d \'{\n    "id": "httpbin-anything",\n    "uri": "/anything",\n    "upstream": {\n      "type": "roundrobin",\n      "nodes": {\n        "httpbin.org:80": 1\n      }\n    }\n  }\'\n')),(0,r.kt)("p",null,"\u521b\u5efa\u4e00\u4e2a\u5e26\u6709 ",(0,r.kt)("inlineCode",{parentName:"p"},"public-api")," \u63d2\u4ef6\u7684\u8def\u7531\uff0c\u5e76\u5c06\u8def\u7531\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"uri")," \u8bbe\u7f6e\u4e3a\u8981\u66b4\u9732\u7684\u5185\u90e8\u7aef\u70b9\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl "http://127.0.0.1:9180/apisix/admin/routes" -X PUT \\\n  -H "X-API-KEY: ${admin_key}" \\\n  -d \'{\n    "id": "batch-requests",\n    "uri": "/apisix/batch-requests",\n    "plugins": {\n      "public-api": {}\n    }\n  }\'\n')),(0,r.kt)("p",null,"\u5411\u66b4\u9732\u7684\u6279\u91cf\u8bf7\u6c42\u7aef\u70b9\u53d1\u9001\u4e00\u4e2a\u5305\u542b GET \u548c POST \u8bf7\u6c42\u7684\u6d41\u6c34\u7ebf\u8bf7\u6c42\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl "http://127.0.0.1:9080/apisix/batch-requests" -X POST -d \'\n{\n  "pipeline": [\n    {\n      "method": "GET",\n      "path": "/anything"\n    },\n    {\n      "method": "POST",\n      "path": "/anything",\n      "body": "a post request"\n    }\n  ]\n}\'\n')),(0,r.kt)("p",null,"\u60a8\u5e94\u8be5\u4f1a\u6536\u5230\u4e24\u4e2a\u8bf7\u6c42\u7684\u54cd\u5e94\uff0c\u7c7b\u4f3c\u4e8e\u4ee5\u4e0b\u5185\u5bb9\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'[\n  {\n    "reason": "OK",\n    "body": "{\\n  \\"args\\": {}, \\n  \\"data\\": \\"\\", \\n  \\"files\\": {}, \\n  \\"form\\": {}, \\n  \\"headers\\": {\\n    \\"Accept\\": \\"*/*\\", \\n    \\"Host\\": \\"127.0.0.1\\", \\n    \\"User-Agent\\": \\"curl/8.6.0\\", \\n    \\"X-Amzn-Trace-Id\\": \\"Root=1-67b6e33b-5a30174f5534287928c54ca9\\", \\n    \\"X-Forwarded-Host\\": \\"127.0.0.1\\"\\n  }, \\n  \\"json\\": null, \\n  \\"method\\": \\"GET\\", \\n  \\"origin\\": \\"192.168.107.1, 43.252.208.84\\", \\n  \\"url\\": \\"http://127.0.0.1/anything\\"\\n}\\n",\n    "headers": {\n      ...\n    },\n    "status": 200\n  },\n  {\n    "reason": "OK",\n    "body": "{\\n  \\"args\\": {}, \\n  \\"data\\": \\"a post request\\", \\n  \\"files\\": {}, \\n  \\"form\\": {}, \\n  \\"headers\\": {\\n    \\"Accept\\": \\"*/*\\", \\n    \\"Content-Length\\": \\"14\\", \\n    \\"Host\\": \\"127.0.0.1\\", \\n    \\"User-Agent\\": \\"curl/8.6.0\\", \\n    \\"X-Amzn-Trace-Id\\": \\"Root=1-67b6e33b-0eddcec07f154dac0d77876f\\", \\n    \\"X-Forwarded-Host\\": \\"127.0.0.1\\"\\n  }, \\n  \\"json\\": null, \\n  \\"method\\": \\"POST\\", \\n  \\"origin\\": \\"192.168.107.1, 43.252.208.84\\", \\n  \\"url\\": \\"http://127.0.0.1/anything\\"\\n}\\n",\n    "headers": {\n      ...\n    },\n    "status": 200\n  }\n]\n')),(0,r.kt)("p",null,"\u5982\u679c\u60a8\u5e0c\u671b\u5728\u81ea\u5b9a\u4e49\u7aef\u70b9\u5904\u66b4\u9732\u6279\u91cf\u8bf7\u6c42\u7aef\u70b9\uff0c\u8bf7\u521b\u5efa\u4e00\u4e2a\u5e26\u6709 ",(0,r.kt)("inlineCode",{parentName:"p"},"public-api")," \u63d2\u4ef6\u7684\u8def\u7531\u3002\u60a8\u5e94\u8be5\u5c06\u8def\u7531\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"uri")," \u8bbe\u7f6e\u4e3a\u81ea\u5b9a\u4e49\u7aef\u70b9\u8def\u5f84\uff0c\u5e76\u5c06\u63d2\u4ef6\u7684 uri \u8bbe\u7f6e\u4e3a\u8981\u66b4\u9732\u7684\u5185\u90e8\u7aef\u70b9\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl "http://127.0.0.1:9180/apisix/admin/routes" -X PUT \\\n  -H "X-API-KEY: ${admin_key}" \\\n  -d \'{\n    "id": "batch-requests",\n    "uri": "/batch-requests",\n    "plugins": {\n      "public-api": {\n        "uri": "/apisix/batch-requests"\n      }\n    }\n  }\'\n')),(0,r.kt)("p",null,"\u73b0\u5728\u6279\u91cf\u8bf7\u6c42\u7aef\u70b9\u5e94\u8be5\u88ab\u66b4\u9732\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"/batch-requests"),"\uff0c\u800c\u4e0d\u662f ",(0,r.kt)("inlineCode",{parentName:"p"},"/apisix/batch-requests"),"\u3002\n\u5411\u66b4\u9732\u7684\u6279\u91cf\u8bf7\u6c42\u7aef\u70b9\u53d1\u9001\u4e00\u4e2a\u5305\u542b GET \u548c POST \u8bf7\u6c42\u7684\u6d41\u6c34\u7ebf\u8bf7\u6c42\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl "http://127.0.0.1:9080/batch-requests" -X POST -d \'\n{\n  "pipeline": [\n    {\n      "method": "GET",\n      "path": "/anything"\n    },\n    {\n      "method": "POST",\n      "path": "/anything",\n      "body": "a post request"\n    }\n  ]\n}\'\n')),(0,r.kt)("p",null,"\u60a8\u5e94\u8be5\u4f1a\u6536\u5230\u4e24\u4e2a\u8bf7\u6c42\u7684\u54cd\u5e94\uff0c\u7c7b\u4f3c\u4e8e\u4ee5\u4e0b\u5185\u5bb9\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'[\n  {\n    "reason": "OK",\n    "body": "{\\n  \\"args\\": {}, \\n  \\"data\\": \\"\\", \\n  \\"files\\": {}, \\n  \\"form\\": {}, \\n  \\"headers\\": {\\n    \\"Accept\\": \\"*/*\\", \\n    \\"Host\\": \\"127.0.0.1\\", \\n    \\"User-Agent\\": \\"curl/8.6.0\\", \\n    \\"X-Amzn-Trace-Id\\": \\"Root=1-67b6e33b-5a30174f5534287928c54ca9\\", \\n    \\"X-Forwarded-Host\\": \\"127.0.0.1\\"\\n  }, \\n  \\"json\\": null, \\n  \\"method\\": \\"GET\\", \\n  \\"origin\\": \\"192.168.107.1, 43.252.208.84\\", \\n  \\"url\\": \\"http://127.0.0.1/anything\\"\\n}\\n",\n    "headers": {\n      ...\n    },\n    "status": 200\n  },\n  {\n    "reason": "OK",\n    "body": "{\\n  \\"args\\": {}, \\n  \\"data\\": \\"a post request\\", \\n  \\"files\\": {}, \\n  \\"form\\": {}, \\n  \\"headers\\": {\\n    \\"Accept\\": \\"*/*\\", \\n    \\"Content-Length\\": \\"14\\", \\n    \\"Host\\": \\"127.0.0.1\\", \\n    \\"User-Agent\\": \\"curl/8.6.0\\", \\n    \\"X-Amzn-Trace-Id\\": \\"Root=1-67b6e33b-0eddcec07f154dac0d77876f\\", \\n    \\"X-Forwarded-Host\\": \\"127.0.0.1\\"\\n  }, \\n  \\"json\\": null, \\n  \\"method\\": \\"POST\\", \\n  \\"origin\\": \\"192.168.107.1, 43.252.208.84\\", \\n  \\"url\\": \\"http://127.0.0.1/anything\\"\\n}\\n",\n    "headers": {\n      ...\n    },\n    "status": 200\n  }\n]\n')))}u.isMDXComponent=!0}}]);