"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[91657],{3905:(e,t,n)=>{n.d(t,{Zo:()=>o,kt:()=>N});var i=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},l=Object.keys(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=i.createContext({}),s=function(e){var t=i.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},o=function(e){var t=s(e.components);return i.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},I=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,c=e.parentName,o=p(e,["components","mdxType","originalType","parentName"]),I=s(n),N=a,m=I["".concat(c,".").concat(N)]||I[N]||d[N]||l;return n?i.createElement(m,r(r({ref:t},o),{},{components:n})):i.createElement(m,r({ref:t},o))}));function N(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,r=new Array(l);r[0]=I;var p={};for(var c in t)hasOwnProperty.call(t,c)&&(p[c]=t[c]);p.originalType=e,p.mdxType="string"==typeof e?e:a,r[1]=p;for(var s=2;s<l;s++)r[s]=n[s];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}I.displayName="MDXCreateElement"},39978:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>r,default:()=>o,frontMatter:()=>l,metadata:()=>p,toc:()=>c});var i=n(87462),a=(n(67294),n(3905));const l={title:"Set Up SSO with Keycloak (OIDC)",keywords:["APISIX","API \u7f51\u5173","OIDC","Keycloak"],description:"\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 openid-connect \u63d2\u4ef6\uff0c\u901a\u8fc7 authorization code grant\u3001client credentials grant \u548c password grant \u5c06 APISIX \u4e0e Keycloak \u96c6\u6210\u3002"},r=void 0,p={unversionedId:"tutorials/keycloak-oidc",id:"version-3.14/tutorials/keycloak-oidc",isDocsHomePage:!1,title:"Set Up SSO with Keycloak (OIDC)",description:"\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 openid-connect \u63d2\u4ef6\uff0c\u901a\u8fc7 authorization code grant\u3001client credentials grant \u548c password grant \u5c06 APISIX \u4e0e Keycloak \u96c6\u6210\u3002",source:"@site/i18n/zh/docusaurus-plugin-content-docs-docs-apisix/version-3.14/tutorials/keycloak-oidc.md",sourceDirName:"tutorials",slug:"/tutorials/keycloak-oidc",permalink:"/zh/docs/apisix/tutorials/keycloak-oidc",editUrl:"/zh/edit#https://github.com/apache/apisix/edit/release/3.14/docs/zh/latest/tutorials/keycloak-oidc.md",tags:[],version:"3.14",frontMatter:{title:"Set Up SSO with Keycloak (OIDC)",keywords:["APISIX","API \u7f51\u5173","OIDC","Keycloak"],description:"\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 openid-connect \u63d2\u4ef6\uff0c\u901a\u8fc7 authorization code grant\u3001client credentials grant \u548c password grant \u5c06 APISIX \u4e0e Keycloak \u96c6\u6210\u3002"},sidebar:"version-3.14/docs",previous:{title:"WebSocket Authentication",permalink:"/zh/docs/apisix/tutorials/websocket-authentication"},next:{title:"API Gateway",permalink:"/zh/docs/apisix/terminology/api-gateway"}},c=[{value:"\u914d\u7f6e Keycloak",id:"\u914d\u7f6e-keycloak",children:[{value:"\u521b\u5efa Realm",id:"\u521b\u5efa-realm",children:[]},{value:"\u521b\u5efa Client",id:"\u521b\u5efa-client",children:[]},{value:"\u521b\u5efa User",id:"\u521b\u5efa-user",children:[]}]},{value:"\u83b7\u53d6 OIDC \u914d\u7f6e",id:"\u83b7\u53d6-oidc-\u914d\u7f6e",children:[{value:"\u83b7\u53d6\u53d1\u73b0\u7aef\u70b9",id:"\u83b7\u53d6\u53d1\u73b0\u7aef\u70b9",children:[]},{value:"\u83b7\u53d6\u5ba2\u6237\u7aef ID \u548c\u5bc6\u94a5",id:"\u83b7\u53d6\u5ba2\u6237\u7aef-id-\u548c\u5bc6\u94a5",children:[]}]},{value:"\u5b9e\u73b0 Authorization Code Grant",id:"\u5b9e\u73b0-authorization-code-grant",children:[{value:"\u4f7f\u7528\u6709\u6548\u51ed\u8bc1\u8fdb\u884c\u9a8c\u8bc1",id:"\u4f7f\u7528\u6709\u6548\u51ed\u8bc1\u8fdb\u884c\u9a8c\u8bc1",children:[]},{value:"\u4f7f\u7528\u65e0\u6548\u51ed\u8bc1\u8fdb\u884c\u9a8c\u8bc1",id:"\u4f7f\u7528\u65e0\u6548\u51ed\u8bc1\u8fdb\u884c\u9a8c\u8bc1",children:[]}]},{value:"\u5b9e\u73b0 Client Credential Grant",id:"\u5b9e\u73b0-client-credential-grant",children:[{value:"\u4f7f\u7528\u6709\u6548\u8bbf\u95ee\u4ee4\u724c\u8fdb\u884c\u9a8c\u8bc1",id:"\u4f7f\u7528\u6709\u6548\u8bbf\u95ee\u4ee4\u724c\u8fdb\u884c\u9a8c\u8bc1",children:[]},{value:"\u4f7f\u7528\u65e0\u6548\u8bbf\u95ee\u4ee4\u724c\u8fdb\u884c\u9a8c\u8bc1",id:"\u4f7f\u7528\u65e0\u6548\u8bbf\u95ee\u4ee4\u724c\u8fdb\u884c\u9a8c\u8bc1",children:[]},{value:"\u9a8c\u8bc1\u65e0\u8bbf\u95ee\u4ee4\u724c",id:"\u9a8c\u8bc1\u65e0\u8bbf\u95ee\u4ee4\u724c",children:[]}]},{value:"\u5b9e\u65bd Password Grant",id:"\u5b9e\u65bd-password-grant",children:[{value:"\u4f7f\u7528\u6709\u6548\u8bbf\u95ee\u4ee4\u724c\u8fdb\u884c\u9a8c\u8bc1",id:"\u4f7f\u7528\u6709\u6548\u8bbf\u95ee\u4ee4\u724c\u8fdb\u884c\u9a8c\u8bc1-1",children:[]},{value:"\u4f7f\u7528\u65e0\u6548\u8bbf\u95ee\u4ee4\u724c\u8fdb\u884c\u9a8c\u8bc1",id:"\u4f7f\u7528\u65e0\u6548\u8bbf\u95ee\u4ee4\u724c\u8fdb\u884c\u9a8c\u8bc1-1",children:[]},{value:"\u9a8c\u8bc1\u65e0\u8bbf\u95ee\u4ee4\u724c",id:"\u9a8c\u8bc1\u65e0\u8bbf\u95ee\u4ee4\u724c-1",children:[]},{value:"\u5237\u65b0\u4ee4\u724c",id:"\u5237\u65b0\u4ee4\u724c",children:[]}]}],s={toc:c};function o(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,i.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://openid.net/connect/"},"OpenID Connect (OIDC)")," \u662f ",(0,a.kt)("a",{parentName:"p",href:"https://www.rfc-editor.org/rfc/rfc6749"},"OAuth 2.0 \u534f\u8bae")," \u4e4b\u4e0a\u7684\u7b80\u5355\u8eab\u4efd\u5c42\u3002\u5b83\u5141\u8bb8\u5ba2\u6237\u7aef\u57fa\u4e8e\u8eab\u4efd\u63d0\u4f9b\u8005\u6267\u884c\u7684\u8eab\u4efd\u9a8c\u8bc1\u6765\u9a8c\u8bc1\u6700\u7ec8\u7528\u6237\u7684\u8eab\u4efd\uff0c\u4ee5\u53ca\u4ee5\u53ef\u4e92\u64cd\u4f5c\u548c\u7c7b\u4f3c REST \u7684\u65b9\u5f0f\u83b7\u53d6\u6709\u5173\u6700\u7ec8\u200b\u200b\u7528\u6237\u7684\u57fa\u672c\u4e2a\u4eba\u8d44\u6599\u4fe1\u606f\u3002\u501f\u52a9 APISIX \u548c ",(0,a.kt)("a",{parentName:"p",href:"https://www.keycloak.org/"},"Keycloak"),"\uff0c\u60a8\u53ef\u4ee5\u5b9e\u73b0\u57fa\u4e8e OIDC \u7684\u8eab\u4efd\u9a8c\u8bc1\u6d41\u7a0b\u6765\u4fdd\u62a4\u60a8\u7684 API \u5e76\u542f\u7528\u5355\u70b9\u767b\u5f55 (SSO)\u3002"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://www.keycloak.org/"},"Keycloak")," \u662f\u9002\u7528\u4e8e\u73b0\u4ee3\u5e94\u7528\u7a0b\u5e8f\u548c\u670d\u52a1\u7684\u5f00\u6e90\u8eab\u4efd\u548c\u8bbf\u95ee\u7ba1\u7406\u89e3\u51b3\u65b9\u6848\u3002Keycloak \u652f\u6301\u5355\u70b9\u767b\u5f55 (SSO)\uff0c\u8fd9\u4f7f\u5f97\u670d\u52a1\u80fd\u591f\u901a\u8fc7 OIDC \u548c OAuth 2.0 \u7b49\u534f\u8bae\u4e0e Keycloak \u8fdb\u884c\u4ea4\u4e92\u3002\u6b64\u5916\uff0cKeycloak \u8fd8\u652f\u6301\u5c06\u8eab\u4efd\u9a8c\u8bc1\u59d4\u6258\u7ed9\u7b2c\u4e09\u65b9\u8eab\u4efd\u63d0\u4f9b\u5546\uff0c\u4f8b\u5982 Facebook \u548c Google\u3002"),(0,a.kt)("p",null,"\u672c\u6559\u7a0b\u5c06\u5411\u60a8\u5c55\u793a\u5982\u4f55\u4f7f\u7528 ",(0,a.kt)("a",{parentName:"p",href:"/hub/openid-connect"},(0,a.kt)("inlineCode",{parentName:"a"},"openid-connect"))," \u63d2\u4ef6\uff0c\u901a\u8fc7 ",(0,a.kt)("a",{parentName:"p",href:"#implement-authorization-code-grant"},"authorization code grant"),"\u3001",(0,a.kt)("a",{parentName:"p",href:"#implement-client-credentials-grant"},"client credentials grant")," \u548c ",(0,a.kt)("a",{parentName:"p",href:"#implement-password-grant"},"password grant")," \u5c06 APISIX \u4e0e Keycloak \u96c6\u6210\u3002"),(0,a.kt)("h2",{id:"\u914d\u7f6e-keycloak"},"\u914d\u7f6e Keycloak"),(0,a.kt)("p",null,"\u5728 Docker \u4e2d\u4ee5 ",(0,a.kt)("a",{parentName:"p",href:"https://www.keycloak.org/server/configuration#_starting_keycloak_in_development_mode"},"\u5f00\u53d1\u6a21\u5f0f")," \u542f\u52a8\u4e00\u4e2a\u540d\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"apisix-quickstart-keycloak")," \u7684 Keycloak \u5b9e\u4f8b\uff0c\u7ba1\u7406\u5458\u540d\u79f0\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"quickstart-admin"),"\uff0c\u5bc6\u7801\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"quickstart-admin-pass"),"\uff0c\u66b4\u9732\u7684\u7aef\u53e3\u6620\u5c04\u5230\u5bbf\u4e3b\u673a\u4e0a\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"8080"),"\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"docker run -d --name \"apisix-quickstart-keycloak\" \\\n  -e 'KEYCLOAK_ADMIN=quickstart-admin' \\\n  -e 'KEYCLOAK_ADMIN_PASSWORD=quickstart-admin-pass' \\\n  -p 8080:8080 \\\n  quay.io/keycloak/keycloak:18.0.2 start-dev\n")),(0,a.kt)("p",null,"Keycloak \u63d0\u4f9b\u4e86\u4e00\u4e2a\u6613\u4e8e\u4f7f\u7528\u7684 Web UI\uff0c\u5e2e\u52a9\u7ba1\u7406\u5458\u7ba1\u7406\u6240\u6709\u8d44\u6e90\uff0c\u4f8b\u5982\u5ba2\u6237\u7aef\u3001\u89d2\u8272\u548c\u7528\u6237\u3002"),(0,a.kt)("p",null,"\u5728\u6d4f\u89c8\u5668\u4e2d\u5bfc\u822a\u5230 ",(0,a.kt)("inlineCode",{parentName:"p"},"http://localhost:8080")," \u4ee5\u8bbf\u95ee Keycloak \u7f51\u9875\uff0c\u7136\u540e\u5355\u51fb ",(0,a.kt)("strong",{parentName:"p"},"\u7ba1\u7406\u63a7\u5236\u53f0"),"\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://static.api7.ai/uploads/2023/03/30/ItcwYPIx_web-ui.png",alt:"web-ui"})),(0,a.kt)("p",null,"\u8f93\u5165\u7ba1\u7406\u5458\u7528\u6237\u540d ",(0,a.kt)("inlineCode",{parentName:"p"},"quickstart-admin")," \u548c\u5bc6\u7801 ",(0,a.kt)("inlineCode",{parentName:"p"},"quickstart-admin-pass")," \u5e76\u767b\u5f55\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://static.api7.ai/uploads/2023/03/30/6W3pjzE1_admin-signin.png",alt:"admin-signin"})),(0,a.kt)("p",null,"\u60a8\u9700\u8981\u5728\u4ee5\u4e0b\u6b65\u9aa4\u4e2d\u4fdd\u6301\u767b\u5f55\u72b6\u6001\u6765\u914d\u7f6e Keycloak\u3002"),(0,a.kt)("h3",{id:"\u521b\u5efa-realm"},"\u521b\u5efa Realm"),(0,a.kt)("p",null,"Keycloak \u4e2d\u7684 realm \u662f\u7ba1\u7406\u7528\u6237\u3001\u51ed\u8bc1\u548c\u89d2\u8272\u7b49\u8d44\u6e90\u7684\u5de5\u4f5c\u533a\u3002\u4e0d\u540c\u9886\u57df\u4e2d\u7684\u8d44\u6e90\u5f7c\u6b64\u9694\u79bb\u3002\u60a8\u9700\u8981\u4e3a APISIX \u521b\u5efa\u4e00\u4e2a\u540d\u4e3a",(0,a.kt)("inlineCode",{parentName:"p"},"quickstart-realm")," \u7684 realm\u3002"),(0,a.kt)("p",null,"\u5728\u5de6\u4fa7\u83dc\u5355\u4e2d\uff0c\u5c06\u9f20\u6807\u60ac\u505c\u5728 ",(0,a.kt)("strong",{parentName:"p"},"Master")," \u4e0a\uff0c\u7136\u540e\u5728\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 ",(0,a.kt)("strong",{parentName:"p"},"Add realm"),"\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://static.api7.ai/uploads/2023/03/30/S1Xvqliv_create-realm.png",alt:"create-realm"})),(0,a.kt)("p",null,"\u8f93\u5165 realm \u540d\u79f0 ",(0,a.kt)("inlineCode",{parentName:"p"},"quickstart-realm"),"\uff0c\u7136\u540e\u5355\u51fb ",(0,a.kt)("inlineCode",{parentName:"p"},"__Create__")," \u8fdb\u884c\u521b\u5efa\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://static.api7.ai/uploads/2023/03/30/jwb7QU8k_add-realm.png",alt:"add-realm"})),(0,a.kt)("h3",{id:"\u521b\u5efa-client"},"\u521b\u5efa Client"),(0,a.kt)("p",null,"Keycloak \u4e2d\u7684 client \u662f\u8bf7\u6c42 Keycloak \u5bf9\u7528\u6237\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u7684\u5b9e\u4f53\u3002\u66f4\u591a\u60c5\u51b5\u4e0b\uff0cclient \u662f\u5e0c\u671b\u4f7f\u7528 Keycloak \u4fdd\u62a4\u81ea\u8eab\u5b89\u5168\u5e76\u63d0\u4f9b\u5355\u70b9\u767b\u5f55\u89e3\u51b3\u65b9\u6848\u7684\u5e94\u7528\u7a0b\u5e8f\u3002APISIX \u76f8\u5f53\u4e8e\u8d1f\u8d23\u5411 Keycloak \u53d1\u8d77\u8eab\u4efd\u9a8c\u8bc1\u8bf7\u6c42\u7684 client\uff0c\u56e0\u6b64\u60a8\u9700\u8981\u521b\u5efa\u5176\u5bf9\u5e94\u7684\u5ba2\u6237\u7aef\uff0c\u540d\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"apisix-quickstart-client"),"\u3002"),(0,a.kt)("p",null,"\u5355\u51fb ",(0,a.kt)("strong",{parentName:"p"},"Clients")," > ",(0,a.kt)("strong",{parentName:"p"},"Create"),"\uff0c\u6253\u5f00 ",(0,a.kt)("strong",{parentName:"p"},"Add Client")," \u9875\u9762\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://static.api7.ai/uploads/2023/03/30/qLom0axN_create-client.png",alt:"create-client"})),(0,a.kt)("p",null,"\u8f93\u5165 ",(0,a.kt)("strong",{parentName:"p"},"Client ID")," \u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"apisix-quickstart-client"),"\uff0c\u7136\u540e\u9009\u62e9 ",(0,a.kt)("strong",{parentName:"p"},"Client Protocol")," \u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"openid-connect")," \u5e76 ",(0,a.kt)("strong",{parentName:"p"},"Save"),":"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://static.api7.ai/uploads/2023/03/30/X5on2r7x_add-client.png",alt:"add-client"})),(0,a.kt)("p",null,"Client ",(0,a.kt)("inlineCode",{parentName:"p"},"apisix-quickstart-client")," \u5df2\u521b\u5efa\u3002\u91cd\u5b9a\u5411\u5230\u8be6\u7ec6\u4fe1\u606f\u9875\u9762\u540e\uff0c\u9009\u62e9 ",(0,a.kt)("inlineCode",{parentName:"p"},"confidential")," \u4f5c\u4e3a ",(0,a.kt)("strong",{parentName:"p"},"Access Type"),":"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://static.api7.ai/uploads/2023/03/30/v70c8y9F_config-client.png",alt:"config-client"})),(0,a.kt)("p",null,"\u5f53\u7528\u6237\u5728 SSO \u671f\u95f4\u767b\u5f55\u6210\u529f\u65f6\uff0cKeycloak \u4f1a\u643a\u5e26\u72b6\u6001\u548c\u4ee3\u7801\u5c06\u5ba2\u6237\u7aef\u91cd\u5b9a\u5411\u5230 ",(0,a.kt)("strong",{parentName:"p"},"Valid Redirect URIs")," \u4e2d\u7684\u5730\u5740\u3002\u4e3a\u7b80\u5316\u64cd\u4f5c\uff0c\u8f93\u5165\u901a\u914d\u7b26 ",(0,a.kt)("inlineCode",{parentName:"p"},"*")," \u4ee5\u5c06\u4efb\u4f55 URI \u89c6\u4e3a\u6709\u6548\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://static.api7.ai/uploads/2023/03/30/xLxcyVkn_client-redirect.png",alt:"client-redirect"})),(0,a.kt)("p",null,"\u5982\u679c\u60a8\u6b63\u5728 ",(0,a.kt)("a",{parentName:"p",href:"#implement-authorization-code-grant"},"\u4f7f\u7528 PKCE authorization code grant"),"\uff0c\u8bf7\u5728\u5ba2\u6237\u7aef\u7684\u9ad8\u7ea7\u8bbe\u7f6e\u4e2d\u914d\u7f6e PKCE \u8d28\u8be2\u65b9\u6cd5\uff1a"),(0,a.kt)("div",{style:{textAlign:"center"}},(0,a.kt)("img",{src:"https://static.api7.ai/uploads/2024/11/04/xvnCNb20_pkce-keycloak-revised.jpeg",alt:"PKCE keycloak configuration",style:{width:"70%"}})),(0,a.kt)("p",null,"\u5982\u679c\u60a8\u6b63\u5728\u5b9e\u65bd ",(0,a.kt)("a",{parentName:"p",href:"#implement-client-credentials-grant"},"client credentials grant"),"\uff0c\u8bf7\u4e3a client \u542f\u7528\u670d\u52a1\u5e10\u6237\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://static.api7.ai/uploads/2023/12/29/h1uNtghd_sa.png",alt:"enable-service-account"})),(0,a.kt)("p",null,"\u9009\u62e9 ",(0,a.kt)("strong",{parentName:"p"},"Save")," \u4ee5\u5e94\u7528\u81ea\u5b9a\u4e49\u914d\u7f6e\u3002"),(0,a.kt)("h3",{id:"\u521b\u5efa-user"},"\u521b\u5efa User"),(0,a.kt)("p",null,"Keycloak \u4e2d\u7684\u7528\u6237\u662f\u80fd\u591f\u767b\u5f55\u7cfb\u7edf\u7684\u5b9e\u4f53\u3002\u4ed6\u4eec\u53ef\u4ee5\u62e5\u6709\u4e0e\u81ea\u5df1\u76f8\u5173\u7684\u5c5e\u6027\uff0c\u4f8b\u5982\u7528\u6237\u540d\u3001\u7535\u5b50\u90ae\u4ef6\u548c\u5730\u5740\u3002"),(0,a.kt)("p",null,"\u5982\u679c\u60a8\u53ea\u5b9e\u65bd ",(0,a.kt)("a",{parentName:"p",href:"#implement-client-credentials-grant"},"client credentials grant"),"\uff0c\u5219\u53ef\u4ee5 ",(0,a.kt)("a",{parentName:"p",href:"#obtain-the-oidc-configuration"},"\u8df3\u8fc7\u6b64\u90e8\u5206"),"\u3002"),(0,a.kt)("p",null,"\u70b9\u51fb ",(0,a.kt)("strong",{parentName:"p"},"Users")," > ",(0,a.kt)("strong",{parentName:"p"},"Add user")," \u6253\u5f00 ",(0,a.kt)("strong",{parentName:"p"},"Add user")," \u9875\u9762\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://static.api7.ai/uploads/2023/03/30/onQEp23L_create-user.png",alt:"create-user"})),(0,a.kt)("p",null,"\u70b9\u51fb ",(0,a.kt)("strong",{parentName:"p"},"Users")," > ",(0,a.kt)("strong",{parentName:"p"},"Add user")," \u6253\u5f00 ",(0,a.kt)("strong",{parentName:"p"},"Add user")," \u9875\u9762\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://static.api7.ai/uploads/2023/03/30/EKhuhgML_add-user.png",alt:"add-user"})),(0,a.kt)("p",null,"\u70b9\u51fb ",(0,a.kt)("strong",{parentName:"p"},"Credentials"),"\uff0c\u7136\u540e\u5c06 ",(0,a.kt)("strong",{parentName:"p"},"Password")," \u8bbe\u7f6e\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"quickstart-user-pass"),"\u3002\u5c06 ",(0,a.kt)("strong",{parentName:"p"},"Temporary")," \u5207\u6362\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"OFF")," \u4ee5\u5173\u95ed\u9650\u5236\uff0c\u8fd9\u6837\u60a8\u7b2c\u4e00\u6b21\u767b\u5f55\u65f6\u5c31\u65e0\u9700\u66f4\u6539\u5bc6\u7801\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://static.api7.ai/uploads/2023/03/30/rQKEAEnh_user-pass.png",alt:"user-pass"})),(0,a.kt)("h2",{id:"\u83b7\u53d6-oidc-\u914d\u7f6e"},"\u83b7\u53d6 OIDC \u914d\u7f6e"),(0,a.kt)("p",null,"\u5728\u672c\u8282\u4e2d\uff0c\u60a8\u5c06\u4ece Keycloak \u83b7\u53d6\u5173\u952e\u7684 OIDC \u914d\u7f6e\u5e76\u5c06\u5176\u5b9a\u4e49\u4e3a shell \u53d8\u91cf\u3002\u672c\u8282\u4e4b\u540e\u7684\u6b65\u9aa4\u5c06\u4f7f\u7528\u8fd9\u4e9b\u53d8\u91cf\u901a\u8fc7 shell \u547d\u4ee4\u914d\u7f6e OIDC\u3002"),(0,a.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"\u6253\u5f00\u4e00\u4e2a\u5355\u72ec\u7684\u7ec8\u7aef\u6309\u7167\u6b65\u9aa4\u64cd\u4f5c\u5e76\u5b9a\u4e49\u76f8\u5173\u7684 shell \u53d8\u91cf\u3002\u7136\u540e\u672c\u8282\u4e4b\u540e\u7684\u6b65\u9aa4\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u5b9a\u4e49\u7684\u53d8\u91cf\u3002"))),(0,a.kt)("h3",{id:"\u83b7\u53d6\u53d1\u73b0\u7aef\u70b9"},"\u83b7\u53d6\u53d1\u73b0\u7aef\u70b9"),(0,a.kt)("p",null,"\u5355\u51fb ",(0,a.kt)("strong",{parentName:"p"},"Realm Settings"),"\uff0c\u7136\u540e\u53f3\u952e\u5355\u51fb ",(0,a.kt)("strong",{parentName:"p"},"OpenID Endpoints Configuration")," \u5e76\u590d\u5236\u94fe\u63a5\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://static.api7.ai/uploads/2023/03/30/526lbJbg_get-discovery.png",alt:"get-discovery"})),(0,a.kt)("p",null,"\u8be5\u94fe\u63a5\u5e94\u4e0e\u4ee5\u4e0b\u5185\u5bb9\u76f8\u540c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"http://localhost:8080/realms/quickstart-realm/.well-known/openid-configuration\n")),(0,a.kt)("p",null,"\u5728 OIDC \u8eab\u4efd\u9a8c\u8bc1\u671f\u95f4\u9700\u8981\u4f7f\u7528\u6b64\u7aef\u70b9\u516c\u5f00\u7684\u914d\u7f6e\u503c\u3002\u4f7f\u7528\u60a8\u7684\u4e3b\u673a IP \u66f4\u65b0\u5730\u5740\u5e76\u4fdd\u5b58\u5230\u73af\u5883\u53d8\u91cf\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"export KEYCLOAK_IP=192.168.42.145    # replace with your host IP\nexport OIDC_DISCOVERY=http://${KEYCLOAK_IP}:8080/realms/quickstart-realm/.well-known/openid-configuration\n")),(0,a.kt)("h3",{id:"\u83b7\u53d6\u5ba2\u6237\u7aef-id-\u548c\u5bc6\u94a5"},"\u83b7\u53d6\u5ba2\u6237\u7aef ID \u548c\u5bc6\u94a5"),(0,a.kt)("p",null,"\u5355\u51fb ",(0,a.kt)("strong",{parentName:"p"},"Clients")," > ",(0,a.kt)("inlineCode",{parentName:"p"},"apisix-quickstart-client")," > ",(0,a.kt)("strong",{parentName:"p"},"Credentials"),"\uff0c\u5e76\u4ece ",(0,a.kt)("strong",{parentName:"p"},"Secret")," \u590d\u5236\u5ba2\u6237\u7aef\u5bc6\u94a5\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://static.api7.ai/uploads/2023/03/30/MwYmU20v_client-id.png",alt:"client-ID"})),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://static.api7.ai/uploads/2023/03/30/f9iOG8aN_client-secret.png",alt:"client-secret"})),(0,a.kt)("p",null,"\u5c06 OIDC \u5ba2\u6237\u7aef ID \u548c\u5bc6\u94a5\u4fdd\u5b58\u5230\u73af\u5883\u53d8\u91cf\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"export OIDC_CLIENT_ID=apisix-quickstart-client\nexport OIDC_CLIENT_SECRET=bSaIN3MV1YynmtXvU8lKkfeY0iwpr9cH  # replace with your value\n")),(0,a.kt)("h2",{id:"\u5b9e\u73b0-authorization-code-grant"},"\u5b9e\u73b0 Authorization Code Grant"),(0,a.kt)("p",null,"Authorization Code Grant \u7531 Web \u548c\u79fb\u52a8\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u3002\u6d41\u7a0b\u4ece\u6388\u6743\u670d\u52a1\u5668\u5728\u6d4f\u89c8\u5668\u4e2d\u663e\u793a\u767b\u5f55\u9875\u9762\u5f00\u59cb\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u5176\u4e2d\u8f93\u5165\u5176\u51ed\u636e\u3002\u5728\u6b64\u8fc7\u7a0b\u4e2d\uff0c\u5c06\u77ed\u671f\u6388\u6743\u7801\u4ea4\u6362\u4e3a\u8bbf\u95ee\u4ee4\u724c\uff0cAPISIX \u5c06\u5176\u5b58\u50a8\u5728\u6d4f\u89c8\u5668\u4f1a\u8bdd cookie \u4e2d\uff0c\u5e76\u5c06\u968f\u8bbf\u95ee\u4e0a\u6e38\u8d44\u6e90\u670d\u52a1\u5668\u7684\u6bcf\u6b21\u8bf7\u6c42\u4e00\u8d77\u53d1\u9001\u3002"),(0,a.kt)("p",null,"\u8981\u5b9e\u73b0 Authorization Code Grant\uff0c\u8bf7\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"openid-connect")," \u63d2\u4ef6\u521b\u5efa\u4e00\u4e2a\u8def\u7531\uff0c\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'curl -i "http://127.0.0.1:9180/apisix/admin/routes" -X PUT -d \'\n{\n  "id": "auth-with-oidc",\n  "uri":"/anything/*",\n  "plugins": {\n    "openid-connect": {\n      "bearer_only": false,\n      "session": {\n        "secret": "change_to_whatever_secret_you_want"\n      },\n      "client_id": "\'"$OIDC_CLIENT_ID"\'",\n      "client_secret": "\'"$OIDC_CLIENT_SECRET"\'",\n      "discovery": "\'"$OIDC_DISCOVERY"\'",\n      "scope": "openid profile",\n      "redirect_uri": "http://localhost:9080/anything/callback"\n    }\n  },\n  "upstream":{\n    "type":"roundrobin",\n    "nodes":{\n      "httpbin.org:80":1\n    }\n  }\n}\'\n')),(0,a.kt)("p",null,"\u6216\u8005\uff0c\u5982\u679c\u60a8\u60f3\u4f7f\u7528 PKCE \u5b9e\u73b0 authorization code grant\uff0c\u8bf7\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"openid-connect")," \u63d2\u4ef6\u521b\u5efa\u4e00\u4e2a\u8def\u7531\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'curl -i "http://127.0.0.1:9180/apisix/admin/routes" -X PUT -d \'\n{\n  "id": "auth-with-oidc",\n  "uri":"/anything/*",\n  "plugins": {\n    "openid-connect": {\n      "bearer_only": false,\n      "session": {\n        "secret": "change_to_whatever_secret_you_want"\n      },\n      "use_pkce": true,\n      "client_id": "\'"$OIDC_CLIENT_ID"\'",\n      "client_secret": "\'"$OIDC_CLIENT_SECRET"\'",\n      "discovery": "\'"$OIDC_DISCOVERY"\'",\n      "scope": "openid profile",\n      "redirect_uri": "http://localhost:9080/anything/callback"\n    }\n  },\n  "upstream":{\n    "type":"roundrobin",\n    "nodes":{\n      "httpbin.org:80":1\n    }\n  }\n}\'\n')),(0,a.kt)("h3",{id:"\u4f7f\u7528\u6709\u6548\u51ed\u8bc1\u8fdb\u884c\u9a8c\u8bc1"},"\u4f7f\u7528\u6709\u6548\u51ed\u8bc1\u8fdb\u884c\u9a8c\u8bc1"),(0,a.kt)("p",null,"\u5728\u6d4f\u89c8\u5668\u4e2d\u5bfc\u822a\u81f3 ",(0,a.kt)("inlineCode",{parentName:"p"},"http://127.0.0.1:9080/anything/test"),"\u3002\u8bf7\u6c42\u5c06\u91cd\u5b9a\u5411\u5230\u767b\u5f55\u9875\u9762\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://static.api7.ai/uploads/2023/03/30/i38u1x9a_validate-sign.png",alt:"test-sign-on"})),(0,a.kt)("p",null,"\u4f7f\u7528\u6b63\u786e\u7684\u7528\u6237\u540d ",(0,a.kt)("inlineCode",{parentName:"p"},"quickstart-user")," \u548c\u5bc6\u7801 ",(0,a.kt)("inlineCode",{parentName:"p"},"quickstart-user-pass")," \u767b\u5f55\u3002\u5982\u679c\u6210\u529f\uff0c\u8bf7\u6c42\u5c06\u88ab\u8f6c\u53d1\u5230 ",(0,a.kt)("inlineCode",{parentName:"p"},"httpbin.org"),"\uff0c\u60a8\u5e94\u8be5\u4f1a\u770b\u5230\u7c7b\u4f3c\u4ee5\u4e0b\u5185\u5bb9\u7684\u54cd\u5e94\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "args": {},\n  "data": "",\n  "files": {},\n  "form": {},\n  "headers": {\n    "Accept": "text/html..."\n    ...\n  },\n  "json": null,\n  "method": "GET",\n  "origin": "127.0.0.1, 59.71.244.81",\n  "url": "http://127.0.0.1/anything/test"\n}\n')),(0,a.kt)("h3",{id:"\u4f7f\u7528\u65e0\u6548\u51ed\u8bc1\u8fdb\u884c\u9a8c\u8bc1"},"\u4f7f\u7528\u65e0\u6548\u51ed\u8bc1\u8fdb\u884c\u9a8c\u8bc1"),(0,a.kt)("p",null,"\u4f7f\u7528\u9519\u8bef\u7684\u51ed\u8bc1\u767b\u5f55\u3002\u60a8\u5e94\u8be5\u4f1a\u770b\u5230\u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://static.api7.ai/uploads/2023/03/31/YOuSYX1r_validate-sign-failed.png",alt:"test-sign-failed"})),(0,a.kt)("h2",{id:"\u5b9e\u73b0-client-credential-grant"},"\u5b9e\u73b0 Client Credential Grant"),(0,a.kt)("p",null,"\u5728 client credential grant \u4e2d\uff0c\u5ba2\u6237\u7aef\u65e0\u9700\u4efb\u4f55\u7528\u6237\u53c2\u4e0e\u5373\u53ef\u83b7\u5f97\u8bbf\u95ee\u4ee4\u724c\u3002\u5b83\u901a\u5e38\u7528\u4e8e\u673a\u5668\u5bf9\u673a\u5668 (M2M) \u901a\u4fe1\u3002"),(0,a.kt)("p",null,"\u8981\u5b9e\u73b0 client credential grant\uff0c\u8bf7\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"openid-connect")," \u63d2\u4ef6\u521b\u5efa\u8def\u7531\uff0c\u4ee5\u4f7f\u7528\u8eab\u4efd\u63d0\u4f9b\u8005\u7684 JWKS \u7aef\u70b9\u6765\u9a8c\u8bc1\u4ee4\u724c\u3002\u7aef\u70b9\u5c06\u4ece\u53d1\u73b0\u6587\u6863\u4e2d\u83b7\u53d6\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'curl -i "http://127.0.0.1:9180/apisix/admin/routes" -X PUT -d \'\n{\n  "id": "auth-with-oidc",\n  "uri":"/anything/*",\n  "plugins": {\n    "openid-connect": {\n      "use_jwks": true,\n      "client_id": "\'"$OIDC_CLIENT_ID"\'",\n      "client_secret": "\'"$OIDC_CLIENT_SECRET"\'",\n      "discovery": "\'"$OIDC_DISCOVERY"\'",\n      "scope": "openid profile",\n      "redirect_uri": "http://localhost:9080/anything/callback"\n    }\n  },\n  "upstream":{\n    "type":"roundrobin",\n    "nodes":{\n      "httpbin.org:80":1\n    }\n  }\n}\'\n')),(0,a.kt)("p",null,"\u6216\u8005\uff0c\u5982\u679c\u60a8\u60f3\u4f7f\u7528\u81ea\u7701\u7aef\u70b9\u6765\u9a8c\u8bc1\u4ee4\u724c\uff0c\u8bf7\u6309\u5982\u4e0b\u65b9\u5f0f\u521b\u5efa\u8def\u7531\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'curl -i "http://127.0.0.1:9180/apisix/admin/routes" -X PUT -d \'\n{\n  "id": "auth-with-oidc",\n  "uri":"/anything/*",\n  "plugins": {\n    "openid-connect": {\n      "bearer_only": true,\n      "client_id": "\'"$OIDC_CLIENT_ID"\'",\n      "client_secret": "\'"$OIDC_CLIENT_SECRET"\'",\n      "discovery": "\'"$OIDC_DISCOVERY"\'",\n      "scope": "openid profile",\n      "redirect_uri": "http://localhost:9080/anything/callback"\n    }\n  },\n  "upstream":{\n    "type":"roundrobin",\n    "nodes":{\n      "httpbin.org:80":1\n    }\n  }\n}\'\n')),(0,a.kt)("p",null,"\u81ea\u7701\u7aef\u70b9\u5c06\u4ece\u53d1\u73b0\u6587\u6863\u4e2d\u83b7\u53d6\u3002"),(0,a.kt)("h3",{id:"\u4f7f\u7528\u6709\u6548\u8bbf\u95ee\u4ee4\u724c\u8fdb\u884c\u9a8c\u8bc1"},"\u4f7f\u7528\u6709\u6548\u8bbf\u95ee\u4ee4\u724c\u8fdb\u884c\u9a8c\u8bc1"),(0,a.kt)("p",null,"\u5728 ",(0,a.kt)("a",{parentName:"p",href:"https://www.keycloak.org/docs/latest/securing_apps/#token-endpoint"},"\u4ee4\u724c\u7aef\u70b9")," \u83b7\u53d6 Keycloak \u670d\u52a1\u5668\u7684\u8bbf\u95ee\u4ee4\u724c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"curl -i \"http://$KEYCLOAK_IP:8080/realms/quickstart-realm/protocol/openid-connect/token\" -X POST \\\n  -d 'grant_type=client_credentials' \\\n  -d 'client_id='$OIDC_CLIENT_ID'' \\\n  -d 'client_secret='$OIDC_CLIENT_SECRET''\n")),(0,a.kt)("p",null,"\u9884\u671f\u54cd\u5e94\u7c7b\u4f3c\u4e8e\u4ee5\u4e0b\u5185\u5bb9\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},'{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJoT3ludlBPY2d6Y3VWWnYtTU42bXZKMUczb0dOX2d6MFo3WFl6S2FSa1NBIn0.eyJleHAiOjE3MDM4MjU1NjQsImlhdCI6MTcwMzgyNTI2NCwianRpIjoiMWQ4NWE4N2UtZDFhMC00NThmLThiMTItNGZiYWM2ODA5YmYwIiwiaXNzIjoiaHR0cDovLzE5Mi4xNjguMS44Mzo4MDgwL3JlYWxtcy9xdWlja3N0YXJ0LXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjE1OGUzOWFlLTk0YjAtNDI3Zi04ZGU3LTU3MTRhYWYwOGYzOSIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFwaXNpeC1xdWlja3N0YXJ0LWNsaWVudCIsImFjciI6IjEiLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZGVmYXVsdC1yb2xlcy1xdWlja3N0YXJ0LXJlYWxtIiwib2ZmbGluZV9hY2Nlc3MiLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoiZW1haWwgcHJvZmlsZSIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiY2xpZW50SG9zdCI6IjE3Mi4xNy4wLjEiLCJjbGllbnRJZCI6ImFwaXNpeC1xdWlja3N0YXJ0LWNsaWVudCIsInByZWZlcnJlZF91c2VybmFtZSI6InNlcnZpY2UtYWNjb3VudC1hcGlzaXgtcXVpY2tzdGFydC1jbGllbnQiLCJjbGllbnRBZGRyZXNzIjoiMTcyLjE3LjAuMSJ9.TltzSXqrJuVID7aGrb35jn-oc07U_-jugSn-3jKz4A44LwtAsME_8b3qkmR4boMOIht_5pF6bnnp70MFAlg6JKu4_yIQDxF_GAHjnZXEO8OCKhtIKwXm2w-hnnJVIhIdGkIVkbPP0HfILuar_m0hpa53VpPBGYR-OS4pyh0KTUs8MB22xAEqyz9zjCm6SX9vXCqgeVkSpRW2E8NaGEbAdY25uY-ZC4dI_pON87Ey5e8GdD6HQLXQlGIOdCDi3N7k0HDoD9TZRv2bMRPfy4zVYm1ZlClIuF79A-ZBwr0c-XYuq7t6EY0gPGEXB-s0SaKlrIU5S9JBeVXRzYvqAih41g","expires_in":300,"refresh_expires_in":0,"token_type":"Bearer","not-before-policy":0,"scope":"email profile"}\n')),(0,a.kt)("p",null,"\u5c06\u8bbf\u95ee\u4ee4\u724c\u4fdd\u5b58\u5230\u73af\u5883\u53d8\u91cf\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'# replace with your access token\nexport ACCESS_TOKEN="eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJoT3ludlBPY2d6Y3VWWnYtTU42bXZKMUczb0dOX2d6MFo3WFl6S2FSa1NBIn0.eyJleHAiOjE3MDM4MjU1NjQsImlhdCI6MTcwMzgyNTI2NCwianRpIjoiMWQ4NWE4N2UtZDFhMC00NThmLThiMTItNGZiYWM2ODA5YmYwIiwiaXNzIjoiaHR0cDovLzE5Mi4xNjguMS44Mzo4MDgwL3JlYWxtcy9xdWlja3N0YXJ0LXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjE1OGUzOWFlLTk0YjAtNDI3Zi04ZGU3LTU3MTRhYWYwOGYzOSIsInR5cCI6IkJlYXJlciIsImF6cCI6ImFwaXNpeC1xdWlja3N0YXJ0LWNsaWVudCIsImFjciI6IjEiLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZGVmYXVsdC1yb2xlcy1xdWlja3N0YXJ0LXJlYWxtIiwib2ZmbGluZV9hY2Nlc3MiLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoiZW1haWwgcHJvZmlsZSIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiY2xpZW50SG9zdCI6IjE3Mi4xNy4wLjEiLCJjbGllbnRJZCI6ImFwaXNpeC1xdWlja3N0YXJ0LWNsaWVudCIsInByZWZlcnJlZF91c2VybmFtZSI6InNlcnZpY2UtYWNjb3VudC1hcGlzaXgtcXVpY2tzdGFydC1jbGllbnQiLCJjbGllbnRBZGRyZXNzIjoiMTcyLjE3LjAuMSJ9.TltzSXqrJuVID7aGrb35jn-oc07U_-jugSn-3jKz4A44LwtAsME_8b3qkmR4boMOIht_5pF6bnnp70MFAlg6JKu4_yIQDxF_GAHjnZXEO8OCKhtIKwXm2w-hnnJVIhIdGkIVkbPP0HfILuar_m0hpa53VpPBGYR-OS4pyh0KTUs8MB22xAEqyz9zjCm6SX9vXCqgeVkSpRW2E8NaGEbAdY25uY-ZC4dI_pON87Ey5e8GdD6HQLXQlGIOdCDi3N7k0HDoD9TZRv2bMRPfy4zVYm1ZlClIuF79A-ZBwr0c-XYuq7t6EY0gPGEXB-s0SaKlrIU5S9JBeVXRzYvqAih41g"\n')),(0,a.kt)("p",null,"\u4f7f\u7528\u6709\u6548\u7684\u8bbf\u95ee\u4ee4\u724c\u5411\u8def\u7531\u53d1\u9001\u8bf7\u6c42\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'curl -i "http://127.0.0.1:9080/anything/test" -H "Authorization: Bearer $ACCESS_TOKEN"\n')),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"HTTP/1.1 200 OK")," \u54cd\u5e94\u9a8c\u8bc1\u5bf9\u4e0a\u6e38\u8d44\u6e90\u7684\u8bf7\u6c42\u662f\u5426\u5df2\u83b7\u5f97\u6388\u6743\u3002"),(0,a.kt)("h3",{id:"\u4f7f\u7528\u65e0\u6548\u8bbf\u95ee\u4ee4\u724c\u8fdb\u884c\u9a8c\u8bc1"},"\u4f7f\u7528\u65e0\u6548\u8bbf\u95ee\u4ee4\u724c\u8fdb\u884c\u9a8c\u8bc1"),(0,a.kt)("p",null,"\u4f7f\u7528\u65e0\u6548\u8bbf\u95ee\u4ee4\u724c\u5411\u8def\u7531\u53d1\u9001\u8bf7\u6c42\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'curl -i "http://127.0.0.1:9080/anything/test" -H "Authorization: Bearer invalid-access-token"\n')),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"HTTP/1.1 401 Unauthorized")," \u54cd\u5e94\u9a8c\u8bc1 OIDC \u63d2\u4ef6\u662f\u5426\u62d2\u7edd\u4e86\u5177\u6709\u65e0\u6548\u8bbf\u95ee\u4ee4\u724c\u7684\u8bf7\u6c42\u3002"),(0,a.kt)("h3",{id:"\u9a8c\u8bc1\u65e0\u8bbf\u95ee\u4ee4\u724c"},"\u9a8c\u8bc1\u65e0\u8bbf\u95ee\u4ee4\u724c"),(0,a.kt)("p",null,"\u5411\u65e0\u8bbf\u95ee\u4ee4\u724c\u7684\u8def\u7531\u53d1\u9001\u8bf7\u6c42\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'curl -i "http://127.0.0.1:9080/anything/test"\n')),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"HTTP/1.1 401 Unauthorized")," \u54cd\u5e94\u9a8c\u8bc1 OIDC \u63d2\u4ef6\u62d2\u7edd\u6ca1\u6709\u8bbf\u95ee\u4ee4\u724c\u7684\u8bf7\u6c42\u3002"),(0,a.kt)("h2",{id:"\u5b9e\u65bd-password-grant"},"\u5b9e\u65bd Password Grant"),(0,a.kt)("p",null,"Password Grant \u662f\u4e00\u79cd\u5c06\u7528\u6237\u51ed\u636e\u4ea4\u6362\u4e3a\u8bbf\u95ee\u4ee4\u724c\u7684\u4f20\u7edf\u65b9\u6cd5\u3002"),(0,a.kt)("p",null,"\u8981\u5b9e\u65bd Password Grant\uff0c\u8bf7\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"openid-connect")," \u63d2\u4ef6\u521b\u5efa\u8def\u7531\uff0c\u4ee5\u4f7f\u7528\u8eab\u4efd\u63d0\u4f9b\u8005\u7684 JWKS \u7aef\u70b9\u6765\u9a8c\u8bc1\u4ee4\u724c\u3002\u7aef\u70b9\u5c06\u4ece\u53d1\u73b0\u6587\u6863\u4e2d\u83b7\u53d6\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'curl -i "http://127.0.0.1:9180/apisix/admin/routes" -X PUT -d \'\n{\n  "id": "auth-with-oidc",\n  "uri":"/anything/*",\n  "plugins": {\n    "openid-connect": {\n      "use_jwks": true,\n      "client_id": "\'"$OIDC_CLIENT_ID"\'",\n      "client_secret": "\'"$OIDC_CLIENT_SECRET"\'",\n      "discovery": "\'"$OIDC_DISCOVERY"\'",\n      "scope": "openid profile",\n      "redirect_uri": "http://localhost:9080/anything/callback"\n    }\n  },\n  "upstream":{\n    "type":"roundrobin",\n    "nodes":{\n      "httpbin.org:80":1\n    }\n  }\n}\'\n')),(0,a.kt)("h3",{id:"\u4f7f\u7528\u6709\u6548\u8bbf\u95ee\u4ee4\u724c\u8fdb\u884c\u9a8c\u8bc1-1"},"\u4f7f\u7528\u6709\u6548\u8bbf\u95ee\u4ee4\u724c\u8fdb\u884c\u9a8c\u8bc1"),(0,a.kt)("p",null,"\u5728 ",(0,a.kt)("a",{parentName:"p",href:"https://www.keycloak.org/docs/latest/securing_apps/#token-endpoint"},"\u4ee4\u724c\u7aef\u70b9")," \u83b7\u53d6 Keycloak \u670d\u52a1\u5668\u7684\u8bbf\u95ee\u4ee4\u724c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"OIDC_USER=quickstart-user\nOIDC_PASSWORD=quickstart-user-pass\ncurl -i \"http://$KEYCLOAK_IP:8080/realms/quickstart-realm/protocol/openid-connect/token\" -X POST \\\n  -d 'grant_type=password' \\\n  -d 'client_id='$OIDC_CLIENT_ID'' \\\n  -d 'client_secret='$OIDC_CLIENT_SECRET'' \\\n  -d 'username='$OIDC_USER'' \\\n  -d 'password='$OIDC_PASSWORD''\n")),(0,a.kt)("p",null,"\u9884\u671f\u54cd\u5e94\u7c7b\u4f3c\u4e8e\u4ee5\u4e0b\u5185\u5bb9\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},'{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJ6U3FFaXN6VlpuYi1sRWMzZkp0UHNpU1ZZcGs4RGN3dXI1Mkx5V05aQTR3In0.eyJleHAiOjE2ODAxNjA5NjgsImlhdCI6MTY4MDE2MDY2OCwianRpIjoiMzQ5MTc4YjQtYmExZC00ZWZjLWFlYTUtZGY2MzJiMDJhNWY5IiwiaXNzIjoiaHR0cDovLzE5Mi4xNjguNDIuMTQ1OjgwODAvcmVhbG1zL3F1aWNrc3RhcnQtcmVhbG0iLCJhdWQiOiJhY2NvdW50Iiwic3ViIjoiMTg4MTVjM2EtNmQwNy00YTY2LWJjZjItYWQ5NjdmMmIwMTFmIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiYXBpc2l4LXF1aWNrc3RhcnQtY2xpZW50Iiwic2Vzc2lvbl9zdGF0ZSI6ImIxNmIyNjJlLTEwNTYtNDUxNS1hNDU1LWYyNWUwNzdjY2I3NiIsImFjciI6IjEiLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZGVmYXVsdC1yb2xlcy1xdWlja3N0YXJ0LXJlYWxtIiwib2ZmbGluZV9hY2Nlc3MiLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoicHJvZmlsZSBlbWFpbCIsInNpZCI6ImIxNmIyNjJlLTEwNTYtNDUxNS1hNDU1LWYyNWUwNzdjY2I3NiIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwicHJlZmVycmVkX3VzZXJuYW1lIjoicXVpY2tzdGFydC11c2VyIn0.uD_7zfZv5182aLXu9-YBzBDK0nr2mE4FWb_4saTog2JTqFTPZZa99Gm8AIDJx2ZUcZ_ElkATqNUZ4OpWmL2Se5NecMw3slJReewjD6xgpZ3-WvQuTGpoHdW5wN9-Rjy8ungilrnAsnDA3tzctsxm2w6i9KISxvZrzn5Rbk-GN6fxH01VC5eekkPUQJcJgwuJiEiu70SjGnm21xDN4VGkNRC6jrURoclv3j6AeOqDDIV95kA_MTfBswDFMCr2PQlj5U0RTndZqgSoxwFklpjGV09Azp_jnU7L32_Sq-8coZd0nj5mSdbkJLJ8ZDQDV_PP3HjCP7EHdy4P6TyZ7oGvjw","expires_in":300,"refresh_expires_in":1800,"refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0YjFiNTQ3Yi0zZmZjLTQ5YzQtYjE2Ni03YjdhNzIxMjk1ODcifQ.eyJleHAiOjE2ODAxNjI0NjgsImlhdCI6MTY4MDE2MDY2OCwianRpIjoiYzRjNjNlMTEtZTdlZS00ZmEzLWJlNGYtNDMyZWQ4ZmY5OTQwIiwiaXNzIjoiaHR0cDovLzE5Mi4xNjguNDIuMTQ1OjgwODAvcmVhbG1zL3F1aWNrc3RhcnQtcmVhbG0iLCJhdWQiOiJodHRwOi8vMTkyLjE2OC40Mi4xNDU6ODA4MC9yZWFsbXMvcXVpY2tzdGFydC1yZWFsbSIsInN1YiI6IjE4ODE1YzNhLTZkMDctNGE2Ni1iY2YyLWFkOTY3ZjJiMDExZiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJhcGlzaXgtcXVpY2tzdGFydC1jbGllbnQiLCJzZXNzaW9uX3N0YXRlIjoiYjE2YjI2MmUtMTA1Ni00NTE1LWE0NTUtZjI1ZTA3N2NjYjc2Iiwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwic2lkIjoiYjE2YjI2MmUtMTA1Ni00NTE1LWE0NTUtZjI1ZTA3N2NjYjc2In0.8xYP4bhDg1U9B5cTaEVD7B4oxNp8wwAYEynUne_Jm78","token_type":"Bearer","not-before-policy":0,"session_state":"b16b262e-1056-4515-a455-f25e077ccb76","scope":"profile email"}\n')),(0,a.kt)("p",null,"\u5c06\u8bbf\u95ee\u4ee4\u724c\u548c\u5237\u65b0\u4ee4\u724c\u4fdd\u5b58\u5230\u73af\u5883\u53d8\u91cf\u4e2d\u3002\u5237\u65b0\u4ee4\u724c\u5c06\u5728\u5237\u65b0\u4ee4\u724c\u6b65\u9aa4\u4e2d\u4f7f\u7528\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'# replace with your access token\nexport ACCESS_TOKEN="eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJ6U3FFaXN6VlpuYi1sRWMzZkp0UHNpU1ZZcGs4RGN3dXI1Mkx5V05aQTR3In0.eyJleHAiOjE2ODAxNjA5NjgsImlhdCI6MTY4MDE2MDY2OCwianRpIjoiMzQ5MTc4YjQtYmExZC00ZWZjLWFlYTUtZGY2MzJiMDJhNWY5IiwiaXNzIjoiaHR0cDovLzE5Mi4xNjguNDIuMTQ1OjgwODAvcmVhbG1zL3F1aWNrc3RhcnQtcmVhbG0iLCJhdWQiOiJhY2NvdW50Iiwic3ViIjoiMTg4MTVjM2EtNmQwNy00YTY2LWJjZjItYWQ5NjdmMmIwMTFmIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiYXBpc2l4LXF1aWNrc3RhcnQtY2xpZW50Iiwic2Vzc2lvbl9zdGF0ZSI6ImIxNmIyNjJlLTEwNTYtNDUxNS1hNDU1LWYyNWUwNzdjY2I3NiIsImFjciI6IjEiLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZGVmYXVsdC1yb2xlcy1xdWlja3N0YXJ0LXJlYWxtIiwib2ZmbGluZV9hY2Nlc3MiLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoicHJvZmlsZSBlbWFpbCIsInNpZCI6ImIxNmIyNjJlLTEwNTYtNDUxNS1hNDU1LWYyNWUwNzdjY2I3NiIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwicHJlZmVycmVkX3VzZXJuYW1lIjoicXVpY2tzdGFydC11c2VyIn0.uD_7zfZv5182aLXu9-YBzBDK0nr2mE4FWb_4saTog2JTqFTPZZa99Gm8AIDJx2ZUcZ_ElkATqNUZ4OpWmL2Se5NecMw3slJReewjD6xgpZ3-WvQuTGpoHdW5wN9-Rjy8ungilrnAsnDA3tzctsxm2w6i9KISxvZrzn5Rbk-GN6fxH01VC5eekkPUQJcJgwuJiEiu70SjGnm21xDN4VGkNRC6jrURoclv3j6AeOqDDIV95kA_MTfBswDFMCr2PQlj5U0RTndZqgSoxwFklpjGV09Azp_jnU7L32_Sq-8coZd0nj5mSdbkJLJ8ZDQDV_PP3HjCP7EHdy4P6TyZ7oGvjw"\nexport REFRESH_TOKEN="eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI0YjFiNTQ3Yi0zZmZjLTQ5YzQtYjE2Ni03YjdhNzIxMjk1ODcifQ.eyJleHAiOjE2ODAxNjI0NjgsImlhdCI6MTY4MDE2MDY2OCwianRpIjoiYzRjNjNlMTEtZTdlZS00ZmEzLWJlNGYtNDMyZWQ4ZmY5OTQwIiwiaXNzIjoiaHR0cDovLzE5Mi4xNjguNDIuMTQ1OjgwODAvcmVhbG1zL3F1aWNrc3RhcnQtcmVhbG0iLCJhdWQiOiJodHRwOi8vMTkyLjE2OC40Mi4xNDU6ODA4MC9yZWFsbXMvcXVpY2tzdGFydC1yZWFsbSIsInN1YiI6IjE4ODE1YzNhLTZkMDctNGE2Ni1iY2YyLWFkOTY3ZjJiMDExZiIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJhcGlzaXgtcXVpY2tzdGFydC1jbGllbnQiLCJzZXNzaW9uX3N0YXRlIjoiYjE2YjI2MmUtMTA1Ni00NTE1LWE0NTUtZjI1ZTA3N2NjYjc2Iiwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwic2lkIjoiYjE2YjI2MmUtMTA1Ni00NTE1LWE0NTUtZjI1ZTA3N2NjYjc2In0.8xYP4bhDg1U9B5cTaEVD7B4oxNp8wwAYEynUne_Jm78"\n')),(0,a.kt)("p",null,"\u4f7f\u7528\u6709\u6548\u7684\u8bbf\u95ee\u4ee4\u724c\u5411\u8def\u7531\u53d1\u9001\u8bf7\u6c42\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'curl -i "http://127.0.0.1:9080/anything/test" -H "Authorization: Bearer $ACCESS_TOKEN"\n')),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"HTTP/1.1 200 OK")," \u54cd\u5e94\u9a8c\u8bc1\u5bf9\u4e0a\u6e38\u8d44\u6e90\u7684\u8bf7\u6c42\u662f\u5426\u5df2\u83b7\u5f97\u6388\u6743\u3002"),(0,a.kt)("h3",{id:"\u4f7f\u7528\u65e0\u6548\u8bbf\u95ee\u4ee4\u724c\u8fdb\u884c\u9a8c\u8bc1-1"},"\u4f7f\u7528\u65e0\u6548\u8bbf\u95ee\u4ee4\u724c\u8fdb\u884c\u9a8c\u8bc1"),(0,a.kt)("p",null,"\u4f7f\u7528\u65e0\u6548\u8bbf\u95ee\u4ee4\u724c\u5411\u8def\u7531\u53d1\u9001\u8bf7\u6c42\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'curl -i "http://127.0.0.1:9080/anything/test" -H "Authorization: Bearer invalid-access-token"\n')),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"HTTP/1.1 401 Unauthorized")," \u54cd\u5e94\u9a8c\u8bc1 OIDC \u63d2\u4ef6\u662f\u5426\u62d2\u7edd\u4e86\u5177\u6709\u65e0\u6548\u8bbf\u95ee\u4ee4\u724c\u7684\u8bf7\u6c42\u3002"),(0,a.kt)("h3",{id:"\u9a8c\u8bc1\u65e0\u8bbf\u95ee\u4ee4\u724c-1"},"\u9a8c\u8bc1\u65e0\u8bbf\u95ee\u4ee4\u724c"),(0,a.kt)("p",null,"\u5411\u65e0\u8bbf\u95ee\u4ee4\u724c\u7684\u8def\u7531\u53d1\u9001\u8bf7\u6c42\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'curl -i "http://127.0.0.1:9080/anything/test"\n')),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"HTTP/1.1 401 Unauthorized")," \u54cd\u5e94\u9a8c\u8bc1 OIDC \u63d2\u4ef6\u62d2\u7edd\u6ca1\u6709\u8bbf\u95ee\u4ee4\u724c\u7684\u8bf7\u6c42\u3002"),(0,a.kt)("h3",{id:"\u5237\u65b0\u4ee4\u724c"},"\u5237\u65b0\u4ee4\u724c"),(0,a.kt)("p",null,"\u8981\u5237\u65b0\u8bbf\u95ee\u4ee4\u724c\uff0c\u8bf7\u5411 Keycloak \u4ee4\u724c\u7aef\u70b9\u53d1\u9001\u8bf7\u6c42\uff0c\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"curl -i \"http://$KEYCLOAK_IP:8080/realms/quickstart-realm/protocol/openid-connect/token\" -X POST \\\n  -d 'grant_type=refresh_token' \\\n  -d 'client_id='$OIDC_CLIENT_ID'' \\\n  -d 'client_secret='$OIDC_CLIENT_SECRET'' \\\n  -d 'refresh_token='$REFRESH_TOKEN''\n")),(0,a.kt)("p",null,"\u60a8\u5e94\u8be5\u770b\u5230\u7c7b\u4f3c\u4ee5\u4e0b\u7684\u54cd\u5e94\uff0c\u5176\u4e2d\u5305\u542b\u65b0\u7684\u8bbf\u95ee\u4ee4\u724c\u548c\u5237\u65b0\u4ee4\u724c\uff0c\u60a8\u53ef\u4ee5\u5c06\u5176\u7528\u4e8e\u540e\u7eed\u8bf7\u6c42\u548c\u4ee4\u724c\u5237\u65b0\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},'{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJTdnVwLXlPMHhDdTJBVi1za2pCZ0h6SHZNaG1mcDVDQWc0NHpYb2QxVTlNIn0.eyJleHAiOjE3MzAyNzQ3NDUsImlhdCI6MTczMDI3NDQ0NSwianRpIjoiMjk2Mjk5MWUtM2ExOC00YWFiLWE0NzAtODgxNWEzNjZjZmM4IiwiaXNzIjoiaHR0cDovLzE5Mi4xNjguMTUyLjU6ODA4MC9yZWFsbXMvcXVpY2tzdGFydC1yZWFsbSIsImF1ZCI6ImFjY291bnQiLCJzdWIiOiI2ZWI0ZTg0Yy00NmJmLTRkYzUtOTNkMC01YWM5YzE5MWU0OTciLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJhcGlzaXgtcXVpY2tzdGFydC1jbGllbnQiLCJzZXNzaW9uX3N0YXRlIjoiNTU2ZTQyYjktMjE2Yi00NTEyLWE5ZjAtNzE3ZTAyYTQ4MjZhIiwiYWNyIjoiMSIsInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJkZWZhdWx0LXJvbGVzLXF1aWNrc3RhcnQtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJlbWFpbCBwcm9maWxlIiwic2lkIjoiNTU2ZTQyYjktMjE2Yi00NTEyLWE5ZjAtNzE3ZTAyYTQ4MjZhIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJxdWlja3N0YXJ0LXVzZXIifQ.KLqn1LQdazoPBqLLR856C35XpqbMO9I7WFt3KrDxZF1N8vwv4AvZYWI_2rsbdjCakh9JmPgyYRgEGufYLiDBsqy9CrMVejAIJPYsJIonIXBCp5Ysu92ODJuqtTKuuJ6K7dam7fisBFfCBbVvGspnZ3p0caedpOaF_kSd-F8ARHKVsmkuX3_ucDrP3UctjEXHezefTY4YHjNMB9wuMDPXX2vXt2BsOasnznsIHHHX-ZH8JY6eEfWPtfx0qAED6lVZICT6Rqj_j5-Cf9ogzFtLyy_XvtG9BbHME2B8AXYpxdzqxOxmVVbZdrB8elfmFjs1R3vUn2r3xA9hO_znZo_IoQ","expires_in":300,"refresh_expires_in":1800,"refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIwYWYwZTAwYy0xMThjLTRkNDktYmIwMS1iMDIwNDE3MmFjMzIifQ.eyJleHAiOjE3MzAyNzYyNDUsImlhdCI6MTczMDI3NDQ0NSwianRpIjoiZGQyZTJmYTktN2Y3Zi00MjM5LWEwODAtNWQyZDFiZTdjNzk4IiwiaXNzIjoiaHR0cDovLzE5Mi4xNjguMTUyLjU6ODA4MC9yZWFsbXMvcXVpY2tzdGFydC1yZWFsbSIsImF1ZCI6Imh0dHA6Ly8xOTIuMTY4LjE1Mi41OjgwODAvcmVhbG1zL3F1aWNrc3RhcnQtcmVhbG0iLCJzdWIiOiI2ZWI0ZTg0Yy00NmJmLTRkYzUtOTNkMC01YWM5YzE5MWU0OTciLCJ0eXAiOiJSZWZyZXNoIiwiYXpwIjoiYXBpc2l4LXF1aWNrc3RhcnQtY2xpZW50Iiwic2Vzc2lvbl9zdGF0ZSI6IjU1NmU0MmI5LTIxNmItNDUxMi1hOWYwLTcxN2UwMmE0ODI2YSIsInNjb3BlIjoiZW1haWwgcHJvZmlsZSIsInNpZCI6IjU1NmU0MmI5LTIxNmItNDUxMi1hOWYwLTcxN2UwMmE0ODI2YSJ9.Uad4BVuojHfyxqedFT5BHliWjIqVDbjM-Xeme0G2AAg","token_type":"Bearer","not-before-policy":0,"session_state":"556e42b9-216b-4512-a9f0-717e02a4826a","scope":"email profile"}\n')))}o.isMDXComponent=!0}}]);