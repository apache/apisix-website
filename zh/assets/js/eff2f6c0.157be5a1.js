"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[36122],{35318:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>u});var r=a(27378);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,r,l=function(e,t){if(null==e)return{};var a,r,l={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var p=r.createContext({}),o=function(e){var t=r.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):c(c({},t),e)),a},d=function(e){var t=o(e.components);return r.createElement(p.Provider,{value:t},e.children)},I={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},s=r.forwardRef((function(e,t){var a=e.components,l=e.mdxType,n=e.originalType,p=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),s=o(a),u=l,h=s["".concat(p,".").concat(u)]||s[u]||I[u]||n;return a?r.createElement(h,c(c({ref:t},d),{},{components:a})):r.createElement(h,c({ref:t},d))}));function u(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var n=a.length,c=new Array(n);c[0]=s;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:l,c[1]=i;for(var o=2;o<n;o++)c[o]=a[o];return r.createElement.apply(null,c)}return r.createElement.apply(null,a)}s.displayName="MDXCreateElement"},71617:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>c,default:()=>I,frontMatter:()=>n,metadata:()=>i,toc:()=>o});var r=a(25773),l=(a(27378),a(35318));const n={title:"\u57fa\u4e8e TiDB \u7684 API \u7f51\u5173\u9ad8\u53ef\u7528\u914d\u7f6e\u6700\u4f73\u5b9e\u8df5",authors:[{name:"\u5f20\u8d85",title:"Author",url:"https://github.com/tokers",image_url:"https://avatars.githubusercontent.com/u/10428333?v=4"},{name:"\u9976\u96c5\u60e0",title:"Technical Writer",url:"https://github.com/EstelleRao",image_url:"https://github.com/EstelleRao.png"}],keywords:["API \u7f51\u5173","APISIX","TiDB","\u9ad8\u53ef\u7528","TiDB Hackathon"],description:"APISIX \u53c2\u8d5b\u56e2\u961f\u4ee5\u56db\u4eba\u7ec4\u961f\u65b9\u5f0f\u5728 TiDB Hackathon 2021 \u4e2d\u5448\u73b0\u4e86 TiDB \u4e0e APISIX \u5bf9\u63a5\u5b9e\u73b0\u901a\u7528\u914d\u7f6e\u4e2d\u5fc3\u7684\u80fd\u529b\u3002\u672c\u6587\u5c06\u5e26\u6765\u8be5\u9879\u76ee\u80cc\u540e\u7684\u4e00\u4e9b\u6545\u4e8b\u4ee5\u53ca\u672a\u6765\u5c55\u671b\u3002",tags:["Ecosystem"]},c=void 0,i={permalink:"/zh/blog/2022/04/22/apisix-with-tidb-practice",source:"@site/blog/2022/04/22/apisix-with-tidb-practice.md",title:"\u57fa\u4e8e TiDB \u7684 API \u7f51\u5173\u9ad8\u53ef\u7528\u914d\u7f6e\u6700\u4f73\u5b9e\u8df5",description:"APISIX \u53c2\u8d5b\u56e2\u961f\u4ee5\u56db\u4eba\u7ec4\u961f\u65b9\u5f0f\u5728 TiDB Hackathon 2021 \u4e2d\u5448\u73b0\u4e86 TiDB \u4e0e APISIX \u5bf9\u63a5\u5b9e\u73b0\u901a\u7528\u914d\u7f6e\u4e2d\u5fc3\u7684\u80fd\u529b\u3002\u672c\u6587\u5c06\u5e26\u6765\u8be5\u9879\u76ee\u80cc\u540e\u7684\u4e00\u4e9b\u6545\u4e8b\u4ee5\u53ca\u672a\u6765\u5c55\u671b\u3002",date:"2022-04-22T00:00:00.000Z",formattedDate:"2022\u5e744\u670822\u65e5",tags:[{label:"Ecosystem",permalink:"/zh/blog/tags/ecosystem"}],readingTime:16.17,truncated:!0,authors:[{name:"\u5f20\u8d85",title:"Author",url:"https://github.com/tokers",image_url:"https://avatars.githubusercontent.com/u/10428333?v=4",imageURL:"https://avatars.githubusercontent.com/u/10428333?v=4"},{name:"\u9976\u96c5\u60e0",title:"Technical Writer",url:"https://github.com/EstelleRao",image_url:"https://github.com/EstelleRao.png",imageURL:"https://github.com/EstelleRao.png"}],prevItem:{title:"\u741a\u81f4\u8fdc\uff1a95 \u540e Apache Member \u7684\u6210\u957f\u4e4b\u8def",permalink:"/zh/blog/2022/04/29/interview-juzhiyuan-apache-member"},nextItem:{title:"APISIX jwt-auth \u63d2\u4ef6\u5b58\u5728\u9519\u8bef\u54cd\u5e94\u4e2d\u6cc4\u9732\u4fe1\u606f\u7684\u98ce\u9669\u516c\u544a\uff08CVE-2022-29266\uff09",permalink:"/zh/blog/2022/04/20/cve-2022-29266"}},p={authorsImageUrls:[void 0,void 0]},o=[{value:"\u9879\u76ee\u80cc\u666f",id:"\u9879\u76ee\u80cc\u666f",children:[{value:"Apache APISIX \u6280\u672f\u67b6\u6784",id:"apache-apisix-\u6280\u672f\u67b6\u6784",children:[],level:3},{value:"etcd \u7684\u5c40\u9650\u6027",id:"etcd-\u7684\u5c40\u9650\u6027",children:[{value:"\u81ea\u8eab\u67b6\u6784\u95ee\u9898",id:"\u81ea\u8eab\u67b6\u6784\u95ee\u9898",children:[],level:4},{value:"\u573a\u666f\u914d\u5408\u95ee\u9898",id:"\u573a\u666f\u914d\u5408\u95ee\u9898",children:[],level:4},{value:"\u6210\u672c\u95ee\u9898",id:"\u6210\u672c\u95ee\u9898",children:[],level:4}],level:3}],level:2},{value:"\u9879\u76ee\u52a8\u673a",id:"\u9879\u76ee\u52a8\u673a",children:[],level:2},{value:"\u9879\u76ee\u4ecb\u7ecd",id:"\u9879\u76ee\u4ecb\u7ecd",children:[{value:"\u65b9\u6848\u8bbe\u8ba1",id:"\u65b9\u6848\u8bbe\u8ba1",children:[{value:"\u5982\u4f55\u89e3\u8026 APISIX \u548c etcd\uff1f",id:"\u5982\u4f55\u89e3\u8026-apisix-\u548c-etcd",children:[],level:4},{value:"\u7834\u5c40\uff1a\u5f15\u5165\u989d\u5916\u7684\u4e2d\u95f4\u5c42",id:"\u7834\u5c40\u5f15\u5165\u989d\u5916\u7684\u4e2d\u95f4\u5c42",children:[],level:4}],level:3}],level:2},{value:"\u65b9\u6848\u5b9e\u65bd",id:"\u65b9\u6848\u5b9e\u65bd",children:[],level:2},{value:"\u65b9\u6848\u6548\u679c\uff1aetcd adapter \u7684\u8bde\u751f",id:"\u65b9\u6848\u6548\u679cetcd-adapter-\u7684\u8bde\u751f",children:[],level:2},{value:"\u672a\u6765\u8ba1\u5212",id:"\u672a\u6765\u8ba1\u5212",children:[{value:"\u4e3a Apache APISIX \u7684\u2f64\u6237\u63d0\u4f9b\u66f4\u591a\u7684\u914d\u7f6e\u4e2d\u5fc3\u9009\u62e9",id:"\u4e3a-apache-apisix-\u7684\u6237\u63d0\u4f9b\u66f4\u591a\u7684\u914d\u7f6e\u4e2d\u5fc3\u9009\u62e9",children:[],level:3},{value:"\u4e3a Apache APISIX Ingress Controller \u7684\u67b6\u6784\u6539\u826f\u52a9\u529b",id:"\u4e3a-apache-apisix-ingress-controller-\u7684\u67b6\u6784\u6539\u826f\u52a9\u529b",children:[],level:3},{value:"\u6350\u8d60\u7ed9 Apache \u57fa\u91d1\u4f1a\uff0c\u4f5c\u4e3a Apache APISIX \u5b50\u9879\u76ee\u8fdb\u884c\u5b75\u5316",id:"\u6350\u8d60\u7ed9-apache-\u57fa\u91d1\u4f1a\u4f5c\u4e3a-apache-apisix-\u5b50\u9879\u76ee\u8fdb\u884c\u5b75\u5316",children:[],level:3}],level:2}],d={toc:o};function I(e){let{components:t,...a}=e;return(0,l.kt)("wrapper",(0,r.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u5728 TiDB Hackathon 2021 \u7684\u6bd4\u8d5b\u4e2d\uff0cAPISIX \u53c2\u8d5b\u56e2\u961f\u4ee5\u56db\u4eba\u7ec4\u961f\u65b9\u5f0f\uff08\u961f\u957f\uff1a\u5f20\u8d85\uff0c\u961f\u5458\uff1a\u767d\u6cfd\u5e73\u3001\u5c60\u6b63\u677e\u3001\u9648\u5a67\u6657\uff09\u5448\u73b0\u4e86 TiDB \u4e0e Apache APISIX \u5bf9\u63a5\u5b9e\u73b0\u901a\u7528\u914d\u7f6e\u4e2d\u5fc3\u7684\u80fd\u529b\u3002\u672c\u6587\u5c06\u4e3a\u5927\u5bb6\u5e26\u6765\u8be5\u9879\u76ee\u80cc\u540e\u7684\u4e00\u4e9b\u6545\u4e8b\u4ee5\u53ca\u672a\u6765\u5c55\u671b\uff0c\u5982\u679c\u60a8\u5bf9\u8be5\u9879\u76ee\u611f\u5174\u8da3\uff0c\u4e5f\u6b22\u8fce\u968f\u65f6\u53c2\u4e0e\u5230\u9879\u76ee\u4e2d\u6765\u3002")),(0,l.kt)("h2",{id:"\u9879\u76ee\u80cc\u666f"},"\u9879\u76ee\u80cc\u666f"),(0,l.kt)("p",null,"API \u7f51\u5173\u4f5c\u4e3a\u5fae\u670d\u52a1\u67b6\u6784\u4e2d\u7684\u91cd\u8981\u7ec4\u4ef6\uff0c\u662f\u6d41\u91cf\u7684\u6838\u5fc3\u51fa\u5165\u53e3\uff0c\u7528\u4e8e\u7edf\u4e00\u5904\u7406\u548c\u4e1a\u52a1\u76f8\u5173\u7684\u8bf7\u6c42\uff0c\u53ef\u6709\u6548\u89e3\u51b3\u6d77\u91cf\u8bf7\u6c42\u3001\u6076\u610f\u8bbf\u95ee\u7b49\u95ee\u9898\uff0c\u4fdd\u969c\u4e1a\u52a1\u5b89\u5168\u6027\u4e0e\u7a33\u5b9a\u6027\u3002"),(0,l.kt)("p",null,"\u4f5c\u4e3a\u5f00\u6e90\u7684\u4e91\u539f\u751f API \u7f51\u5173\uff0cApache APISIX \u517c\u5177\u52a8\u6001\u3001\u5b9e\u65f6\u3001\u9ad8\u6027\u80fd\u4e09\u5927\u4f18\u52bf\uff0c\u53ef\u63d0\u4f9b\u8d1f\u8f7d\u5747\u8861\u3001\u52a8\u6001\u4e0a\u6e38\u3001\u7070\u5ea6\u53d1\u5e03\u3001\u670d\u52a1\u7194\u65ad\u3001\u9274\u6743\u8ba4\u8bc1\u3001\u53ef\u89c2\u6d4b\u6027\u7b49\u4e30\u5bcc\u7684\u6d41\u91cf\u7ba1\u7406\u529f\u80fd\uff0c\u5e2e\u52a9\u4f01\u4e1a\u5feb\u901f\u3001\u5b89\u5168\u5730\u5904\u7406 API \u548c\u5fae\u670d\u52a1\u6d41\u91cf\uff0c\u53ef\u5e94\u7528\u4e8e\u7f51\u5173\u3001Kubernetes Ingress \u548c\u670d\u52a1\u7f51\u683c\u7b49\u573a\u666f\u3002"),(0,l.kt)("p",null,"\u540c\u65f6\uff0cApache APISIX \u5df2\u901a\u8fc7\u5e7f\u6cdb\u7684\u751f\u6001\u5408\u4f5c\u5efa\u7acb\u8d77\u4e30\u5bcc\u7684\u793e\u533a\u751f\u6001\u3002Apache APISIX \u4e5f\u652f\u6301\u9ad8\u5ea6\u5b9a\u5236\u5316\uff0c\u652f\u6301 Wasm\uff0c\u53ef\u7528 Java\u3001Go\u3001Python \u7b49\u4e3b\u6d41\u8ba1\u7b97\u673a\u8bed\u8a00\u7f16\u5199\u63d2\u4ef6\u3002"),(0,l.kt)("h3",{id:"apache-apisix-\u6280\u672f\u67b6\u6784"},"Apache APISIX \u6280\u672f\u67b6\u6784"),(0,l.kt)("p",null,"Apache APISIX \u91c7\u7528\u4e86\u6570\u636e\u5e73\u9762\u4e0e\u63a7\u5236\u5e73\u9762\u5206\u79bb\u7684\u67b6\u6784\u65b9\u5f0f\uff0c\u901a\u8fc7\u914d\u7f6e\u4e2d\u5fc3\u63a5\u6536\u3001\u4e0b\u53d1\u914d\u7f6e\uff0c\u4f7f\u5f97\u6570\u636e\u5e73\u9762\u4e0d\u4f1a\u53d7\u5230\u63a7\u5236\u5e73\u9762\u5f71\u54cd\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://static.apiseven.com/202108/1650769844333-c2d90f33-8138-49cc-a511-0e96b75b47e8.png",alt:"APISIX \u67b6\u6784\u56fe"})),(0,l.kt)("p",null,"\u5728\u6b64\u67b6\u6784\u4e2d\uff0c\u6570\u636e\u5e73\u9762\u8d1f\u8d23\u63a5\u6536\u5e76\u5904\u7406\u8c03\u7528\u65b9\u8bf7\u6c42\uff0c\u4f7f\u7528 Lua \u4e0e NGINX \u52a8\u6001\u63a7\u5236\u8bf7\u6c42\u6d41\u91cf\uff0c\u53ef\u7528\u4e8e\u7ba1\u7406 API \u8bf7\u6c42\u7684\u5168\u751f\u547d\u5468\u671f\u3002\u63a7\u5236\u5e73\u9762\u5219\u5305\u542b\u4e86 Manager API \u548c\u9ed8\u8ba4\u914d\u7f6e\u4e2d\u5fc3 etcd\uff0c\u53ef\u7528\u4e8e\u7ba1\u7406 API \u7f51\u5173\u3002\u7ba1\u7406\u5458\u5728\u8bbf\u95ee\u5e76\u64cd\u4f5c\u63a7\u5236\u53f0\u65f6\uff0c\u63a7\u5236\u53f0\u5c06\u8c03\u7528 Manager API \u4e0b\u53d1\u914d\u7f6e\u5230 etcd\uff0c\u501f\u52a9 etcd watch \u673a\u5236\uff0c\u914d\u7f6e\u5c06\u5728\u7f51\u5173\u4e2d\u5b9e\u65f6\u751f\u6548\u3002"),(0,l.kt)("p",null,"\u914d\u7f6e\u4e2d\u5fc3\u9ed8\u8ba4\u4e3a etcd\uff0c\u4e5f\u652f\u6301 Consul\u3001Nacos\u3001Eureka \u7b49\u3002etcd \u5929\u7136\u652f\u6301\u5206\u5e03\u5f0f\u3001\u9ad8\u53ef\u7528\uff0c\u652f\u6301\u96c6\u7fa4\uff0c\u5e76\u4e14\u5728 K8s \u7b49\u9886\u57df\u6709\u5927\u91cf\u7684\u5e94\u7528\u5b9e\u8df5\uff0c\u4f7f\u5f97 APISIX \u53ef\u4ee5\u8f7b\u677e\u652f\u6301\u6beb\u79d2\u7ea7\u914d\u7f6e\u66f4\u65b0\u3001\u652f\u6491\u6570\u5343\u7f51\u5173\u8282\u70b9\uff0c\u4e14\u7f51\u5173\u8282\u70b9\u65e0\u72b6\u6001\uff0c\u53ef\u4efb\u610f\u6269\u7f29\u5bb9\u3002"),(0,l.kt)("h3",{id:"etcd-\u7684\u5c40\u9650\u6027"},"etcd \u7684\u5c40\u9650\u6027"),(0,l.kt)("h4",{id:"\u81ea\u8eab\u67b6\u6784\u95ee\u9898"},"\u81ea\u8eab\u67b6\u6784\u95ee\u9898"),(0,l.kt)("p",null,"\u9996\u5148 etcd \u57fa\u4e8e BoltDB\uff0c\u5bb9\u91cf\u5177\u6709\u4e0a\u9650 \u3002etcd \u7684\u9ed8\u8ba4\u5b58\u50a8\u4e0a\u9650\u4e3a 2 GB\uff0c\u5982\u679c\u4e0a\u9650\u8981\u6c42\u8d85\u8fc7 2 GB\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"p"},"--quota-backend-bytes")," \u53c2\u6570\u914d\u7f6e\u5b58\u50a8\uff0c\u6700\u5927\u53ef\u8c03\u6574\u81f3 8 GB\u3002\u4e00\u4e2a etcd \u96c6\u7fa4\u5982\u679c\u6709 8 GB \u7684\u5b58\u50a8\u91cf\uff0c\u5219\u8db3\u4ee5\u670d\u52a1\u4e00\u4e2a\u7f51\u5173\uff0c\u4f46\u5982\u679c\u540c\u65f6\u670d\u52a1 N \u4e2a APISIX \u96c6\u7fa4\uff0c\u5bb9\u91cf\u53ef\u80fd\u4e0d\u591f\u7528\uff0c\u6709\u53ef\u80fd\u4f1a\u5e26\u6765\u4e00\u4e9b\u9ebb\u70e6\u3002"),(0,l.kt)("p",null,"\u5176\u6b21\uff0cetcd \u672c\u8d28\u4e0a\u662f\u4e00\u4e2a CP \u7cfb\u7edf\uff0c\u65e0\u6cd5\u627f\u8f7d\u5927\u91cf\u7684\u5ba2\u6237\u7aef\u8fde\u63a5\u3002\u56e0\u4e3a etcd \u662f\u901a\u8fc7 Raft \u6765\u5b9e\u73b0\u5206\u5e03\u5f0f\u5171\u8bc6\uff0c\u6240\u6709\u7684\u8bfb\u5199\u8bf7\u6c42\u90fd\u4f1a\u7ecf\u7531 Raft \u7684 Leader \u8fdb\u884c\u5904\u7406\uff0c\u5927\u91cf\u7684\u5ba2\u6237\u7aef\u8fde\u63a5\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6574\u4e2a\u96c6\u7fa4\u7684\u8d1f\u8f7d\u504f\u9ad8\uff0c\u6709\u53ef\u80fd\u4f1a\u5f71\u54cd\u5230\u8c03\u7528\u8005\u3002"),(0,l.kt)("h4",{id:"\u573a\u666f\u914d\u5408\u95ee\u9898"},"\u573a\u666f\u914d\u5408\u95ee\u9898"),(0,l.kt)("p",null,"\u5728 Ingress \u548c Service Mesh \u7b49\u573a\u666f\uff0c\u4f7f\u7528 etcd \u76f8\u5bf9\u6765\u8bf4\u6709\u70b9\u8fc7\u91cd\uff0c\u6709\u4e9b\u7528\u6237\u4e0d\u5e0c\u671b\u90e8\u7f72\u9664\u63a7\u5236\u9762\u548c\u6570\u636e\u9762\u4ee5\u5916\u7684\u7ec4\u4ef6\u3002\u6bd4\u5982 NGINX Ingress Controller \u53ea\u9700\u4e00\u4e2a\u955c\u50cf\u5c31\u53ef\u4ee5\u8dd1\u8d77\u6765\uff0c\u4f46 APISIX Ingress Controller \u9664\u4e86 Ingress Controller \u63a7\u5236\u9762\u548c APISIX \u6570\u636e\u9762\uff0c\u8fd8\u6709\u4e00\u4e2a etcd\u3002\u5bf9\u7528\u6237\u6765\u8bf4\uff0c\u8fd9\u79cd\u6280\u672f\u67b6\u6784\u7684\u90e8\u7f72\u6210\u672c\u66f4\u9ad8\uff0c\u8fd8\u8981\u4fdd\u8bc1 etcd \u7684\u8fd0\u7ef4\u3002"),(0,l.kt)("p",null,"\u800c\u4e14\u672c\u8d28\u4e0a\uff0cetcd \u662f\u4e00\u4e2a\u5197\u4f59\u7ec4\u4ef6\uff0c\u5b8c\u5168\u53ef\u4ee5\u53bb\u6389\u3002K8s \u672c\u8eab\u652f\u6301\u5b58\u50a8\u670d\u52a1\uff0c\u6240\u6709\u7684\u914d\u7f6e\u4fe1\u606f\u3001\u5b58\u50a8\u5728 APISIX \u540e\u7aef\u7684 Endpoints \u4fe1\u606f\u90fd\u53ef\u4ee5\u4ece K8s \u7684 API Server \u83b7\u53d6\u3002\u5728\u8fd9\u79cd\u573a\u666f\u4f7f\u7528 etcd \u4f1a\u9020\u6210\u6574\u4e2a\u9009\u578b\u66f4\u52a0\u7b28\u91cd\u3002"),(0,l.kt)("p",null,"\u670d\u52a1\u7f51\u683c\u4e5f\u662f\u540c\u7406\u3002\u5728\u670d\u52a1\u7f51\u683c\u573a\u666f\u4f7f\u7528 APISIX\uff0c\u5982\u679c\u8fd8\u8981\u90e8\u7f72 etcd\uff0c\u6574\u4e2a\u9009\u578b\u5c31\u4f1a\u504f\u91cd\u3002\u800c\u4e14\u5728\u670d\u52a1\u7f51\u683c\u573a\u666f\uff0cPod \u7684\u6570\u91cf\u53ef\u80fd\u6210\u767e\u4e0a\u5343\u751a\u81f3\u4e0a\u4e07\uff0c\u8fd9\u79cd\u60c5\u51b5\u5f88\u5e38\u89c1\u3002\u5982\u679c\u4e0a\u4e07\u4e2a Pod \u5168\u90e8\u8fde\u5230 etcd\uff0cetcd \u4f1a\u6210\u4e3a\u6574\u4e2a\u670d\u52a1\u7684\u74f6\u9888\u3002"),(0,l.kt)("h4",{id:"\u6210\u672c\u95ee\u9898"},"\u6210\u672c\u95ee\u9898"),(0,l.kt)("p",null,"\u7b2c\u4e00\uff0cetcd \u7684\u8fd0\u7ef4\u6210\u672c\u8f83\u9ad8\uff0c\u6709\u4e9b\u516c\u53f8\u6ca1\u6709\u4e13\u95e8\u7684 etcd \u8fd0\u7ef4\u5de5\u7a0b\u5e08\u3002\u90e8\u7f72 etcd \u81f3\u5c11\u9700\u8981 3-5 \u4e2a\u5b9e\u4f8b\uff0cetcd \u6210\u529f\u8fd0\u884c\u540e\uff0c\u8fd8\u9700\u8981\u5b9a\u671f\u505a\u6570\u636e\u5907\u4efd\uff0c\u521b\u5efa\u5feb\u7167\u3002\u4e3a\u4e86\u76d1\u63a7 etcd \u7684\u8fd0\u884c\u60c5\u51b5\uff0c\u5b9e\u65f6\u4e86\u89e3 etcd \u7684\u5065\u5eb7\u72b6\u51b5\uff0c\u8fd8\u9700\u8981\u642d\u5efa\u53ef\u89c2\u6d4b\u6027\u7cfb\u7edf\uff0c\u63d0\u4f9b\u5fc5\u8981\u7684\u544a\u8b66\u652f\u6301\u3002\u5982\u679c\u4e00\u4e2a\u516c\u53f8\u6ca1\u6709\u4e13\u95e8\u7684 etcd \u8fd0\u7ef4\u5de5\u7a0b\u5e08\uff0c\u53ef\u80fd\u65e0\u6cd5\u505a\u597d etcd \u7684\u8fd0\u7ef4\u5de5\u4f5c\u3002"),(0,l.kt)("p",null,"\u7b2c\u4e8c\uff0c\u6709\u4e9b\u516c\u53f8\u6216\u7ec4\u7ec7\u6709\u957f\u671f\u4f7f\u7528\u7684\u4e2d\u95f4\u4ef6\u6216\u57fa\u7840\u8bbe\u65bd\uff0c\u5207\u6362\u914d\u7f6e\u4e2d\u5fc3\u4f1a\u5e26\u6765\u4e00\u5b9a\u7684\u6210\u672c\u3002\u5bf9\u8fd9\u4e9b\u516c\u53f8\u6216\u7ec4\u7ec7\u6765\u8bf4\uff0c\u4ed6\u4eec\u5f80\u5f80\u66f4\u5e0c\u671b\u590d\u2f64\u5df2\u6709\u7684\u4e2d\u95f4\u4ef6\u6216\u57fa\u7840\u8bbe\u65bd\u4f5c\u4e3a APISIX \u7684\u914d\u7f6e\u4e2d\u2f3c\uff0c\u2f50\u5982 TiDB\u3001Consul\u3001Apache ZooKeeper\uff0c\u4ece\u800c\u6536\u655b\u6280\u672f\u6808\uff0c\u907f\u514d\u5e26\u6765\u989d\u5916\u7684\u6210\u672c\u3002"),(0,l.kt)("h2",{id:"\u9879\u76ee\u52a8\u673a"},"\u9879\u76ee\u52a8\u673a"),(0,l.kt)("p",null,"\u57fa\u4e8e\u4ee5\u4e0a\u8003\u8651\uff0c\u6211\u4eec\u51b3\u5b9a\u7814\u7a76\u65b0\u7684\u65b9\u6848\uff0c\u6539\u53d8\u73b0\u5728\u8fc7\u91cd\u7684\u6280\u672f\u67b6\u6784\uff0c\u4e3a Apache APISIX \u7684\u7528\u6237\u63d0\u4f9b\u66f4\u7075\u6d3b\u7684\u9009\u62e9\uff0c\u4e0d\u88ab etcd \u7ed1\u5b9a\uff0c\u7f13\u89e3\u73b0\u6709\u7528\u6237\u7684 etcd \u8fd0\u7ef4\u538b\u529b\uff0c\u964d\u4f4e\u8fd0\u7ef4\u6210\u672c\uff0c\u540c\u65f6\u671f\u671b\u7ed9\u5230\u7528\u6237\u66f4\u591a\u3001\u66f4\u4f18\u7684\u9009\u62e9\uff0c\u7a81\u7834 etcd \u7684\u81ea\u8eab\u74f6\u9888\u3002"),(0,l.kt)("p",null,"\u89e3\u9664 APISIX \u548c etcd \u7684\u5f3a\u5173\u8054\uff0c\u8ba9\u7528\u6237\u62e5\u6709\u66f4\u591a\u3001\u66f4\u7075\u6d3b\u7684\u9009\u62e9\uff0c\u5176\u5b9e\u4e5f\u662f\u5f00\u6e90\u7684\u9b45\u529b\u6240\u5728\u3002\u5982\u679c\u80fd\u591f\u89e3\u9664\u8fd9\u4e00\u5c42\u9650\u5236\uff0c\u4e0d\u9650\u5236\u7528\u6237\u5982\u4f55\u7528\uff0c\u7528\u6237\u53ef\u80fd\u4f1a\u521b\u9020\u51fa\u66f4\u591a\u60ca\u559c\u3002"),(0,l.kt)("h2",{id:"\u9879\u76ee\u4ecb\u7ecd"},"\u9879\u76ee\u4ecb\u7ecd"),(0,l.kt)("h3",{id:"\u65b9\u6848\u8bbe\u8ba1"},"\u65b9\u6848\u8bbe\u8ba1"),(0,l.kt)("h4",{id:"\u5982\u4f55\u89e3\u8026-apisix-\u548c-etcd"},"\u5982\u4f55\u89e3\u8026 APISIX \u548c etcd\uff1f"),(0,l.kt)("p",null,"\u65b9\u6848\u8bbe\u8ba1\u4e4b\u521d\uff0c\u6211\u4eec\u8003\u8651\u7684\u7b2c\u4e00\u4e2a\u95ee\u9898\u662f\u5982\u4f55\u5b9e\u73b0 APISIX \u4e0e etcd \u7684\u89e3\u8026\uff0c\u56e0\u4e3a APISIX \u7684\u6838\u2f3c\u4ee3\u7801\u3001\u6570\u636e\u7ed3\u6784\u4e0e etcd \u5173\u7cfb\u5bc6\u5207\u3002\u8d1f\u8d23\u64cd\u4f5c\u914d\u7f6e\u7684 Admin API \u901a\u5e38\u4f1a\u5728\u8fd4\u56de\u503c\u91cc\u5e26\u4e0a etcd \u7684\u5143\u6570\u636e\u3002"),(0,l.kt)("p",null,"\u6bd4\u5982 etcd v3 \u7684 Revision\u3001etcd v2 \u7684 createdIndex\u3001modifiedIndex\uff0c\u751a\u81f3\u5728 APISIX \u7684\u6838\u5fc3\u903b\u8f91\u91cc\uff0c\u67d0\u4e2a\u8def\u7531\u6216\u8005\u67d0\u4e2a Upstream \u5bf9\u8c61\u4e5f\u4f1a\u5e26\u4e0a\u8fd9\u4e9b\u5143\u6570\u636e\u3002"),(0,l.kt)("p",null,"\u5982\u679c\u4ece\u6839\u672c\u4e0a\u6539\u9020 APISIX\uff0c\u6210\u672c\u4f1a\u8fc7\u9ad8\u3002\u5728\u5982\u6b64\u6838\u5fc3\u7684\u5730\u65b9\u8fdb\u884c\u6539\u9020\u53ef\u80fd\u4e5f\u4f1a\u5f71\u54cd APISIX \u73b0\u6709\u7684\u7a33\u5b9a\u6027\uff0c\u56e0\u6b64\u76f4\u63a5\u4fee\u6539 APISIX \u53ef\u80fd\u5e76\u4e0d\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u65b9\u6848\u3002"),(0,l.kt)("h4",{id:"\u7834\u5c40\u5f15\u5165\u989d\u5916\u7684\u4e2d\u95f4\u5c42"},"\u7834\u5c40\uff1a\u5f15\u5165\u989d\u5916\u7684\u4e2d\u95f4\u5c42"),(0,l.kt)("p",null,"\u5982\u679c\u76f4\u63a5\u6539\u9020\u6210\u672c\u592a\u9ad8\u4e14\u98ce\u9669\u592a\u5927\uff0c\u90a3\u4e48\u6211\u4eec\u662f\u4e0d\u662f\u53ef\u4ee5\u8003\u8651\u5f15\u5165\u4e00\u5c42\u989d\u5916\u7684\u4e2d\u95f4\u5c42\uff1f\u5728\u8ba1\u7b97\u673a\u754c\u6709\u4e00\u53e5\u540d\u8a00\u2014\u2014\u201c\u6ca1\u6709\u4ec0\u4e48\u95ee\u9898\u662f\u52a0\u4e00\u5c42\u89e3\u51b3\u4e0d\u4e86\u7684\u201d\u3002\u5982\u679c\u8981\u52a0\u5165\u4e00\u5c42\uff0c\u8fd9\u4e00\u5c42\u5177\u4f53\u8981\u8d1f\u8d23\u4ec0\u4e48\u4e8b\u60c5\uff1f\u505a\u4ec0\u4e48\u4e8b\u60c5\uff1f\u603b\u7ed3\u4e0b\u6765\uff0c\u8fd9\u4e00\u5c42\u9700\u8981\u5b8c\u6210\u4e24\u4e2a\u6bd4\u8f83\u91cd\u8981\u7684\u4e8b\u60c5\u3002"),(0,l.kt)("p",null,"\u7b2c\u4e00\uff0c\u8fd9\u4e2a\u989d\u5916\u7684\u4e2d\u95f4\u5c42\u9700\u63d0\u4f9b etcd v3 API \u5e76\u2f40\u6301 etcd gRPC Gateway\u3002\u76ee\u524d\uff0cAPISIX \u53ea\u652f\u6301 etcd v3\u3002\u5bf9 APISIX \u6765\u8bf4\uff0c\u8fd9\u4e2a\u4e2d\u95f4\u5c42\u4f9d\u7136\u662f\u4e00\u4e2a etcd\uff0c\u5b83\u5fc5\u987b\u63d0\u4f9b etcd v3 \u7684 API\u3002\u9664\u4e86\u63d0\u4f9b v3 \u7684 API\uff0c\u5b83\u8fd8\u8981\u652f\u6301 etcd \u7684 gRPC Gateway\uff0c\u56e0\u4e3a APISIX \u73b0\u5728\u8fd8\u662f\u901a\u8fc7 HTTP \u534f\u8bae\u548c etcd \u4ea4\u4e92\uff0c\u800c etcd v3 API \u662f\u57fa\u4e8e gRPC\uff0c\u6211\u4eec\u9700\u8981 etcd \u7684 gRPC Gateway \u628a HTTP \u7684\u8bf7\u6c42\u8f6c\u6210 gRPC \u8bf7\u6c42\uff0c\u4ece\u800c\u4f7f\u5f97\u6574\u4e2a\u4ea4\u4e92\u80fd\u591f\u987a\u5229\u8fdb\u884c\u4e0b\u53bb\u3002"),(0,l.kt)("p",null,"\u7b2c\u4e8c\uff0c\u8fd9\u4e2a\u989d\u5916\u7684\u4e2d\u95f4\u5c42\u80fd\u5bf9\u63a5\u5404\u79cd\u4e0d\u540c\u7684\u5b58\u50a8\u65b9\u6848\u3002\u6211\u4eec\u8981\u60f3\u6e05\u695a\u5982\u4f55\u652f\u6301 TiDB\u3001PostgreSQL\uff0cSQLite\uff0c\u751a\u81f3\u662f Consul\u3001Apachce ZooKeeper \u8fd9\u4e9b\u4e0d\u540c\u7684\u65b9\u6848\u3002"),(0,l.kt)("p",null,"\u53ea\u6709\u505a\u5230\u4e86\u8fd9\u4e24\u70b9\uff0c\u8fd9\u4e2a\u4e2d\u95f4\u5c42\u624d\u80fd\u5bf9\u63a5\u4e0d\u540c\u7684\u5b58\u50a8\u65b9\u6848\uff0c\u4ece\u800c\u7ed9 APISIX \u5e26\u6765\u5b8c\u6574\u7684\u914d\u7f6e\u4e2d\u5fc3\u7684\u529f\u80fd\u3002"),(0,l.kt)("h2",{id:"\u65b9\u6848\u5b9e\u65bd"},"\u65b9\u6848\u5b9e\u65bd"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://static.apiseven.com/202108/1650769803987-7a297f15-baa7-4817-8d3a-89a99a76c94b.png",alt:"\u67b6\u6784\u8bbe\u8ba1\u56fe"})),(0,l.kt)("p",null,"\u6709\u4e86\u8fd9\u4e2a\u4e2d\u95f4\u5c42\u540e\uff0c\u6211\u4eec\u8981\u600e\u4e48\u96c6\u6210 TiDB \u5462\uff1f\u5176\u5b9e\u6211\u4eec\u6709\u4e00\u4e2a\u7c7b\u4f3c\u7684\u9879\u76ee\u53ef\u4ee5\u53c2\u8003\u3002\u867d\u7136 K8s \u539f\u751f\u652f\u6301\u4f7f\u7528 etcd \u4f5c\u4e3a\u5b58\u50a8\u65b9\u6848\uff0c\u4f46 Rancher \u7684 ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/k3s-io/kine"},"K3s")," \u9879\u76ee\u5e76\u6ca1\u7528 etcd\uff0c\u53ef\u80fd\u662f\u56e0\u4e3a\u5982\u679c K3s \u90e8\u7f72\u5728\u67d0\u4e9b\u5d4c\u5165\u5f0f\u73af\u5883\u4e2d\uff0cetcd \u7684\u4e00\u4e9b\u9650\u5236\u4f7f\u5176\u6ca1\u6709\u529e\u6cd5\u5f88\u597d\u5730\u8fd0\u7ef4\u3002\u4e8e\u662f\uff0cRancher \u901a\u8fc7 Kine \u8fd9\u4e2a\u9879\u76ee\uff0c\u652f\u6301\u4e86\u4e00\u4e9b\u989d\u5916\u7684\u7ec4\u4ef6\uff0c\u6bd4\u5982 PostgreSQL\u3001MySQL\u3001SQLite\u3001 Dqlite\uff0c\u4f7f\u5f97 K3s \u7684\u7528\u6237\u53ef\u4ee5\u7075\u6d3b\u9009\u62e9\u5176\u4ed6\u5b58\u50a8\u65b9\u6848\u3002\u6982\u62ec\u6765\u8bf4\uff0cKine \u8fd9\u4e2a\u9879\u76ee\u6709\u4ee5\u4e0b\u51e0\u70b9\u503c\u5f97\u6211\u4eec\u501f\u9274\u3002"),(0,l.kt)("p",null,"\u7b2c\u4e00\uff0cTiDB \u517c\u5bb9 MySQL\uff0c\u800c Kine \u9879\u76ee\u672c\u8eab\u53c8\u652f\u6301 MySQL\u3002\u6211\u4eec\u53ef\u4ee5\u501f\u9274\u6216\u8005\u53c2\u8003 Kine \u7684\u4e00\u4e9b\u5b9e\u73b0\uff0c\u4ece\u800c\u5e2e\u52a9\u6211\u4eec\u8fd9\u4e2a\u9879\u76ee\u66f4\u597d\u5730\u652f\u6301\u548c\u5bf9\u63a5 TiDB\u3002"),(0,l.kt)("p",null,"\u7b2c\u4e8c\uff0c Kine \u5b8c\u6574\u5730\u5b9e\u73b0\u4e86 etcd \u9700\u8981\u652f\u6301\u7684 watch \u529f\u80fd\u3002\u56e0\u4e3a APISIX \u662f\u57fa\u4e8e\u63a8\u6a21\u5f0f\u6765\u611f\u77e5\u914d\u7f6e\u7684\u53d8\u66f4\uff0c\u914d\u7f6e\u53d8\u66f4\u7684\u65f6\u5ef6\u901a\u5e38\u5728\u6beb\u79d2\u7ea7\u522b\uff0c\u65f6\u5ef6\u975e\u5e38\u4f4e\u3002\u800c watch \u529f\u80fd\u6b63\u597d\u6d89\u53ca\u5230\u914d\u7f6e\u7684\u63a8\u9001\uff0c\u6240\u4ee5 watch \u673a\u5236\u76f8\u5f53\u91cd\u8981\u3002"),(0,l.kt)("p",null,"\u7b2c\u4e09\uff0cKine \u8fd8\u6a21\u62df\u4e86 etcd \u7684 MVCC \u7279\u6027\uff0c\u652f\u6301 Compact\u3002\u6bcf\u4e00\u6b21\u7684\u53d8\u66f4\u3001\u5199\u5165\u3001\u66f4\u65b0\u6216\u8005\u5220\u9664\u5728 Kine \u6216 TiDB \u91cc\u5c31\u662f\u4e00\u884c\u6570\u636e\u3002\u6bcf\u884c\u6570\u636e\u7684\u4e3b\u952e\u5c31\u662f etcd \u7684 Revision\uff0c\u4e5f\u5c31\u662f\u8ba1\u6570\u5668\uff0c\u8bb0\u5f55\u6700\u65b0\u53d8\u66f4\u7684\u6b21\u6570\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0cKine \u5b9e\u73b0\u4e86\u591a\u7248\u672c\u7684\u652f\u6301\u3002"),(0,l.kt)("p",null,"\u901a\u8fc7\u5f15\u5165\u7c7b\u4f3c\u67b6\u6784\uff0cApache APISIX \u4e0d\u7528\u548c\u771f\u6b63\u7684\u5b58\u50a8\u4e2d\u5fc3\u8fdb\u884c\u4ea4\u4e92\uff0c\u800c\u662f\u548c\u8fd9\u4e2a\u4e2d\u95f4\u5c42\uff08etcd adapter\uff09\u8fdb\u884c\u4ea4\u4e92\u3002\u5982\u4e0a\u56fe\uff0cAPISIX \u548c etcd adapter \u4f1a\u8d70 etcd \u7684 KV API \u548c Watch API\uff0cetcd adapter \u4f1a\u8f6e\u8be2 TiDB\uff0c\u611f\u77e5\u914d\u7f6e\u7684\u5199\u5165\uff0c\u5b8c\u6210 watch \u64cd\u4f5c\uff0c\u4ece\u800c\u628a\u6570\u636e\u63a8\u7ed9 APISIX\u3002"),(0,l.kt)("h2",{id:"\u65b9\u6848\u6548\u679cetcd-adapter-\u7684\u8bde\u751f"},"\u65b9\u6848\u6548\u679c\uff1aetcd adapter \u7684\u8bde\u751f"),(0,l.kt)("p",null,"\u6709\u4e86\u8fd9\u4e9b\u601d\u8003\u4ee5\u53ca Kine \u8fd9\u4e2a\u9879\u76ee\u7684\u53c2\u8003\uff0c\u6211\u4eec\u7ad9\u5728\u5de8\u4eba\u7684\u80a9\u8180\u4e0a\u5f00\u53d1\u51fa\u4e86 ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/api7/ETCD-adapter"},"etcd adapter")," \u9879\u76ee\u3002"),(0,l.kt)("p",null,"\u9996\u5148\uff0c\u8fd9\u4e2a\u9879\u76ee\u652f\u6301\u4e86 TiDB\u3001MySQL \u4ee5\u53ca In-Memory B-Tree \u7b49\u591a\u79cd\u914d\u7f6e\u4e2d\u5fc3\uff0c\u4e0d\u4e45\u540e\uff0c\u4e5f\u4f1a\u652f\u6301 SQLite \u548c PostgreSQL\u3002\u5176\u4e2d\uff0cIn-Memory B \u6811\u548c APISIX Ingress Controller \u67b6\u6784\u8fc7\u91cd\u6709\u5173\u3002\u5982\u679c\u9009\u62e9 In-Memory \u7684 B \u6811\u9009\u578b\uff0c\u7528\u6237\u53ef\u4ee5\u76f4\u63a5\u628a etcd adapter \u5185\u5d4c\u5230\u76ee\u6807\u7a0b\u5e8f\u91cc\u9762\u3002\u8fd9\u79cd\u65b9\u5f0f\u5c11\u4e86\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u63d0\u5347\u6574\u4f53\u7684\u7528\u6237\u4f53\u9a8c\u3002"),(0,l.kt)("p",null,"\u5176\u6b21\uff0c\u8fd9\u4e2a\u9879\u76ee\u652f\u6301\u4e86 etcd v3 \u7684 API\u3002\u76ee\u524d\uff0c\u8fd9\u4e2a\u9879\u76ee\u53ea\u652f\u6301\u4e86 APISIX \u6240\u9700\u7684 API \u5b50\u96c6\uff0c\u6bd4\u5982 KV API \u548c Watch API\u3002\u81f3\u4e8e\u5176\u4ed6\u7c7b\u578b\u7684 API\uff0c\u6bd4\u5982 Lease\u3001\u504f\u8ba4\u8bc1\u7c7b\u7684 API \u8fd8\u6ca1\u6709\u5168\u90e8\u5b9e\u73b0\u3002"),(0,l.kt)("p",null,"\u6700\u540e\uff0c\u8fd9\u4e2a\u9879\u76ee\u2f40\u6301\u4e86 gRPC Gateway\u3002\u5b83\u4f1a\u628a\u5bf9\u5e94\u7684 gRPC \u63a5\u53e3\u7ffb\u8bd1\u6210\u5bf9\u5e94\u7684 Restful \u63a5\u53e3\uff0c\u4f9b APISIX \u8c03\u7528\u3002"),(0,l.kt)("p",null,"\u867d\u7136\u6211\u4eec\u628a etcd adapter \u653e\u5728\u4e86\u63a7\u5236\u9762\uff0c\u4f46\u6211\u4eec\u4e5f\u53ef\u4ee5\u628a\u5b83\u653e\u5728\u6bcf\u4e2a APISIX \u8fb9\u4e0a\uff0c\u4f5c\u4e3a\u4e00\u4e2a Sidecar \u5b58\u5728\u3002\u4e24\u79cd\u65b9\u6848\u5404\u6709\u597d\u5904\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u5b9e\u9645\u60c5\u51b5\u7075\u6d3b\u9009\u62e9\u3002"),(0,l.kt)("h2",{id:"\u672a\u6765\u8ba1\u5212"},"\u672a\u6765\u8ba1\u5212"),(0,l.kt)("p",null,"\u5173\u4e8e\u8fd9\u4e2a\u9879\u76ee\u7684\u540e\u7eed\u8ba1\u5212\u548c\u672a\u6765\u65b9\u5411\uff0c\u6211\u4eec\u6709\u4ee5\u4e0b\u51e0\u70b9\u60f3\u6cd5\u5206\u4eab\u7ed9\u5927\u5bb6\u3002"),(0,l.kt)("h3",{id:"\u4e3a-apache-apisix-\u7684\u6237\u63d0\u4f9b\u66f4\u591a\u7684\u914d\u7f6e\u4e2d\u5fc3\u9009\u62e9"},"\u4e3a Apache APISIX \u7684\u2f64\u6237\u63d0\u4f9b\u66f4\u591a\u7684\u914d\u7f6e\u4e2d\u5fc3\u9009\u62e9"),(0,l.kt)("p",null,"\u6211\u4eec\u5e0c\u671b etcd adapter \u9879\u76ee\u80fd\u8ba9 Apache APISIX \u7684\u7528\u6237\u6709\u66f4\u591a\u7684\u914d\u7f6e\u4e2d\u5fc3\u9009\u62e9\uff0c\u4e0d\u88ab etcd \u9501\u5b9a\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u5b9e\u9645\u60c5\u51b5\u9009\u62e9\u89e3\u51b3\u65b9\u6848\u3002\u5982\u679c\u516c\u53f8\u7684\u8fd0\u7ef4\u3001\u5f00\u53d1\u7684\u6280\u672f\u6808\u66f4\u504f\u5411\u4e8e Consul\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528 Consul\u3002Consul KV \u4e5f\u662f\u57fa\u4e8e Raft\uff0c\u53ef\u7528\u6027\u5f88\u9ad8\u3002\u9664\u6b64\u4ee5\u5916\uff0c\u4e5f\u53ef\u4ee5\u8003\u8651\u6bd4\u8f83\u4e3b\u6d41\u7684 Apollo \u6216\u8005\u548c etcd \u5bf9\u6807\u7684 Apache ZooKeeper\uff0c\u8fd8\u6709 PostgreSQL \u6216\u8005\u5176\u4ed6\u5907\u9009\u65b9\u6848\u3002"),(0,l.kt)("h3",{id:"\u4e3a-apache-apisix-ingress-controller-\u7684\u67b6\u6784\u6539\u826f\u52a9\u529b"},"\u4e3a Apache APISIX Ingress Controller \u7684\u67b6\u6784\u6539\u826f\u52a9\u529b"),(0,l.kt)("p",null,"\u6211\u4eec\u5e0c\u671b etcd adapter \u9879\u76ee\u80fd\u4e3a APISIX Ingress Controller \u7684\u67b6\u6784\u6539\u826f\u52a9\u529b\u3002etcd adapter \u652f\u6301\u4e86 In-Memory B-Tree\uff0cIn-Memory B-Tree \u53ef\u4ee5\u628a\u6570\u636e\u5d4c\u5165\u5230\u5185\u5b58\u91cc\uff0c\u800c\u4e0d\u9700\u8981\u5b9e\u9645\u5730\u5b58\u50a8\u3002"),(0,l.kt)("p",null,"\u5982\u6b64\u4e00\u6765\uff0cetcd adapter \u53ef\u4ee5\u6210\u4e3a APISIX Ingress Controller \u7684\u4e00\u90e8\u5206\uff0cApache Ingress Controller \u53ea\u9700\u4fdd\u7559 Ingress Controller \u63a7\u5236\u9762\u548c APISIX \u6570\u636e\u9762\u4e24\u4e2a\u7ec4\u4ef6\u3002\u56e0\u4e3a\u6ca1\u6709\u4f7f\u7528 etcd\uff0cAPISIX \u751a\u81f3\u53ef\u4ee5\u548c Ingress Controller \u76f4\u63a5\u4ea4\u4e92\uff0c\u83b7\u53d6\u914d\u7f6e\u53d8\u66f4\u6570\u636e\u3002"),(0,l.kt)("p",null,"\u9664\u6b64\u4ee5\u5916\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u628a Ingress Controller \u63a7\u5236\u9762\u548c APISIX \u6570\u636e\u9762\u653e\u5728\u540c\u4e00\u4e2a\u955c\u50cf\u91cc\uff0c\u5b9e\u73b0\u63a7\u5236\u9762\u4e0e\u6570\u636e\u9762\u7684\u2f00\u4f53\u5316\u90e8\u7f72\u3002\u6700\u7ec8\u53ea\u9700\u8981\u4e00\u6761\u547d\u4ee4\u3001\u4e00\u4e2a\u955c\u50cf\uff0c\u5c31\u53ef\u4ee5\u5728 K8s \u76ee\u6807\u96c6\u7fa4\u4e2d\u628a APISIX Ingress Controller \u8fd0\u884c\u8d77\u6765\u3002\u5982\u679c\u63a7\u5236\u9762\u3001\u6570\u636e\u9762\u653e\u5728\u4e00\u8d77\uff0c\u7528\u6237\u5c31\u4e0d\u9700\u8981\u989d\u5916\u90e8\u7f72\u4e00\u4e2a etcd \u548c\u4e00\u4e2a\u63a7\u5236\u9762\uff0c\u76f8\u5f53\u4e8e\u76f4\u63a5\u5c11\u4e86\u4e24\u4e2a\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u6781\u5927\u5730\u63d0\u5347\u7528\u6237\u4f53\u9a8c\u3002"),(0,l.kt)("h3",{id:"\u6350\u8d60\u7ed9-apache-\u57fa\u91d1\u4f1a\u4f5c\u4e3a-apache-apisix-\u5b50\u9879\u76ee\u8fdb\u884c\u5b75\u5316"},"\u6350\u8d60\u7ed9 Apache \u57fa\u91d1\u4f1a\uff0c\u4f5c\u4e3a Apache APISIX \u5b50\u9879\u76ee\u8fdb\u884c\u5b75\u5316"),(0,l.kt)("p",null,"\u76ee\u524d\uff0c\u8fd9\u4e2a",(0,l.kt)("a",{parentName:"p",href:"https://github.com/api7/etcd-adapter"},"\u9879\u76ee"),"\u653e\u5728 API7.ai \u4ed3\u5e93\u91cc\u3002\u672a\u6765\uff0c\u6211\u4eec\u671f\u671b\u6301\u7eed\u6253\u78e8\u8fd9\u4e2a\u9879\u76ee\uff0c\u5f85\u9879\u76ee\u8fed\u4ee3\u5730\u6bd4\u8f83\u5b8c\u5584\u540e\uff0c\u4f1a\u628a\u5b83\u6350\u8d60\u7ed9 Apache \u8f6f\u4ef6\u57fa\u91d1\u4f1a\uff0c\u4f5c\u4e3a Apache APISIX \u7684\u5b50\u9879\u76ee\u8fdb\u884c\u5b75\u5316\uff0c\u4ece\u800c\u5438\u5f15\u5230\u66f4\u591a\u793e\u533a\u7684\u6709\u5fd7\u4e4b\u58eb\uff0c\u548c\u6211\u4eec\u4e00\u8d77\u5b8c\u5584\u8fd9\u4e2a\u9879\u76ee\uff0c\u8ba9 Apache APISIX \u7684\u751f\u6001\u66f4\u52a0\u5e9e\u5927\u3002"))}I.isMDXComponent=!0}}]);