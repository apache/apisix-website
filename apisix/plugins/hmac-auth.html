<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>apisix/plugins/hmac-auth · Apache APISIX™</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;!--"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="apisix/plugins/hmac-auth · Apache APISIX™"/><meta property="og:type" content="website"/><meta property="og:url" content="https://apisix.apache.org//"/><meta property="og:description" content="&lt;!--"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://apisix.apache.org/blog/atom.xml" title="Apache APISIX™ Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://apisix.apache.org/blog/feed.xml" title="Apache APISIX™ Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo.png" alt="Apache APISIX™"/><h2 class="headerTitleWithLogo">Apache APISIX™</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/subscrbe-guide" target="_self">Docs</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><li class=""><a href="/downloads" target="_self">Downloads</a></li><li class=""><a href="/team" target="_self">Team</a></li><li class=""><a href="/help" target="_self">Help</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">apisix/plugins/hmac-auth</h1></header><article><div><span><!--
#
# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
-->
<ul>
<li><a href="/apisix/zh-cn/plugins/hmac-auth">中文</a></li>
</ul>
<h1><a class="anchor" aria-hidden="true" id="summary"></a><a href="#summary" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Summary</h1>
<ul>
<li><a href="#name"><strong>Name</strong></a></li>
<li><a href="#attributes"><strong>Attributes</strong></a></li>
<li><a href="#how-to-enable"><strong>How To Enable</strong></a></li>
<li><a href="#test-plugin"><strong>Test Plugin</strong></a></li>
<li><a href="#disable-plugin"><strong>Disable Plugin</strong></a></li>
<li><a href="#generate-signature-examples"><strong>Generate Signature Examples</strong></a></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="name"></a><a href="#name" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Name</h2>
<p><code>hmac-auth</code> is an authentication plugin that need to work with <code>consumer</code>. Add HMAC Authentication to a <code>service</code> or <code>route</code>.</p>
<p>The <code>consumer</code> then adds its key to request header to verify its request.</p>
<h2><a class="anchor" aria-hidden="true" id="attributes"></a><a href="#attributes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Attributes</h2>
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Requirement</th><th>Default</th><th>Valid</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>access_key</td><td>string</td><td>required</td><td></td><td></td><td>Different <code>consumer</code> objects should have different values, and it should be unique. If different consumers use the same <code>access_key</code>, a request matching exception will occur.</td></tr>
<tr><td>secret_key</td><td>string</td><td>required</td><td></td><td></td><td>Use as a pair with <code>access_key</code>.</td></tr>
<tr><td>algorithm</td><td>string</td><td>optional</td><td>&quot;hmac-sha256&quot;</td><td>[&quot;hmac-sha1&quot;, &quot;hmac-sha256&quot;, &quot;hmac-sha512&quot;]</td><td>Encryption algorithm.</td></tr>
<tr><td>clock_skew</td><td>integer</td><td>optional</td><td>0</td><td></td><td>The clock skew allowed by the signature in seconds. For example, if the time is allowed to skew by 10 seconds, then it should be set to <code>10</code>. especially, <code>0</code> means not checking <code>Date</code></td></tr>
<tr><td>signed_headers</td><td>array[string]</td><td>optional</td><td></td><td></td><td>Restrict the headers that are added to the encrypted calculation. After the specified, the client request can only specify the headers within this range. When this item is empty, all the headers specified by the client request will be added to the encrypted calculation</td></tr>
<tr><td>keep_headers</td><td>boolean</td><td>optional</td><td>false</td><td>[ true, false ]</td><td>Whether it is necessary to keep the request headers of <code>X-HMAC-SIGNATURE</code>, <code>X-HMAC-ALGORITHM</code> and <code>X-HMAC-SIGNED-HEADERS</code> in the http request after successful authentication. true: means to keep the http request header, false: means to remove the http request header.</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="how-to-enable"></a><a href="#how-to-enable" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How To Enable</h2>
<ol>
<li>set a consumer and config the value of the <code>hmac-auth</code> option</li>
</ol>
<pre><code class="hljs css language-shell">curl http://127.0.0.1:9080/apisix/admin/consumers -H 'X-API-KEY: edd1c9f034335f136f87ad84b625c8f1' -X PUT -d '
{
    "username": "jack",
    "plugins": {
        "hmac-auth": {
            "access_key": "user-key",
            "secret_key": "my-secret-key",
            "clock_skew": 10,
            "signed_headers": ["User-Agent", "Accept-Language", "x-custom-a"]
        }
    }
}'
</code></pre>
<ol start="2">
<li>add a Route or add a Service, and enable the <code>hmac-auth</code> plugin</li>
</ol>
<pre><code class="hljs css language-shell">curl http://127.0.0.1:9080/apisix/admin/routes/1 -H 'X-API-KEY: edd1c9f034335f136f87ad84b625c8f1' -X PUT -d '
{
    "uri": "/index.html",
    "plugins": {
        "hmac-auth": {}
    },
    "upstream": {
        "type": "roundrobin",
        "nodes": {
            "39.97.63.215:80": 1
        }
    }
}'
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="test-plugin"></a><a href="#test-plugin" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Test Plugin</h2>
<h3><a class="anchor" aria-hidden="true" id="generate-signature"></a><a href="#generate-signature" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>generate signature:</h3>
<p>The calculation formula of the signature is <code>signature = HMAC-SHAx-HEX(secret_key, signing_string)</code>. From the formula, it can be seen that in order to obtain the signature, two parameters, <code>SECRET_KEY</code> and <code>signing_STRING</code>, are required. Where secret_key is configured by the corresponding consumer, the calculation formula of <code>signing_STRING</code> is <code>signing_string = signing_string = HTTP Method + \n + HTTP URI + \n + canonical_query_string + \n + access_key + \n + Date + \n + signed_headers_string</code>.</p>
<ol>
<li><strong>HTTP Method</strong> : Refers to the GET, PUT, POST and other request methods defined in the HTTP protocol, and must be in all uppercase.</li>
<li><strong>HTTP URI</strong> : <code>HTTP URI</code> requirements must start with &quot;/&quot;, those that do not start with &quot;/&quot; need to be added, and the empty path is &quot;/&quot;.</li>
<li><strong>Date</strong> : Date in http header(GMT format).</li>
<li><strong>canonical_query_string</strong> :<code>canonical_query_string</code> is the result of encoding the <code>query</code> in the URL (<code>query</code> is the string &quot;key1 = valve1 &amp; key2 = valve2&quot; after the &quot;?&quot; in the URL).</li>
<li><strong>signed_headers_string</strong> :<code>signed_headers_string</code> is the result of obtaining the fields specified by the client from the request header and concatenating the strings in order.</li>
</ol>
<blockquote>
<p>The coding steps are as follows:</p>
</blockquote>
<ul>
<li>Extract the <code>query</code> item in the URL, that is, the string &quot;key1 = valve1 &amp; key2 = valve2&quot; after the &quot;?&quot; in the URL.</li>
<li>Split the <code>query</code> into several items according to the &amp; separator, each item is in the form of key=value or only key.</li>
<li>Encoding each item after disassembly is divided into the following two situations.
<ul>
<li>When the item has only key, the conversion formula is UriEncode(key) + &quot;=&quot;.</li>
<li>When the item is in the form of key=value, the conversion formula is in the form of UriEncode(key) + &quot;=&quot; + UriEncode(value). Here value can be an empty string.</li>
<li>After converting each item, sort by key in lexicographic order (ASCII code from small to large), and connect them with the &amp; symbol to generate the corresponding canonical_query_string.</li>
</ul></li>
</ul>
<blockquote>
<p>The signed_headers_string generation steps are as follows:</p>
</blockquote>
<ul>
<li>Obtain the headers specified to be added to the calculation from the request header. For details, please refer to the placement of <code>SIGNED_HEADERS</code> in the next section <code>Use the generated signature to make a request attempt</code>.</li>
<li>Take out the headers specified by <code>SIGNED_HEADERS</code> in order from the request header, and splice them together in order of <code>name:value</code>. After splicing, a <code>signed_headers_string</code> is generated.</li>
</ul>
<pre><code class="hljs css language-plain">HeaderKey1 + <span class="hljs-string">":"</span> + HeaderValue1 + <span class="hljs-string">"<span class="hljs-subst">\n</span>"</span>\+
HeaderKey2 + <span class="hljs-string">":"</span> + HeaderValue2 + <span class="hljs-string">"<span class="hljs-subst">\n</span>"</span>\+
...
HeaderKeyN + <span class="hljs-string">":"</span> + HeaderValueN + <span class="hljs-string">"<span class="hljs-subst">\n</span>"</span>
</code></pre>
<p>Here is a full example：</p>
<pre><code class="hljs css language-plain">GET
/hello
your-access-key
Mon, <span class="hljs-number">28</span> Sep <span class="hljs-number">2020</span> <span class="hljs-number">06</span>:<span class="hljs-number">48</span>:<span class="hljs-number">57</span> GMT
x-custom-header:value
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="use-the-generated-signature-to-try-the-request"></a><a href="#use-the-generated-signature-to-try-the-request" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Use the generated signature to try the request</h3>
<p><strong>Note:</strong></p>
<ol>
<li><strong>ACCESS_KEY, SIGNATURE, ALGORITHM, DATE, SIGNED_HEADERS respectively represent the corresponding variables</strong></li>
<li><strong>SIGNED_HEADERS is the headers specified by the client to join the encryption calculation. If there are multiple headers, they must be separated by &quot;;&quot;: <code>x-custom-header-a;x-custom-header-b</code></strong></li>
<li><strong>SIGNATURE needs to use base64 for encryption: <code>base64_encode(SIGNATURE)</code></strong></li>
</ol>
<ul>
<li>The signature information is put together in the request header <code>Authorization</code> field:</li>
</ul>
<pre><code class="hljs css language-shell"><span class="hljs-meta">$</span><span class="bash"> curl http://127.0.0.1:9080/index.html -H <span class="hljs-string">'Authorization: hmac-auth-v1# + ACCESS_KEY + # + base64_encode(SIGNATURE) + # + ALGORITHM + # + DATE + # + SIGNED_HEADERS'</span> -i</span>
HTTP/1.1 200 OK
Content-Type: text/html
Content-Length: 13175
...
Accept-Ranges: bytes

&lt;!DOCTYPE html&gt;
&lt;html lang="cn"&gt;
...
</code></pre>
<ul>
<li>The signature information is separately placed in the request header:</li>
</ul>
<pre><code class="hljs css language-shell"><span class="hljs-meta">$</span><span class="bash"> curl http://127.0.0.1:9080/index.html -H <span class="hljs-string">'X-HMAC-SIGNATURE: base64_encode(SIGNATURE)'</span> -H <span class="hljs-string">'X-HMAC-ALGORITHM: ALGORITHM'</span> -H <span class="hljs-string">'Date: DATE'</span> -H <span class="hljs-string">'X-HMAC-ACCESS-KEY: ACCESS_KEY'</span> -H <span class="hljs-string">'X-HMAC-SIGNED-HEADERS: SIGNED_HEADERS'</span> -i</span>
HTTP/1.1 200 OK
Content-Type: text/html
Content-Length: 13175
...
Accept-Ranges: bytes

&lt;!DOCTYPE html&gt;
&lt;html lang="cn"&gt;
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="custom-header-key"></a><a href="#custom-header-key" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Custom header key</h2>
<p>We can customize header key for auth parameters by adding the attribute configuration of the plugin under <code>plugin_attr</code> in <code>conf / config.yaml</code>.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">plugin_attr:</span>
  <span class="hljs-attr">hmac-auth:</span>
    <span class="hljs-attr">signature_key:</span> <span class="hljs-string">X-APISIX-HMAC-SIGNATURE</span>
    <span class="hljs-attr">algorithm_key:</span> <span class="hljs-string">X-APISIX-HMAC-ALGORITHM</span>
    <span class="hljs-attr">date_key:</span> <span class="hljs-string">X-APISIX-DATE</span>
    <span class="hljs-attr">access_key:</span> <span class="hljs-string">X-APISIX-HMAC-ACCESS-KEY</span>
    <span class="hljs-attr">signed_headers_key:</span> <span class="hljs-string">X-APISIX-HMAC-SIGNED-HEADERS</span>
</code></pre>
<p><strong>After customizing the header, request example:</strong></p>
<pre><code class="hljs css language-shell"><span class="hljs-meta">$</span><span class="bash"> curl http://127.0.0.1:9080/index.html -H <span class="hljs-string">'X-APISIX-HMAC-SIGNATURE: base64_encode(SIGNATURE)'</span> -H <span class="hljs-string">'X-APISIX-HMAC-ALGORITHM: ALGORITHM'</span> -H <span class="hljs-string">'X-APISIX-DATE: DATE'</span> -H <span class="hljs-string">'X-APISIX-HMAC-ACCESS-KEY: ACCESS_KEY'</span> -H <span class="hljs-string">'X-APISIX-HMAC-SIGNED-HEADERS: SIGNED_HEADERS'</span> -i</span>
HTTP/1.1 200 OK
Content-Type: text/html
Content-Length: 13175
...
Accept-Ranges: bytes

&lt;!DOCTYPE html&gt;
&lt;html lang="cn"&gt;
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="disable-plugin"></a><a href="#disable-plugin" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Disable Plugin</h2>
<p>When you want to disable the <code>hmac-auth</code> plugin, it is very simple,
you can delete the corresponding json configuration in the plugin configuration,
no need to restart the service, it will take effect immediately:</p>
<pre><code class="hljs css language-shell"><span class="hljs-meta">$</span><span class="bash"> curl http://127.0.0.1:9080/apisix/admin/routes/1 -H <span class="hljs-string">'X-API-KEY: edd1c9f034335f136f87ad84b625c8f1'</span> -X PUT -d <span class="hljs-string">'</span></span>
{
    "uri": "/index.html",
    "plugins": {},
    "upstream": {
        "type": "roundrobin",
        "nodes": {
            "39.97.63.215:80": 1
        }
    }
}'
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="generate-signature-examples"></a><a href="#generate-signature-examples" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Generate Signature Examples</h2>
<p>Take HMAC SHA256 as an example to introduce the signature generation examples in different languages.</p>
<p>Example inputs:</p>
<table>
<thead>
<tr><th>Variable</th><th>Value</th></tr>
</thead>
<tbody>
<tr><td>secret</td><td>this is secret key</td></tr>
<tr><td>message</td><td>this is signature string</td></tr>
</tbody>
</table>
<p>Example outputs:</p>
<table>
<thead>
<tr><th>Type</th><th>Hash</th></tr>
</thead>
<tbody>
<tr><td>hexit</td><td>ad1b76c7e5054009380edca35d3f36cc5b6f45c82ee02ea3af64197ebddb9345</td></tr>
<tr><td>base64</td><td>rRt2x+UFQAk4DtyjXT82zFtvRcgu4C6jr2QZfr3bk0U=</td></tr>
</tbody>
</table>
<p>Please refer to <a href="/apisix/examples/plugins-hmac-auth-generate-signature"><strong>HMAC Generate Signature Examples</strong></a></p>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#name">Name</a></li><li><a href="#attributes">Attributes</a></li><li><a href="#how-to-enable">How To Enable</a></li><li><a href="#test-plugin">Test Plugin</a><ul class="toc-headings"><li><a href="#generate-signature">generate signature:</a></li><li><a href="#use-the-generated-signature-to-try-the-request">Use the generated signature to try the request</a></li></ul></li><li><a href="#custom-header-key">Custom header key</a></li><li><a href="#disable-plugin">Disable Plugin</a></li><li><a href="#generate-signature-examples">Generate Signature Examples</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"></a><div><h5>ASF</h5><a href="https://www.apache.org/">Foundation</a><a href="https://www.apache.org/licenses/">License</a><a href="http://www.apache.org/events/current-event/">Events</a><a href="https://www.apache.org/security/">Security</a><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></div><div><h5>Community</h5><a href="https://github.com/apache/apisix/issues">GitHub Issue Tracker</a><a href="https://apisix.slack.com/">Slack</a><a href="https://twitter.com/ApacheAPISIX" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/users">User Showcase</a><a href="/blog">Blog</a></div></section><a href="https://www.apache.org/" target="_blank" rel="noreferrer noopener" style="display:block;margin:1em auto;opacity:0.8;transition:opacity 0.15s ease-in-out;text-align:center"><img src="/img/asf_logo_wide_small.png" alt="Apache Software Foundation" style="width:370px;height:64px"/></a><section class="copyright">Copyright © 2019-2020 The Apache Software Foundation. Apache APISIX, APISIX™, Apache, the Apache feather logo, and the Apache APISIX project logo are either registered trademarks or trademarks of the Apache Software Foundation.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                appId: 'ZHVP417Y1Y',
                apiKey: '79e72fedcf3719ba85c552f710ade8a3',
                indexName: 'apache-apisix-website',
                inputSelector: '#search_input_react'
              });
            </script></body></html>