<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="ahrefs-site-verification" content="c2f7370ecf46173f4fb25f114e74c97e0a2976d4f02f61c9b00a9d7d34e34698">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="search" type="application/opensearchdescription+xml" title="Apache APISIX¬Æ -- Cloud-Native API Gateway and AI Gateway" href="/opensearch.xml">
<script type="application/ld+json">{"@context":"https://schema.org","@type":"WebSite","name":"Apache APISIX","url":"https://apisix.apache.org"}</script>
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="24b59d9a-682e-4c3d-9e83-bf2ee85cdc19" data-project-name="APISIX" data-project-color="#E8442E" data-project-logo="https://static.apiseven.com/202202/apache-apisix.png" data-modal-disclaimer="This is a custom LLM for APISIX with access to all developer documentation, GitHub issues and discussions." data-modal-example-questions="How to set up canary release in APISIX?,How to develop a custom APISIX plugin?,How to use custom NGINX configuration in APISIX?,How to configure mTLS between clients and APISIX?,How to only allow a specific APISIX consumer to access special services or routes?" async></script><title data-react-helmet="true">openid-connect | Apache APISIX¬Æ -- Cloud-Native API Gateway and AI Gateway</title><meta data-react-helmet="true" property="og:image" content="https://static.apiseven.com/202202/apache-apisix.png"><meta data-react-helmet="true" name="twitter:image" content="https://static.apiseven.com/202202/apache-apisix.png"><meta data-react-helmet="true" property="og:url" content="https://apisix.apache.org/docs/apisix/next/plugins/openid-connect/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-docs-apisix-current"><meta data-react-helmet="true" name="robots" content="index,follow"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" property="og:title" content="openid-connect | Apache APISIX¬Æ -- Cloud-Native API Gateway and AI Gateway"><meta data-react-helmet="true" name="description" content="The openid-connect Plugin supports the integration with OpenID Connect (OIDC) identity providers, such as Keycloak, Auth0, Microsoft Entra ID, Google, Okta, and more. It allows APISIX to authenticate clients and obtain their information from the identity provider before allowing or denying their access to upstream protected resources."><meta data-react-helmet="true" property="og:description" content="The openid-connect Plugin supports the integration with OpenID Connect (OIDC) identity providers, such as Keycloak, Auth0, Microsoft Entra ID, Google, Okta, and more. It allows APISIX to authenticate clients and obtain their information from the identity provider before allowing or denying their access to upstream protected resources."><meta data-react-helmet="true" name="keywords" content="Apache APISIX,API Gateway,OpenID Connect,OIDC"><link data-react-helmet="true" rel="shortcut icon" href="https://static.apiseven.com/202202/favicon.png"><link data-react-helmet="true" rel="alternate" href="https://apisix.apache.org/docs/apisix/next/plugins/openid-connect/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://apisix.apache.org/zh/docs/apisix/next/plugins/openid-connect/" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://apisix.apache.org/docs/apisix/next/plugins/openid-connect/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://38VC84A2WJ-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://docs.api7.ai/hub/openid-connect"><link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Medium.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Bold.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Light.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Demi.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-ExtraBold.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://apisix-website-static.apiseven.com/assets/js/runtime~main.1e643d3e.js" as="script">
<link rel="preload" href="https://apisix-website-static.apiseven.com/assets/js/main.8246645a.js" as="script">
<link rel="stylesheet" href="https://apisix-website-static.apiseven.com/assets/css/styles.8de0825e.css">

<script>var _paq=window._paq=window._paq||[];_paq.push(["disableCookies"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var a="https://analytics.apache.org/";_paq.push(["setTrackerUrl",a+"matomo.php"]),_paq.push(["setSiteId","17"]);var e=document,p=e.createElement("script"),t=e.getElementsByTagName("script")[0];p.async=!0,p.src=a+"matomo.js",t.parentNode.insertBefore(p,t)}()</script>

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><div class="announcementBar_axC9" style="background-color:#e8433e;color:white" role="banner"><div class="announcementBarPlaceholder_xYHE"></div><div class="announcementBarContent_6uhP">ü§î Introducing APISIX AI Gateway ‚Äì Built for LLMs and AI workloads. <a target="_blank" rel="noopener noreferrer" href="/ai-gateway/"> Learn More</a></div><button type="button" class="clean-btn close announcementBarClose_A3A1" aria-label="Close"><svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor"><path d="M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"></path></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_RReh"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a target="_parent" class="navbar__brand" href="/"><img src="/img/logo2.svg" alt="Apache APISIX¬Æ" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo2.svg" alt="Apache APISIX¬Æ" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Apache APISIX¬Æ</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link" target="_parent" href="/docs/">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" target="_parent" href="/docs/apisix/getting-started/">Apache APISIX¬ÆÔ∏è</a></li><li><a class="dropdown__link" target="_parent" href="/docs/apisix/next/dashboard/">Apache APISIX¬ÆÔ∏è Dashboard</a></li><li><a class="dropdown__link" target="_parent" href="/docs/ingress-controller/overview/">Apache APISIX¬ÆÔ∏è Ingress Controller</a></li><li><a class="dropdown__link" target="_parent" href="/docs/helm-chart/apisix/">Apache APISIX¬ÆÔ∏è Helm Charts</a></li><li><a class="dropdown__link" target="_parent" href="/docs/docker/build/">Apache APISIX¬ÆÔ∏è Docker</a></li><li><a class="dropdown__link" target="_parent" href="/docs/java-plugin-runner/development/">Apache APISIX¬ÆÔ∏è Java Plugin Runner</a></li><li><a class="dropdown__link" target="_parent" href="/docs/go-plugin-runner/getting-started/">Apache APISIX¬ÆÔ∏è Go Plugin Runner</a></li><li><a class="dropdown__link" target="_parent" href="/docs/python-plugin-runner/getting-started/">Apache APISIX¬ÆÔ∏è Python Plugin Runner</a></li><li><a class="dropdown__link" target="_parent" href="/docs/general/join/">General</a></li></ul></div><a class="navbar__item navbar__link" target="_parent" href="/blog/">Blog</a><a class="navbar__item navbar__link" target="_parent" href="/blog/tags/case-studies/">Case Studies</a><a class="navbar__item navbar__link" target="_parent" href="/downloads/">Downloads</a><a class="navbar__item navbar__link" target="_parent" href="/help/">Help</a><a class="navbar__item navbar__link" target="_parent" href="/team/">Team</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">Resources</a><ul class="dropdown__menu"><li><a class="dropdown__link" target="_parent" href="/showcase/">Showcase</a></li><li><a class="dropdown__link" target="_parent" href="/docs/general/code-samples/">Code Samples</a></li><li><a class="dropdown__link" target="_parent" href="/plugins/">PluginHub</a></li><li><a class="dropdown__link" target="_parent" href="/docs/general/join/">Community</a></li><li><a class="dropdown__link" target="_parent" href="/docs/general/events/">Events</a></li><li><a href="https://github.com/apache/apisix/milestones" target="_parent" rel="noopener noreferrer" class="dropdown__link">Roadmap</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_zID8"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/apisix/next/plugins/openid-connect/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/zh/docs/apisix/next/plugins/openid-connect/" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">ÁÆÄ‰Ωì‰∏≠Êñá</a></li></ul></div><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">üåû</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_fBfG"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_GMj9"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_k0Pq"><div class="sidebar_LIo8 sidebarWithHideableNavbar_CMI-"><a target="_parent" tabindex="-1" class="sidebarLogo_P87M" href="/"><img src="/img/logo2.svg" alt="Apache APISIX¬Æ" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo2.svg" alt="Apache APISIX¬Æ" class="themedImage_TMUO themedImage--dark_uzRr"><b>Apache APISIX¬Æ</b></a><div class="sidebarVersionSwitch_0QIZ">Version:<div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" href="/docs/apisix/next/getting-started/README/">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/apisix/next/plugins/openid-connect/"><div>Next</div></a></li><li><a class="dropdown__link" href="/docs/apisix/plugins/openid-connect/"><div>3.15<div class="badge_6FVu Latest_oyqS">Latest</div></div></a></li><li><a class="dropdown__link" href="/docs/apisix/3.14/plugins/openid-connect/"><div>3.14</div></a></li><li><a class="dropdown__link" href="/docs/apisix/3.13/plugins/openid-connect/"><div>3.13</div></a></li><li><a class="dropdown__link" href="/docs/apisix/3.12/plugins/openid-connect/"><div>3.12</div></a></li><li><a class="dropdown__link" href="/docs/apisix/3.11/plugins/openid-connect/"><div>3.11</div></a></li><li><a class="dropdown__link" href="/docs/apisix/3.10/plugins/openid-connect/"><div>3.10</div></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/3.9/getting-started/readme/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>3.9<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/3.8/getting-started/readme/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>3.8<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/3.7/getting-started/readme/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>3.7<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/3.6/getting-started/readme/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>3.6<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/3.5/getting-started/readme/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>3.5<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/3.4/getting-started/readme/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>3.4<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/3.3/getting-started/readme/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>3.3<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/3.2/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>3.2<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/3.1/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>3.1<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/3.0/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>3.0<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.15/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.15<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.14/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.14<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.13/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.13<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.12/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.12<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.11/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.11<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.10/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.10<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.9/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.9<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.8/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.8<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.7/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.7<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.6/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.6<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.5/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.5<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://apache-apisix.netlify.app/docs/apisix/2.4/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.4<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><nav class="menu thin-scrollbar menu_oAhv menuWithAnnouncementBar_IVfW"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/apisix/next/installation-guide/">Installation</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/apisix/next/architecture-design/apisix/">Architecture</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tutorials</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Terminology</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Plugins</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">AI</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">General</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Transformation</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Authentication</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apisix/next/plugins/key-auth/">key-auth</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apisix/next/plugins/jwt-auth/">jwt-auth</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apisix/next/plugins/jwe-decrypt/">jwe-decrypt</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apisix/next/plugins/basic-auth/">basic-auth</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apisix/next/plugins/authz-keycloak/">authz-keycloak</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apisix/next/plugins/authz-casdoor/">authz-casdoor</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apisix/next/plugins/wolf-rbac/">wolf-rbac</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/apisix/next/plugins/openid-connect/">openid-connect</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apisix/next/plugins/cas-auth/">cas-auth</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apisix/next/plugins/hmac-auth/">hmac-auth</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apisix/next/plugins/authz-casbin/">authz-casbin</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apisix/next/plugins/ldap-auth/">ldap-auth</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apisix/next/plugins/opa/">opa</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apisix/next/plugins/forward-auth/">forward-auth</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apisix/next/plugins/multi-auth/">multi-auth</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Security</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Traffic</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Observability</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Serverless</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Other protocols</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">API</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/apisix/next/dashboard/">Apache APISIX Dashboard</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Development</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/apisix/next/deployment-modes/">Deployment modes</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/apisix/next/FAQ/">FAQ</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Others</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a href="https://github.com/apache/apisix/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="menu__link"><span>CHANGELOG<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/apisix/next/upgrade-guide-from-2.15.x-to-3.0.0/">Upgrade Guide</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_EBxv"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_AF9Q"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_Q970"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for Apache APISIX¬Æ -- Cloud-Native API Gateway and AI Gateway <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/apisix/plugins/openid-connect/">latest version</a></b> (3.15).</div></div><div class="docItemContainer_oiyr"><article><span class="theme-doc-version-badge badge badge--secondary">Version: Next</span><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>openid-connect</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="description"></a>Description<a class="hash-link" href="#description" title="Direct link to heading">#</a></h2><p>The <code>openid-connect</code> Plugin supports the integration with <a href="https://openid.net/connect/" target="_blank" rel="noopener noreferrer">OpenID Connect (OIDC)</a> identity providers, such as Keycloak, Auth0, Microsoft Entra ID, Google, Okta, and more. It allows APISIX to authenticate clients and obtain their information from the identity provider before allowing or denying their access to upstream protected resources.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="attributes"></a>Attributes<a class="hash-link" href="#attributes" title="Direct link to heading">#</a></h2><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Default</th><th>Valid values</th><th>Description</th></tr></thead><tbody><tr><td>client_id</td><td>string</td><td>True</td><td></td><td></td><td>OAuth client ID.</td></tr><tr><td>client_secret</td><td>string</td><td>True</td><td></td><td></td><td>OAuth client secret.</td></tr><tr><td>discovery</td><td>string</td><td>True</td><td></td><td></td><td>URL to the well-known discovery document of the OpenID provider, which contains a list of OP API endpoints. The Plugin can directly utilize the endpoints from the discovery document. You can also configure these endpoints individually, which takes precedence over the endpoints supplied in the discovery document.</td></tr><tr><td>scope</td><td>string</td><td>False</td><td>openid</td><td></td><td>OIDC scope that corresponds to information that should be returned about the authenticated user, also known as <a href="https://openid.net/specs/openid-connect-core-1_0.html#StandardClaims" target="_blank" rel="noopener noreferrer">claims</a>. This is used to authorize users with proper permission. The default value is <code>openid</code>, the required scope for OIDC to return a <code>sub</code> claim that uniquely identifies the authenticated user. Additional scopes can be appended and delimited by spaces, such as <code>openid email profile</code>.</td></tr><tr><td>required_scopes</td><td>array[string]</td><td>False</td><td></td><td></td><td>Scopes required to be present in the access token. Used in conjunction with the introspection endpoint when <code>bearer_only</code> is <code>true</code>. If any required scope is missing, the Plugin rejects the request with a 403 forbidden error.</td></tr><tr><td>realm</td><td>string</td><td>False</td><td>apisix</td><td></td><td>Realm in <a href="https://www.rfc-editor.org/rfc/rfc6750#section-3" target="_blank" rel="noopener noreferrer"><code>WWW-Authenticate</code></a> response header accompanying a 401 unauthorized request due to invalid bearer token.</td></tr><tr><td>bearer_only</td><td>boolean</td><td>False</td><td>false</td><td></td><td>If true, strictly require bearer access token in requests for authentication.</td></tr><tr><td>logout_path</td><td>string</td><td>False</td><td>/logout</td><td></td><td>Path to activate the logout.</td></tr><tr><td>post_logout_redirect_uri</td><td>string</td><td>False</td><td></td><td></td><td>URL to redirect users to after the <code>logout_path</code> receive a request to log out.</td></tr><tr><td>redirect_uri</td><td>string</td><td>False</td><td></td><td></td><td>URI to redirect to after authentication with the OpenID provider. Note that the redirect URI should not be the same as the request URI, but a sub-path of the request URI. For example, if the <code>uri</code> of the Route is <code>/api/v1/*</code>, <code>redirect_uri</code> can be configured as <code>/api/v1/redirect</code>. If <code>redirect_uri</code> is not configured, APISIX will append <code>/.apisix/redirect</code> to the request URI to determine the value for <code>redirect_uri</code>.</td></tr><tr><td>timeout</td><td>integer</td><td>False</td><td>3</td><td>[1,...]</td><td>Request timeout time in seconds.</td></tr><tr><td>ssl_verify</td><td>boolean</td><td>False</td><td>false</td><td></td><td>If true, verify the OpenID provider &#x27;s SSL certificates.</td></tr><tr><td>introspection_endpoint</td><td>string</td><td>False</td><td></td><td></td><td>URL of the <a href="https://datatracker.ietf.org/doc/html/rfc7662" target="_blank" rel="noopener noreferrer">token introspection</a> endpoint for the OpenID provider used to introspect access tokens. If this is unset, the introspection endpoint presented in the well-known discovery document is used <a href="https://github.com/zmartzone/lua-resty-openidc/commit/cdaf824996d2b499de4c72852c91733872137c9c" target="_blank" rel="noopener noreferrer">as a fallback</a>.</td></tr><tr><td>introspection_endpoint_auth_method</td><td>string</td><td>False</td><td>client_secret_basic</td><td></td><td>Authentication method for the token introspection endpoint. The value should be one of the authentication methods specified in the <code>introspection_endpoint_auth_methods_supported</code> <a href="https://www.rfc-editor.org/rfc/rfc8414.html" target="_blank" rel="noopener noreferrer">authorization server metadata</a> as seen in the well-known discovery document, such as <code>client_secret_basic</code>, <code>client_secret_post</code>, <code>private_key_jwt</code>, and <code>client_secret_jwt</code>.</td></tr><tr><td>token_endpoint_auth_method</td><td>string</td><td>False</td><td>client_secret_basic</td><td></td><td>Authentication method for the token endpoint. The value should be one of the authentication methods specified in the <code>token_endpoint_auth_methods_supported</code> <a href="https://www.rfc-editor.org/rfc/rfc8414.html" target="_blank" rel="noopener noreferrer">authorization server metadata</a> as seen in the well-known discovery document, such as <code>client_secret_basic</code>, <code>client_secret_post</code>, <code>private_key_jwt</code>, and <code>client_secret_jwt</code>. If the configured method is not supported, fall back to the first method in the <code>token_endpoint_auth_methods_supported</code> array.</td></tr><tr><td>public_key</td><td>string</td><td>False</td><td></td><td></td><td>Public key used to verify JWT signature id asymmetric algorithm is used. Providing this value to perform token verification will skip token introspection in client credentials flow. You can pass the public key in <code>-----BEGIN PUBLIC KEY-----\\n‚Ä¶‚Ä¶\\n-----END PUBLIC KEY-----</code> format.</td></tr><tr><td>use_jwks</td><td>boolean</td><td>False</td><td>false</td><td></td><td>If true and if <code>public_key</code> is not set, use the JWKS to verify JWT signature and skip token introspection in client credentials flow. The JWKS endpoint is parsed from the discovery document.</td></tr><tr><td>use_pkce</td><td>boolean</td><td>False</td><td>false</td><td></td><td>If true, use the Proof Key for Code Exchange (PKCE) for Authorization Code Flow as defined in <a href="https://datatracker.ietf.org/doc/html/rfc7636" target="_blank" rel="noopener noreferrer">RFC 7636</a>.</td></tr><tr><td>token_signing_alg_values_expected</td><td>string</td><td>False</td><td></td><td></td><td>Algorithm used for signing JWT, such as <code>RS256</code>.</td></tr><tr><td>set_access_token_header</td><td>boolean</td><td>False</td><td>true</td><td></td><td>If true, set the access token in a request header. By default, the <code>X-Access-Token</code> header is used.</td></tr><tr><td>access_token_in_authorization_header</td><td>boolean</td><td>False</td><td>false</td><td></td><td>If true and if <code>set_access_token_header</code> is also true, set the access token in the <code>Authorization</code> header.</td></tr><tr><td>set_id_token_header</td><td>boolean</td><td>False</td><td>true</td><td></td><td>If true and if the ID token is available, set the value in the <code>X-ID-Token</code> request header.</td></tr><tr><td>set_userinfo_header</td><td>boolean</td><td>False</td><td>true</td><td></td><td>If true and if user info data is available, set the value in the <code>X-Userinfo</code> request header.</td></tr><tr><td>set_refresh_token_header</td><td>boolean</td><td>False</td><td>false</td><td></td><td>If true and if the refresh token is available, set the value in the <code>X-Refresh-Token</code> request header.</td></tr><tr><td>session</td><td>object</td><td>False</td><td></td><td></td><td>Session configuration used when <code>bearer_only</code> is <code>false</code> and the Plugin uses Authorization Code flow.</td></tr><tr><td>session.secret</td><td>string</td><td>True</td><td></td><td>16 or more characters</td><td>Key used for session encryption and HMAC operation when <code>bearer_only</code> is <code>false</code>.</td></tr><tr><td>session.cookie</td><td>object</td><td>False</td><td></td><td></td><td>Cookie configurations.</td></tr><tr><td>session.cookie.lifetime</td><td>integer</td><td>False</td><td>3600</td><td></td><td>Cookie lifetime in seconds.</td></tr><tr><td>session.storage</td><td>string</td><td>False</td><td>cookie</td><td>[&quot;cookie&quot;, &quot;redis&quot;]</td><td>Session storage method.</td></tr><tr><td>session.redis</td><td>object</td><td>False</td><td></td><td></td><td>Redis configuration when <code>storage</code> is <code>redis</code>.</td></tr><tr><td>session.redis.host</td><td>string</td><td>False</td><td>127.0.0.1</td><td></td><td>Redis host.</td></tr><tr><td>session.redis.port</td><td>integer</td><td>False</td><td>6379</td><td></td><td>Redis port.</td></tr><tr><td>session.redis.password</td><td>string</td><td>False</td><td></td><td></td><td>Redis password.</td></tr><tr><td>session.redis.username</td><td>string</td><td>False</td><td></td><td></td><td>Redis username.</td></tr><tr><td>session.redis.database</td><td>integer</td><td>False</td><td>0</td><td></td><td>Redis database index.</td></tr><tr><td>session.redis.prefix</td><td>string</td><td>False</td><td>sessions</td><td></td><td>Redis key prefix.</td></tr><tr><td>session.redis.ssl</td><td>boolean</td><td>False</td><td>false</td><td></td><td>Enable SSL for Redis connection.</td></tr><tr><td>session.redis.ssl_verify</td><td>boolean</td><td>False</td><td>false</td><td></td><td>Verify SSL certificate.</td></tr><tr><td>session.redis.server_name</td><td>string</td><td>False</td><td></td><td></td><td>Redis server name for SNI.</td></tr><tr><td>session.redis.connect_timeout</td><td>integer</td><td>False</td><td>1000</td><td></td><td>Connect timeout in milliseconds.</td></tr><tr><td>session.redis.send_timeout</td><td>integer</td><td>False</td><td>1000</td><td></td><td>Send timeout in milliseconds.</td></tr><tr><td>session.redis.read_timeout</td><td>integer</td><td>False</td><td>1000</td><td></td><td>Read timeout in milliseconds.</td></tr><tr><td>session.redis.keepalive_timeout</td><td>integer</td><td>False</td><td>10000</td><td></td><td>Keepalive timeout in milliseconds.</td></tr><tr><td>session_contents</td><td>object</td><td>False</td><td></td><td></td><td>Session content configurations. If unconfigured, all data will be stored in the session.</td></tr><tr><td>session_contents.access_token</td><td>boolean</td><td>False</td><td></td><td></td><td>If true, store the access token in the session.</td></tr><tr><td>session_contents.id_token</td><td>boolean</td><td>False</td><td></td><td></td><td>If true, store the ID token in the session.</td></tr><tr><td>session_contents.enc_id_token</td><td>boolean</td><td>False</td><td></td><td></td><td>If true, store the encrypted ID token in the session.</td></tr><tr><td>session_contents.user</td><td>boolean</td><td>False</td><td></td><td></td><td>If true, store the user info in the session.</td></tr><tr><td>unauth_action</td><td>string</td><td>False</td><td>auth</td><td>[&quot;auth&quot;,&quot;deny&quot;,&quot;pass&quot;]</td><td>Action for unauthenticated requests. When set to <code>auth</code>, redirect to the authentication endpoint of the OpenID provider. When set to <code>pass</code>, allow the request without authentication. When set to <code>deny</code>, return 401 unauthenticated responses rather than start the authorization code grant flow.</td></tr><tr><td>proxy_opts</td><td>object</td><td>False</td><td></td><td></td><td>Configurations for the proxy server that the OpenID provider is behind.</td></tr><tr><td>proxy_opts.http_proxy</td><td>string</td><td>False</td><td></td><td></td><td>Proxy server address for HTTP requests, such as <code>http://&lt;proxy_host&gt;:&lt;proxy_port&gt;</code>.</td></tr><tr><td>proxy_opts.https_proxy</td><td>string</td><td>False</td><td></td><td></td><td>Proxy server address for HTTPS requests, such as <code>http://&lt;proxy_host&gt;:&lt;proxy_port&gt;</code>.</td></tr><tr><td>proxy_opts.http_proxy_authorization</td><td>string</td><td>False</td><td></td><td>Basic [base64 username:password]</td><td>Default <code>Proxy-Authorization</code> header value to be used with <code>http_proxy</code>. Can be overridden with custom <code>Proxy-Authorization</code> request header.</td></tr><tr><td>proxy_opts.https_proxy_authorization</td><td>string</td><td>False</td><td></td><td>Basic [base64 username:password]</td><td>Default <code>Proxy-Authorization</code> header value to be used with <code>https_proxy</code>. Cannot be overridden with custom <code>Proxy-Authorization</code> request header since with HTTPS, the authorization is completed when connecting.</td></tr><tr><td>proxy_opts.no_proxy</td><td>string</td><td>False</td><td></td><td></td><td>Comma separated list of hosts that should not be proxied.</td></tr><tr><td>authorization_params</td><td>object</td><td>False</td><td></td><td></td><td>Additional parameters to send in the request to the authorization endpoint.</td></tr><tr><td>client_rsa_private_key</td><td>string</td><td>False</td><td></td><td></td><td>Client RSA private key used to sign JWT for authentication to the OP. Required when <code>token_endpoint_auth_method</code> is <code>private_key_jwt</code>.</td></tr><tr><td>client_rsa_private_key_id</td><td>string</td><td>False</td><td></td><td></td><td>Client RSA private key ID used to compute a signed JWT. Optional when <code>token_endpoint_auth_method</code> is <code>private_key_jwt</code>.</td></tr><tr><td>client_jwt_assertion_expires_in</td><td>integer</td><td>False</td><td>60</td><td></td><td>Life duration of the signed JWT for authentication to the OP, in seconds. Used when <code>token_endpoint_auth_method</code> is <code>private_key_jwt</code> or <code>client_secret_jwt</code>.</td></tr><tr><td>renew_access_token_on_expiry</td><td>boolean</td><td>False</td><td>true</td><td></td><td>If true, attempt to silently renew the access token when it expires or if a refresh token is available. If the token fails to renew, redirect user for re-authentication.</td></tr><tr><td>access_token_expires_in</td><td>integer</td><td>False</td><td></td><td></td><td>Lifetime of the access token in seconds if no <code>expires_in</code> attribute is present in the token endpoint response.</td></tr><tr><td>refresh_session_interval</td><td>integer</td><td>False</td><td></td><td></td><td>Time interval to refresh user ID token without requiring re-authentication. When not set, it will not check the expiration time of the session issued to the client by the gateway. If set to 900, it means refreshing the user&#x27;s id_token (or session in the browser) after 900 seconds without requiring re-authentication.</td></tr><tr><td>iat_slack</td><td>integer</td><td>False</td><td>120</td><td></td><td>Tolerance of clock skew in seconds with the <code>iat</code> claim in an ID token.</td></tr><tr><td>accept_none_alg</td><td>boolean</td><td>False</td><td>false</td><td></td><td>Set to true if the OpenID provider does not sign its ID token, such as when the signature algorithm is set to <code>none</code>.</td></tr><tr><td>accept_unsupported_alg</td><td>boolean</td><td>False</td><td>true</td><td></td><td>If true, ignore ID token signature to accept unsupported signature algorithm.</td></tr><tr><td>access_token_expires_leeway</td><td>integer</td><td>False</td><td>0</td><td></td><td>Expiration leeway in seconds for access token renewal. When set to a value greater than 0, token renewal will take place the set amount of time before token expiration. This avoids errors in case the access token just expires when arriving to the resource server.</td></tr><tr><td>force_reauthorize</td><td>boolean</td><td>False</td><td>false</td><td></td><td>If true, execute the authorization flow even when a token has been cached.</td></tr><tr><td>use_nonce</td><td>boolean</td><td>False</td><td>false</td><td></td><td>If true, enable nonce parameter in authorization request.</td></tr><tr><td>revoke_tokens_on_logout</td><td>boolean</td><td>False</td><td>false</td><td></td><td>If true, notify the authorization server a previously obtained refresh or access token is no longer needed at the revocation endpoint.</td></tr><tr><td>jwk_expires_in</td><td>integer</td><td>False</td><td>86400</td><td></td><td>Expiration time for JWK cache in seconds.</td></tr><tr><td>jwt_verification_cache_ignore</td><td>boolean</td><td>False</td><td>false</td><td></td><td>If true, force re-verification for a bearer token and ignore any existing cached verification results.</td></tr><tr><td>cache_segment</td><td>string</td><td>False</td><td></td><td></td><td>Optional name of a cache segment, used to separate and differentiate caches used by token introspection or JWT verification.</td></tr><tr><td>introspection_interval</td><td>integer</td><td>False</td><td>0</td><td></td><td>TTL of the cached and introspected access token in seconds. The default value is 0, which means this option is not used and the Plugin defaults to use the TTL passed by expiry claim defined in <code>introspection_expiry_claim</code>. If <code>introspection_interval</code> is larger than 0 and less than the TTL passed by expiry claim defined in <code>introspection_expiry_claim</code>, use <code>introspection_interval</code>.</td></tr><tr><td>introspection_expiry_claim</td><td>string</td><td>False</td><td>exp</td><td></td><td>Name of the expiry claim, which controls the TTL of the cached and introspected access token.</td></tr><tr><td>introspection_addon_headers</td><td>array[string]</td><td>False</td><td></td><td></td><td>Used to append additional header values to the introspection HTTP request. If the specified header does not exist in origin request, value will not be appended.</td></tr><tr><td>claim_validator</td><td>object</td><td>False</td><td></td><td></td><td>JWT claim validation configurations.</td></tr><tr><td>claim_validator.issuer.valid_issuers</td><td>array[string]</td><td>False</td><td></td><td></td><td>An array of trusted JWT issuers. If unconfigured, the issuer returned by discovery endpoint will be used. If both are unavailable, the issuer will not be validated.</td></tr><tr><td>claim_validator.audience</td><td>object</td><td>False</td><td></td><td></td><td><a href="https://openid.net/specs/openid-connect-core-1_0.html" target="_blank" rel="noopener noreferrer">Audience claim</a> validation configurations.</td></tr><tr><td>claim_validator.audience.claim</td><td>string</td><td>False</td><td>aud</td><td></td><td>Name of the claim that contains the audience.</td></tr><tr><td>claim_validator.audience.required</td><td>boolean</td><td>False</td><td>false</td><td></td><td>If true, audience claim is required and the name of the claim will be the name defined in <code>claim</code>.</td></tr><tr><td>claim_validator.audience.match_with_client_id</td><td>boolean</td><td>False</td><td>false</td><td></td><td>If true, require the audience to match the client ID. If the audience is a string, it must exactly match the client ID. If the audience is an array of strings, at least one of the values must match the client ID. If no match is found, you will receive a <code>mismatched audience</code> error. This requirement is stated in the OpenID Connect specification to ensure that the token is intended for the specific client.</td></tr><tr><td>claim_schema</td><td>object</td><td>False</td><td></td><td></td><td>JSON schema of OIDC response claim. Example: <code>{&quot;type&quot;:&quot;object&quot;,&quot;properties&quot;:{&quot;access_token&quot;:{&quot;type&quot;:&quot;string&quot;}},&quot;required&quot;:[&quot;access_token&quot;]}</code> - validates that the response contains a required string field <code>access_token</code>.</td></tr></tbody></table><p>NOTE: <code>encrypt_fields = {&quot;client_secret&quot;}</code> is also defined in the schema, which means that the field will be stored encrypted in etcd. See <a href="/docs/apisix/next/plugin-develop/#encrypted-storage-fields">encrypted storage fields</a>.
In addition, you can use Environment Variables or APISIX secret to store and reference plugin attributes. APISIX currently supports storing secrets in two ways - <a href="/docs/apisix/next/terminology/secret/">Environment Variables and HashiCorp Vault</a>.</p><p>For example, use below command to set environment variable
<code>export keycloak_secret=abc</code></p><p>and use it in plugin conf like below</p><p><code>&quot;client_secret&quot;: &quot;$ENV://keycloak_secret&quot;</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="examples"></a>Examples<a class="hash-link" href="#examples" title="Direct link to heading">#</a></h2><p>The examples below demonstrate how you can configure the <code>openid-connect</code> Plugin for different scenarios.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>You can fetch the <code>admin_key</code> from <code>config.yaml</code> and save to an environment variable with the following command:</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 bash"><pre tabindex="0" class="prism-code language-bash codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">admin_key</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">yq </span><span class="token variable string" style="color:#e3116c">&#x27;.deployment.admin.admin_key[0].key&#x27;</span><span class="token variable" style="color:#36acaa"> conf/config.yaml </span><span class="token variable operator" style="color:#393A34">|</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable function" style="color:#d73a49">sed</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable string" style="color:#e3116c">&#x27;s/&quot;//g&#x27;</span><span class="token variable" style="color:#36acaa">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="authorization-code-flow"></a>Authorization Code Flow<a class="hash-link" href="#authorization-code-flow" title="Direct link to heading">#</a></h3><p>The authorization code flow is defined in <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-4.1" target="_blank" rel="noopener noreferrer">RFC 6749, Section 4.1</a>. It involves exchanging an temporary authorization code for an access token, and is typically used by confidential and public clients.</p><p>The following diagram illustrates the interaction between different entities when you implement the authorization code flow:</p><p><span class="lazy-load-image-background blur" style="color:transparent;display:inline-block"><div><noscript><img alt="Authorization code flow diagram" src="https://static.api7.ai/uploads/2023/11/27/Ga2402sb_oidc-code-auth-flow-revised.png"></noscript><div style="width:500px;height:300px;border-radius:1rem;background-color:#d2d2d7"></div></div></span></p><p>When an incoming request does not contain an access token in its header nor in an appropriate session cookie, the Plugin acts as a relying party and redirects to the authorization server to continue the authorization code flow.</p><p>After successful authentication, the Plugin keeps the token in the session cookie, and subsequent requests will use the token stored in the cookie.</p><p>See <a href="/docs/apisix/next/tutorials/keycloak-oidc/#implement-authorization-code-grant">Implement Authorization Code Grant</a> for an example to use the <code>openid-connect</code> Plugin to integrate with Keycloak using the authorization code flow.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="proof-key-for-code-exchange-pkce"></a>Proof Key for Code Exchange (PKCE)<a class="hash-link" href="#proof-key-for-code-exchange-pkce" title="Direct link to heading">#</a></h3><p>The Proof Key for Code Exchange (PKCE) is defined in <a href="https://datatracker.ietf.org/doc/html/rfc7636" target="_blank" rel="noopener noreferrer">RFC 7636</a>. PKCE enhances the authorization code flow by adding a code challenge and verifier to prevent authorization code interception attacks.</p><p>The following diagram illustrates the interaction between different entities when you implement the authorization code flow with PKCE:</p><p><span class="lazy-load-image-background blur" style="color:transparent;display:inline-block"><div><noscript><img alt="Authorization code flow with PKCE diagram" src="https://static.api7.ai/uploads/2024/11/04/aJ2ZVuTC_auth-code-with-pkce.png"></noscript><div style="width:500px;height:300px;border-radius:1rem;background-color:#d2d2d7"></div></div></span></p><p>See <a href="/docs/apisix/next/tutorials/keycloak-oidc/#implement-authorization-code-grant">Implement Authorization Code Grant</a> for an example to use the <code>openid-connect</code> Plugin to integrate with Keycloak using the authorization code flow with PKCE.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="client-credential-flow"></a>Client Credential Flow<a class="hash-link" href="#client-credential-flow" title="Direct link to heading">#</a></h3><p>The client credential flow is defined in <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-4.4" target="_blank" rel="noopener noreferrer">RFC 6749, Section 4.4</a>. It involves clients requesting an access token with its own credentials to access protected resources, typically used in machine to machine authentication and is not on behalf of a specific user.</p><p>The following diagram illustrates the interaction between different entities when you implement the client credential flow:</p><div style="text-align:center"><span class="lazy-load-image-background blur" style="color:transparent;display:inline-block"><div><noscript><img alt="Client credential flow diagram" src="https://static.api7.ai/uploads/2024/10/28/sbHxqnOz_client-credential-no-introspect.png" style="width:70%"></noscript><div style="width:500px;height:300px;border-radius:1rem;background-color:#d2d2d7"></div></div></span></div><br><p>See <a href="/docs/apisix/next/tutorials/keycloak-oidc/#implement-client-credentials-grant">Implement Client Credentials Grant</a> for an example to use the <code>openid-connect</code> Plugin to integrate with Keycloak using the client credentials flow.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="introspection-flow"></a>Introspection Flow<a class="hash-link" href="#introspection-flow" title="Direct link to heading">#</a></h3><p>The introspection flow is defined in <a href="https://datatracker.ietf.org/doc/html/rfc7662" target="_blank" rel="noopener noreferrer">RFC 7662</a>. It involves verifying the validity and details of an access token by querying an authorization server‚Äôs introspection endpoint.</p><p>In this flow, when a client presents an access token to the resource server, the resource server sends a request to the authorization server‚Äôs introspection endpoint, which responds with token details if the token is active, including information like token expiration, associated scopes, and the user or client it belongs to.</p><p>The following diagram illustrates the interaction between different entities when you implement the authorization code flow with token introspection:</p><br><div style="text-align:center"><span class="lazy-load-image-background blur" style="color:transparent;display:inline-block"><div><noscript><img alt="Client credential with introspection diagram" src="https://static.api7.ai/uploads/2024/10/29/Y2RWIUV9_client-cred-flow-introspection.png" style="width:55%"></noscript><div style="width:500px;height:300px;border-radius:1rem;background-color:#d2d2d7"></div></div></span></div><br><p>See <a href="/docs/apisix/next/tutorials/keycloak-oidc/#implement-client-credentials-grant">Implement Client Credentials Grant</a> for an example to use the <code>openid-connect</code> Plugin to integrate with Keycloak using the client credentials flow with token introspection.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="password-flow"></a>Password Flow<a class="hash-link" href="#password-flow" title="Direct link to heading">#</a></h3><p>The password flow is defined in <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-4.3" target="_blank" rel="noopener noreferrer">RFC 6749, Section 4.3</a>. It is designed for trusted applications, allowing them to obtain an access token directly using a user‚Äôs username and password. In this grant type, the client app sends the user‚Äôs credentials along with its own client ID and secret to the authorization server, which then authenticates the user and, if valid, issues an access token.</p><p>Though efficient, this flow is intended for highly trusted, first-party applications only, as it requires the app to handle sensitive user credentials directly, posing significant security risks if used in third-party contexts.</p><p>The following diagram illustrates the interaction between different entities when you implement the password flow:</p><div style="text-align:center"><span class="lazy-load-image-background blur" style="color:transparent;display:inline-block"><div><noscript><img alt="Password flow diagram" src="https://static.api7.ai/uploads/2024/10/30/njkWZVgX_pass-grant.png" style="width:70%"></noscript><div style="width:500px;height:300px;border-radius:1rem;background-color:#d2d2d7"></div></div></span></div><br><p>See <a href="/docs/apisix/next/tutorials/keycloak-oidc/#implement-password-grant">Implement Password Grant</a> for an example to use the <code>openid-connect</code> Plugin to integrate with Keycloak using the password flow.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="refresh-token-grant"></a>Refresh Token Grant<a class="hash-link" href="#refresh-token-grant" title="Direct link to heading">#</a></h3><p>The refresh token grant is defined in <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-6" target="_blank" rel="noopener noreferrer">RFC 6749, Section 6</a>. It enables clients to request a new access token without requiring the user to re-authenticate, using a previously issued refresh token. This flow is typically used when an access token expires, allowing the client to maintain continuous access to resources without user intervention. Refresh tokens are issued along with access tokens in certain OAuth flows and their lifespan and security requirements depend on the authorization server‚Äôs configuration.</p><p>The following diagram illustrates the interaction between different entities when implementing password flow with refresh token flow:</p><div style="text-align:center"><span class="lazy-load-image-background blur" style="color:transparent;display:inline-block"><div><noscript><img alt="Password grant with refresh token flow diagram" src="https://static.api7.ai/uploads/2024/10/30/YBF7rI6M_password-with-refresh-token.png" style="width:100%"></noscript><div style="width:500px;height:300px;border-radius:1rem;background-color:#d2d2d7"></div></div></span></div><br><p>See <a href="/docs/apisix/next/tutorials/keycloak-oidc/#refresh-token">Refresh Token</a> for an example to use the <code>openid-connect</code> Plugin to integrate with Keycloak using the password flow with token refreshes.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3ly5" id="troubleshooting"></a>Troubleshooting<a class="hash-link" href="#troubleshooting" title="Direct link to heading">#</a></h2><p>This section covers a few commonly seen issues when working with this Plugin to help you troubleshoot.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="apisix-cannot-connect-to-openid-provider"></a>APISIX Cannot Connect to OpenID provider<a class="hash-link" href="#apisix-cannot-connect-to-openid-provider" title="Direct link to heading">#</a></h3><p>If APISIX fails to resolve or cannot connect to the OpenID provider, double check the DNS settings in your configuration file <code>config.yaml</code> and modify as needed.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3ly5" id="no-session-state-found"></a>No Session State Found<a class="hash-link" href="#no-session-state-found" title="Direct link to heading">#</a></h3><p>If you encounter a <code>500 internal server error</code> with the following message in the log when working with <a href="#authorization-code-flow">authorization code flow</a>, there could be a number of reasons.</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 text"><pre tabindex="0" class="prism-code language-text codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">the error request to the redirect_uri path, but there&#x27;s no session state found</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithHideOnScrollNavbar_3ly5" id="1-misconfigured-redirection-uri"></a>1. Misconfigured Redirection URI<a class="hash-link" href="#1-misconfigured-redirection-uri" title="Direct link to heading">#</a></h4><p>A common misconfiguration is to configure the <code>redirect_uri</code> the same as the URI of the route. When a user initiates a request to visit the protected resource, the request directly hits the redirection URI with no session cookie in the request, which leads to the no session state found error.</p><p>To properly configure the redirection URI, make sure that the <code>redirect_uri</code> matches the Route where the Plugin is configured, without being fully identical. For instance, a correct configuration would be to configure <code>uri</code> of the Route to <code>/api/v1/*</code> and the path portion of the <code>redirect_uri</code> to <code>/api/v1/redirect</code>.</p><p>You should also ensure that the <code>redirect_uri</code> include the scheme, such as <code>http</code> or <code>https</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithHideOnScrollNavbar_3ly5" id="2-cookie-not-sent-or-absent"></a>2. Cookie Not Sent or Absent<a class="hash-link" href="#2-cookie-not-sent-or-absent" title="Direct link to heading">#</a></h4><p>Check if the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie#samesitesamesite-value" target="_blank" rel="noopener noreferrer"><code>SameSite</code></a> cookie attribute is properly set (i.e. if your application needs to send the cookie cross sites) to see if this could be a factor that prevents the cookie being saved to the browser&#x27;s cookie jar or being sent from the browser.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithHideOnScrollNavbar_3ly5" id="3-upstream-sent-too-big-header"></a>3. Upstream Sent Too Big Header<a class="hash-link" href="#3-upstream-sent-too-big-header" title="Direct link to heading">#</a></h4><p>If you have NGINX sitting in front of APISIX to proxy client traffic, see if you observe the following error in NGINX&#x27;s <code>error.log</code>:</p><div class="codeBlockContainer_EiTO"><div class="codeBlockContent_X2I6 text"><pre tabindex="0" class="prism-code language-text codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">upstream sent too big header while reading response header from upstream</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">Copy</button></div></div><p>If so, try adjusting <code>proxy_buffers</code>, <code>proxy_buffer_size</code>, and <code>proxy_busy_buffers_size</code> to larger values.</p><p>Another option is to configure the <code>session_content</code> attribute to adjust which data to store in session. For instance, you can set <code>session_content.access_token</code> to <code>true</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithHideOnScrollNavbar_3ly5" id="4-invalid-client-secret"></a>4. Invalid Client Secret<a class="hash-link" href="#4-invalid-client-secret" title="Direct link to heading">#</a></h4><p>Verify if <code>client_secret</code> is valid and correct. An invalid <code>client_secret</code> would lead to an authentication failure and no token shall be returned and stored in session.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithHideOnScrollNavbar_3ly5" id="5-pkce-idp-configuration"></a>5. PKCE IdP Configuration<a class="hash-link" href="#5-pkce-idp-configuration" title="Direct link to heading">#</a></h4><p>If you are enabling PKCE with the authorization code flow, make sure you have configured the IdP client to use PKCE. For example, in Keycloak, you should configure the PKCE challenge method in the client&#x27;s advanced settings:</p><div style="text-align:center"><span class="lazy-load-image-background blur" style="color:transparent;display:inline-block"><div><noscript><img alt="PKCE keycloak configuration" src="https://static.api7.ai/uploads/2024/11/04/xvnCNb20_pkce-keycloak-revised.jpeg" style="width:70%"></noscript><div style="width:500px;height:300px;border-radius:1rem;background-color:#d2d2d7"></div></div></span></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="/edit#https://github.com/apache/apisix/edit/master/docs/en/latest/plugins/openid-connect.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/apisix/next/plugins/wolf-rbac/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ wolf-rbac</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/apisix/next/plugins/cas-auth/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">cas-auth ¬ª</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#description" class="table-of-contents__link">Description</a></li><li><a href="#attributes" class="table-of-contents__link">Attributes</a></li><li><a href="#examples" class="table-of-contents__link">Examples</a><ul><li><a href="#authorization-code-flow" class="table-of-contents__link">Authorization Code Flow</a></li><li><a href="#proof-key-for-code-exchange-pkce" class="table-of-contents__link">Proof Key for Code Exchange (PKCE)</a></li><li><a href="#client-credential-flow" class="table-of-contents__link">Client Credential Flow</a></li><li><a href="#introspection-flow" class="table-of-contents__link">Introspection Flow</a></li><li><a href="#password-flow" class="table-of-contents__link">Password Flow</a></li><li><a href="#refresh-token-grant" class="table-of-contents__link">Refresh Token Grant</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link">Troubleshooting</a><ul><li><a href="#apisix-cannot-connect-to-openid-provider" class="table-of-contents__link">APISIX Cannot Connect to OpenID provider</a></li><li><a href="#no-session-state-found" class="table-of-contents__link">No Session State Found</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="container_MP5Z"><div class="linksRow_iwpv"><div class="linksCol_a1ec"><div>ASF</div><ul><li class="footer__item"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer"><span></span><span>Foundation</span></a></li><li class="footer__item"><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer"><span></span><span>License</span></a></li><li class="footer__item"><a href="https://www.apache.org/events/" target="_blank" rel="noopener noreferrer"><span></span><span>Events</span></a></li><li class="footer__item"><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer"><span></span><span>Security</span></a></li><li class="footer__item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer"><span></span><span>Sponsorship</span></a></li><li class="footer__item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer"><span></span><span>Thanks</span></a></li></ul></div><div class="linksCol_a1ec"><div>Community</div><ul><li class="footer__item"><a href="https://github.com/apache/apisix/issues" target="_blank" rel="noopener noreferrer"><span></span><span>GitHub</span></a></li><li class="footer__item"><a href="/docs/general/join/"><span></span><span>Slack</span></a></li><li class="footer__item"><a href="https://twitter.com/ApacheAPISIX" target="_blank" rel="noopener noreferrer"><span></span><span>Twitter</span></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCgPD18cMhOg5rmPVnQhAC8g" target="_blank" rel="noopener noreferrer"><span></span><span>YouTube</span></a></li></ul></div><div class="linksCol_a1ec"><div>More</div><ul><li class="footer__item"><a target="_parent" href="/blog/"><span></span><span>Blog</span></a></li><li class="footer__item"><a target="_parent" href="/showcase/"><span></span><span>Showcase</span></a></li><li class="footer__item"><a target="_parent" href="/plugins/"><span></span><span>Plugin Hub</span></a></li><li class="footer__item"><a href="https://github.com/apache/apisix/milestones" target="_parent" rel="noopener noreferrer"><span></span><span>Roadmap</span></a></li></ul></div></div><div class="copyright_ZfFh"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer"><span style="display:inline-block;width:231.25px;height:40px"></span></a><div>Copyright ¬© 2019-2026 The Apache Software Foundation. Apache APISIX, APISIX¬Æ, Apache, the Apache feather logo, and the Apache APISIX project logo are either registered trademarks or trademarks of the Apache Software Foundation.</div></div></footer></div>
<script src="https://apisix-website-static.apiseven.com/assets/js/runtime~main.1e643d3e.js"></script>
<script src="https://apisix-website-static.apiseven.com/assets/js/main.8246645a.js"></script>
</body>
</html>