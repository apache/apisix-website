<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="ahrefs-site-verification" content="c2f7370ecf46173f4fb25f114e74c97e0a2976d4f02f61c9b00a9d7d34e34698">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache APISIX¬Æ -- Cloud-Native API Gateway and AI Gateway RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache APISIX¬Æ -- Cloud-Native API Gateway and AI Gateway Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Apache APISIX¬Æ -- Cloud-Native API Gateway and AI Gateway" href="/opensearch.xml">
<script type="application/ld+json">{"@context":"https://schema.org","@type":"WebSite","name":"Apache APISIX","url":"https://apisix.apache.org"}</script>
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="24b59d9a-682e-4c3d-9e83-bf2ee85cdc19" data-project-name="APISIX" data-project-color="#E8442E" data-project-logo="https://static.apiseven.com/202202/apache-apisix.png" data-modal-disclaimer="This is a custom LLM for APISIX with access to all developer documentation, GitHub issues and discussions." data-modal-example-questions="How to set up canary release in APISIX?,How to develop a custom APISIX plugin?,How to use custom NGINX configuration in APISIX?,How to configure mTLS between clients and APISIX?,How to only allow a specific APISIX consumer to access special services or routes?" async></script><title data-react-helmet="true">Announcing Integration between Apache APISIX and open-appsec WAF | Apache APISIX¬Æ -- Cloud-Native API Gateway and AI Gateway</title><meta data-react-helmet="true" property="og:url" content="https://apisix.apache.org/blog/2024/10/22/apisix-integrates-with-open-appsec/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" name="robots" content="index,follow"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" property="og:title" content="Announcing Integration between Apache APISIX and open-appsec WAF | Apache APISIX¬Æ -- Cloud-Native API Gateway and AI Gateway"><meta data-react-helmet="true" name="description" content="Let&#x27;s protect your web APIs and applications exposed by Apache APISIX against known and unknown attacks with open-appsec - the automatic, machine learning-based WAF."><meta data-react-helmet="true" property="og:description" content="Let&#x27;s protect your web APIs and applications exposed by Apache APISIX against known and unknown attacks with open-appsec - the automatic, machine learning-based WAF."><meta data-react-helmet="true" name="keywords" content="API gateway,Apache APISIX,WAF,Open-appsec,Machine Learning,API Security,Open Source"><meta data-react-helmet="true" property="og:image" content="https://static.apiseven.com/uploads/2024/10/18/8d1iVJWL_logo%20x%20open-appsec.png"><meta data-react-helmet="true" name="twitter:image" content="https://static.apiseven.com/uploads/2024/10/18/8d1iVJWL_logo%20x%20open-appsec.png"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2024-10-22T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://github.com/ByteSkater,https://github.com/Yilialinn"><meta data-react-helmet="true" property="article:tag" content="Ecosystem"><link data-react-helmet="true" rel="shortcut icon" href="https://static.apiseven.com/202202/favicon.png"><link data-react-helmet="true" rel="alternate" href="https://apisix.apache.org/blog/2024/10/22/apisix-integrates-with-open-appsec/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://apisix.apache.org/blog/2024/10/22/apisix-integrates-with-open-appsec/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://38VC84A2WJ-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://www.openappsec.io/post/announcing-open-appsec-WAF-integration-with-Apache-APISIX-API-Gateway"><link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Medium.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Bold.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Light.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Demi.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-ExtraBold.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://apisix-website-static.apiseven.com/assets/js/runtime~main.4bbc9839.js" as="script">
<link rel="preload" href="https://apisix-website-static.apiseven.com/assets/js/main.a516b59b.js" as="script">
<link rel="stylesheet" href="https://apisix-website-static.apiseven.com/assets/css/styles.9943cb19.css">
<!-- Matomo from the ASF -->
<script>var _paq=window._paq=window._paq||[];_paq.push(["disableCookies"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var a="https://analytics.apache.org/";_paq.push(["setTrackerUrl",a+"matomo.php"]),_paq.push(["setSiteId","17"]);var e=document,p=e.createElement("script"),t=e.getElementsByTagName("script")[0];p.async=!0,p.src=a+"matomo.js",t.parentNode.insertBefore(p,t)}()</script>
<!-- End Matomo Code -->
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><div class="announcementBar_axC9" style="background-color:#e8433e;color:white" role="banner"><div class="announcementBarPlaceholder_xYHE"></div><div class="announcementBarContent_6uhP">ü§î Introducing APISIX AI Gateway ‚Äì Built for LLMs and AI workloads. <a target="_blank" rel="noopener noreferrer" href="/ai-gateway/"> Learn More</a></div><button type="button" class="clean-btn close announcementBarClose_A3A1" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_RReh"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a target="_parent" class="navbar__brand" href="/"><img src="/img/logo2.svg" alt="Apache APISIX¬Æ" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo2.svg" alt="Apache APISIX¬Æ" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Apache APISIX¬Æ</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" target="_parent" href="/docs/">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" target="_parent" href="/docs/apisix/getting-started/">Apache APISIX¬ÆÔ∏è</a></li><li><a class="dropdown__link" target="_parent" href="/docs/apisix/next/dashboard/">Apache APISIX¬ÆÔ∏è Dashboard</a></li><li><a class="dropdown__link" target="_parent" href="/docs/ingress-controller/overview/">Apache APISIX¬ÆÔ∏è Ingress Controller</a></li><li><a class="dropdown__link" target="_parent" href="/docs/helm-chart/apisix/">Apache APISIX¬ÆÔ∏è Helm Charts</a></li><li><a class="dropdown__link" target="_parent" href="/docs/docker/build/">Apache APISIX¬ÆÔ∏è Docker</a></li><li><a class="dropdown__link" target="_parent" href="/docs/java-plugin-runner/development/">Apache APISIX¬ÆÔ∏è Java Plugin Runner</a></li><li><a class="dropdown__link" target="_parent" href="/docs/go-plugin-runner/getting-started/">Apache APISIX¬ÆÔ∏è Go Plugin Runner</a></li><li><a class="dropdown__link" target="_parent" href="/docs/python-plugin-runner/getting-started/">Apache APISIX¬ÆÔ∏è Python Plugin Runner</a></li><li><a class="dropdown__link" target="_parent" href="/docs/general/join/">General</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" target="_parent" href="/blog/">Blog</a><a class="navbar__item navbar__link" target="_parent" href="/blog/tags/case-studies/">Case Studies</a><a class="navbar__item navbar__link" target="_parent" href="/downloads/">Downloads</a><a class="navbar__item navbar__link" target="_parent" href="/help/">Help</a><a class="navbar__item navbar__link" target="_parent" href="/team/">Team</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">Resources</a><ul class="dropdown__menu"><li><a class="dropdown__link" target="_parent" href="/showcase/">Showcase</a></li><li><a class="dropdown__link" target="_parent" href="/docs/general/code-samples/">Code Samples</a></li><li><a class="dropdown__link" target="_parent" href="/plugins/">PluginHub</a></li><li><a class="dropdown__link" target="_parent" href="/docs/general/join/">Community</a></li><li><a class="dropdown__link" target="_parent" href="/docs/general/events/">Events</a></li><li><a href="https://github.com/apache/apisix/milestones" target="_parent" rel="noopener noreferrer" class="dropdown__link">Roadmap</a></li></ul></div><a href="/zh/blog" target="_parent" rel="noopener noreferrer" class="localizedBlogLink_W2zh">‰∏≠ÊñáÂçöÂÆ¢</a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">üåú</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">üåû</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_SGhp"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="sticky-outer-wrapper placeholder_iq-X"><div class="sticky-inner-wrapper" style="position:relative;top:0px;z-index:199"><div class="tagsHeader_HGHP"><a target="_parent" href="/blog/tags/case-studies/">Case Studies</a><a target="_parent" href="/blog/tags/ecosystem/">Ecosystem</a><a target="_parent" href="/blog/tags/authentication/">Authentication</a><a target="_parent" href="/blog/tags/plugins/">Plugins</a><a target="_parent" href="/blog/tags/community/">Community</a><a target="_parent" href="/blog/tags/vulnerabilities/">Vulnerabilities</a></div></div></div><div class="container margin-vert--lg"><div class="row" style="justify-content:center"><div class="col col--9"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_d4p0" itemprop="headline">Announcing Integration between Apache APISIX and open-appsec WAF</h1><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2024-10-22T00:00:00.000Z" itemprop="datePublished">October 22, 2024</time> ¬∑ <!-- -->13 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_dGI0"><div class="avatar margin-bottom--sm"><a href="https://github.com/ByteSkater" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_KCbV" src="https://github.com/ByteSkater.png" alt="Christopher Lutat"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ByteSkater" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Christopher Lutat</span></a></div><small class="avatar__subtitle" itemprop="description">Author</small></div></div></div><div class="col col--6 authorCol_dGI0"><div class="avatar margin-bottom--sm"><a href="https://github.com/Yilialinn" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_KCbV" src="https://github.com/Yilialinn.png" alt="Yilia Lin"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/Yilialinn" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Yilia Lin</span></a></div><small class="avatar__subtitle" itemprop="description">Technical Writer</small></div></div></div></div></header><meta itemprop="image" content="https://static.apiseven.com/uploads/2024/10/18/8d1iVJWL_logo%20x%20open-appsec.png"><div class="markdown" itemprop="articleBody"><section class="shareSection_OUzq"><div><button aria-label="linkedin" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#007fb1"></circle><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></svg></button><button aria-label="twitter" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#00aced"></circle><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></svg></button><button aria-label="reddit" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#ff4500"></circle><path d="m 52.8165,31.942362 c 0,-2.4803 -2.0264,-4.4965 -4.5169,-4.4965 -1.2155,0 -2.3171,0.4862 -3.128,1.2682 -3.077,-2.0247 -7.2403,-3.3133 -11.8507,-3.4782 l 2.5211,-7.9373 6.8272,1.5997 -0.0102,0.0986 c 0,2.0281 1.6575,3.6771 3.6958,3.6771 2.0366,0 3.6924,-1.649 3.6924,-3.6771 0,-2.0281 -1.6575,-3.6788 -3.6924,-3.6788 -1.564,0 -2.8968,0.9758 -3.4357,2.3443 l -7.3593,-1.7255 c -0.3213,-0.0782 -0.6477,0.1071 -0.748,0.4233 L 32,25.212062 c -4.8246,0.0578 -9.1953,1.3566 -12.41,3.4425 -0.8058,-0.7446 -1.8751,-1.2104 -3.0583,-1.2104 -2.4905,0 -4.5152,2.0179 -4.5152,4.4982 0,1.649 0.9061,3.0787 2.2389,3.8607 -0.0884,0.4794 -0.1462,0.9639 -0.1462,1.4569 0,6.6487 8.1736,12.0581 18.2223,12.0581 10.0487,0 18.224,-5.4094 18.224,-12.0581 0,-0.4658 -0.0493,-0.9248 -0.1275,-1.377 1.4144,-0.7599 2.3885,-2.2304 2.3885,-3.9406 z m -29.2808,3.0872 c 0,-1.4756 1.207,-2.6775 2.6894,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 -1.4824,0 -2.6894,-1.2002 -2.6894,-2.6758 z m 15.4037,7.9373 c -1.3549,1.3481 -3.4816,2.0043 -6.5008,2.0043 l -0.0221,-0.0051 -0.0221,0.0051 c -3.0209,0 -5.1476,-0.6562 -6.5008,-2.0043 -0.2465,-0.2448 -0.2465,-0.6443 0,-0.8891 0.2465,-0.2465 0.6477,-0.2465 0.8942,0 1.105,1.0999 2.9393,1.6337 5.6066,1.6337 l 0.0221,0.0051 0.0221,-0.0051 c 2.6673,0 4.5016,-0.5355 5.6066,-1.6354 0.2465,-0.2465 0.6477,-0.2448 0.8942,0 0.2465,0.2465 0.2465,0.6443 0,0.8908 z m -0.3213,-5.2615 c -1.4824,0 -2.6877,-1.2002 -2.6877,-2.6758 0,-1.4756 1.2053,-2.6775 2.6877,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 z" fill="white"></path></svg></button></div></section><blockquote><p>We are excited to announce a new integration between Apache APISIX and open-appsec WAF, combining the power of a dynamic API gateway with cutting-edge application security.</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="introduction">Introduction<a aria-hidden="true" class="hash-link" href="#introduction" title="Direct link to heading">‚Äã</a></h2><p>open-appsec WAF is excited to announce a new integration with the open-source API gateway Apache APISIX.</p><p>This new collaboration between the open-appsec and API7 teams now allows users to protect their web APIs and other web services exposed by Apache APISIX against unknown and known attack types effectively based on open-appsec&#x27;s advanced machine-learning-based technology and also adds several more enhanced security capabilities.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="about-apache-apisix">About Apache APISIX<a aria-hidden="true" class="hash-link" href="#about-apache-apisix" title="Direct link to heading">‚Äã</a></h3><p><a href="https://apisix.apache.org/" target="_blank" rel="noopener noreferrer">Apache APISIX</a> is a modern, flexible, and high-performance open-source API gateway solution designed to handle various use cases in microservices and cloud-native architectures. Its primary purpose is to facilitate API management by serving as a gateway for managing, securing, and optimizing API traffic between clients and backend services.</p><p>Further use cases for APISIX as an API gateway include load balancing, rate limiting, authentication, and authorization. It provides comprehensive features such as traffic control, dynamic upstream, and plugin extensibility, enabling developers to customize and extend functionality according to their specific needs.</p><ul><li><p>Website: <a href="https://apisix.apache.org" target="_blank" rel="noopener noreferrer">apisix.apache.org</a></p></li><li><p>Github: <a href="https://github.com/apache/apisix" target="_blank" rel="noopener noreferrer">github.com/apache/apisix</a></p></li><li><p>Docs: <a href="https://apisix.apache.org/docs" target="_blank" rel="noopener noreferrer">apisix.apache.org/docs</a></p></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="about-open-appsec-waf">About open-appsec WAF<a aria-hidden="true" class="hash-link" href="#about-open-appsec-waf" title="Direct link to heading">‚Äã</a></h3><p><a href="https://www.openappsec.io" target="_blank" rel="noopener noreferrer">open-appsec WAF</a> provides automatic, preemptive threat prevention and integrates with various types of reverse proxies like NGINX as well as API gateways like APISIX. It is machine-learning-based, meaning it doesn&#x27;t require signatures (or updates) at all. This enables it to provide automatic, state-of-the-art threat prevention even for true zero-day attacks while significantly reducing both administrative effort and the amount of false positives.</p><p>In addition, open-appsec provides many additional security layers such as AntiBot, rate limiting, schema enforcement, snort signature support, custom rules/exceptions, and more. open-appsec can be managed centrally using a Web UI provided as a SaaS service and also locally using a declarative configuration file.</p><ul><li><p>Website: <a href="https://www.openappsec.io" target="_blank" rel="noopener noreferrer">www.openappsec.io</a></p></li><li><p>Github: <a href="https://github.com/openappsec" target="_blank" rel="noopener noreferrer">github.com/openappsec</a></p></li><li><p>Docs: <a href="https://docs.openappsec.io" target="_blank" rel="noopener noreferrer">docs.openappsec.io</a></p></li><li><p>Playgrounds: <a href="https://www.openappsec.io/playground" target="_blank" rel="noopener noreferrer">www.openappsec.io/playground</a></p></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="integrating-apache-apisix-with-open-appsec">Integrating Apache APISIX with open-appsec<a aria-hidden="true" class="hash-link" href="#integrating-apache-apisix-with-open-appsec" title="Direct link to heading">‚Äã</a></h2><p>With this new integration, APISIX users will now have access to open-appsec WAF as an integrated, state-of-the-art machine-learning-based WAF solution for the protection of their web APIs and web applications.</p><p>They can now use e.g. open-appsec&#x27;s free and open-source &quot;Community Edition&quot; to get effective, AI-based protection against known but also unknown attacks for everything exposed by their APISIX API gateway, while at the same time reducing the amount of false positives significantly unburdening the administrator from tedious tasks such as creating exceptions, updating traditional signature-based policies and more.</p><p>This integration will be available for all common platforms: Linux, Docker, and Kubernetes.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="linux">Linux<a aria-hidden="true" class="hash-link" href="#linux" title="Direct link to heading">‚Äã</a></h3><p><strong>For Linux &quot;embedded&quot; deployments</strong> of APISIX, an open-appsec installer will add an &quot;open-appsec attachment&quot; module to the existing APISIX installation and also install the &quot;open-appsec agent&quot; alongside it, which will receive the traffic from the attachment, inspect it, and return the concluded action to block or allow the traffic back to the APISIX respectively the open-appsec attachment integrated with it.</p><p>Here&#x27;s a simple architecture schematic for Linux deployment.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/uploads/2024/10/18/6QZvRy6P_linux-deployment.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/uploads/2024/10/18/6QZvRy6P_linux-deployment.webp, https://static.apiseven.com/uploads/2024/10/18/6QZvRy6P_linux-deployment.png" alt="Architecture for Linus Deployment" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/uploads/2024/10/18/6QZvRy6P_linux-deployment.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/uploads/2024/10/18/6QZvRy6P_linux-deployment.webp, https://static.apiseven.com/apisix-thumbnail/uploads/2024/10/18/6QZvRy6P_linux-deployment.png" alt="Architecture for Linus Deployment" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/uploads/2024/10/18/6QZvRy6P_linux-deployment.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="docker">Docker<a aria-hidden="true" class="hash-link" href="#docker" title="Direct link to heading">‚Äã</a></h3><p><strong>For Docker-based deployments</strong> of APISIX with open-appsec WAF, there is a special APISIX container image available, to which the open-appsec attachment was already added and also an enhanced docker-compose file, which deploys both, the APISIX gateway container as well as an open-appsec Agent that does the security inspection and returns the concluded decisions to the APISIX gateway to allow or block traffic.</p><p>Here&#x27;s a simple architecture schematic for deployment on Docker.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/uploads/2024/10/18/bxKsXOqW_docker-deployment.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/uploads/2024/10/18/bxKsXOqW_docker-deployment.webp, https://static.apiseven.com/uploads/2024/10/18/bxKsXOqW_docker-deployment.png" alt="Architecture for Docker-Based Deployment" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/uploads/2024/10/18/bxKsXOqW_docker-deployment.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/uploads/2024/10/18/bxKsXOqW_docker-deployment.webp, https://static.apiseven.com/apisix-thumbnail/uploads/2024/10/18/bxKsXOqW_docker-deployment.png" alt="Architecture for Docker-Based Deployment" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/uploads/2024/10/18/bxKsXOqW_docker-deployment.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="kubernetes">Kubernetes<a aria-hidden="true" class="hash-link" href="#kubernetes" title="Direct link to heading">‚Äã</a></h3><p><strong>For Kubernetes based-deployments</strong> of APISIX integrated with open-appsec, there&#x27;s a Helm chart available, which is based on the official APISIX Helm chart and further enhanced to also include the open-appsec attachment in the APISIX gateway container and also deploys the open-appsec agent. Further, you will have the option to configure open-appsec in a declarative &quot;DevOps-style&quot; way using custom resources in K8s as an alternative to using the open-appsec central management Web UI.</p><p>Here&#x27;s a simple architecture schematic for deployment on Kubernetes.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/uploads/2024/10/18/SEZQ6E14_k8s-deployment.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/uploads/2024/10/18/SEZQ6E14_k8s-deployment.webp, https://static.apiseven.com/uploads/2024/10/18/SEZQ6E14_k8s-deployment.png" alt="Architecture for Kubernetes Deployment" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/uploads/2024/10/18/SEZQ6E14_k8s-deployment.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/uploads/2024/10/18/SEZQ6E14_k8s-deployment.webp, https://static.apiseven.com/apisix-thumbnail/uploads/2024/10/18/SEZQ6E14_k8s-deployment.png" alt="Architecture for Kubernetes Deployment" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/uploads/2024/10/18/SEZQ6E14_k8s-deployment.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="adding-open-appsec-waf-to-apisix-on-linux">Adding open-appsec WAF to APISIX on Linux<a aria-hidden="true" class="hash-link" href="#adding-open-appsec-waf-to-apisix-on-linux" title="Direct link to heading">‚Äã</a></h2><p>To install open-appsec on a Linux system with APISIX installed, please follow these steps:</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="1-prerequisites">1. Prerequisites<a aria-hidden="true" class="hash-link" href="#1-prerequisites" title="Direct link to heading">‚Äã</a></h3><ul><li>The Linux platform must be Ubuntu 22.04.</li><li>Make sure to have APISIX installed.</li></ul><p>You can find the list of supported APISIX versions here: <a href="https://downloads.openappsec.io/packages/supported-apisix.txt" target="_blank" rel="noopener noreferrer">https://downloads.openappsec.io/packages/supported-apisix.txt</a>.</p><p>If you don&#x27;t have APISIX installed yet, you can use the following commands to perform an APISIX installation in &quot;traditional mode&quot;. By running these commands you will first install the etcd database for APISIX, then add the required repos before installing and starting APISIX.</p><p><strong>Install etcd Database</strong></p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK json"><pre tabindex="0" class="prism-code language-json codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">ETCD_VERSION=&#x27;</span><span class="token number" style="color:#36acaa">3.5</span><span class="token plain">.</span><span class="token number" style="color:#36acaa">4</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget https</span><span class="token operator" style="color:#393A34">:</span><span class="token comment" style="color:#999988;font-style:italic">//github.com/etcd-io/etcd/releases/download/v${ETCD_VERSION}/etcd-v${ETCD_VERSION}-linux-amd64.tar.gz</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar -xvf etcd-v$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">ETCD_VERSION</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">-linux-amd64.tar.gz &amp;&amp; cd etcd-v$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">ETCD_VERSION</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">-linux-amd64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp -a etcd etcdctl /usr/bin/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nohup etcd &gt;/tmp/etcd.log </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">&gt;&amp;</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> &amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">etcd</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><p><strong>Add and Update Package Repositories</strong></p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK json"><pre tabindex="0" class="prism-code language-json codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">apt install gnupg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo </span><span class="token string" style="color:#e3116c">&quot;deb http://openresty.org/package/debian bullseye openresty&quot;</span><span class="token plain"> | tee /etc/apt/sources.list.d/openresty.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget -O - https</span><span class="token operator" style="color:#393A34">:</span><span class="token comment" style="color:#999988;font-style:italic">//openresty.org/package/pubkey.gpg | apt-key add -</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget -O - http</span><span class="token operator" style="color:#393A34">:</span><span class="token comment" style="color:#999988;font-style:italic">//repos.apiseven.com/pubkey.gpg | apt-key add -</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo </span><span class="token string" style="color:#e3116c">&quot;deb http://repos.apiseven.com/packages/debian bullseye main&quot;</span><span class="token plain"> | tee /etc/apt/sources.list.d/apisix.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apt update</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><p><strong>Install, Initiate, and Start APISIX</strong></p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK json"><pre tabindex="0" class="prism-code language-json codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">apt install apisix=</span><span class="token number" style="color:#36acaa">3.9</span><span class="token plain">.</span><span class="token number" style="color:#36acaa">1</span><span class="token number" style="color:#36acaa">-0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apisix init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apisix start</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="2-download-the-open-appsec-installer">2. Download the open-appsec Installer<a aria-hidden="true" class="hash-link" href="#2-download-the-open-appsec-installer" title="Direct link to heading">‚Äã</a></h3><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK json"><pre tabindex="0" class="prism-code language-json codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">wget https</span><span class="token operator" style="color:#393A34">:</span><span class="token comment" style="color:#999988;font-style:italic">//downloads.openappsec.io/open-appsec-install &amp;&amp; chmod +x open-appsec-install</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="3-install-open-appsec">3. Install open-appsec<a aria-hidden="true" class="hash-link" href="#3-install-open-appsec" title="Direct link to heading">‚Äã</a></h3><p>Install open-appsec to integrate with the existing APISIX installation.</p><blockquote><p>Note that the <code>--prevent</code> flag will install open-appsec with a default policy already set to prevent mode.</p></blockquote><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK shell"><pre tabindex="0" class="prism-code language-shell codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">./open-appsec-install --auto --prevent</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="4-get-and-store-apisix-admin-key">4. Get and Store APISIX Admin Key<a aria-hidden="true" class="hash-link" href="#4-get-and-store-apisix-admin-key" title="Direct link to heading">‚Äã</a></h3><p>Get the APISIX admin key from the APISIX <code>config.yaml</code> configuration file and store it in the <code>APISIX_KEY</code> env variable.</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK shell"><pre tabindex="0" class="prism-code language-shell codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">APISIX_KEY</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">awk</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable string" style="color:#e3116c">&#x27;/key:/{ if ($2 ~ /^edd1/) print $2 }&#x27;</span><span class="token variable" style="color:#36acaa"> /usr/local/apisix/conf/config.yaml </span><span class="token variable" style="color:#36acaa">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="5-configure-route-to-expose-services">5. Configure Route to Expose Services<a aria-hidden="true" class="hash-link" href="#5-configure-route-to-expose-services" title="Direct link to heading">‚Äã</a></h3><p>Configure an example route in the APISIX gateway to expose an external web service or web API. In this example, we use <code>httpbin.org</code> as the example backend.</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK json"><pre tabindex="0" class="prism-code language-json codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">curl http</span><span class="token operator" style="color:#393A34">:</span><span class="token comment" style="color:#999988;font-style:italic">//127.0.0.1:9180/apisix/admin/routes/100 -H &quot;X-API-KEY:$APISIX_KEY&quot; -X PUT -d &#x27;{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;methods&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;GET&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;uri&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/anything&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;upstream&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;roundrobin&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;nodes&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;httpbin.org:80&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="6-validate">6. Validate<a aria-hidden="true" class="hash-link" href="#6-validate" title="Direct link to heading">‚Äã</a></h3><p>Let&#x27;s see if this route works by accessing it.</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK json"><pre tabindex="0" class="prism-code language-json codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">curl -s -v -G --data-urlencode email=user@domain.abc http</span><span class="token operator" style="color:#393A34">:</span><span class="token comment" style="color:#999988;font-style:italic">//localhost:9080/anything</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="7-simulate-an-sql-injection-attack">7. Simulate an SQL Injection Attack<a aria-hidden="true" class="hash-link" href="#7-simulate-an-sql-injection-attack" title="Direct link to heading">‚Äã</a></h3><p>Now let&#x27;s try to simulate an SQL injection attack (see <code>&#x27;OR &#x27;1&#x27;=&#x27;1&#x27;</code> in the below HTTP request) against the <code>httpbin.org</code> service exposed by the APISIX gateway which is now protected by the open-appsec WAF.</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK json"><pre tabindex="0" class="prism-code language-json codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">curl -s -v -G --data-urlencode email=user@domain.abc&#x27; OR &#x27;</span><span class="token number" style="color:#36acaa">1</span><span class="token plain">&#x27;=&#x27;</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> http</span><span class="token operator" style="color:#393A34">:</span><span class="token comment" style="color:#999988;font-style:italic">//localhost:9080/anything</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><p>This simulated attack now gets blocked successfully by open-appsec&#x27;s contextual machine-learning WAF engine.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="8-review-log-files">8. Review Log Files<a aria-hidden="true" class="hash-link" href="#8-review-log-files" title="Direct link to heading">‚Äã</a></h3><p>Check out the corresponding log files showing the &quot;prevent&quot; for the HTTP request with the simulated attack that we just sent.</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK shell"><pre tabindex="0" class="prism-code language-shell codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">tail</span><span class="token plain"> -f /var/log/nano_agent/cp-nano-http-transaction-handler.log*</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> -i user@domain.abc</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><p>Alternatively you can use the <code>open-appsec-ctl</code> tool:</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK shell"><pre tabindex="0" class="prism-code language-shell codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">open-appsec-ctl --view-logs </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> -i user@domain.abc</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="9-connect-to-open-appsec-for-central-management-optional">9. Connect to open-appsec for Central Management (Optional)<a aria-hidden="true" class="hash-link" href="#9-connect-to-open-appsec-for-central-management-optional" title="Direct link to heading">‚Äã</a></h3><p>Optionally you can connect your deployment now to <a href="https://my.openappsec.io" target="_blank" rel="noopener noreferrer">https://my.openappsec.io</a> for centrally managing open-appsec with an easy-to-use Web UI, monitoring security events and more, see section <strong>How to Manage Your open-appsec WAF Deployment Centrally?</strong> further below for more information.</p><p><strong>Congratulations!</strong> You successfully added open-appsec WAF to your existing APISIX installation and verified that your web services exposed by the APISIX gateway are now protected against web attacks.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="deploying-apisix-with-open-appsec-waf-on-containerized-platforms-docker">Deploying APISIX with open-appsec WAF on Containerized Platforms (Docker)<a aria-hidden="true" class="hash-link" href="#deploying-apisix-with-open-appsec-waf-on-containerized-platforms-docker" title="Direct link to heading">‚Äã</a></h2><p>To install APISIX integrated with open-appsec on Docker, you can follow the steps shown below.</p><p>Opposite to the above example here we are deploying APISIX in &quot;standalone mode&quot;, which means it&#x27;s declaratively configured using a docker volume mount with a yaml file that holds the configurations and therefore won&#x27;t require an etcd database deployment.</p><blockquote><p>Note that APISIX supports both, traditional as well as standalone modes in all deployment types (Linux, Docker, ‚Ä¶)</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="1-prerequisite">1. Prerequisite<a aria-hidden="true" class="hash-link" href="#1-prerequisite" title="Direct link to heading">‚Äã</a></h3><p>Make sure to have a Linux platform with both Docker and docker-compose tools installed.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="2-create-a-folder-for-open-appsec">2. Create a Folder for open-appsec<a aria-hidden="true" class="hash-link" href="#2-create-a-folder-for-open-appsec" title="Direct link to heading">‚Äã</a></h3><p>Within the directory that you want to use for the deployment, create a folder <code>appsec-localconfig</code> which will hold the appsec declarative configuration file:</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK json"><pre tabindex="0" class="prism-code language-json codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir ./appsec-localconfig</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="3-download-the-open-appsec-file-into-the-folder">3. Download the open-appsec File into the Folder<a aria-hidden="true" class="hash-link" href="#3-download-the-open-appsec-file-into-the-folder" title="Direct link to heading">‚Äã</a></h3><p>Download the initial declarative configuration file for open-appsec into that folder.</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK json"><pre tabindex="0" class="prism-code language-json codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">wget https</span><span class="token operator" style="color:#393A34">:</span><span class="token comment" style="color:#999988;font-style:italic">//raw.githubusercontent.com/openappsec/openappsec/main/config/linux/latest/prevent/local_policy.yaml -O appsec-localconfig/local_policy.yaml</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><blockquote><p>Note that this example declarative configuration file is already set to prevent attacks.</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="4-create-a-folder-for-apisix">4. Create a Folder for APISIX<a aria-hidden="true" class="hash-link" href="#4-create-a-folder-for-apisix" title="Direct link to heading">‚Äã</a></h3><p>Create another folder <code>apisix-localconfig</code> which will hold the declarative configuration file for APISIX: <code>mkdir ./apisix-localconfig</code>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="5-download-apisix-file-into-the-folder">5. Download APISIX File into the Folder<a aria-hidden="true" class="hash-link" href="#5-download-apisix-file-into-the-folder" title="Direct link to heading">‚Äã</a></h3><p>Let&#x27;s download a simple declarative configuration file also for APISIX so we can verify open-appsec protection after the deployment.</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK json"><pre tabindex="0" class="prism-code language-json codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">wget https</span><span class="token operator" style="color:#393A34">:</span><span class="token comment" style="color:#999988;font-style:italic">//raw.githubusercontent.com/openappsec/openappsec/main/deployment/apisix/apisix-example-config/apisix-standalone.yaml -O ./apisix-localconfig/apisix-standalone.yaml</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="6-create-a-docer-composeyaml-file">6. Create a <code>docer-compose.yaml</code> File<a aria-hidden="true" class="hash-link" href="#6-create-a-docer-composeyaml-file" title="Direct link to heading">‚Äã</a></h3><p>Create a <code>docker-compose.yaml</code> file with the content below, which can be downloaded as follows:</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK json"><pre tabindex="0" class="prism-code language-json codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">wget https</span><span class="token operator" style="color:#393A34">:</span><span class="token comment" style="color:#999988;font-style:italic">//raw.githubusercontent.com/openappsec/openappsec/main/deployment/apisix/docker-compose.yaml</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK json"><pre tabindex="0" class="prism-code language-json codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">version</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">services</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  apisix</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> apisix</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ghcr.io/openappsec/apisix-attachment:latest&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ipc</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> service</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">appsec-agent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    restart</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - ./apisix-localconfig/apisix-standalone.yaml</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">/usr/local/apisix/conf/apisix.yaml</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">ro</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - APISIX_STAND_ALONE=</span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ports</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token string" style="color:#e3116c">&quot;9180:9180/tcp&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token string" style="color:#e3116c">&quot;9080:9080/tcp&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token string" style="color:#e3116c">&quot;9091:9091/tcp&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token string" style="color:#e3116c">&quot;9443:9443/tcp&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  appsec-agent</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> appsec-agent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> &#x27;ghcr.io/openappsec/agent</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">latest&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ipc</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> shareable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    restart</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> unless-stopped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # adjust with your own email below</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - user_email=user@email.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - registered_server=</span><span class="token string" style="color:#e3116c">&quot;APISIX Server&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - ./appsec-config</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">/etc/cp/conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - ./appsec-data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">/etc/cp/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - ./appsec-logs</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">/var/log/nano_agent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - ./appsec-localconfig</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">/ext/appsec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    command</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> /cp-nano-agent</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="7-update-your-email-address-optional">7. Update Your Email Address (Optional)<a aria-hidden="true" class="hash-link" href="#7-update-your-email-address-optional" title="Direct link to heading">‚Äã</a></h3><p>Edit the <code>docker-compose.yaml</code> file and replace &quot;<a href="mailto:user@email.com" target="_blank" rel="noopener noreferrer">user@email.com</a>&quot; with your own email address, so we can provide assistance in case of any issues with the specific deployment in the future and provide information proactively regarding open-appsec.</p><p>This is an optional parameter and can be removed. If we send automatic emails, there will also be an opt-out option included for receiving similar communication in the future.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="8-start-all-containers">8. Start All Containers<a aria-hidden="true" class="hash-link" href="#8-start-all-containers" title="Direct link to heading">‚Äã</a></h3><p>Run docker-compose up to start the deployment of all relevant containers:</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK shell"><pre tabindex="0" class="prism-code language-shell codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> up -d</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="9-check-container-status">9. Check Container Status<a aria-hidden="true" class="hash-link" href="#9-check-container-status" title="Direct link to heading">‚Äã</a></h3><p>Check if the <code>apisix-attachment</code> and the <code>appsec-agent</code> containers are up and running.</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK shell"><pre tabindex="0" class="prism-code language-shell codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ps</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="10-validate-the-standalone-configuration">10. Validate the Standalone Configuration<a aria-hidden="true" class="hash-link" href="#10-validate-the-standalone-configuration" title="Direct link to heading">‚Äã</a></h3><p>Let&#x27;s see if the standalone configuration works by accessing it.</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK json"><pre tabindex="0" class="prism-code language-json codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">curl -s -v -G --data-urlencode email=user@domain.abc http</span><span class="token operator" style="color:#393A34">:</span><span class="token comment" style="color:#999988;font-style:italic">//localhost:9080/anything</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="11-simulate-an-sql-injection-attack">11. Simulate an SQL Injection Attack<a aria-hidden="true" class="hash-link" href="#11-simulate-an-sql-injection-attack" title="Direct link to heading">‚Äã</a></h3><p>Now let&#x27;s try to simulate an SQL injection attack against the httpin.org service exposed by the APISIX gateway container which is now protected by open-appsec.</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK json"><pre tabindex="0" class="prism-code language-json codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">curl -s -v -G --data-urlencode email=user@domain.abc&#x27; OR &#x27;</span><span class="token number" style="color:#36acaa">1</span><span class="token plain">&#x27;=&#x27;</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> http</span><span class="token operator" style="color:#393A34">:</span><span class="token comment" style="color:#999988;font-style:italic">//localhost:9080/anything</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="12-connect-to-open-appsec-for-central-management-optional">12. Connect to open-appsec for Central Management (Optional)<a aria-hidden="true" class="hash-link" href="#12-connect-to-open-appsec-for-central-management-optional" title="Direct link to heading">‚Äã</a></h3><p>Optionally you can connect your deployment now to <code>https://my.openappsec.io</code> for centrally managing open-appsec with an easy-to-use Web UI, monitoring security events, and more, see section <strong>How to Manage Your open-appsec WAF Deployment Centrally?</strong> further below for more information.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="deploying-apisix-with-open-appsec-waf-on-kubernetes-using-helm">Deploying APISIX with open-appsec WAF on Kubernetes Using Helm<a aria-hidden="true" class="hash-link" href="#deploying-apisix-with-open-appsec-waf-on-kubernetes-using-helm" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="1-prerequisite-1">1. Prerequisite<a aria-hidden="true" class="hash-link" href="#1-prerequisite-1" title="Direct link to heading">‚Äã</a></h3><p>Make sure the Kubernetes platform and Helm tool are available.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="2-download-open-appsec">2. Download open-appsec<a aria-hidden="true" class="hash-link" href="#2-download-open-appsec" title="Direct link to heading">‚Äã</a></h3><p>Download the open-appsec for the APISIX Helm chart here.</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK json"><pre tabindex="0" class="prism-code language-json codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">wget https</span><span class="token operator" style="color:#393A34">:</span><span class="token comment" style="color:#999988;font-style:italic">//downloads.openappsec.io/packages/helm-charts/apisix/open-appsec-k8s-apisix-latest.tgz</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="3-install-helm-chart">3. Install Helm Chart<a aria-hidden="true" class="hash-link" href="#3-install-helm-chart" title="Direct link to heading">‚Äã</a></h3><p>This example <code>helm install</code> command is installing the open-appsec for the APISIX Helm chart which is based on an extended version of the official APISIX Helm chart.</p><p>It will deploy the APISIX gateway as the APISIX Ingress Controller, as well as open-appsec WAF integrated with it. It also offers an additional configuration option specifically for open-appsec WAF (see <code>values.yaml</code> inside the Helm chart and open-appsec <a href="https://docs.openappsec.io/" target="_blank" rel="noopener noreferrer">docs</a>).</p><p>After deployment, you can assign your K8s ingress resources to the APISIX gateway by configuring them to use the following ingress class: <code>appsec-apisix</code>.</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK shell"><pre tabindex="0" class="prism-code language-shell codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">helm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> open-appsec-k8s-apisix-latest.tgz </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--name-template</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">appsec-apisix </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--set rbac.create</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--set appsec.mode</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">standalone </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--set service.type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">LoadBalancer </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--set appsec.persistence.enabled</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">false </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--set ingress-controller.enabled</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--set ingress-controller.config.ingressClass</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">appsec-apisix </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--set appsec.userEmail</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">‚Äù</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">your-email-address</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">‚Äù </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--set appsec.agentToken</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--create-namespace </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-n appsec-apisix</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><blockquote><p>Replace <code>&lt;your-email-address&gt;</code> in the Helm install command above with your own email address, so we can send you news and updates related to open-appsec and better support you with your deployment if needed! You can unsubscribe at any time or alternatively, just remove that line if you prefer not to provide your email.</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="4-validate">4. Validate<a aria-hidden="true" class="hash-link" href="#4-validate" title="Direct link to heading">‚Äã</a></h3><p>Validate that pods were properly deployed and are in a ready state:</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK shell"><pre tabindex="0" class="prism-code language-shell codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods -n appsec-apisix</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="5-create-an-open-appsec-policy-resource">5. Create an open-appsec Policy Resource<a aria-hidden="true" class="hash-link" href="#5-create-an-open-appsec-policy-resource" title="Direct link to heading">‚Äã</a></h3><p>Run the following command to create the &quot;open-appsec-best-practice-policy&quot; in K8s.</p><blockquote><p>Note that this example policy is already pre-configured to prevent attacks.</p></blockquote><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK json"><pre tabindex="0" class="prism-code language-json codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f https</span><span class="token operator" style="color:#393A34">:</span><span class="token comment" style="color:#999988;font-style:italic">//raw.githubusercontent.com/openappsec/openappsec/main/config/k8s/v1beta1/open-appsec-k8s-prevent-config-v1beta1.yaml</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><p>You can also create your own custom policy, <a href="https://docs.openappsec.io/getting-started/start-with-kubernetes/configuration-using-crds" target="_blank" rel="noopener noreferrer">here</a> you find all the details.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="6-fetch-the-target-resource-name">6. Fetch the Target Resource Name<a aria-hidden="true" class="hash-link" href="#6-fetch-the-target-resource-name" title="Direct link to heading">‚Äã</a></h3><p>Find out the name of the relevant ingress resource which you want to protect:</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK shell"><pre tabindex="0" class="prism-code language-shell codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get ing -A</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="7-edit-the-ingress-resource">7. Edit the Ingress Resource<a aria-hidden="true" class="hash-link" href="#7-edit-the-ingress-resource" title="Direct link to heading">‚Äã</a></h3><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK shell"><pre tabindex="0" class="prism-code language-shell codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl edit ing/</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">ingress name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> -n </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">ingress namespace</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="8-change-the-ingressclassname">8. Change the ingressClassname<a aria-hidden="true" class="hash-link" href="#8-change-the-ingressclassname" title="Direct link to heading">‚Äã</a></h3><p>Change the ingressClassname to use open-appsec:</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK shell"><pre tabindex="0" class="prism-code language-shell codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">spec: ingressClassName: appsec-apisix</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="9-add-annotation-to-the-ingress-resource">9. Add Annotation to the Ingress Resource<a aria-hidden="true" class="hash-link" href="#9-add-annotation-to-the-ingress-resource" title="Direct link to heading">‚Äã</a></h3><p>Add this annotation to the ingress resource to activate open-appsec for this ingress by specifying the desired open-appsec policy custom resource.</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK shell"><pre tabindex="0" class="prism-code language-shell codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">openappsec.io/policy: open-appsec-best-practice-policy</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="10-validate-the-standalone-configuration-1">10. Validate the Standalone Configuration<a aria-hidden="true" class="hash-link" href="#10-validate-the-standalone-configuration-1" title="Direct link to heading">‚Äã</a></h3><p>Let&#x27;s see if the standalone configuration works by accessing it:</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK json"><pre tabindex="0" class="prism-code language-json codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">curl -s -v -G --data-urlencode email=user@domain.abc http</span><span class="token operator" style="color:#393A34">:</span><span class="token comment" style="color:#999988;font-style:italic">//[YOUR-INGRESS-HOSTNAME]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="11-simulate-an-sql-injection-attack-1">11. Simulate an SQL Injection Attack<a aria-hidden="true" class="hash-link" href="#11-simulate-an-sql-injection-attack-1" title="Direct link to heading">‚Äã</a></h3><p>Now let&#x27;s try to simulate an SQL injection attack against the <code>httpin.org</code> service exposed by the APISIX gateway container which is now protected by open-appsec.</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK json"><pre tabindex="0" class="prism-code language-json codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token plain">curl -s -v -G --data-urlencode email=user@domain.abc&#x27; OR &#x27;</span><span class="token number" style="color:#36acaa">1</span><span class="token plain">&#x27;=&#x27;</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> http</span><span class="token operator" style="color:#393A34">:</span><span class="token comment" style="color:#999988;font-style:italic">//[YOUR-INGRESS-HOSTNAME]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><p>Replace <!-- -->[YOUR-INGRESS-HOSTNAME]<!-- --> in the command above with the hostname you set in the ingress resource which you protected with open-appsec WAF in the earlier steps, also change &quot;http&quot; to &quot;https&quot; if required.</p><p><strong>Congratulations!</strong> You successfully deployed APISIX integrated with open-appsec WAF and verified that your web services exposed by the APISIX Gateway are now protected against attacks.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="how-to-manage-your-open-appsec-waf-deployment-centrally">How to Manage Your open-appsec WAF Deployment Centrally?<a aria-hidden="true" class="hash-link" href="#how-to-manage-your-open-appsec-waf-deployment-centrally" title="Direct link to heading">‚Äã</a></h2><p>If you like you can also manage your open-appsec WAF deployment (integrated with APISIX) centrally using the open-appsec Web UI (SaaS Service) available at <a href="https://my.openappsec.io" target="_blank" rel="noopener noreferrer">https://my.openappsec.io</a>, by connecting the open-appsec agent to a deployment profile in the central Web UI.</p><p>You can alternatively continue to manage your deployment locally but still connect to a central WebUI profile in &quot;Declarative mode&quot; so that you will be able to see the local configuration (read-only) in the Web UI.</p><p>Alongside the configuration of open-appsec the Web UI allows you to also see much more information like the status of deployed open-appsec agents, security logs, dashboards and more.</p><p>For instructions on how to connect your deployment to the central Web UI see the open-appsec docs available at <a href="https://docs.openappsec.io" target="_blank" rel="noopener noreferrer">https://docs.openappsec.io</a>.</p><p>Below you find some screenshots of the Web UI.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/uploads/2024/10/11/MzsUwqh3_open-appsec-4.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/uploads/2024/10/11/MzsUwqh3_open-appsec-4.webp, https://static.apiseven.com/uploads/2024/10/11/MzsUwqh3_open-appsec-4.jpeg" alt="Open-websec UI 1" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/uploads/2024/10/11/MzsUwqh3_open-appsec-4.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/uploads/2024/10/11/MzsUwqh3_open-appsec-4.webp, https://static.apiseven.com/apisix-thumbnail/uploads/2024/10/11/MzsUwqh3_open-appsec-4.jpeg" alt="Open-websec UI 1" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/uploads/2024/10/11/MzsUwqh3_open-appsec-4.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/uploads/2024/10/11/YFofdEzT_open-appsec-5.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/uploads/2024/10/11/YFofdEzT_open-appsec-5.webp, https://static.apiseven.com/uploads/2024/10/11/YFofdEzT_open-appsec-5.jpeg" alt="Open-websec UI 2" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/uploads/2024/10/11/YFofdEzT_open-appsec-5.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/uploads/2024/10/11/YFofdEzT_open-appsec-5.webp, https://static.apiseven.com/apisix-thumbnail/uploads/2024/10/11/YFofdEzT_open-appsec-5.jpeg" alt="Open-websec UI 2" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/uploads/2024/10/11/YFofdEzT_open-appsec-5.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="summary">Summary<a aria-hidden="true" class="hash-link" href="#summary" title="Direct link to heading">‚Äã</a></h2><p>In this blog we explained how open-appsec can integrate with Apache APISIX on all of the following: regular Linux-based deployments, containerized deployments (Docker), and also Kubernetes environments.</p><p>Following the deployment steps for APISIX with open-appsec WAF, we simulated SQL injection attacks, which were effectively prevented by open-appsec&#x27;s machine learning-based WAF technology.</p><p>Additionally, it was explained, what the benefits are of connecting to open-appsec central WebUI for managing, monitoring, log analysis, and reporting.</p><p>We hope these new integrations will prove very useful to enhance the security of your APISIX API gateway and its exposed web APIs and web applications with open-appsec machine learning-based WAF.</p><p>Welcome you to contact us if you have any feedback, or questions or might face some technical challenge that you want us to assist with. You can reach the open-appsec team via the chat on <a href="https://www.openappsec.io" target="_blank" rel="noopener noreferrer">https://www.openappsec.io</a> or via email to: <a href="/blog/2024/10/22/apisix-integrates-with-open-appsec/info@openappsec.io/">info@openappsec.io</a>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="additional-resources">Additional Resources<a aria-hidden="true" class="hash-link" href="#additional-resources" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="open-appsec-waf">open-appsec WAF<a aria-hidden="true" class="hash-link" href="#open-appsec-waf" title="Direct link to heading">‚Äã</a></h3><p>Website: <a href="https://www.openappsec.io" target="_blank" rel="noopener noreferrer">https://www.openappsec.io</a></p><p>GitHub: <a href="https://github.com/openappsec" target="_blank" rel="noopener noreferrer">https://github.com/openappsec</a></p><p>Docs: <a href="https://docs.openappsec.io" target="_blank" rel="noopener noreferrer">https://docs.openappsec.io</a></p><p>Playgrounds: <a href="https://www.openappsec.io/playground" target="_blank" rel="noopener noreferrer">https://www.openappsec.io/playground</a></p><p>Blogs: <a href="https://www.openappsec.io/blogs" target="_blank" rel="noopener noreferrer">https://www.openappsec.io/blogs</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="apache-apisix">Apache APISIX<a aria-hidden="true" class="hash-link" href="#apache-apisix" title="Direct link to heading">‚Äã</a></h3><p>Website: <a href="https://apisix.apache.org" target="_blank" rel="noopener noreferrer">https://apisix.apache.org</a></p><p>GitHub: <a href="https://github.com/apache/apisix" target="_blank" rel="noopener noreferrer">https://github.com/apache/apisix</a></p><p>Docs: <a href="https://apisix.apache.org/docs/" target="_blank" rel="noopener noreferrer">https://apisix.apache.org/docs/</a></p><p>Blogs: <a href="https://apisix.apache.org/blog/" target="_blank" rel="noopener noreferrer">https://apisix.apache.org/blog/</a></p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_xD8n"><div class="col"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/blog/tags/ecosystem/">Ecosystem</a></li></ul></div></footer></article><section class="shareSection_OUzq"><div><button aria-label="linkedin" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#007fb1"></circle><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></svg></button><button aria-label="twitter" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#00aced"></circle><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></svg></button><button aria-label="reddit" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#ff4500"></circle><path d="m 52.8165,31.942362 c 0,-2.4803 -2.0264,-4.4965 -4.5169,-4.4965 -1.2155,0 -2.3171,0.4862 -3.128,1.2682 -3.077,-2.0247 -7.2403,-3.3133 -11.8507,-3.4782 l 2.5211,-7.9373 6.8272,1.5997 -0.0102,0.0986 c 0,2.0281 1.6575,3.6771 3.6958,3.6771 2.0366,0 3.6924,-1.649 3.6924,-3.6771 0,-2.0281 -1.6575,-3.6788 -3.6924,-3.6788 -1.564,0 -2.8968,0.9758 -3.4357,2.3443 l -7.3593,-1.7255 c -0.3213,-0.0782 -0.6477,0.1071 -0.748,0.4233 L 32,25.212062 c -4.8246,0.0578 -9.1953,1.3566 -12.41,3.4425 -0.8058,-0.7446 -1.8751,-1.2104 -3.0583,-1.2104 -2.4905,0 -4.5152,2.0179 -4.5152,4.4982 0,1.649 0.9061,3.0787 2.2389,3.8607 -0.0884,0.4794 -0.1462,0.9639 -0.1462,1.4569 0,6.6487 8.1736,12.0581 18.2223,12.0581 10.0487,0 18.224,-5.4094 18.224,-12.0581 0,-0.4658 -0.0493,-0.9248 -0.1275,-1.377 1.4144,-0.7599 2.3885,-2.2304 2.3885,-3.9406 z m -29.2808,3.0872 c 0,-1.4756 1.207,-2.6775 2.6894,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 -1.4824,0 -2.6894,-1.2002 -2.6894,-2.6758 z m 15.4037,7.9373 c -1.3549,1.3481 -3.4816,2.0043 -6.5008,2.0043 l -0.0221,-0.0051 -0.0221,0.0051 c -3.0209,0 -5.1476,-0.6562 -6.5008,-2.0043 -0.2465,-0.2448 -0.2465,-0.6443 0,-0.8891 0.2465,-0.2465 0.6477,-0.2465 0.8942,0 1.105,1.0999 2.9393,1.6337 5.6066,1.6337 l 0.0221,0.0051 0.0221,-0.0051 c 2.6673,0 4.5016,-0.5355 5.6066,-1.6354 0.2465,-0.2465 0.6477,-0.2448 0.8942,0 0.2465,0.2465 0.2465,0.6443 0,0.8908 z m -0.3213,-5.2615 c -1.4824,0 -2.6877,-1.2002 -2.6877,-2.6758 0,-1.4756 1.2053,-2.6775 2.6877,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 z" fill="white"></path></svg></button></div></section><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2024/11/30/bi-monthly-report/"><div class="pagination-nav__sublabel sublabel_M5Gs">Newer Post</div><div class="pagination-nav__label">Bi-Monthly Report (October 01 - November 30)</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2024/10/17/release-apache-apisix-3.11.0/"><div class="pagination-nav__sublabel sublabel_M5Gs">Older Post</div><div class="pagination-nav__label">Release Apache APISIX 3.11.0</div></a></div></nav></div></div></div></div><footer class="container_N-4m"><div class="linksRow_U0oR"><div class="linksCol_R6VE"><div>ASF</div><ul><li class="footer__item"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer"><span></span><span>Foundation</span></a></li><li class="footer__item"><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer"><span></span><span>License</span></a></li><li class="footer__item"><a href="https://www.apache.org/events/" target="_blank" rel="noopener noreferrer"><span></span><span>Events</span></a></li><li class="footer__item"><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer"><span></span><span>Security</span></a></li><li class="footer__item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer"><span></span><span>Sponsorship</span></a></li><li class="footer__item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer"><span></span><span>Thanks</span></a></li></ul></div><div class="linksCol_R6VE"><div>Community</div><ul><li class="footer__item"><a href="https://github.com/apache/apisix/issues" target="_blank" rel="noopener noreferrer"><span></span><span>GitHub</span></a></li><li class="footer__item"><a href="/docs/general/join/"><span></span><span>Slack</span></a></li><li class="footer__item"><a href="https://twitter.com/ApacheAPISIX" target="_blank" rel="noopener noreferrer"><span></span><span>Twitter</span></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCgPD18cMhOg5rmPVnQhAC8g" target="_blank" rel="noopener noreferrer"><span></span><span>YouTube</span></a></li></ul></div><div class="linksCol_R6VE"><div>More</div><ul><li class="footer__item"><a target="_parent" href="/blog/"><span></span><span>Blog</span></a></li><li class="footer__item"><a target="_parent" href="/showcase/"><span></span><span>Showcase</span></a></li><li class="footer__item"><a target="_parent" href="/plugins/"><span></span><span>Plugin Hub</span></a></li><li class="footer__item"><a href="https://github.com/apache/apisix/milestones" target="_parent" rel="noopener noreferrer"><span></span><span>Roadmap</span></a></li></ul></div></div><div class="copyright_Bdi1"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer"><span style="display:inline-block;width:231.25px;height:40px"></span></a><div>Copyright ¬© 2019-2026 The Apache Software Foundation. Apache APISIX, APISIX¬Æ, Apache, the Apache feather logo, and the Apache APISIX project logo are either registered trademarks or trademarks of the Apache Software Foundation.</div></div></footer></div>
<script src="https://apisix-website-static.apiseven.com/assets/js/runtime~main.4bbc9839.js"></script>
<script src="https://apisix-website-static.apiseven.com/assets/js/main.a516b59b.js"></script>
</body>
</html>