<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache APISIXÂ® --  Cloud-Native API Gateway Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache APISIXÂ® --  Cloud-Native API Gateway Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WQLBQL6GY3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-WQLBQL6GY3",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Apache APISIXÂ® --  Cloud-Native API Gateway" href="/opensearch.xml">
<link rel="alternate" type="application/rss+xml" href="/events/rss.xml" title="Apache APISIXÂ® --  Cloud-Native API Gateway Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/events/atom.xml" title="Apache APISIXÂ® --  Cloud-Native API Gateway Blog Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/releases/rss.xml" title="Apache APISIXÂ® --  Cloud-Native API Gateway Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/releases/atom.xml" title="Apache APISIXÂ® --  Cloud-Native API Gateway Blog Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/articles/rss.xml" title="Apache APISIXÂ® --  Cloud-Native API Gateway Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/articles/atom.xml" title="Apache APISIXÂ® --  Cloud-Native API Gateway Blog Atom Feed">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"><title data-react-helmet="true">Stable Product Delivery with Cypress | Apache APISIXÂ® --  Cloud-Native API Gateway</title><meta data-react-helmet="true" property="og:title" content="Stable Product Delivery with Cypress | Apache APISIXÂ® --  Cloud-Native API Gateway"><meta data-react-helmet="true" property="og:description" content="@LiteSun, Apache APISIX Committer from Shenzhen Zhiliu Technology Co."><meta data-react-helmet="true" property="og:url" content="https://apisix.apache.org//blog/2021/02/08/stable-product-delivery-with-cypress"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" name="description" content="Apache APISIX is a dynamic, real-time, high-performance Cloud-Native API gateway, based on the Nginx library and etcd."><meta data-react-helmet="true" name="robots" content="index,follow"><meta data-react-helmet="true" property="og:image" content="https://apisix.apache.org//img/favicon.png"><meta data-react-helmet="true" name="twitter:image" content="https://apisix.apache.org//img/favicon.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://apisix.apache.org//blog/2021/02/08/stable-product-delivery-with-cypress"><link data-react-helmet="true" rel="alternate" href="https://apisix.apache.org//blog/2021/02/08/stable-product-delivery-with-cypress" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://apisix.apache.org//zh/blog/2021/02/08/stable-product-delivery-with-cypress" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://apisix.apache.org//blog/2021/02/08/stable-product-delivery-with-cypress" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.d66d3cb7.css">
<link rel="preload" href="/assets/js/runtime~main.496510d8.js" as="script">
<link rel="preload" href="/assets/js/main.9c1dd3ea.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo2.svg" alt="Apache APISIXÂ®" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo2.svg" alt="Apache APISIXÂ®" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Apache APISIXÂ®</strong></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/docs">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/apisix/getting-started">Apache APISIXÂ®ï¸</a></li><li><a class="dropdown__link" href="/docs/dashboard/USER_GUIDE">Apache APISIXÂ®ï¸ Dashboard</a></li><li><a class="dropdown__link" href="/docs/ingress-controller/getting-started/">Apache APISIXÂ®ï¸ Ingress Controller</a></li><li><a class="dropdown__link" href="/docs/helm-chart/apisix/">Apache APISIXÂ®ï¸ Helm Charts</a></li><li><a class="dropdown__link" href="/docs/docker/build/">Apache APISIXÂ®ï¸ Docker</a></li><li><a class="dropdown__link" href="/docs/java-plugin-runner/development/">Apache APISIXÂ®ï¸ Java Plugin Runner</a></li><li><a class="dropdown__link" href="/docs/go-plugin-runner/getting-started/">Apache APISIXÂ®ï¸ Go Plugin Runner</a></li><li><a class="dropdown__link" href="/docs/general/security">General</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link">FAQ</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/apisix/FAQ/">Apache APISIXÂ®</a></li><li><a class="dropdown__link" href="/docs/dashboard/FAQ/">Apache APISIXÂ® Dashboard</a></li><li><a class="dropdown__link" href="/docs/ingress-controller/FAQ/">Apache APISIXÂ® Ingress Controller</a></li><li><a class="dropdown__link" href="/docs/helm-chart/FAQ/">Apache APISIXÂ® Helm Chart</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/downloads">Downloads</a><a class="navbar__item navbar__link" href="/team">Team</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link">Resources</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/plugins">Plugin Hub</a></li><li><a class="dropdown__link" href="/events">Events</a></li><li><a class="dropdown__link" href="/releases">Releases</a></li><li><a class="dropdown__link" href="/help">Help</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/blog/2021/02/08/stable-product-delivery-with-cypress" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/zh/blog/2021/02/08/stable-product-delivery-with-cypress" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">ç®€ä½“ä¸­æ–‡</a></li></ul></div><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ğŸŒ</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo2.svg" alt="Apache APISIXÂ®" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo2.svg" alt="Apache APISIXÂ®" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Apache APISIXÂ®</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" role="button" href="/docs">Docs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/apisix/getting-started">Apache APISIXÂ®ï¸</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/dashboard/USER_GUIDE">Apache APISIXÂ®ï¸ Dashboard</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ingress-controller/getting-started/">Apache APISIXÂ®ï¸ Ingress Controller</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/helm-chart/apisix/">Apache APISIXÂ®ï¸ Helm Charts</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/docker/build/">Apache APISIXÂ®ï¸ Docker</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/java-plugin-runner/development/">Apache APISIXÂ®ï¸ Java Plugin Runner</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/go-plugin-runner/getting-started/">Apache APISIXÂ®ï¸ Go Plugin Runner</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/general/security">General</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">FAQ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/apisix/FAQ/">Apache APISIXÂ®</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/dashboard/FAQ/">Apache APISIXÂ® Dashboard</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ingress-controller/FAQ/">Apache APISIXÂ® Ingress Controller</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/helm-chart/FAQ/">Apache APISIXÂ® Helm Chart</a></li></ul></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/downloads">Downloads</a></li><li class="menu__list-item"><a class="menu__link" href="/team">Team</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Resources</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/plugins">Plugin Hub</a></li><li class="menu__list-item"><a class="menu__link" href="/events">Events</a></li><li class="menu__list-item"><a class="menu__link" href="/releases">Releases</a></li><li class="menu__list-item"><a class="menu__link" href="/help">Help</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/blog/2021/02/08/stable-product-delivery-with-cypress" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li class="menu__list-item"><a href="/zh/blog/2021/02/08/stable-product-delivery-with-cypress" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">ç®€ä½“ä¸­æ–‡</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><div class="col col--3"><div class="sidebar_2ahu thin-scrollbar"><h3 class="sidebarItemTitle_2hhb">Recent posts</h3><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2021/08/18/Auth-with-Casbin-in-Apache-APISIX">åœ¨ Apache APISIX ä¸­ä½¿ç”¨ Casbin è¿›è¡Œæˆæƒ</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2021/08/16/Using-the-Apache-APISIX-OpenID-Connect-Plugin-for-Centralized-Authentication">Using the Apache APISIX OpenID Connect Plugin for Okta Centralized Authentication</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2021/08/14/contributors-the-golden-metric-of-openSource-projects-en">Contributors â€” The Golden Metric of OpenSource Projects</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2021/08/14/contributors-the-golden-metric-of-openSource-projects">è´¡çŒ®è€…ï¼Œæ˜¯è¡¡é‡å¼€æºé¡¹ç›®çš„é‡‘æŒ‡æ ‡</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2021/08/12/Chaos-Mesh-Helps-Apache-APISIX-Improve-System-Stability">Chaos Mesh Helps Apache APISIX Improve System Stability</a></li></ul></div></div><main class="col col--7"><article><header><h1 class="margin-bottom--sm blogPostTitle_GeHD">Stable Product Delivery with Cypress</h1><div class="margin-vert--md"><time datetime="2021-02-08T00:00:00.000Z" class="blogPostDate_fNvV">February 8, 2021 Â· 6 min read</time></div><div class="avatar margin-vert--md"><a href="https://github.com/LiteSun" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img src="https://avatars.githubusercontent.com/u/31329157?s=400&amp;u=e81b4bb4db2be162c1fcac6d188f5b0f82f71920&amp;v=4" alt="Yi Sun"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/LiteSun" target="_blank" rel="noopener noreferrer">Yi Sun</a></h4><small class="avatar__subtitle"></small></div></div></header><div class="markdown"><blockquote><p><a href="https://github.com/LiteSun" target="_blank" rel="noopener noreferrer">@LiteSun</a>, Apache APISIX Committer from <a href="https://www.apiseven.com/" target="_blank" rel="noopener noreferrer">Shenzhen Zhiliu Technology Co.</a></p></blockquote><blockquote><p>Source:</p><ul><li><a href="https://github.com/apache/apisix" target="_blank" rel="noopener noreferrer">https://github.com/apache/apisix</a></li><li><a href="https://github.com/apache/apisix-dashboard" target="_blank" rel="noopener noreferrer">https://github.com/apache/apisix-dashboard</a></li></ul></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="background"></a>Background<a class="hash-link" href="#background" title="Direct link to heading">#</a></h2><p>The Apache APISIX Dashboard is designed to make it as easy as possible for users to operate Apache APISIX through a front-end interface, and since the project&#x27;s inception, there have been 552 commits and 10 releases. With such rapid product iteration, it is important to ensure the quality of the open-source product. For this reason, we have introduced an E2E testing module to ensure stable product delivery.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="what-is-front-end-e2e"></a>What is Front-End E2E?<a class="hash-link" href="#what-is-front-end-e2e" title="Direct link to heading">#</a></h2><p>E2E, which stands for &quot;End to End&quot;, can be translated as &quot;end-to-end&quot; testing. It mimics user behavior, starting with an entry point and executing actions step-by-step until a job is completed. Sound testing prevents code changes from breaking the original logic.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="why-cypress"></a>Why Cypress<a class="hash-link" href="#why-cypress" title="Direct link to heading">#</a></h2><p>We used Taiko, Puppeteer, TestCafe, and Cypress to write test cases for creating routes during the selection research period, and we used each testing framework to write cases to experience their respective features.</p><p>Taiko is characterized by smart selector, which can intelligently locate the elements that you want to operate based on text content and location relations, and has a low start-up cost, so you can finish the test cases quickly. However, it is not user-friendly when writing test cases. When the user exits the terminal by mistake, all the written test cases are lost, and if you want to run a complete test case, you need to use it together with other test runners, which undoubtedly increases the learning cost for the user.</p><p>Puppeteer has the best performance. However, testing is not the focus of Puppeteer. It is widely used for web crawlers. Our project started with Puppeteer, the official E2E testing framework recommended by ANTD, and after using it for a while we found that Puppeteer did not look so friendly to non-front-end developers and it was hard to get other users involved. When users write test cases, the lack of intelligent element positioning makes the learning curve very high.</p><p>TestCafe is surprisingly easy to install, it has a built-in waiting mechanism so that users don&#x27;t have to actively sleep waiting for page interactions, and it supports concurrent multi-browser testing, which is helpful for multi-browser compatibility testing. The disadvantage is that its debugging process is not so user-friendly, and you have to run a new use case after each test case change. For the developers, they need to have some basic Javascript syntax. Secondly, its running speed is relatively slow for several other frameworks, especially when executing withText () to find elements.</p><p>After a comprehensive comparison, we finally chose Cypress as our front-end E2E framework, listing four main reasons:</p><ol><li>Simple syntax</li></ol><p>The syntax used in Cypress tests is very simple and easy to read and write. With a little practice, you can master creating test cases, which is important for open source projects because it allows the community interested in E2E test cases to participate in writing test cases with minimal learning cost.</p><ol start="2"><li>Easy debugging</li></ol><p>When debugging test cases, we can use Cypress&#x27;s Test Runner, which presents multi-dimensional data that allows us to quickly pinpoint the problem.</p><ul><li>Showing the status of the test case execution, including the number of successes, failures, and runs in progress.</li><li>Displaying the total time spent on the execution of the entire test set.</li><li>A built-in Selector Playground to help locate elements.</li><li>shows each step of execution for each use case and forms a snapshot that can show information about each execution step after it is completed.</li></ul><ol start="3"><li>Active community</li></ol><p>Cypress has a large community of users, and there are always many people inside the community sharing their experiences and ideas.</p><p>This is helpful when encountering problems, and you are likely to encounter problems that others have encountered before. Also, when new features are requested, we can participate in the community by discussing and adding features to Cypress that we want to add, just like we do in the APISIX community: listening to the community and feeding it back.</p><ol start="4"><li>Clear documentation</li></ol><p>Cypress&#x27;s documentation structure is clearer and more comprehensive. In the early stages of use, we were able to quickly introduce Cypress into our project and write our first case based on the official documentation guidelines. In addition, there is a large amount of documentation available on the documentation site that gives users good guidance on what is best practice.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="cypress-and-apisix-dashboard"></a>Cypress and APISIX Dashboard<a class="hash-link" href="#cypress-and-apisix-dashboard" title="Direct link to heading">#</a></h2><p>There are currently 49 test cases written for the APISIX Dashboard. We configured the corresponding CI in GitHub Action to ensure that the code passes before each merge to ensure code quality. We share the use of Cypress in APISIX Dashboard with you by referring to Cypress best practices and combining them with our project.</p><p><img src="https://static.apiseven.com/202102/apisix-dashboard-e2e.gif" alt="image"></p><p><img src="https://static.apiseven.com/202102/image.png" alt="image"></p><ol><li>Commonly used functions are encapsulated into commands.</li></ol><p>Take login as an example, login is an essential part of entering the system, so we encapsulate it as a command, so that the login command can be called before each case run.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javaScript"><div tabindex="0" class="prism-code language-javaScript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Cypress.Commands.add(&quot;login&quot;, () =&gt; {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  cy.request(</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    &quot;POST&quot;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    &#x27;http://127.0.0.1/apisix/admin/user/login&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      username: &quot;user&quot;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      password: &quot;user&quot;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  ).then((res) =&gt; {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    expect(res.body.code).to.equal(0);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    localStorage.setItem(&quot;token&quot;, res.body.data.token);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  });</span></div><div class="token-line" style="color:#393A34"><span class="token plain">});</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javaScript"><div tabindex="0" class="prism-code language-javaScript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">beforeEach(() =&gt; {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   // init login</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   cy.login();</span></div><div class="token-line" style="color:#393A34"><span class="token plain">})</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol start="2"><li>Extract the selector and data as public variables.</li></ol><p>To make it more intuitive for the user to understand the meaning of the test code, we extract a selector and data as public variables.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javaScript"><div tabindex="0" class="prism-code language-javaScript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Â  const data = {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Â  Â  name: &#x27;hmac-auth&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Â  Â  deleteSuccess: &#x27;Delete Plugin Successfully&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Â  };</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Â  const domSelector = {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Â  Â  tableCell: &#x27;.ant-table-cell&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Â  Â  empty: &#x27;.ant-empty-normal&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Â  Â  refresh: &#x27;.anticon-reload&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Â  Â  codemirror: &#x27;.CodeMirror&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Â  Â  switch: &#x27;#disable&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Â  Â  deleteBtn: &#x27;.ant-btn-dangerous&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Â  };</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ol start="3"><li>Remove cy.wait(someTime)</li></ol><p>We used cy.wait(someTime) in the early days of Cypress, but found that cy.wait(someTime) relies too much on the network environment and the performance of the test machine, which can cause test cases to report errors when the network environment or machine performance is poor. The recommended practice is to use it in conjunction with cy.intercept() to explicitly specify the network resources to wait for.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><div tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">cy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">intercept</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;https://apisix.apache.org/&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">as</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;fetchURL&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">cy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">wait</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;@fetchURL&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="summary"></a>Summary<a class="hash-link" href="#summary" title="Direct link to heading">#</a></h2><p>At present, APISIX Dashboard has written 49 test cases. In the future, we will continue to enhance the front-end E2E coverage, and require the community to agree to write test cases for each new feature or bugfix submission to ensure the stability of the product.</p><p>Welcome to join us to polish the world-class gateway product.</p><p>Project address: <a href="https://github.com/apache/apisix-dashboard" target="_blank" rel="noopener noreferrer">https://github.com/apache/apisix-dashboard</a></p></div></article><div></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2021/02/26/install-apache-apisix-from-helm-charts"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« Install Apache APISIX from Helm Charts</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2021/01/21/run-ingress-apisix-on-amazon-eks"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Run Ingress APISIX on Amazon EKS Â»</div></a></div></nav></div></main><div class="col col--2"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#background" class="table-of-contents__link">Background</a></li><li><a href="#what-is-front-end-e2e" class="table-of-contents__link">What is Front-End E2E?</a></li><li><a href="#why-cypress" class="table-of-contents__link">Why Cypress</a></li><li><a href="#cypress-and-apisix-dashboard" class="table-of-contents__link">Cypress and APISIX Dashboard</a></li><li><a href="#summary" class="table-of-contents__link">Summary</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">ASF</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Foundation</a></li><li class="footer__item"><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="footer__link-item">License</a></li><li class="footer__item"><a href="https://www.apache.org/events/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Events</a></li><li class="footer__item"><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Security</a></li><li class="footer__item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sponsorship</a></li><li class="footer__item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Thanks</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/apache/apisix/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Issue Tracker</a></li><li class="footer__item"><a href="https://join.slack.com/t/the-asf/shared_invite/zt-nggtva4i-hDCsW1S35MuZ2g_2DgVDGg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://twitter.com/ApacheAPISIX" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://apisix.apache.org/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/img/asf_logo_wide_small.png" alt="Apache Software Foundation" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/asf_logo_wide_small.png" alt="Apache Software Foundation" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright Â© 2019-2021 The Apache Software Foundation. Apache APISIX, APISIXÂ®, Apache, the Apache feather logo, and the Apache APISIX project logo are either registered trademarks or trademarks of the Apache Software Foundation.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.496510d8.js"></script>
<script src="/assets/js/main.9c1dd3ea.js"></script>
</body>
</html>