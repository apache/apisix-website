<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="ahrefs-site-verification" content="c2f7370ecf46173f4fb25f114e74c97e0a2976d4f02f61c9b00a9d7d34e34698">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache APISIX® -- Cloud-Native API Gateway and AI Gateway RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache APISIX® -- Cloud-Native API Gateway and AI Gateway Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Apache APISIX® -- Cloud-Native API Gateway and AI Gateway" href="/opensearch.xml">
<script type="application/ld+json">{"@context":"https://schema.org","@type":"WebSite","name":"Apache APISIX","url":"https://apisix.apache.org"}</script>
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="24b59d9a-682e-4c3d-9e83-bf2ee85cdc19" data-project-name="APISIX" data-project-color="#E8442E" data-project-logo="https://static.apiseven.com/202202/apache-apisix.png" data-modal-disclaimer="This is a custom LLM for APISIX with access to all developer documentation, GitHub issues and discussions." data-modal-example-questions="How to set up canary release in APISIX?,How to develop a custom APISIX plugin?,How to use custom NGINX configuration in APISIX?,How to configure mTLS between clients and APISIX?,How to only allow a specific APISIX consumer to access special services or routes?" async></script><title data-react-helmet="true">Centralized Authentication with Apache APISIX and Advanced Tricks | Apache APISIX® -- Cloud-Native API Gateway and AI Gateway</title><meta data-react-helmet="true" property="og:image" content="https://static.apiseven.com/202202/apache-apisix.png"><meta data-react-helmet="true" name="twitter:image" content="https://static.apiseven.com/202202/apache-apisix.png"><meta data-react-helmet="true" property="og:url" content="https://apisix.apache.org/blog/2021/09/07/how-to-use-apisix-auth/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" name="robots" content="index,follow"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" property="og:title" content="Centralized Authentication with Apache APISIX and Advanced Tricks | Apache APISIX® -- Cloud-Native API Gateway and AI Gateway"><meta data-react-helmet="true" name="description" content="This article introduces the authentication function of the cloud native API gateway Apache APISIX, and introduces the importance and usage in detail."><meta data-react-helmet="true" property="og:description" content="This article introduces the authentication function of the cloud native API gateway Apache APISIX, and introduces the importance and usage in detail."><meta data-react-helmet="true" name="keywords" content="APISIX,Casbin,Authorization,Practical Case"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2021-09-07T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://github.com/starsz"><meta data-react-helmet="true" property="article:tag" content="Authentication,Ecosystem"><link data-react-helmet="true" rel="shortcut icon" href="https://static.apiseven.com/202202/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://apisix.apache.org/blog/2021/09/07/how-to-use-apisix-auth/"><link data-react-helmet="true" rel="alternate" href="https://apisix.apache.org/blog/2021/09/07/how-to-use-apisix-auth/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://apisix.apache.org/blog/2021/09/07/how-to-use-apisix-auth/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://38VC84A2WJ-dsn.algolia.net" crossorigin="anonymous"><link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Medium.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Bold.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Light.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Demi.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-ExtraBold.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://apisix-website-static.apiseven.com/assets/js/runtime~main.57eaa0fa.js" as="script">
<link rel="preload" href="https://apisix-website-static.apiseven.com/assets/js/main.84c0a2cc.js" as="script">
<link rel="stylesheet" href="https://apisix-website-static.apiseven.com/assets/css/styles.9943cb19.css">
<!-- Matomo from the ASF -->
<script>var _paq=window._paq=window._paq||[];_paq.push(["disableCookies"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var a="https://analytics.apache.org/";_paq.push(["setTrackerUrl",a+"matomo.php"]),_paq.push(["setSiteId","17"]);var e=document,p=e.createElement("script"),t=e.getElementsByTagName("script")[0];p.async=!0,p.src=a+"matomo.js",t.parentNode.insertBefore(p,t)}()</script>
<!-- End Matomo Code -->
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><div class="announcementBar_axC9" style="background-color:#e8433e;color:white" role="banner"><div class="announcementBarPlaceholder_xYHE"></div><div class="announcementBarContent_6uhP">🤔 Introducing APISIX AI Gateway – Built for LLMs and AI workloads. <a target="_blank" rel="noopener noreferrer" href="/ai-gateway/"> Learn More</a></div><button type="button" class="clean-btn close announcementBarClose_A3A1" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_RReh"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a target="_parent" class="navbar__brand" href="/"><img src="/img/logo2.svg" alt="Apache APISIX®" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo2.svg" alt="Apache APISIX®" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Apache APISIX®</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" target="_parent" href="/docs/">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" target="_parent" href="/docs/apisix/getting-started/">Apache APISIX®️</a></li><li><a class="dropdown__link" target="_parent" href="/docs/apisix/next/dashboard/">Apache APISIX®️ Dashboard</a></li><li><a class="dropdown__link" target="_parent" href="/docs/ingress-controller/overview/">Apache APISIX®️ Ingress Controller</a></li><li><a class="dropdown__link" target="_parent" href="/docs/helm-chart/apisix/">Apache APISIX®️ Helm Charts</a></li><li><a class="dropdown__link" target="_parent" href="/docs/docker/build/">Apache APISIX®️ Docker</a></li><li><a class="dropdown__link" target="_parent" href="/docs/java-plugin-runner/development/">Apache APISIX®️ Java Plugin Runner</a></li><li><a class="dropdown__link" target="_parent" href="/docs/go-plugin-runner/getting-started/">Apache APISIX®️ Go Plugin Runner</a></li><li><a class="dropdown__link" target="_parent" href="/docs/python-plugin-runner/getting-started/">Apache APISIX®️ Python Plugin Runner</a></li><li><a class="dropdown__link" target="_parent" href="/docs/general/join/">General</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" target="_parent" href="/blog/">Blog</a><a class="navbar__item navbar__link" target="_parent" href="/blog/tags/case-studies/">Case Studies</a><a class="navbar__item navbar__link" target="_parent" href="/downloads/">Downloads</a><a class="navbar__item navbar__link" target="_parent" href="/help/">Help</a><a class="navbar__item navbar__link" target="_parent" href="/team/">Team</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">Resources</a><ul class="dropdown__menu"><li><a class="dropdown__link" target="_parent" href="/showcase/">Showcase</a></li><li><a class="dropdown__link" target="_parent" href="/docs/general/code-samples/">Code Samples</a></li><li><a class="dropdown__link" target="_parent" href="/plugins/">PluginHub</a></li><li><a class="dropdown__link" target="_parent" href="/docs/general/join/">Community</a></li><li><a class="dropdown__link" target="_parent" href="/docs/general/events/">Events</a></li><li><a href="https://github.com/apache/apisix/milestones" target="_parent" rel="noopener noreferrer" class="dropdown__link">Roadmap</a></li></ul></div><a href="/zh/blog" target="_parent" rel="noopener noreferrer" class="localizedBlogLink_W2zh">中文博客</a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_SGhp"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="sticky-outer-wrapper placeholder_iq-X"><div class="sticky-inner-wrapper" style="position:relative;top:0px;z-index:199"><div class="tagsHeader_HGHP"><a target="_parent" href="/blog/tags/case-studies/">Case Studies</a><a target="_parent" href="/blog/tags/ecosystem/">Ecosystem</a><a target="_parent" href="/blog/tags/authentication/">Authentication</a><a target="_parent" href="/blog/tags/plugins/">Plugins</a><a target="_parent" href="/blog/tags/community/">Community</a><a target="_parent" href="/blog/tags/vulnerabilities/">Vulnerabilities</a></div></div></div><div class="container margin-vert--lg"><div class="row" style="justify-content:center"><div class="col col--9"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_d4p0" itemprop="headline">Centralized Authentication with Apache APISIX and Advanced Tricks</h1><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2021-09-07T00:00:00.000Z" itemprop="datePublished">September 7, 2021</time> · <!-- -->8 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_dGI0"><div class="avatar margin-bottom--sm"><a href="https://github.com/starsz" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_KCbV" src="https://avatars.githubusercontent.com/u/25628854?v=4" alt="Xinxin Zhu"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/starsz" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Xinxin Zhu</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><section class="shareSection_OUzq"><div><button aria-label="linkedin" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#007fb1"></circle><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></svg></button><button aria-label="twitter" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#00aced"></circle><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></svg></button><button aria-label="reddit" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#ff4500"></circle><path d="m 52.8165,31.942362 c 0,-2.4803 -2.0264,-4.4965 -4.5169,-4.4965 -1.2155,0 -2.3171,0.4862 -3.128,1.2682 -3.077,-2.0247 -7.2403,-3.3133 -11.8507,-3.4782 l 2.5211,-7.9373 6.8272,1.5997 -0.0102,0.0986 c 0,2.0281 1.6575,3.6771 3.6958,3.6771 2.0366,0 3.6924,-1.649 3.6924,-3.6771 0,-2.0281 -1.6575,-3.6788 -3.6924,-3.6788 -1.564,0 -2.8968,0.9758 -3.4357,2.3443 l -7.3593,-1.7255 c -0.3213,-0.0782 -0.6477,0.1071 -0.748,0.4233 L 32,25.212062 c -4.8246,0.0578 -9.1953,1.3566 -12.41,3.4425 -0.8058,-0.7446 -1.8751,-1.2104 -3.0583,-1.2104 -2.4905,0 -4.5152,2.0179 -4.5152,4.4982 0,1.649 0.9061,3.0787 2.2389,3.8607 -0.0884,0.4794 -0.1462,0.9639 -0.1462,1.4569 0,6.6487 8.1736,12.0581 18.2223,12.0581 10.0487,0 18.224,-5.4094 18.224,-12.0581 0,-0.4658 -0.0493,-0.9248 -0.1275,-1.377 1.4144,-0.7599 2.3885,-2.2304 2.3885,-3.9406 z m -29.2808,3.0872 c 0,-1.4756 1.207,-2.6775 2.6894,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 -1.4824,0 -2.6894,-1.2002 -2.6894,-2.6758 z m 15.4037,7.9373 c -1.3549,1.3481 -3.4816,2.0043 -6.5008,2.0043 l -0.0221,-0.0051 -0.0221,0.0051 c -3.0209,0 -5.1476,-0.6562 -6.5008,-2.0043 -0.2465,-0.2448 -0.2465,-0.6443 0,-0.8891 0.2465,-0.2465 0.6477,-0.2465 0.8942,0 1.105,1.0999 2.9393,1.6337 5.6066,1.6337 l 0.0221,0.0051 0.0221,-0.0051 c 2.6673,0 4.5016,-0.5355 5.6066,-1.6354 0.2465,-0.2465 0.6477,-0.2448 0.8942,0 0.2465,0.2465 0.2465,0.6443 0,0.8908 z m -0.3213,-5.2615 c -1.4824,0 -2.6877,-1.2002 -2.6877,-2.6758 0,-1.4756 1.2053,-2.6775 2.6877,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 z" fill="white"></path></svg></button></div></section><blockquote><p>This article describes the authentication features of Apache APISIX, in terms of importance and usage.</p></blockquote><p>Authentication is a very common feature in daily life, and we all come across it in our daily lives. For example, face recognition when using Alipay, fingerprint/face clocking in and out of work, and password login on websites are all scenarios of authentication.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1631004418593-0a46f949-72aa-4cd4-8f38-1988327c92d6.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1631004418593-0a46f949-72aa-4cd4-8f38-1988327c92d6.webp, https://static.apiseven.com/202108/1631004418593-0a46f949-72aa-4cd4-8f38-1988327c92d6.png" alt="Authentication Concepts" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1631004418593-0a46f949-72aa-4cd4-8f38-1988327c92d6.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1631004418593-0a46f949-72aa-4cd4-8f38-1988327c92d6.webp, https://static.apiseven.com/apisix-thumbnail/202108/1631004418593-0a46f949-72aa-4cd4-8f38-1988327c92d6.png" alt="Authentication Concepts" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1631004418593-0a46f949-72aa-4cd4-8f38-1988327c92d6.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>As shown above, Jack requests a server-side application with an account password, and the server-side application needs a module dedicated to authentication to handle this part of the logic. After the request is processed, if the JWT Token authentication method is used, the server will provide a Token to identify the user as Jack. If the account password is entered incorrectly during the login process, it will lead to authentication failure. This scenario must be very familiar to everyone, so we won&#x27;t expand the example here.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="what-is-the-significance-of-network-authentication">What is the significance of network authentication<a aria-hidden="true" class="hash-link" href="#what-is-the-significance-of-network-authentication" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="security">Security<a aria-hidden="true" class="hash-link" href="#security" title="Direct link to heading">​</a></h3><p>Authentication ensures the security of back-end services and avoids unauthorized access, thus ensuring the security of data. For example, it prevents certain hacking attacks, and some malicious calls, which can be blocked by authentication.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="practicality">Practicality<a aria-hidden="true" class="hash-link" href="#practicality" title="Direct link to heading">​</a></h3><p>From the perspective of practicality, it can be more convenient to record the operator or caller. For example, clocking in at work is actually a way to record &quot;who performed this operation&quot; to count employees&#x27; work information.</p><p>Secondly, it can record the access frequency and frequency of access. For example, it can record the frequency and frequency of requests initiated by a user in the last few minutes, which can determine how active the user is, and also whether it is a malicious attack, etc.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="functionality">Functionality<a aria-hidden="true" class="hash-link" href="#functionality" title="Direct link to heading">​</a></h3><p>At the functional level, it can handle operations with different privileges for different identities by identifying them. For example, in a company, you cannot use certain pages or services with your identity authority. To be more detailed, it can do some related technical restriction policies for different identities or different API interface callers, such as limiting the flow and speed, etc., so as to achieve different functional restrictions according to different users (callers).</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="benefits-of-centralized-authentication-with-apache-apisix">Benefits of centralized authentication with Apache APISIX<a aria-hidden="true" class="hash-link" href="#benefits-of-centralized-authentication-with-apache-apisix" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="from-traditional-to-new-model">From traditional to new model<a aria-hidden="true" class="hash-link" href="#from-traditional-to-new-model" title="Direct link to heading">​</a></h3><p>As shown in the figure below, the diagram on the left shows us a more common traditional authentication approach. Each application service module goes to develop a separate authentication module that is used to support a set of process handling for authentication. But when the volume of services increases, it becomes clear that the development workload of these modules is huge and repetitive.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1631004492221-0721d933-705d-4875-b956-e94a11a45135.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1631004492221-0721d933-705d-4875-b956-e94a11a45135.webp, https://static.apiseven.com/202108/1631004492221-0721d933-705d-4875-b956-e94a11a45135.png" alt="Apache APISIX Authentication" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1631004492221-0721d933-705d-4875-b956-e94a11a45135.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1631004492221-0721d933-705d-4875-b956-e94a11a45135.webp, https://static.apiseven.com/apisix-thumbnail/202108/1631004492221-0721d933-705d-4875-b956-e94a11a45135.png" alt="Apache APISIX Authentication" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1631004492221-0721d933-705d-4875-b956-e94a11a45135.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>At such times, we can achieve unification and reduce the amount of development by placing this part of the development logic in the Apache APISIX gateway.</p><p>As shown in the figure on the right, the user or application party goes directly to request Apache APISIX, and then Apache APISIX passes the authenticated identity information to the upstream application service after it has been identified and authenticated. After that, the upstream application service can read this information from the request header and then process the subsequent related work.</p><p>After the general process, let&#x27;s list it in detail.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="benefit-1-configuration-convergence-unified-management">Benefit 1: Configuration convergence, unified management<a aria-hidden="true" class="hash-link" href="#benefit-1-configuration-convergence-unified-management" title="Direct link to heading">​</a></h3><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1631004574541-87b607eb-2971-4c1d-a1d6-74cf4a5fdd42.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1631004574541-87b607eb-2971-4c1d-a1d6-74cf4a5fdd42.webp, https://static.apiseven.com/202108/1631004574541-87b607eb-2971-4c1d-a1d6-74cf4a5fdd42.png" alt="Dashboard" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1631004574541-87b607eb-2971-4c1d-a1d6-74cf4a5fdd42.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1631004574541-87b607eb-2971-4c1d-a1d6-74cf4a5fdd42.webp, https://static.apiseven.com/apisix-thumbnail/202108/1631004574541-87b607eb-2971-4c1d-a1d6-74cf4a5fdd42.png" alt="Dashboard" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1631004574541-87b607eb-2971-4c1d-a1d6-74cf4a5fdd42.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>The screenshot above is a screenshot of the APISIX-Dashboard interface, you can see the routing, Consumer and other data information. The Consumer here can be understood as an application party, for example, you can create a Consumer specifically for the application and configure related authentication plugins, such as JWT, Basic-Auth, etc. When there is a new service, we need to create another Consumer, and then configure this part of the configuration information to the second application service.</p><p>Through centralized authentication, we can converge and unify the customer configuration and achieve the effect of reducing the operation and maintenance cost.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="benefit-2-rich-plug-ins-reduced-development">Benefit 2: Rich plug-ins, reduced development<a aria-hidden="true" class="hash-link" href="#benefit-2-rich-plug-ins-reduced-development" title="Direct link to heading">​</a></h3><p>Apache APISIX, as an API gateway, is now open to cooperation with various plug-in functions for adaptation, and the plug-in library is relatively rich. At present, it can already work with a large number of authentication-related plug-ins, as shown in the following figure.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1631004738218-586e84af-a5ab-4714-845d-4d71b7ba79e3.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1631004738218-586e84af-a5ab-4714-845d-4d71b7ba79e3.webp, https://static.apiseven.com/202108/1631004738218-586e84af-a5ab-4714-845d-4d71b7ba79e3.png" alt="API Gateway Authentication Plugin" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1631004738218-586e84af-a5ab-4714-845d-4d71b7ba79e3.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1631004738218-586e84af-a5ab-4714-845d-4d71b7ba79e3.webp, https://static.apiseven.com/apisix-thumbnail/202108/1631004738218-586e84af-a5ab-4714-845d-4d71b7ba79e3.png" alt="API Gateway Authentication Plugin" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1631004738218-586e84af-a5ab-4714-845d-4d71b7ba79e3.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>Basic authentication plug-ins such as Key-Auth, Basic-Auth, they are authenticated by way of account password.</p><p>More complex authentication plugins such as Hmac-Auth, JWT-Auth. e.g. Hmac-Auth generates a signature by doing some encryption on the request information. When the API caller carries this signature to the Apache APISIX gateway Apache APISIX calculates the signature with the same algorithm and passes it only if the signer and the application caller are authenticated the same.</p><p>The Authz-casbin plugin is a project currently being developed by Apche APISIX in collaboration with the Casbin community. The principle of the application is to handle role-based authority control (RBAC) and ACL-related operations according to Casbin rules.</p><p>Others are generic authentication protocols and collaborative authentication protocols with third-party components, such as OpenID-Connect authentication mechanism, and LDAP authentication.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="benefit-3-flexible-and-powerful-configuration">Benefit 3: Flexible and powerful configuration<a aria-hidden="true" class="hash-link" href="#benefit-3-flexible-and-powerful-configuration" title="Direct link to heading">​</a></h3><p>How to understand powerful is that Apache APISIX can do different levels of plug-in configuration for each Consumer (i.e., caller application).</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1631004783828-3dd0056c-a6aa-4ab9-b902-7bd2ca545ffe.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1631004783828-3dd0056c-a6aa-4ab9-b902-7bd2ca545ffe.webp, https://static.apiseven.com/202108/1631004783828-3dd0056c-a6aa-4ab9-b902-7bd2ca545ffe.png" alt="Configuration flexibility" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1631004783828-3dd0056c-a6aa-4ab9-b902-7bd2ca545ffe.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1631004783828-3dd0056c-a6aa-4ab9-b902-7bd2ca545ffe.webp, https://static.apiseven.com/apisix-thumbnail/202108/1631004783828-3dd0056c-a6aa-4ab9-b902-7bd2ca545ffe.png" alt="Configuration flexibility" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1631004783828-3dd0056c-a6aa-4ab9-b902-7bd2ca545ffe.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>As shown above, we have created two consumers Consumer A and Consumer B. If we apply Consumer A to <code>Application 1</code>, subsequent accesses to <code>Application 1</code> will enable this part of Consumer A&#x27;s plugins, such as IP blacklisting, limiting the number of concurrency, etc. If we apply Consumer B to <code>Application 2</code>, the access log of <code>Application 2</code> will be sent to the logging system for collection via HTTP since the http-log plugin is enabled.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="how-to-play-with-authentication-in-apache-apisix">How to play with authentication in Apache APISIX<a aria-hidden="true" class="hash-link" href="#how-to-play-with-authentication-in-apache-apisix" title="Direct link to heading">​</a></h2><p>Regarding the play of Apache APISIX authentication, here is a recommendation of three stages of play for your reference only, or you can use and apply them in more depth on the basis of these.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="primary-general-play">Primary: General play<a aria-hidden="true" class="hash-link" href="#primary-general-play" title="Direct link to heading">​</a></h3><p>Ordinary play is recommended based on Key-Auth, Basic-Auth, JWT-Auth and Hmac-Auth, the use of these plug-ins need to be associated with the use of Consumer.</p><h4 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="step-1-create-a-route-and-configure-the-authentication-plugin">Step 1: Create a route and configure the authentication plugin<a aria-hidden="true" class="hash-link" href="#step-1-create-a-route-and-configure-the-authentication-plugin" title="Direct link to heading">​</a></h4><p>Create a route, configure the upstream as <code>httpbin.org</code> and enable the <code>basic-auth</code> plugin.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1631004892467-71c93f8f-dc0e-47fe-a88f-943adb9edbff.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1631004892467-71c93f8f-dc0e-47fe-a88f-943adb9edbff.webp, https://static.apiseven.com/202108/1631004892467-71c93f8f-dc0e-47fe-a88f-943adb9edbff.png" alt="Create route" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1631004892467-71c93f8f-dc0e-47fe-a88f-943adb9edbff.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1631004892467-71c93f8f-dc0e-47fe-a88f-943adb9edbff.webp, https://static.apiseven.com/apisix-thumbnail/202108/1631004892467-71c93f8f-dc0e-47fe-a88f-943adb9edbff.png" alt="Create route" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1631004892467-71c93f8f-dc0e-47fe-a88f-943adb9edbff.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><h4 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="step-2-create-consumer-and-configure-identity-information">Step 2: Create consumer and configure identity information<a aria-hidden="true" class="hash-link" href="#step-2-create-consumer-and-configure-identity-information" title="Direct link to heading">​</a></h4><p>Create the consumer foo. In the consumer, we need to configure the user authentication information, e.g. <code>username</code> for foo and <code>password</code> for <code>bar</code>.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1631004937828-15ac5d8f-0e45-4c3d-94e8-2b180266b379.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1631004937828-15ac5d8f-0e45-4c3d-94e8-2b180266b379.webp, https://static.apiseven.com/202108/1631004937828-15ac5d8f-0e45-4c3d-94e8-2b180266b379.png" alt="Create consumer" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1631004937828-15ac5d8f-0e45-4c3d-94e8-2b180266b379.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1631004937828-15ac5d8f-0e45-4c3d-94e8-2b180266b379.webp, https://static.apiseven.com/apisix-thumbnail/202108/1631004937828-15ac5d8f-0e45-4c3d-94e8-2b180266b379.png" alt="Create consumer" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1631004937828-15ac5d8f-0e45-4c3d-94e8-2b180266b379.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><h4 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="step-3-application-service-carries-authentication-information-for-access">Step 3: Application service carries authentication information for access<a aria-hidden="true" class="hash-link" href="#step-3-application-service-carries-authentication-information-for-access" title="Direct link to heading">​</a></h4><p>The application accesses Apache APISIX with <code>username:foo</code>,<code>password: bar</code>. Apache APISIX is authenticated and carries the request Authorization request header upstream to <code>httpbin.org</code>. Since the get interface in <code>httpbin.org</code> returns the request information, we can observe the request header <code>Authorization</code> in it.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1631004973305-4b209f79-f7de-41a2-994e-8877a6624d99.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1631004973305-4b209f79-f7de-41a2-994e-8877a6624d99.webp, https://static.apiseven.com/202108/1631004973305-4b209f79-f7de-41a2-994e-8877a6624d99.png" alt="Request Carry" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1631004973305-4b209f79-f7de-41a2-994e-8877a6624d99.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1631004973305-4b209f79-f7de-41a2-994e-8877a6624d99.webp, https://static.apiseven.com/apisix-thumbnail/202108/1631004973305-4b209f79-f7de-41a2-994e-8877a6624d99.png" alt="Request Carry" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1631004973305-4b209f79-f7de-41a2-994e-8877a6624d99.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="intermediate-usages-of-authentication">Intermediate usages of authentication<a aria-hidden="true" class="hash-link" href="#intermediate-usages-of-authentication" title="Direct link to heading">​</a></h3><p>The intermediate mode is to use Apache APISIX with the OpenID-Connect plugin to interface to third-party authentication services. openID-Connect is an authentication mechanism that can be used to interface to a user&#x27;s user management system or user management services, such as Authing and Tencent Cloud in China, Okta and Auth0, etc.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1631005002268-7393b40e-1733-4e66-bc09-742be221efae.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1631005002268-7393b40e-1733-4e66-bc09-742be221efae.webp, https://static.apiseven.com/202108/1631005002268-7393b40e-1733-4e66-bc09-742be221efae.png" alt="Third-party authentication mode" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1631005002268-7393b40e-1733-4e66-bc09-742be221efae.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1631005002268-7393b40e-1733-4e66-bc09-742be221efae.webp, https://static.apiseven.com/apisix-thumbnail/202108/1631005002268-7393b40e-1733-4e66-bc09-742be221efae.png" alt="Third-party authentication mode" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1631005002268-7393b40e-1733-4e66-bc09-742be221efae.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>The details are as follows, using Okta cloud service as an example.</p><h4 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="step-1-create-an-openid-connect-application">Step 1: Create an OpenID-Connect application<a aria-hidden="true" class="hash-link" href="#step-1-create-an-openid-connect-application" title="Direct link to heading">​</a></h4><p>Create an application that supports OpenID-Connect from the Okta console page.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1631005022640-1e931b14-8175-47f3-bfb8-46e09cec616b.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1631005022640-1e931b14-8175-47f3-bfb8-46e09cec616b.webp, https://static.apiseven.com/202108/1631005022640-1e931b14-8175-47f3-bfb8-46e09cec616b.png" alt="Create" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1631005022640-1e931b14-8175-47f3-bfb8-46e09cec616b.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1631005022640-1e931b14-8175-47f3-bfb8-46e09cec616b.webp, https://static.apiseven.com/apisix-thumbnail/202108/1631005022640-1e931b14-8175-47f3-bfb8-46e09cec616b.png" alt="Create" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1631005022640-1e931b14-8175-47f3-bfb8-46e09cec616b.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><h4 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="step-2-create-a-route-and-configure-the-openid-connect-plug-in">Step 2: Create a route and configure the OpenID-Connect plug-in<a aria-hidden="true" class="hash-link" href="#step-2-create-a-route-and-configure-the-openid-connect-plug-in" title="Direct link to heading">​</a></h4><p>Create a route, configure the upstream address to httpbin.org, and enable the openid-connect plug-in, and fill in the configuration of the Okta application into the openid-connect plug-in.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1631005045489-b637ef9a-c71c-440f-ae58-a93398a4c9dd.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1631005045489-b637ef9a-c71c-440f-ae58-a93398a4c9dd.webp, https://static.apiseven.com/202108/1631005045489-b637ef9a-c71c-440f-ae58-a93398a4c9dd.png" alt="Configure the plugin" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1631005045489-b637ef9a-c71c-440f-ae58-a93398a4c9dd.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1631005045489-b637ef9a-c71c-440f-ae58-a93398a4c9dd.webp, https://static.apiseven.com/apisix-thumbnail/202108/1631005045489-b637ef9a-c71c-440f-ae58-a93398a4c9dd.png" alt="Configure the plugin" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1631005045489-b637ef9a-c71c-440f-ae58-a93398a4c9dd.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><h4 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="step-3-when-the-user-visits-it-will-jump-to-the-login-page-after-the-login-is-complete-the-upstream-application-gets-the-user-information">Step 3: When the user visits, it will jump to the login page. After the login is complete, the upstream application gets the user information<a aria-hidden="true" class="hash-link" href="#step-3-when-the-user-visits-it-will-jump-to-the-login-page-after-the-login-is-complete-the-upstream-application-gets-the-user-information" title="Direct link to heading">​</a></h4><p>At this point, when the user accesses Apache APISIX, they will first be redirected to the Okta login page. At this point, you need to fill in the account password of the user that already exists in Okta. After login is completed, Apache APISIX will carry the Access-Token and ID-Token to the upstream, and encode the authenticated user information in base64 in the Userinfo request header and pass it to the upstream.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1631005077846-0f877a03-ddcd-46f6-a38d-f046b4700058.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1631005077846-0f877a03-ddcd-46f6-a38d-f046b4700058.webp, https://static.apiseven.com/202108/1631005077846-0f877a03-ddcd-46f6-a38d-f046b4700058.png" alt="APISIX Page" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1631005077846-0f877a03-ddcd-46f6-a38d-f046b4700058.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1631005077846-0f877a03-ddcd-46f6-a38d-f046b4700058.webp, https://static.apiseven.com/apisix-thumbnail/202108/1631005077846-0f877a03-ddcd-46f6-a38d-f046b4700058.png" alt="APISIX Page" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1631005077846-0f877a03-ddcd-46f6-a38d-f046b4700058.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="advanced-upload-your-own-code-snippets-through-the-serverless-plug-in">Advanced: upload your own code snippets through the Serverless plug-in<a aria-hidden="true" class="hash-link" href="#advanced-upload-your-own-code-snippets-through-the-serverless-plug-in" title="Direct link to heading">​</a></h2><p>The DIY gameplay provided here makes use of the Serverless plugin, which is feature-rich and has a lot of ways to play. If you have your own use of play, you are also welcome to communicate in the community.</p><p>The specific operation process is to upload their own code snippets through the Serverless plug-in to Apache APISIX, the process of Serverless plug-in support dynamic configuration and hot updates.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="method-1-custom-judgment-logic">Method 1: Custom judgment logic<a aria-hidden="true" class="hash-link" href="#method-1-custom-judgment-logic" title="Direct link to heading">​</a></h3><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1631005112469-c04868b8-388e-4b81-abcc-d37b6a8951f5.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1631005112469-c04868b8-388e-4b81-abcc-d37b6a8951f5.webp, https://static.apiseven.com/202108/1631005112469-c04868b8-388e-4b81-abcc-d37b6a8951f5.png" alt="Judgment Logic" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1631005112469-c04868b8-388e-4b81-abcc-d37b6a8951f5.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1631005112469-c04868b8-388e-4b81-abcc-d37b6a8951f5.webp, https://static.apiseven.com/apisix-thumbnail/202108/1631005112469-c04868b8-388e-4b81-abcc-d37b6a8951f5.png" alt="Judgment Logic" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1631005112469-c04868b8-388e-4b81-abcc-d37b6a8951f5.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>Some judgments are made by request headers, parameters and other related information. By this approach, we can go to implement some of our own rules, such as combining some internal authentication of the enterprise, or go to write some of our own business logic.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="method-2-initiate-authentication-request">Method 2: Initiate authentication request<a aria-hidden="true" class="hash-link" href="#method-2-initiate-authentication-request" title="Direct link to heading">​</a></h3><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1631005141578-f90cf948-4913-45cd-a28e-9e697ad197fe.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1631005141578-f90cf948-4913-45cd-a28e-9e697ad197fe.webp, https://static.apiseven.com/202108/1631005141578-f90cf948-4913-45cd-a28e-9e697ad197fe.png" alt="Authentication Request" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1631005141578-f90cf948-4913-45cd-a28e-9e697ad197fe.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1631005141578-f90cf948-4913-45cd-a28e-9e697ad197fe.webp, https://static.apiseven.com/apisix-thumbnail/202108/1631005141578-f90cf948-4913-45cd-a28e-9e697ad197fe.png" alt="Authentication Request" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1631005141578-f90cf948-4913-45cd-a28e-9e697ad197fe.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>By initiating an HTTP request through the HTTP library, we can use a third-party service to do some authentication and authentication related things and then parse the returned results. In this way, we can do a lot of things that can be extended. For example, interfacing to Redis or a database, as long as it&#x27;s over TCP or UDP, can be attempted with the Serverless plugin.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="upload-configurations">Upload Configurations<a aria-hidden="true" class="hash-link" href="#upload-configurations" title="Direct link to heading">​</a></h3><p>After completing the custom code snippet, we create the route and configure the snippet to the Serverless plugin. Later, we will test if the plugin is working by accessing Apache APISIX and getting the appropriate feedback.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1631005184917-bc620c0b-d4c6-43f5-8450-4f5b2b9549e1.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1631005184917-bc620c0b-d4c6-43f5-8450-4f5b2b9549e1.webp, https://static.apiseven.com/202108/1631005184917-bc620c0b-d4c6-43f5-8450-4f5b2b9549e1.png" alt="Configure Upload" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1631005184917-bc620c0b-d4c6-43f5-8450-4f5b2b9549e1.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1631005184917-bc620c0b-d4c6-43f5-8450-4f5b2b9549e1.webp, https://static.apiseven.com/apisix-thumbnail/202108/1631005184917-bc620c0b-d4c6-43f5-8450-4f5b2b9549e1.png" alt="Configure Upload" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1631005184917-bc620c0b-d4c6-43f5-8450-4f5b2b9549e1.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_xD8n"><div class="col"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/blog/tags/authentication/">Authentication</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/blog/tags/ecosystem/">Ecosystem</a></li></ul></div></footer></article><section class="shareSection_OUzq"><div><button aria-label="linkedin" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#007fb1"></circle><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></svg></button><button aria-label="twitter" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#00aced"></circle><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></svg></button><button aria-label="reddit" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#ff4500"></circle><path d="m 52.8165,31.942362 c 0,-2.4803 -2.0264,-4.4965 -4.5169,-4.4965 -1.2155,0 -2.3171,0.4862 -3.128,1.2682 -3.077,-2.0247 -7.2403,-3.3133 -11.8507,-3.4782 l 2.5211,-7.9373 6.8272,1.5997 -0.0102,0.0986 c 0,2.0281 1.6575,3.6771 3.6958,3.6771 2.0366,0 3.6924,-1.649 3.6924,-3.6771 0,-2.0281 -1.6575,-3.6788 -3.6924,-3.6788 -1.564,0 -2.8968,0.9758 -3.4357,2.3443 l -7.3593,-1.7255 c -0.3213,-0.0782 -0.6477,0.1071 -0.748,0.4233 L 32,25.212062 c -4.8246,0.0578 -9.1953,1.3566 -12.41,3.4425 -0.8058,-0.7446 -1.8751,-1.2104 -3.0583,-1.2104 -2.4905,0 -4.5152,2.0179 -4.5152,4.4982 0,1.649 0.9061,3.0787 2.2389,3.8607 -0.0884,0.4794 -0.1462,0.9639 -0.1462,1.4569 0,6.6487 8.1736,12.0581 18.2223,12.0581 10.0487,0 18.224,-5.4094 18.224,-12.0581 0,-0.4658 -0.0493,-0.9248 -0.1275,-1.377 1.4144,-0.7599 2.3885,-2.2304 2.3885,-3.9406 z m -29.2808,3.0872 c 0,-1.4756 1.207,-2.6775 2.6894,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 -1.4824,0 -2.6894,-1.2002 -2.6894,-2.6758 z m 15.4037,7.9373 c -1.3549,1.3481 -3.4816,2.0043 -6.5008,2.0043 l -0.0221,-0.0051 -0.0221,0.0051 c -3.0209,0 -5.1476,-0.6562 -6.5008,-2.0043 -0.2465,-0.2448 -0.2465,-0.6443 0,-0.8891 0.2465,-0.2465 0.6477,-0.2465 0.8942,0 1.105,1.0999 2.9393,1.6337 5.6066,1.6337 l 0.0221,0.0051 0.0221,-0.0051 c 2.6673,0 4.5016,-0.5355 5.6066,-1.6354 0.2465,-0.2465 0.6477,-0.2448 0.8942,0 0.2465,0.2465 0.2465,0.6443 0,0.8908 z m -0.3213,-5.2615 c -1.4824,0 -2.6877,-1.2002 -2.6877,-2.6758 0,-1.4756 1.2053,-2.6775 2.6877,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 z" fill="white"></path></svg></button></div></section><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2021/09/09/how-to-contribute-to-an-openSource-without-coding/"><div class="pagination-nav__sublabel sublabel_M5Gs">Newer Post</div><div class="pagination-nav__label">How can I contribute to an open source project without writing code?</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2021/09/07/iqiyi-usercase/"><div class="pagination-nav__sublabel sublabel_M5Gs">Older Post</div><div class="pagination-nav__label">iQIYI API Gateway Update and Practice with Apache APISIX</div></a></div></nav></div></div></div></div><footer class="container_N-4m"><div class="linksRow_U0oR"><div class="linksCol_R6VE"><div>ASF</div><ul><li class="footer__item"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer"><span></span><span>Foundation</span></a></li><li class="footer__item"><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer"><span></span><span>License</span></a></li><li class="footer__item"><a href="https://www.apache.org/events/" target="_blank" rel="noopener noreferrer"><span></span><span>Events</span></a></li><li class="footer__item"><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer"><span></span><span>Security</span></a></li><li class="footer__item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer"><span></span><span>Sponsorship</span></a></li><li class="footer__item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer"><span></span><span>Thanks</span></a></li></ul></div><div class="linksCol_R6VE"><div>Community</div><ul><li class="footer__item"><a href="https://github.com/apache/apisix/issues" target="_blank" rel="noopener noreferrer"><span></span><span>GitHub</span></a></li><li class="footer__item"><a href="/docs/general/join/"><span></span><span>Slack</span></a></li><li class="footer__item"><a href="https://twitter.com/ApacheAPISIX" target="_blank" rel="noopener noreferrer"><span></span><span>Twitter</span></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCgPD18cMhOg5rmPVnQhAC8g" target="_blank" rel="noopener noreferrer"><span></span><span>YouTube</span></a></li></ul></div><div class="linksCol_R6VE"><div>More</div><ul><li class="footer__item"><a target="_parent" href="/blog/"><span></span><span>Blog</span></a></li><li class="footer__item"><a target="_parent" href="/showcase/"><span></span><span>Showcase</span></a></li><li class="footer__item"><a target="_parent" href="/plugins/"><span></span><span>Plugin Hub</span></a></li><li class="footer__item"><a href="https://github.com/apache/apisix/milestones" target="_parent" rel="noopener noreferrer"><span></span><span>Roadmap</span></a></li></ul></div></div><div class="copyright_Bdi1"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer"><span style="display:inline-block;width:231.25px;height:40px"></span></a><div>Copyright © 2019-2025 The Apache Software Foundation. Apache APISIX, APISIX®, Apache, the Apache feather logo, and the Apache APISIX project logo are either registered trademarks or trademarks of the Apache Software Foundation.</div></div></footer></div>
<script src="https://apisix-website-static.apiseven.com/assets/js/runtime~main.57eaa0fa.js"></script>
<script src="https://apisix-website-static.apiseven.com/assets/js/main.84c0a2cc.js"></script>
</body>
</html>