<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="ahrefs-site-verification" content="c2f7370ecf46173f4fb25f114e74c97e0a2976d4f02f61c9b00a9d7d34e34698">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache APISIX¬Æ -- Cloud-Native API Gateway and AI Gateway RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache APISIX¬Æ -- Cloud-Native API Gateway and AI Gateway Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Apache APISIX¬Æ -- Cloud-Native API Gateway and AI Gateway" href="/opensearch.xml">
<script type="application/ld+json">{"@context":"https://schema.org","@type":"WebSite","name":"Apache APISIX","url":"https://apisix.apache.org"}</script>
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="24b59d9a-682e-4c3d-9e83-bf2ee85cdc19" data-project-name="APISIX" data-project-color="#E8442E" data-project-logo="https://static.apiseven.com/202202/apache-apisix.png" data-modal-disclaimer="This is a custom LLM for APISIX with access to all developer documentation, GitHub issues and discussions." data-modal-example-questions="How to set up canary release in APISIX?,How to develop a custom APISIX plugin?,How to use custom NGINX configuration in APISIX?,How to configure mTLS between clients and APISIX?,How to only allow a specific APISIX consumer to access special services or routes?" async></script><title data-react-helmet="true">Practice in UPYUN with APISIX Ingress | Apache APISIX¬Æ -- Cloud-Native API Gateway and AI Gateway</title><meta data-react-helmet="true" property="og:url" content="https://apisix.apache.org/blog/2021/09/24/youpaicloud-usercase/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" name="robots" content="index,follow"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" property="og:title" content="Practice in UPYUN with APISIX Ingress | Apache APISIX¬Æ -- Cloud-Native API Gateway and AI Gateway"><meta data-react-helmet="true" name="description" content="This article describes the update and adjustment of UPYUN&#x27;s internal gateway architecture after you selected Apache Apisix Ingress, and shares some of the practice scenarios in use."><meta data-react-helmet="true" property="og:description" content="This article describes the update and adjustment of UPYUN&#x27;s internal gateway architecture after you selected Apache Apisix Ingress, and shares some of the practice scenarios in use."><meta data-react-helmet="true" name="keywords" content="Apache APISIX,Apache APISIX Ingress,UPYUN,API Gateway,Container gateway"><meta data-react-helmet="true" property="og:image" content="https://static.apiseven.com/2022/blog/0817/Upyun.png"><meta data-react-helmet="true" name="twitter:image" content="https://static.apiseven.com/2022/blog/0817/Upyun.png"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2021-09-24T00:00:00.000Z"><meta data-react-helmet="true" property="article:tag" content="Case Studies"><link data-react-helmet="true" rel="shortcut icon" href="https://static.apiseven.com/202202/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://apisix.apache.org/blog/2021/09/24/youpaicloud-usercase/"><link data-react-helmet="true" rel="alternate" href="https://apisix.apache.org/blog/2021/09/24/youpaicloud-usercase/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://apisix.apache.org/blog/2021/09/24/youpaicloud-usercase/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://38VC84A2WJ-dsn.algolia.net" crossorigin="anonymous"><link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Medium.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Bold.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Light.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Demi.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-ExtraBold.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://apisix-website-static.apiseven.com/assets/js/runtime~main.4bbc9839.js" as="script">
<link rel="preload" href="https://apisix-website-static.apiseven.com/assets/js/main.a516b59b.js" as="script">
<link rel="stylesheet" href="https://apisix-website-static.apiseven.com/assets/css/styles.9943cb19.css">
<!-- Matomo from the ASF -->
<script>var _paq=window._paq=window._paq||[];_paq.push(["disableCookies"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var a="https://analytics.apache.org/";_paq.push(["setTrackerUrl",a+"matomo.php"]),_paq.push(["setSiteId","17"]);var e=document,p=e.createElement("script"),t=e.getElementsByTagName("script")[0];p.async=!0,p.src=a+"matomo.js",t.parentNode.insertBefore(p,t)}()</script>
<!-- End Matomo Code -->
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><div class="announcementBar_axC9" style="background-color:#e8433e;color:white" role="banner"><div class="announcementBarPlaceholder_xYHE"></div><div class="announcementBarContent_6uhP">ü§î Introducing APISIX AI Gateway ‚Äì Built for LLMs and AI workloads. <a target="_blank" rel="noopener noreferrer" href="/ai-gateway/"> Learn More</a></div><button type="button" class="clean-btn close announcementBarClose_A3A1" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_RReh"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a target="_parent" class="navbar__brand" href="/"><img src="/img/logo2.svg" alt="Apache APISIX¬Æ" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo2.svg" alt="Apache APISIX¬Æ" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Apache APISIX¬Æ</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" target="_parent" href="/docs/">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" target="_parent" href="/docs/apisix/getting-started/">Apache APISIX¬ÆÔ∏è</a></li><li><a class="dropdown__link" target="_parent" href="/docs/apisix/next/dashboard/">Apache APISIX¬ÆÔ∏è Dashboard</a></li><li><a class="dropdown__link" target="_parent" href="/docs/ingress-controller/overview/">Apache APISIX¬ÆÔ∏è Ingress Controller</a></li><li><a class="dropdown__link" target="_parent" href="/docs/helm-chart/apisix/">Apache APISIX¬ÆÔ∏è Helm Charts</a></li><li><a class="dropdown__link" target="_parent" href="/docs/docker/build/">Apache APISIX¬ÆÔ∏è Docker</a></li><li><a class="dropdown__link" target="_parent" href="/docs/java-plugin-runner/development/">Apache APISIX¬ÆÔ∏è Java Plugin Runner</a></li><li><a class="dropdown__link" target="_parent" href="/docs/go-plugin-runner/getting-started/">Apache APISIX¬ÆÔ∏è Go Plugin Runner</a></li><li><a class="dropdown__link" target="_parent" href="/docs/python-plugin-runner/getting-started/">Apache APISIX¬ÆÔ∏è Python Plugin Runner</a></li><li><a class="dropdown__link" target="_parent" href="/docs/general/join/">General</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" target="_parent" href="/blog/">Blog</a><a class="navbar__item navbar__link" target="_parent" href="/blog/tags/case-studies/">Case Studies</a><a class="navbar__item navbar__link" target="_parent" href="/downloads/">Downloads</a><a class="navbar__item navbar__link" target="_parent" href="/help/">Help</a><a class="navbar__item navbar__link" target="_parent" href="/team/">Team</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">Resources</a><ul class="dropdown__menu"><li><a class="dropdown__link" target="_parent" href="/showcase/">Showcase</a></li><li><a class="dropdown__link" target="_parent" href="/docs/general/code-samples/">Code Samples</a></li><li><a class="dropdown__link" target="_parent" href="/plugins/">PluginHub</a></li><li><a class="dropdown__link" target="_parent" href="/docs/general/join/">Community</a></li><li><a class="dropdown__link" target="_parent" href="/docs/general/events/">Events</a></li><li><a href="https://github.com/apache/apisix/milestones" target="_parent" rel="noopener noreferrer" class="dropdown__link">Roadmap</a></li></ul></div><a href="/zh/blog" target="_parent" rel="noopener noreferrer" class="localizedBlogLink_W2zh">‰∏≠ÊñáÂçöÂÆ¢</a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">üåú</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">üåû</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_SGhp"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="sticky-outer-wrapper placeholder_iq-X"><div class="sticky-inner-wrapper" style="position:relative;top:0px;z-index:199"><div class="tagsHeader_HGHP"><a target="_parent" href="/blog/tags/case-studies/">Case Studies</a><a target="_parent" href="/blog/tags/ecosystem/">Ecosystem</a><a target="_parent" href="/blog/tags/authentication/">Authentication</a><a target="_parent" href="/blog/tags/plugins/">Plugins</a><a target="_parent" href="/blog/tags/community/">Community</a><a target="_parent" href="/blog/tags/vulnerabilities/">Vulnerabilities</a></div></div></div><div class="container margin-vert--lg"><div class="row" style="justify-content:center"><div class="col col--9"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_d4p0" itemprop="headline">Practice in UPYUN with APISIX Ingress</h1><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2021-09-24T00:00:00.000Z" itemprop="datePublished">September 24, 2021</time> ¬∑ <!-- -->9 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_dGI0"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link avatar__photo"><div size="48" color="FFEBEE" class="go1418802212"><p color="BD0F2C" size="48" class="go2661147142">Zh</p></div></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a itemprop="url"><span itemprop="name">Zhuo Chen</span></a></div></div></div></div></div></header><meta itemprop="image" content="https://static.apiseven.com/2022/blog/0817/Upyun.png"><div class="markdown" itemprop="articleBody"><section class="shareSection_OUzq"><div><button aria-label="linkedin" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#007fb1"></circle><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></svg></button><button aria-label="twitter" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#00aced"></circle><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></svg></button><button aria-label="reddit" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#ff4500"></circle><path d="m 52.8165,31.942362 c 0,-2.4803 -2.0264,-4.4965 -4.5169,-4.4965 -1.2155,0 -2.3171,0.4862 -3.128,1.2682 -3.077,-2.0247 -7.2403,-3.3133 -11.8507,-3.4782 l 2.5211,-7.9373 6.8272,1.5997 -0.0102,0.0986 c 0,2.0281 1.6575,3.6771 3.6958,3.6771 2.0366,0 3.6924,-1.649 3.6924,-3.6771 0,-2.0281 -1.6575,-3.6788 -3.6924,-3.6788 -1.564,0 -2.8968,0.9758 -3.4357,2.3443 l -7.3593,-1.7255 c -0.3213,-0.0782 -0.6477,0.1071 -0.748,0.4233 L 32,25.212062 c -4.8246,0.0578 -9.1953,1.3566 -12.41,3.4425 -0.8058,-0.7446 -1.8751,-1.2104 -3.0583,-1.2104 -2.4905,0 -4.5152,2.0179 -4.5152,4.4982 0,1.649 0.9061,3.0787 2.2389,3.8607 -0.0884,0.4794 -0.1462,0.9639 -0.1462,1.4569 0,6.6487 8.1736,12.0581 18.2223,12.0581 10.0487,0 18.224,-5.4094 18.224,-12.0581 0,-0.4658 -0.0493,-0.9248 -0.1275,-1.377 1.4144,-0.7599 2.3885,-2.2304 2.3885,-3.9406 z m -29.2808,3.0872 c 0,-1.4756 1.207,-2.6775 2.6894,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 -1.4824,0 -2.6894,-1.2002 -2.6894,-2.6758 z m 15.4037,7.9373 c -1.3549,1.3481 -3.4816,2.0043 -6.5008,2.0043 l -0.0221,-0.0051 -0.0221,0.0051 c -3.0209,0 -5.1476,-0.6562 -6.5008,-2.0043 -0.2465,-0.2448 -0.2465,-0.6443 0,-0.8891 0.2465,-0.2465 0.6477,-0.2465 0.8942,0 1.105,1.0999 2.9393,1.6337 5.6066,1.6337 l 0.0221,0.0051 0.0221,-0.0051 c 2.6673,0 4.5016,-0.5355 5.6066,-1.6354 0.2465,-0.2465 0.6477,-0.2448 0.8942,0 0.2465,0.2465 0.2465,0.6443 0,0.8908 z m -0.3213,-5.2615 c -1.4824,0 -2.6877,-1.2002 -2.6877,-2.6758 0,-1.4756 1.2053,-2.6775 2.6877,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 z" fill="white"></path></svg></button></div></section><blockquote><p>This article describes the update and adjustment of UPYUN&#x27;s internal gateway architecture after you selected Apache Apisix Ingress, and shares some of the practice scenarios in use. Chen Zhuo, a cloud development engineer, is responsible for cloud storage, cloud processing, and gateway application development.</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="background">Background<a aria-hidden="true" class="hash-link" href="#background" title="Direct link to heading">‚Äã</a></h2><p>The range of Ingress products on the market has grown and the range of options has expanded considerably. These products fall into roughly two architectural categories. One, like K8s Ingress and Apache APISIX Ingress, are based on traditional agents such as Nginx and OpenResty, and use k8s-Client and Golang to do Controller. There is also an emerging class of agents and controllers using the Golang language, such as Traefik.</p><p>Ingress-Nginx is still used by most businesses in UPYUN, and the overall architecture is as follows.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1632469775377-8303128c-e8a6-4594-a87b-ac6942f4895e.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1632469775377-8303128c-e8a6-4594-a87b-ac6942f4895e.webp, https://static.apiseven.com/202108/1632469775377-8303128c-e8a6-4594-a87b-ac6942f4895e.png" alt="Ingress-Nginx architecture" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1632469775377-8303128c-e8a6-4594-a87b-ac6942f4895e.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1632469775377-8303128c-e8a6-4594-a87b-ac6942f4895e.webp, https://static.apiseven.com/apisix-thumbnail/202108/1632469775377-8303128c-e8a6-4594-a87b-ac6942f4895e.png" alt="Ingress-Nginx architecture" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1632469775377-8303128c-e8a6-4594-a87b-ac6942f4895e.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>The lower layer is data plane OpenResty. The upper Controller listens primarily for resource changes from APIServer and generates <code>nginx.conf</code> configuration file, and then Reload OpenResty. If the POD IP changes, the Upstream Upstream node replacement can be transmitted directly to the OpenResty Lua code via the HTTP interface.</p><p>The extensibility of Ingress-Nginx is achieved mainly through Annotations, and the configuration file itself has simple syntax and routing rules. Lua can be configured on demand, and the extension of the Lua plug in improves Operability of customization.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1632469835090-20c409f6-0416-4b2f-9ad7-4c836638f892.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1632469835090-20c409f6-0416-4b2f-9ad7-4c836638f892.webp, https://static.apiseven.com/202108/1632469835090-20c409f6-0416-4b2f-9ad7-4c836638f892.png" alt="Ingress-Nginx extensibility" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1632469835090-20c409f6-0416-4b2f-9ad7-4c836638f892.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1632469835090-20c409f6-0416-4b2f-9ad7-4c836638f892.webp, https://static.apiseven.com/apisix-thumbnail/202108/1632469835090-20c409f6-0416-4b2f-9ad7-4c836638f892.png" alt="Ingress-Nginx extensibility" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1632469835090-20c409f6-0416-4b2f-9ad7-4c836638f892.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>But Ingress-Nginx has some drawbacks, such as:</p><ul><li>The development of plug-ins depends on complex components, poor portability</li><li>Weak semantic ability</li><li>Any change to Ingress requires Reload, which is unfriendly to long links</li></ul><p>These issues caused some confusion in maintaining the existing logic, so we started looking for alternatives to the relevant container gateways.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="research-phase">Research Phase<a aria-hidden="true" class="hash-link" href="#research-phase" title="Direct link to heading">‚Äã</a></h2><p>In choosing an alternative to Ingress-Nginx, we focused on Traefik and Apache APISIX Ingress.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1632469875567-61dd6fbd-757f-419f-a769-99e6aaf46f0c.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1632469875567-61dd6fbd-757f-419f-a769-99e6aaf46f0c.webp, https://static.apiseven.com/202108/1632469875567-61dd6fbd-757f-419f-a769-99e6aaf46f0c.png" alt="Traefik" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1632469875567-61dd6fbd-757f-419f-a769-99e6aaf46f0c.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1632469875567-61dd6fbd-757f-419f-a769-99e6aaf46f0c.webp, https://static.apiseven.com/apisix-thumbnail/202108/1632469875567-61dd6fbd-757f-419f-a769-99e6aaf46f0c.png" alt="Traefik" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1632469875567-61dd6fbd-757f-419f-a769-99e6aaf46f0c.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>Traefik is cloud-native, with extremely simple configuration files, a distributed configuration, and support for a variety of automated configuration discovery. Not only support K8s, ETCD, Golang eco-language support is better, and the development cost is lower, iteration and testing ability is better. But it falls short at other levels, such as:</p><ul><li>Weak expansibility</li><li>Reload is not supported</li><li>Not as good as Nginx in terms of performance and functionality (though it‚Äôs also less expensive)</li></ul><p>Unlike Nginx, which is rich in plugins and instructions, you can solve a problem by adding an instruction, and you may need to pair an Nginx with Traefik when you deploy online.</p><p>In summary, although Traefik has advantages on operations, we are worried about its drawbacks on extension and operational efficiency concerns, so we did not choose Traefik.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="why-apache-apisix-ingress">Why Apache APISIX Ingress<a aria-hidden="true" class="hash-link" href="#why-apache-apisix-ingress" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="internal-cause">Internal Cause<a aria-hidden="true" class="hash-link" href="#internal-cause" title="Direct link to heading">‚Äã</a></h3><p>Apache APISIX‚Äôs cluster of gateways, which were previously replaced from Kong, is currently hosted in multiple data centers within the company. Later, based on the Apache APISIX plug-in system, we developed some internal plug-in, such as internal permission system check, precision rate limit and so on.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="efficiency-of-maintenance">Efficiency of Maintenance<a aria-hidden="true" class="hash-link" href="#efficiency-of-maintenance" title="Direct link to heading">‚Äã</a></h3><p>We also have some K8s clusters, and the cluster gateway in these containers is using Ingress Nginx. When the plug-in system wasn‚Äôt supported before, we customized some of the plug-ins on Ingress Nginx. So Apache APISIX and Nginx have a lot of overlap in their internal data center and container gateways.</p><p>To avoid subsequent development and maintenance, we want to replace all of the Ingress Nginx container internal gateways with Apache APISIX Ingress to achieve component unification at the gateway level.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="tuning-update-based-on-apache-apisix-ingress">Tuning Update Based on Apache APISIX Ingress<a aria-hidden="true" class="hash-link" href="#tuning-update-based-on-apache-apisix-ingress" title="Direct link to heading">‚Äã</a></h2><p>Currently Apache APISIX Ingress is in the early stages of UPYUN. Because of the rapid iteration of Apache APISIX Ingress, we haven‚Äôt yet applied it to some important businesses, just to try it out in a new cluster.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="restructuring">Restructuring<a aria-hidden="true" class="hash-link" href="#restructuring" title="Direct link to heading">‚Äã</a></h3><p>With Apache APISIX Ingress, the internal architecture looks like this.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1632469909488-3685d104-e458-4145-8ccb-6cecbd383161.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1632469909488-3685d104-e458-4145-8ccb-6cecbd383161.webp, https://static.apiseven.com/202108/1632469909488-3685d104-e458-4145-8ccb-6cecbd383161.png" alt="After using APISIX Ingress architecture" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1632469909488-3685d104-e458-4145-8ccb-6cecbd383161.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1632469909488-3685d104-e458-4145-8ccb-6cecbd383161.webp, https://static.apiseven.com/apisix-thumbnail/202108/1632469909488-3685d104-e458-4145-8ccb-6cecbd383161.png" alt="After using APISIX Ingress architecture" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1632469909488-3685d104-e458-4145-8ccb-6cecbd383161.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>Unlike the aforementioned Ingress-Nginx architecture, the underlying data surface has been replaced with the Apache APISIX cluster. The upper Controller listens for APIServer changes and then distributes the configuration resources through the ETCD to all nodes in the entire Apache APISIX cluster.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1632469956257-b9cb6a91-a082-437c-9395-d62ffb75280f.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1632469956257-b9cb6a91-a082-437c-9395-d62ffb75280f.webp, https://static.apiseven.com/202108/1632469956257-b9cb6a91-a082-437c-9395-d62ffb75280f.png" alt="Profile comparison" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1632469956257-b9cb6a91-a082-437c-9395-d62ffb75280f.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1632469956257-b9cb6a91-a082-437c-9395-d62ffb75280f.webp, https://static.apiseven.com/apisix-thumbnail/202108/1632469956257-b9cb6a91-a082-437c-9395-d62ffb75280f.png" alt="Profile comparison" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1632469956257-b9cb6a91-a082-437c-9395-d62ffb75280f.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>Because Apache APISIX supports dynamic routing changes, it is different from Ingress-Nginx on the right. In Apache APISIX, the same Location is used when traffic enters, and routing is done in Lua Code, which is easy to deploy. And the right Ingress-Nginx compared to its <code>nginx.conf</code> configuration file is complex and requires a Reload for every Ingress change.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="apache-apisix-ingress-controller">Apache APISIX Ingress Controller<a aria-hidden="true" class="hash-link" href="#apache-apisix-ingress-controller" title="Direct link to heading">‚Äã</a></h3><p>Apache APISIX Ingress Controller relies on Apache APISIX‚Äôs dynamic routing capabilities for its functional implementation. It monitors resource changes at APIServer, performs data structure conversion, data validation, and DIFF computation, and finally applies it to the Apache APISIX Admin API.</p><p>Apache APISIX Ingress Controller also has a highly available scheme, implemented directly through the leader-election mechanism of K8s, without the need to introduce additional external components.</p><h4 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="declarative-configuration">Declarative Configuration<a aria-hidden="true" class="hash-link" href="#declarative-configuration" title="Direct link to heading">‚Äã</a></h4><p>Currently Apache APISIX Ingress Controller supports two declarative configurations, Ingress Resource and CRD Resource. The former is more suitable for the replacement of gateway controls from Ingress-Nginx and is the most cost-effective in terms of conversion costs. However, its shortcomings are obvious, such as too weak semantic ability, no specific specifications, and capacity development can only be achieved through annotations.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1632469994485-209d3a21-d761-4b2c-a974-c913b443b0d2.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1632469994485-209d3a21-d761-4b2c-a974-c913b443b0d2.webp, https://static.apiseven.com/202108/1632469994485-209d3a21-d761-4b2c-a974-c913b443b0d2.png" alt="Ingress Resource" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1632469994485-209d3a21-d761-4b2c-a974-c913b443b0d2.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1632469994485-209d3a21-d761-4b2c-a974-c913b443b0d2.webp, https://static.apiseven.com/apisix-thumbnail/202108/1632469994485-209d3a21-d761-4b2c-a974-c913b443b0d2.png" alt="Ingress Resource" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1632469994485-209d3a21-d761-4b2c-a974-c913b443b0d2.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>UPYUN selected the second declarative configuration, the more semantic CRD Resource. Structured data can be configured this way, with the capabilities that Apache APISIX supports.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1632470033850-b619da2f-5926-44ca-95bb-69ee1cdaf209.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1632470033850-b619da2f-5926-44ca-95bb-69ee1cdaf209.webp, https://static.apiseven.com/202108/1632470033850-b619da2f-5926-44ca-95bb-69ee1cdaf209.png" alt="CRD Resource" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1632470033850-b619da2f-5926-44ca-95bb-69ee1cdaf209.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1632470033850-b619da2f-5926-44ca-95bb-69ee1cdaf209.webp, https://static.apiseven.com/apisix-thumbnail/202108/1632470033850-b619da2f-5926-44ca-95bb-69ee1cdaf209.png" alt="CRD Resource" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1632470033850-b619da2f-5926-44ca-95bb-69ee1cdaf209.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>If you want to learn more about Apache APISIX Ingress Controller dry goods, see Apache Apisix PMC Zhang Chao‚Äôs <a href="https://www.bilibili.com/video/BV1eB4y1u7i1?spm_id_from=333.999.0.0" target="_blank" rel="noopener noreferrer">sharing video</a> on Meetup.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="functional-enhancement">Functional Enhancement<a aria-hidden="true" class="hash-link" href="#functional-enhancement" title="Direct link to heading">‚Äã</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="effect-1-log-level-efficiency">Effect 1: Log Level Efficiency<a aria-hidden="true" class="hash-link" href="#effect-1-log-level-efficiency" title="Direct link to heading">‚Äã</a></h4><p>We currently have multiple Apache APISIX clusters in our company, including the data center gateway and the container gateway that all started using Apache APISIX uniformly so that they can be consolidated into a set of logic for subsequent processing/consumption of related logs.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1632470075980-46d13ac7-babb-40a5-b105-73f1105d16e7.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1632470075980-46d13ac7-babb-40a5-b105-73f1105d16e7.webp, https://static.apiseven.com/202108/1632470075980-46d13ac7-babb-40a5-b105-73f1105d16e7.png" alt="Log level" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1632470075980-46d13ac7-babb-40a5-b105-73f1105d16e7.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1632470075980-46d13ac7-babb-40a5-b105-73f1105d16e7.webp, https://static.apiseven.com/apisix-thumbnail/202108/1632470075980-46d13ac7-babb-40a5-b105-73f1105d16e7.png" alt="Log level" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1632470075980-46d13ac7-babb-40a5-b105-73f1105d16e7.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>Of course, Apache APISIX‚Äôs logging plug-in support is also very rich. Internally we use Kafka-Logger, which allows you to customize the log format. Like the other log plug-ins in the figure below, custom formats may not yet be supported due to the number of users, partners with relevant needs are welcome to use and submit PR to extend the current logging plug-in functionality.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1632470099306-ffc74dfb-384b-4014-a0b4-14267dcf7bce.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1632470099306-ffc74dfb-384b-4014-a0b4-14267dcf7bce.webp, https://static.apiseven.com/202108/1632470099306-ffc74dfb-384b-4014-a0b4-14267dcf7bce.png" alt="Plug-in list" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1632470099306-ffc74dfb-384b-4014-a0b4-14267dcf7bce.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1632470099306-ffc74dfb-384b-4014-a0b4-14267dcf7bce.webp, https://static.apiseven.com/apisix-thumbnail/202108/1632470099306-ffc74dfb-384b-4014-a0b4-14267dcf7bce.png" alt="Plug-in list" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1632470099306-ffc74dfb-384b-4014-a0b4-14267dcf7bce.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><h4 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="effect-two-improve-the-monitoring-and-health-check">Effect Two: Improve the Monitoring and Health Check<a aria-hidden="true" class="hash-link" href="#effect-two-improve-the-monitoring-and-health-check" title="Direct link to heading">‚Äã</a></h4><p>At the monitoring level, Apache APISIX also supports Prometheus, SkyWalking, and so on, and we use Prometheus internally.</p><p>Apache APISIX is a basic proxy for the monitoring and request of APP status codes. But Apache APISIX‚Äôs own health checks are not well controlled. What we‚Äôre doing now is deploying a service inside K8s and generating multiple pods, applying that service to Apache APISIX Ingress, and then checking the entire link to see if Apache APISIX is healthy.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1632470120106-3e577e2e-ea43-4f50-8e3c-066b5f1e7238.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1632470120106-3e577e2e-ea43-4f50-8e3c-066b5f1e7238.webp, https://static.apiseven.com/202108/1632470120106-3e577e2e-ea43-4f50-8e3c-066b5f1e7238.png" alt="Health check" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1632470120106-3e577e2e-ea43-4f50-8e3c-066b5f1e7238.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1632470120106-3e577e2e-ea43-4f50-8e3c-066b5f1e7238.webp, https://static.apiseven.com/apisix-thumbnail/202108/1632470120106-3e577e2e-ea43-4f50-8e3c-066b5f1e7238.png" alt="Health check" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1632470120106-3e577e2e-ea43-4f50-8e3c-066b5f1e7238.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="practice-the-solution-using-apache-apisix-ingress">Practice the Solution Using Apache APISIX Ingress<a aria-hidden="true" class="hash-link" href="#practice-the-solution-using-apache-apisix-ingress" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="scenario-1-k8s-application-changes">Scenario 1: K8s Application Changes<a aria-hidden="true" class="hash-link" href="#scenario-1-k8s-application-changes" title="Direct link to heading">‚Äã</a></h3><p>In using K8s with Apache APISIX Ingress, you need to do the following:</p><ul><li>The selection of update strategy suggests using rolling update to ensure that most of the POD is available, but also need to consider the problem of stable load</li><li>We should start K8s internal health check for POD to ensure the business availability of POD and avoid the POD being unable to provide the normal service after the request</li><li>Make most endpoints available on Apache APISIX Upstream</li></ul><p>In practice, we also encounter the problem of transmission delay. The POD update path is shown below, after the POD Ready through the layer-by-layer steps of information transfer, some of the links in the middle may appear delay problems. In some extreme cases, the link time may be increased by a few seconds and the Endpoint update may not be up to date.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1632470165257-cb16e489-b546-4451-917a-6c72648769d8.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1632470165257-cb16e489-b546-4451-917a-6c72648769d8.webp, https://static.apiseven.com/202108/1632470165257-cb16e489-b546-4451-917a-6c72648769d8.png" alt="Link issue" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1632470165257-cb16e489-b546-4451-917a-6c72648769d8.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1632470165257-cb16e489-b546-4451-917a-6c72648769d8.webp, https://static.apiseven.com/apisix-thumbnail/202108/1632470165257-cb16e489-b546-4451-917a-6c72648769d8.png" alt="Link issue" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1632470165257-cb16e489-b546-4451-917a-6c72648769d8.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>The solution in this case is to wait a few seconds after the first batch of POD becomes Ready before continuing with the next batch when the update occurs. The goal is to ensure that most endpoints in the Apache APISIX Upstream are available.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="scenario-2-upstream-health-screening-problem">Scenario 2: Upstream Health Screening Problem<a aria-hidden="true" class="hash-link" href="#scenario-2-upstream-health-screening-problem" title="Direct link to heading">‚Äã</a></h3><p>Due to APIServer‚Äôs state-oriented design, there are also latency issues when synchronizing with Apache APISIX, which can result in ‚Äú502 error status warnings‚Äùduring the update process. Problems like this require a health check at the gateway level for the Upstream Endpoint.</p><p>First of all, an Upstream Endpoint health check is not practical because Endpoint is too time consuming. The monitoring check at the HTTP layer is not suitable for the operation because the status code can not be determined.</p><p>The best way to do this is to do a passive health check based on TCP at the gateway level. If your network connection time out is not reachable, consider the POD as a problem that needs to be degraded. This allows for independent control without touching other parts of the business, as long as you check at the TCP level.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="scenariomtls-connecting-to-etcd">ScenarioÔºömTLS Connecting to ETCD<a aria-hidden="true" class="hash-link" href="#scenariomtls-connecting-to-etcd" title="Direct link to heading">‚Äã</a></h3><p>Because the Apache APISIX cluster uses one-way authentication by default, using Apache APISIX as a container gateway might turn on two-way authentication by default when connecting to the same ETCD cluster with K8s (which uses two-way authentication in K8s ETCD) , this in turn led to the following certificate issues:</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/202108/1632470191228-5c2a3666-8d21-4b19-a5be-e09e7db4d488.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/202108/1632470191228-5c2a3666-8d21-4b19-a5be-e09e7db4d488.webp, https://static.apiseven.com/202108/1632470191228-5c2a3666-8d21-4b19-a5be-e09e7db4d488.png" alt="Certificate issues" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/202108/1632470191228-5c2a3666-8d21-4b19-a5be-e09e7db4d488.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/202108/1632470191228-5c2a3666-8d21-4b19-a5be-e09e7db4d488.webp, https://static.apiseven.com/apisix-thumbnail/202108/1632470191228-5c2a3666-8d21-4b19-a5be-e09e7db4d488.png" alt="Certificate issues" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/202108/1632470191228-5c2a3666-8d21-4b19-a5be-e09e7db4d488.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>Instead of connecting directly to the ETCD via gRPC, Apache APISIX first connects to the gRPC-gateway inside the ETCD via the HTTP protocol, and then to the real gRPC Server. There‚Äôs an extra component in the middle, so there‚Äôs an extra two-way validation.</p><p>A client certificate is required when the gRPC-gateway connects to the gRPC Server. The ETCD does not provide a configuration for this certificate, but uses the Server certificate of the gRPC Server directly. This is equivalent to a certificate being validated both on the client and the server. If your gRPC server server-side certificate has an extension enabled (indicating that the certificate can only be used for server-side validation) , remove the extension, or add an extension that can also be used for client-side validation.</p><p>At the same time, the bottom layer of OpenResty does not support mTLS. When you need to connect to an upstream service or ETCD via mTLS, you need to use apisix-nginx-module to build an OpenResty after patch. Apisix-build-tools can find related build scripts.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="future-expectations">Future Expectations<a aria-hidden="true" class="hash-link" href="#future-expectations" title="Direct link to heading">‚Äã</a></h2><p>While we are currently only using Apache APISIX Ingress in the testing phase, we believe that in the near future, with the application of an iterative feature update and internal architecture migration, apache APISIX Ingress will be applied uniformly to all container gateways to UPYUN.</p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_xD8n"><div class="col"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/blog/tags/case-studies/">Case Studies</a></li></ul></div></footer></article><section class="shareSection_OUzq"><div><button aria-label="linkedin" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#007fb1"></circle><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></svg></button><button aria-label="twitter" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#00aced"></circle><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></svg></button><button aria-label="reddit" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#ff4500"></circle><path d="m 52.8165,31.942362 c 0,-2.4803 -2.0264,-4.4965 -4.5169,-4.4965 -1.2155,0 -2.3171,0.4862 -3.128,1.2682 -3.077,-2.0247 -7.2403,-3.3133 -11.8507,-3.4782 l 2.5211,-7.9373 6.8272,1.5997 -0.0102,0.0986 c 0,2.0281 1.6575,3.6771 3.6958,3.6771 2.0366,0 3.6924,-1.649 3.6924,-3.6771 0,-2.0281 -1.6575,-3.6788 -3.6924,-3.6788 -1.564,0 -2.8968,0.9758 -3.4357,2.3443 l -7.3593,-1.7255 c -0.3213,-0.0782 -0.6477,0.1071 -0.748,0.4233 L 32,25.212062 c -4.8246,0.0578 -9.1953,1.3566 -12.41,3.4425 -0.8058,-0.7446 -1.8751,-1.2104 -3.0583,-1.2104 -2.4905,0 -4.5152,2.0179 -4.5152,4.4982 0,1.649 0.9061,3.0787 2.2389,3.8607 -0.0884,0.4794 -0.1462,0.9639 -0.1462,1.4569 0,6.6487 8.1736,12.0581 18.2223,12.0581 10.0487,0 18.224,-5.4094 18.224,-12.0581 0,-0.4658 -0.0493,-0.9248 -0.1275,-1.377 1.4144,-0.7599 2.3885,-2.2304 2.3885,-3.9406 z m -29.2808,3.0872 c 0,-1.4756 1.207,-2.6775 2.6894,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 -1.4824,0 -2.6894,-1.2002 -2.6894,-2.6758 z m 15.4037,7.9373 c -1.3549,1.3481 -3.4816,2.0043 -6.5008,2.0043 l -0.0221,-0.0051 -0.0221,0.0051 c -3.0209,0 -5.1476,-0.6562 -6.5008,-2.0043 -0.2465,-0.2448 -0.2465,-0.6443 0,-0.8891 0.2465,-0.2465 0.6477,-0.2465 0.8942,0 1.105,1.0999 2.9393,1.6337 5.6066,1.6337 l 0.0221,0.0051 0.0221,-0.0051 c 2.6673,0 4.5016,-0.5355 5.6066,-1.6354 0.2465,-0.2465 0.6477,-0.2448 0.8942,0 0.2465,0.2465 0.2465,0.6443 0,0.8908 z m -0.3213,-5.2615 c -1.4824,0 -2.6877,-1.2002 -2.6877,-2.6758 0,-1.4756 1.2053,-2.6775 2.6877,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 z" fill="white"></path></svg></button></div></section><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2021/09/28/wps-usercase/"><div class="pagination-nav__sublabel sublabel_M5Gs">Newer Post</div><div class="pagination-nav__label">WPS with Apache APISIX to create new API gateway experience</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2021/09/18/xiaodian-usercase/"><div class="pagination-nav__sublabel sublabel_M5Gs">Older Post</div><div class="pagination-nav__label">Apache APISIX helps DIAN to facilitate cloud native solution</div></a></div></nav></div></div></div></div><footer class="container_N-4m"><div class="linksRow_U0oR"><div class="linksCol_R6VE"><div>ASF</div><ul><li class="footer__item"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer"><span></span><span>Foundation</span></a></li><li class="footer__item"><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer"><span></span><span>License</span></a></li><li class="footer__item"><a href="https://www.apache.org/events/" target="_blank" rel="noopener noreferrer"><span></span><span>Events</span></a></li><li class="footer__item"><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer"><span></span><span>Security</span></a></li><li class="footer__item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer"><span></span><span>Sponsorship</span></a></li><li class="footer__item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer"><span></span><span>Thanks</span></a></li></ul></div><div class="linksCol_R6VE"><div>Community</div><ul><li class="footer__item"><a href="https://github.com/apache/apisix/issues" target="_blank" rel="noopener noreferrer"><span></span><span>GitHub</span></a></li><li class="footer__item"><a href="/docs/general/join/"><span></span><span>Slack</span></a></li><li class="footer__item"><a href="https://twitter.com/ApacheAPISIX" target="_blank" rel="noopener noreferrer"><span></span><span>Twitter</span></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCgPD18cMhOg5rmPVnQhAC8g" target="_blank" rel="noopener noreferrer"><span></span><span>YouTube</span></a></li></ul></div><div class="linksCol_R6VE"><div>More</div><ul><li class="footer__item"><a target="_parent" href="/blog/"><span></span><span>Blog</span></a></li><li class="footer__item"><a target="_parent" href="/showcase/"><span></span><span>Showcase</span></a></li><li class="footer__item"><a target="_parent" href="/plugins/"><span></span><span>Plugin Hub</span></a></li><li class="footer__item"><a href="https://github.com/apache/apisix/milestones" target="_parent" rel="noopener noreferrer"><span></span><span>Roadmap</span></a></li></ul></div></div><div class="copyright_Bdi1"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer"><span style="display:inline-block;width:231.25px;height:40px"></span></a><div>Copyright ¬© 2019-2026 The Apache Software Foundation. Apache APISIX, APISIX¬Æ, Apache, the Apache feather logo, and the Apache APISIX project logo are either registered trademarks or trademarks of the Apache Software Foundation.</div></div></footer></div>
<script src="https://apisix-website-static.apiseven.com/assets/js/runtime~main.4bbc9839.js"></script>
<script src="https://apisix-website-static.apiseven.com/assets/js/main.a516b59b.js"></script>
</body>
</html>