<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="ahrefs-site-verification" content="c2f7370ecf46173f4fb25f114e74c97e0a2976d4f02f61c9b00a9d7d34e34698">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache APISIX® -- Cloud-Native API Gateway and AI Gateway RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache APISIX® -- Cloud-Native API Gateway and AI Gateway Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Apache APISIX® -- Cloud-Native API Gateway and AI Gateway" href="/opensearch.xml">
<script type="application/ld+json">{"@context":"https://schema.org","@type":"WebSite","name":"Apache APISIX","url":"https://apisix.apache.org"}</script>
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="24b59d9a-682e-4c3d-9e83-bf2ee85cdc19" data-project-name="APISIX" data-project-color="#E8442E" data-project-logo="https://static.apiseven.com/202202/apache-apisix.png" data-modal-disclaimer="This is a custom LLM for APISIX with access to all developer documentation, GitHub issues and discussions." data-modal-example-questions="How to set up canary release in APISIX?,How to develop a custom APISIX plugin?,How to use custom NGINX configuration in APISIX?,How to configure mTLS between clients and APISIX?,How to only allow a specific APISIX consumer to access special services or routes?" async></script><title data-react-helmet="true">Use Keycloak with API Gateway to secure APIs | Apache APISIX® -- Cloud-Native API Gateway and AI Gateway</title><meta data-react-helmet="true" property="og:url" content="https://apisix.apache.org/blog/2022/07/06/use-keycloak-with-api-gateway-to-secure-apis/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" name="robots" content="index,follow"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" property="og:title" content="Use Keycloak with API Gateway to secure APIs | Apache APISIX® -- Cloud-Native API Gateway and AI Gateway"><meta data-react-helmet="true" name="description" content="This article describes how to secure your API with API Gateway Apache APISIX and Keycloak, and introduces OpenID Connect related concepts and interaction flow."><meta data-react-helmet="true" property="og:description" content="This article describes how to secure your API with API Gateway Apache APISIX and Keycloak, and introduces OpenID Connect related concepts and interaction flow."><meta data-react-helmet="true" name="keywords" content="Apache APISIX,API Gateway,Authentication,OpenID Connect,Keycloak"><meta data-react-helmet="true" property="og:image" content="https://static.apiseven.com/2022/blog/0818/plugins/keycloak.png"><meta data-react-helmet="true" name="twitter:image" content="https://static.apiseven.com/2022/blog/0818/plugins/keycloak.png"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2022-07-06T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://github.com/starsz,https://github.com/juzhiyuan"><meta data-react-helmet="true" property="article:tag" content="Authentication,Plugins"><link data-react-helmet="true" rel="shortcut icon" href="https://static.apiseven.com/202202/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://apisix.apache.org/blog/2022/07/06/use-keycloak-with-api-gateway-to-secure-apis/"><link data-react-helmet="true" rel="alternate" href="https://apisix.apache.org/blog/2022/07/06/use-keycloak-with-api-gateway-to-secure-apis/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://apisix.apache.org/blog/2022/07/06/use-keycloak-with-api-gateway-to-secure-apis/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://38VC84A2WJ-dsn.algolia.net" crossorigin="anonymous"><link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Medium.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Bold.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Light.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-Demi.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://static.apiseven.com/202202/MaisonNeue-ExtraBold.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="https://apisix-website-static.apiseven.com/assets/js/runtime~main.57eaa0fa.js" as="script">
<link rel="preload" href="https://apisix-website-static.apiseven.com/assets/js/main.84c0a2cc.js" as="script">
<link rel="stylesheet" href="https://apisix-website-static.apiseven.com/assets/css/styles.9943cb19.css">
<!-- Matomo from the ASF -->
<script>var _paq=window._paq=window._paq||[];_paq.push(["disableCookies"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var a="https://analytics.apache.org/";_paq.push(["setTrackerUrl",a+"matomo.php"]),_paq.push(["setSiteId","17"]);var e=document,p=e.createElement("script"),t=e.getElementsByTagName("script")[0];p.async=!0,p.src=a+"matomo.js",t.parentNode.insertBefore(p,t)}()</script>
<!-- End Matomo Code -->
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><div class="announcementBar_axC9" style="background-color:#e8433e;color:white" role="banner"><div class="announcementBarPlaceholder_xYHE"></div><div class="announcementBarContent_6uhP">🤔 Introducing APISIX AI Gateway – Built for LLMs and AI workloads. <a target="_blank" rel="noopener noreferrer" href="/ai-gateway/"> Learn More</a></div><button type="button" class="clean-btn close announcementBarClose_A3A1" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_RReh"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a target="_parent" class="navbar__brand" href="/"><img src="/img/logo2.svg" alt="Apache APISIX®" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo2.svg" alt="Apache APISIX®" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Apache APISIX®</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" target="_parent" href="/docs/">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" target="_parent" href="/docs/apisix/getting-started/">Apache APISIX®️</a></li><li><a class="dropdown__link" target="_parent" href="/docs/apisix/next/dashboard/">Apache APISIX®️ Dashboard</a></li><li><a class="dropdown__link" target="_parent" href="/docs/ingress-controller/overview/">Apache APISIX®️ Ingress Controller</a></li><li><a class="dropdown__link" target="_parent" href="/docs/helm-chart/apisix/">Apache APISIX®️ Helm Charts</a></li><li><a class="dropdown__link" target="_parent" href="/docs/docker/build/">Apache APISIX®️ Docker</a></li><li><a class="dropdown__link" target="_parent" href="/docs/java-plugin-runner/development/">Apache APISIX®️ Java Plugin Runner</a></li><li><a class="dropdown__link" target="_parent" href="/docs/go-plugin-runner/getting-started/">Apache APISIX®️ Go Plugin Runner</a></li><li><a class="dropdown__link" target="_parent" href="/docs/python-plugin-runner/getting-started/">Apache APISIX®️ Python Plugin Runner</a></li><li><a class="dropdown__link" target="_parent" href="/docs/general/join/">General</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" target="_parent" href="/blog/">Blog</a><a class="navbar__item navbar__link" target="_parent" href="/blog/tags/case-studies/">Case Studies</a><a class="navbar__item navbar__link" target="_parent" href="/downloads/">Downloads</a><a class="navbar__item navbar__link" target="_parent" href="/help/">Help</a><a class="navbar__item navbar__link" target="_parent" href="/team/">Team</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">Resources</a><ul class="dropdown__menu"><li><a class="dropdown__link" target="_parent" href="/showcase/">Showcase</a></li><li><a class="dropdown__link" target="_parent" href="/docs/general/code-samples/">Code Samples</a></li><li><a class="dropdown__link" target="_parent" href="/plugins/">PluginHub</a></li><li><a class="dropdown__link" target="_parent" href="/docs/general/join/">Community</a></li><li><a class="dropdown__link" target="_parent" href="/docs/general/events/">Events</a></li><li><a href="https://github.com/apache/apisix/milestones" target="_parent" rel="noopener noreferrer" class="dropdown__link">Roadmap</a></li></ul></div><a href="/zh/blog" target="_parent" rel="noopener noreferrer" class="localizedBlogLink_W2zh">中文博客</a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_SGhp"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="sticky-outer-wrapper placeholder_iq-X"><div class="sticky-inner-wrapper" style="position:relative;top:0px;z-index:199"><div class="tagsHeader_HGHP"><a target="_parent" href="/blog/tags/case-studies/">Case Studies</a><a target="_parent" href="/blog/tags/ecosystem/">Ecosystem</a><a target="_parent" href="/blog/tags/authentication/">Authentication</a><a target="_parent" href="/blog/tags/plugins/">Plugins</a><a target="_parent" href="/blog/tags/community/">Community</a><a target="_parent" href="/blog/tags/vulnerabilities/">Vulnerabilities</a></div></div></div><div class="container margin-vert--lg"><div class="row" style="justify-content:center"><div class="col col--9"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_d4p0" itemprop="headline">Use Keycloak with API Gateway to secure APIs</h1><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2022-07-06T00:00:00.000Z" itemprop="datePublished">July 6, 2022</time> · <!-- -->8 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_dGI0"><div class="avatar margin-bottom--sm"><a href="https://github.com/starsz" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_KCbV" src="https://github.com/starsz.png" alt="Xinxin Zhu"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/starsz" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Xinxin Zhu</span></a></div><small class="avatar__subtitle" itemprop="description">Apache APISIX Committer</small></div></div></div><div class="col col--6 authorCol_dGI0"><div class="avatar margin-bottom--sm"><a href="https://github.com/juzhiyuan" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_KCbV" src="https://github.com/juzhiyuan.png" alt="Zhiyuan Ju"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/juzhiyuan" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Zhiyuan Ju</span></a></div><small class="avatar__subtitle" itemprop="description">Apache Member</small></div></div></div></div></header><meta itemprop="image" content="https://static.apiseven.com/2022/blog/0818/plugins/keycloak.png"><div class="markdown" itemprop="articleBody"><section class="shareSection_OUzq"><div><button aria-label="linkedin" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#007fb1"></circle><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></svg></button><button aria-label="twitter" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#00aced"></circle><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></svg></button><button aria-label="reddit" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#ff4500"></circle><path d="m 52.8165,31.942362 c 0,-2.4803 -2.0264,-4.4965 -4.5169,-4.4965 -1.2155,0 -2.3171,0.4862 -3.128,1.2682 -3.077,-2.0247 -7.2403,-3.3133 -11.8507,-3.4782 l 2.5211,-7.9373 6.8272,1.5997 -0.0102,0.0986 c 0,2.0281 1.6575,3.6771 3.6958,3.6771 2.0366,0 3.6924,-1.649 3.6924,-3.6771 0,-2.0281 -1.6575,-3.6788 -3.6924,-3.6788 -1.564,0 -2.8968,0.9758 -3.4357,2.3443 l -7.3593,-1.7255 c -0.3213,-0.0782 -0.6477,0.1071 -0.748,0.4233 L 32,25.212062 c -4.8246,0.0578 -9.1953,1.3566 -12.41,3.4425 -0.8058,-0.7446 -1.8751,-1.2104 -3.0583,-1.2104 -2.4905,0 -4.5152,2.0179 -4.5152,4.4982 0,1.649 0.9061,3.0787 2.2389,3.8607 -0.0884,0.4794 -0.1462,0.9639 -0.1462,1.4569 0,6.6487 8.1736,12.0581 18.2223,12.0581 10.0487,0 18.224,-5.4094 18.224,-12.0581 0,-0.4658 -0.0493,-0.9248 -0.1275,-1.377 1.4144,-0.7599 2.3885,-2.2304 2.3885,-3.9406 z m -29.2808,3.0872 c 0,-1.4756 1.207,-2.6775 2.6894,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 -1.4824,0 -2.6894,-1.2002 -2.6894,-2.6758 z m 15.4037,7.9373 c -1.3549,1.3481 -3.4816,2.0043 -6.5008,2.0043 l -0.0221,-0.0051 -0.0221,0.0051 c -3.0209,0 -5.1476,-0.6562 -6.5008,-2.0043 -0.2465,-0.2448 -0.2465,-0.6443 0,-0.8891 0.2465,-0.2465 0.6477,-0.2465 0.8942,0 1.105,1.0999 2.9393,1.6337 5.6066,1.6337 l 0.0221,0.0051 0.0221,-0.0051 c 2.6673,0 4.5016,-0.5355 5.6066,-1.6354 0.2465,-0.2465 0.6477,-0.2448 0.8942,0 0.2465,0.2465 0.2465,0.6443 0,0.8908 z m -0.3213,-5.2615 c -1.4824,0 -2.6877,-1.2002 -2.6877,-2.6758 0,-1.4756 1.2053,-2.6775 2.6877,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 z" fill="white"></path></svg></button></div></section><blockquote><p>This article describes how Apache APISIX integrates with Keycloak (OpenID Connect Provider) to secure your APIs.</p></blockquote><p>OpenID Connect referred to as OIDC, is an authentication protocol based on the OAuth 2.0. It allows the client to obtain user information from the identity provider (IdP), e.g., Keycloak, Ory, Okta, Auth0, etc. The open-source API Gateway Apache APISIX supports using the <a href="https://apisix.apache.org/docs/apisix/plugins/openid-connect" target="_blank" rel="noopener noreferrer">openid-connect plugin</a> to integrate with the above identity Providers. It will redirect all unauthenticated clients to IdP&#x27;s login page. After the successful authentication, APISIX will pass the user information to the upstream service.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/1.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/1.webp, https://static.apiseven.com/2022/blog/0706/1.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/1.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/1.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/1.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/1.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>Keycloak is an open-source identity and access management. It adds authentication to applications and secures services with minimum effort. Also, it provides user federation, strong authentication, user management, fine-grained authorization, and more. In this post, we will take <a href="https://www.keycloak.org/docs/latest/securing_apps/" target="_blank" rel="noopener noreferrer">Keycloak</a> as an example, and let&#x27;s see how to integrate it with APISIX to protect your services.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="workflow">Workflow<a aria-hidden="true" class="hash-link" href="#workflow" title="Direct link to heading">​</a></h2><p>The following diagram shows the OpenID-Connect protocol interaction flow.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/2.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/2.webp, https://static.apiseven.com/2022/blog/0706/2.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/2.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/2.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/2.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/2.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>In the Redirect stage, Identity Provider redirects users to a pre-configured Redirect URL, similar to <code>http://127.0.0.1:9080/callback</code>. But note: it is a non-existent API that only captures the relevant request and processes the code for Token exchange using OIDC logic. Please do not use this address as a condition to trigger OIDC plugin redirection; otherwise, it will return the error request to the redirect_uri path, but there&#x27;s no session state found.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="terminology">Terminology<a aria-hidden="true" class="hash-link" href="#terminology" title="Direct link to heading">​</a></h2><ol><li>Bearer Only: Keycloak supports username/password or AccessTokens for authentication, and if the bearer_only option is enabled, only AccessTokens are allowed for authentication, which is applicable for access authentication between services.</li><li>Realm: A realm in Keycloak is the equivalent of a tenant; realms are isolated from one another and can only manage and authenticate their users.</li><li>Scope: Client scope is a way to limit the roles that get declared inside an access token. For example, when a client requests that a user be authenticated, the access token they receive back will only contain the role mappings you’ve explicitly specified for the client’s scope. Client scope allows you to limit each individual access token&#x27;s permissions rather than giving the client access to all of the user’s permissions.</li><li>User: Users are entities that can log in to Keycloak. Please think about &quot;Sign in with Google.&quot;</li><li>Client: Clients are services (entities) that want to use Keycloak to protect themselves.</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="prerequisites">Prerequisites<a aria-hidden="true" class="hash-link" href="#prerequisites" title="Direct link to heading">​</a></h2><blockquote><ol><li>This guide will use CentOS 7 and Docker v20.10.17 to install and start Keycloak.</li><li>If you deploy Keycloak and APISIX on your server, please change the following IP (127.0.0.1) to your server&#x27;s IP.</li></ol></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="apache-apisix">Apache APISIX<a aria-hidden="true" class="hash-link" href="#apache-apisix" title="Direct link to heading">​</a></h3><p>Please refer to <a href="https://apisix.apache.org/docs/apisix/getting-started" target="_blank" rel="noopener noreferrer">https://apisix.apache.org/docs/apisix/getting-started</a> to install and start APISIX. After that, you could visit <code>http://127.0.0.1:9080/</code> to access the APISIX instance.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="keycloak">Keycloak<a aria-hidden="true" class="hash-link" href="#keycloak" title="Direct link to heading">​</a></h3><p>Execute the following command to run Keycloak on the server, and we pass admin as Keycloak administrator&#x27;s username and password.</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK shell"><pre tabindex="0" class="prism-code language-shell codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run -d -p </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain">:8080 -e </span><span class="token assign-left variable" style="color:#36acaa">KEYCLOAK_ADMIN</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">admin -e </span><span class="token assign-left variable" style="color:#36acaa">KEYCLOAK_ADMIN_PASSWORD</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">admin quay.io/keycloak/keycloak:18.0.2 start-dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">61a6d6cbfb1f9fe81a6a0dfde7e8ba15e58bf99303697c4e73ab249d005a6678</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><p>Check if the Keycloak container starts successfully.</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK shell"><pre tabindex="0" class="prism-code language-shell codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> -a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CONTAINER ID   IMAGE                              COMMAND                  CREATED          STATUS          PORTS                                                 NAMES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">61a6d6cbfb1f   quay.io/keycloak/keycloak:18.0.2   </span><span class="token string" style="color:#e3116c">&quot;/opt/keycloak/bin/k…&quot;</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">11</span><span class="token plain"> seconds ago   Up </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> seconds   </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0:8080-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">8080</span><span class="token plain">/tcp, :::8080-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">8080</span><span class="token plain">/tcp, </span><span class="token number" style="color:#36acaa">8443</span><span class="token plain">/tcp   heuristic_dirac</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><p>Once started, Keycloak will be available on port <code>8080</code>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="create-a-realm">Create a Realm<a aria-hidden="true" class="hash-link" href="#create-a-realm" title="Direct link to heading">​</a></h4><p>Visit <code>http://127.0.0.1:8080/</code> in your browser to display the following screen, indicating that Keycloak has started successfully.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/3.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/3.webp, https://static.apiseven.com/2022/blog/0706/3.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/3.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/3.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/3.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/3.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>Go to the Administrator Console and log in using admin as the username and password.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/4.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/4.webp, https://static.apiseven.com/2022/blog/0706/4.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/4.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/4.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/4.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/4.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>When you log in for the first time after installation, a Realm named master will be created in the system by default, but it&#x27;s dedicated to managing Keycloak, and we should not use it for our applications, so we need to create a new one.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/5.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/5.webp, https://static.apiseven.com/2022/blog/0706/5.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/5.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/5.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/5.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/5.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>Click Add realm when you mouse over the Master on the left and enter myrealm as the Realm&#x27;s name to create it.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/6.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/6.webp, https://static.apiseven.com/2022/blog/0706/6.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/6.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/6.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/6.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/6.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>After successful creation, you will see that you have switched to myrealm and at the bottom, you have Endpoints -&gt; OpenID Endpoint Configuration at <code>http://127.0.0.1:8080/realms/myrealm/.well-known/openid-configuration</code>.</p><p>This endpoint contains a Discovery file, which will be used later as the address of each node that OIDC needs to use.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/7.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/7.webp, https://static.apiseven.com/2022/blog/0706/7.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/7.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/7.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/7.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/7.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><h4 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="create-a-user">Create a User<a aria-hidden="true" class="hash-link" href="#create-a-user" title="Direct link to heading">​</a></h4><p>A user belongs to one realm, we need to create a user for login authentication. Select <code>Manage -&gt; Users -&gt; Add user</code> and enter myuser as the username, save it, then visit the Users page and select <code>View all users</code>.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/8.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/8.webp, https://static.apiseven.com/2022/blog/0706/8.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/8.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/8.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/8.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/8.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/9.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/9.webp, https://static.apiseven.com/2022/blog/0706/9.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/9.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/9.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/9.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/9.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/10.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/10.webp, https://static.apiseven.com/2022/blog/0706/10.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/10.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/10.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/10.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/10.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>Click on the ID, go to the Credentials tab, and set a new password (this example uses mypassword as the password). Also, set Temporary to OFF to turn off the restriction that you must change your password the first time you log in.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/11.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/11.webp, https://static.apiseven.com/2022/blog/0706/11.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/11.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/11.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/11.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/11.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>Click Set Password to save changes.</p><h4 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="create-a-client">Create a Client<a aria-hidden="true" class="hash-link" href="#create-a-client" title="Direct link to heading">​</a></h4><p>Visit <code>Configure -&gt; Clients -&gt; Create</code> to create a new client and obtain a Client ID and Client Secret, we will use that information in APISIX later.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/12.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/12.webp, https://static.apiseven.com/2022/blog/0706/12.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/12.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/12.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/12.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/12.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>Enter the Client ID and save it. This example uses myclient as the ID.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/13.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/13.webp, https://static.apiseven.com/2022/blog/0706/13.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/13.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/13.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/13.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/13.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>After saving, 2 parameters need to be configured.</p><ol><li>Access Type: default is public, please change it to credential to obtain Client Secret.</li><li>Valid Redirect URIs: When the login is successful, Keycloak will carry the state and code to redirect the client to this address, so set it to a specific callback address for Apache APISIX, for example: <code>http://127.0.0.1:9080/anything/callback</code></li></ol><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/14.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/14.webp, https://static.apiseven.com/2022/blog/0706/14.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/14.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/14.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/14.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/14.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><p>When the settings are complete and saved, the Credentials tab will appear at the top of the page, and please copy the Secret value (Client Secret).</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/15.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/15.webp, https://static.apiseven.com/2022/blog/0706/15.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/15.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/15.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/15.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/15.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="summary">Summary<a aria-hidden="true" class="hash-link" href="#summary" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="apache-apisix-1">Apache APISIX<a aria-hidden="true" class="hash-link" href="#apache-apisix-1" title="Direct link to heading">​</a></h4><p>Service URL: <code>http://127.0.0.1:9080/</code></p><h4 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="keycloak-1">Keycloak<a aria-hidden="true" class="hash-link" href="#keycloak-1" title="Direct link to heading">​</a></h4><ol><li>Service URL: <code>http://127.0.0.1:8080/</code></li><li>Realm: <code>myrealm</code></li><li>Client ID: <code>myclient</code></li><li>Client Secret: <code>e91CKZQwhxyDqpkP0YFUJBxiXJ0ikJhq</code></li><li>Redirect URI: <code>http://127.0.0.1:9080/anything/callback</code></li><li>Discovery: <code>http://127.0.0.1:8080/realms/myrealm/.well-known/openid-configuration</code></li><li>Logout URL: <code>/anything/logout</code></li><li>Bearer Only: <code>false</code></li><li>Username: <code>myuser</code></li><li>Password: <code>mypassword</code></li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="scenarios">Scenarios<a aria-hidden="true" class="hash-link" href="#scenarios" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="note">Note<a aria-hidden="true" class="hash-link" href="#note" title="Direct link to heading">​</a></h3><p>This guide will use a public service httpbin.org/anything as the upstream service, it will return anything passed in request data.</p><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/16.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/16.webp, https://static.apiseven.com/2022/blog/0706/16.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/16.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/16.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/16.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/16.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="case-1-use-usernamepassword-to-protect-service">Case 1: Use username/password to protect service<a aria-hidden="true" class="hash-link" href="#case-1-use-usernamepassword-to-protect-service" title="Direct link to heading">​</a></h3><p>This example will direct the client to the login page to authenticate using a username and password.</p><ol><li>Create an API:</li></ol><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK shell"><pre tabindex="0" class="prism-code language-shell codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -XPUT </span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1:9080/apisix/admin/routes/1 -H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: edd1c9f034335f136f87ad84b625c8f1&quot;</span><span class="token plain"> -d </span><span class="token string" style="color:#e3116c">&#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;uri&quot;:&quot;/anything/*&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;plugins&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;openid-connect&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;client_id&quot;: &quot;myclient&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;client_secret&quot;: &quot;e91CKZQwhxyDqpkP0YFUJBxiXJ0ikJhq&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;discovery&quot;: &quot;http://127.0.0.1:8080/realms/myrealm/.well-known/openid-configuration&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;scope&quot;: &quot;openid profile&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;bearer_only&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;realm&quot;: &quot;myrealm&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;redirect_uri&quot;: &quot;http://127.0.0.1:9080/anything/callback&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;logout_path&quot;: &quot;/anything/logout&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;upstream&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;type&quot;:&quot;roundrobin&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;nodes&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;httpbin.org:80&quot;:1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/17.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/17.webp, https://static.apiseven.com/2022/blog/0706/17.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/17.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/17.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/17.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/17.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><ol start="2"><li>When you visit <code>http://127.0.0.1:9080/anything/test</code> after successful API creation, APISIX will redirect your browser to Keycloak&#x27;s login page because you need to log in.</li></ol><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/18.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/18.webp, https://static.apiseven.com/2022/blog/0706/18.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/18.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/18.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/18.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/18.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><ol start="3"><li>Enter username (myuser) and password (mypassword) to log in, and your browser will redirect to <code>http://127.0.0.1:9080/anything/test</code>.</li></ol><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/19.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/19.webp, https://static.apiseven.com/2022/blog/0706/19.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/19.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/19.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/19.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/19.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><ol start="4"><li>Visit <code>http://127.0.0.1:9080/anything/logout</code> to log out:</li></ol><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/20.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/20.webp, https://static.apiseven.com/2022/blog/0706/20.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/20.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/20.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/20.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/20.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="case-2-use-accesstoken-to-authenticate">Case 2: Use AccessToken to authenticate<a aria-hidden="true" class="hash-link" href="#case-2-use-accesstoken-to-authenticate" title="Direct link to heading">​</a></h3><p>By enabling the bearer_only parameter to authenticate calls between services, the service must carry the Authorization Header when accessing APISIX. Otherwise, APISIX will reject the request.</p><ol><li>Create an API:</li></ol><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK shell"><pre tabindex="0" class="prism-code language-shell codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -XPUT </span><span class="token number" style="color:#36acaa">127.0</span><span class="token plain">.0.1:9080/apisix/admin/routes/1 -H </span><span class="token string" style="color:#e3116c">&quot;X-API-KEY: edd1c9f034335f136f87ad84b625c8f1&quot;</span><span class="token plain"> -d </span><span class="token string" style="color:#e3116c">&#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;uri&quot;:&quot;/anything/*&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;plugins&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;openid-connect&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;client_id&quot;: &quot;myclient&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;client_secret&quot;: &quot;e91CKZQwhxyDqpkP0YFUJBxiXJ0ikJhq&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;discovery&quot;: &quot;http://127.0.0.1:8080/realms/myrealm/.well-known/openid-configuration&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;scope&quot;: &quot;openid profile&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;bearer_only&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;realm&quot;: &quot;myrealm&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;redirect_uri&quot;: &quot;http://127.0.0.1:9080/anything/callback&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;logout_path&quot;: &quot;/anything/logout&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;upstream&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;type&quot;:&quot;roundrobin&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;nodes&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;httpbin.org:80&quot;:1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/21.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/21.webp, https://static.apiseven.com/2022/blog/0706/21.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/21.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/21.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/21.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/21.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><ol start="2"><li>Accessing Apache APISIX without an <code>X-Access-Token</code> will return 401 indicating unauthorized.</li></ol><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/22.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/22.webp, https://static.apiseven.com/2022/blog/0706/22.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/22.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/22.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/22.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/22.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><ol start="3"><li>Call the Keycloak API to obtain the AccessToken.</li></ol><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK shell"><pre tabindex="0" class="prism-code language-shell codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -XPOST </span><span class="token string" style="color:#e3116c">&quot;http://127.0.0.1:8080/realms/myrealm/protocol/openid-connect/token&quot;</span><span class="token plain"> -d </span><span class="token string" style="color:#e3116c">&quot;grant_type=password&amp;username=myuser&amp;client_id=myclient&amp;client_secret=e91CKZQwhxyDqpkP0YFUJBxiXJ0ikJhq&amp;password=mypassword&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/23.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/23.webp, https://static.apiseven.com/2022/blog/0706/23.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/23.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/23.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/23.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/23.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><ol start="4"><li>Place the <code>AccessToken</code> in the Authorization header (replace <code>${AccessToken}</code>) to request APISIX, and you can authenticate successfully.</li></ol><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK shell"><pre tabindex="0" class="prism-code language-shell codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://127.0.0.1:9080/anything/test -H </span><span class="token string" style="color:#e3116c">&quot;Authorization: Bearer </span><span class="token string variable" style="color:#36acaa">${AccessToken}</span><span class="token string" style="color:#e3116c">&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><p></p><div type="image/webp" placeholdersrc="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/24.webp" class="rc-image"><img loading="lazy" srcset="https://static.apiseven.com/apisix-webp/2022/blog/0706/24.webp, https://static.apiseven.com/2022/blog/0706/24.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-webp/2022/blog/0706/24.webp"><div aria-hidden="true" class="rc-image-placeholder"><div class="rc-image"><img srcset="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/24.webp, https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/24.png" alt="screenshot" class="rc-image-img" src="https://static.apiseven.com/apisix-thumbnail/2022/blog/0706/24.webp"></div></div><div class="rc-image-mask">Click to Preview</div></div><p></p><h3 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="case-3-parse-userinfo-on-upstream-service">Case 3: Parse UserInfo on upstream service<a aria-hidden="true" class="hash-link" href="#case-3-parse-userinfo-on-upstream-service" title="Direct link to heading">​</a></h3><p>When APISIX&#x27;s <code>set_userinfo_header</code> is enabled, the callback request after successful authentication will carry the <code>X-Userinfo</code> request header, which contains basic information about the User and can be used to obtain the user content via base64_decode.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="faq">FAQ<a aria-hidden="true" class="hash-link" href="#faq" title="Direct link to heading">​</a></h2><ol><li><strong>Why is the cookie value very big in APISIX?</strong></li></ol><p>Because APISIX writes <code>id_token</code>, <code>access_token</code>, and <code>refresh_token</code> into the cookie, the entire cookie content is quite big. For detailed implementation, read the logic for <a href="https://github.com/zmartzone/lua-resty-openidc/blob/b07330120ffe54dd3fbeac247726b76d0f9dc793/lib/resty/openidc.lua#L1179-L1188" target="_blank" rel="noopener noreferrer">setting up a session</a> in the <code>lua-resty-openidc</code> library.</p><ol start="2"><li><strong>How to change the name and location of the cookie stored in the Session?</strong></li></ol><p>Currently, the openid-connect plugin does not provide the ability to customize this part of the configuration, so we can use the method provided in <code>lua-resty-session</code>: override its default configuration by NGINX variables.
We rely on the NGINX configuration injection capabilities provided by APISIX to achieve the override: the name of the Session storage cookie can be modified by adding this code to the configuration file {apisix}/conf/config.yaml.</p><div class="codeBlockContainer_5tM7"><div class="codeBlockContent_VFOK yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_sqlf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Aq39"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">nginx_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">http_server_configuration_snippet</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    set $session_name &quot;session_override&quot;;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_gLFX clean-btn">Copy</button></div></div><p>For more information please visit:</p><ol><li><a href="https://github.com/bungle/lua-resty-session/blob/master/lib/resty/session.lua#L348-L380" target="_blank" rel="noopener noreferrer">lua-resty-session Init phase</a></li><li><a href="https://github.com/bungle/lua-resty-session#pluggable-storage-adapters" target="_blank" rel="noopener noreferrer">lua-resty-session Pluggable Storage Adapters</a></li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="reference">Reference<a aria-hidden="true" class="hash-link" href="#reference" title="Direct link to heading">​</a></h2><ol><li><a href="https://apisix.apache.org/zh/blog/2021/12/10/integrate-keycloak-auth-in-apisix/" target="_blank" rel="noopener noreferrer">Integrate Keycloak with APISIX</a></li><li><a href="https://www.keycloak.org/getting-started/getting-started-docker" target="_blank" rel="noopener noreferrer">Keycloak Getting Started</a></li><li><a href="https://stackoverflow.com/questions/56561554/keycloak-realm-vs-keycloak-client" target="_blank" rel="noopener noreferrer">Keycloak Realm vs Client</a></li><li><a href="https://stackoverflow.com/questions/49107701/keycloak-client-vs-user" target="_blank" rel="noopener noreferrer">Keycloak Client vs User</a></li><li><a href="https://wjw465150.gitbooks.io/keycloak-documentation/content/server_admin/topics/roles/client-scope.html" target="_blank" rel="noopener noreferrer">What is Client Scope?</a></li></ol></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_xD8n"><div class="col"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/blog/tags/authentication/">Authentication</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/blog/tags/plugins/">Plugins</a></li></ul></div></footer></article><section class="shareSection_OUzq"><div><button aria-label="linkedin" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#007fb1"></circle><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></svg></button><button aria-label="twitter" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#00aced"></circle><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></svg></button><button aria-label="reddit" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#ff4500"></circle><path d="m 52.8165,31.942362 c 0,-2.4803 -2.0264,-4.4965 -4.5169,-4.4965 -1.2155,0 -2.3171,0.4862 -3.128,1.2682 -3.077,-2.0247 -7.2403,-3.3133 -11.8507,-3.4782 l 2.5211,-7.9373 6.8272,1.5997 -0.0102,0.0986 c 0,2.0281 1.6575,3.6771 3.6958,3.6771 2.0366,0 3.6924,-1.649 3.6924,-3.6771 0,-2.0281 -1.6575,-3.6788 -3.6924,-3.6788 -1.564,0 -2.8968,0.9758 -3.4357,2.3443 l -7.3593,-1.7255 c -0.3213,-0.0782 -0.6477,0.1071 -0.748,0.4233 L 32,25.212062 c -4.8246,0.0578 -9.1953,1.3566 -12.41,3.4425 -0.8058,-0.7446 -1.8751,-1.2104 -3.0583,-1.2104 -2.4905,0 -4.5152,2.0179 -4.5152,4.4982 0,1.649 0.9061,3.0787 2.2389,3.8607 -0.0884,0.4794 -0.1462,0.9639 -0.1462,1.4569 0,6.6487 8.1736,12.0581 18.2223,12.0581 10.0487,0 18.224,-5.4094 18.224,-12.0581 0,-0.4658 -0.0493,-0.9248 -0.1275,-1.377 1.4144,-0.7599 2.3885,-2.2304 2.3885,-3.9406 z m -29.2808,3.0872 c 0,-1.4756 1.207,-2.6775 2.6894,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 -1.4824,0 -2.6894,-1.2002 -2.6894,-2.6758 z m 15.4037,7.9373 c -1.3549,1.3481 -3.4816,2.0043 -6.5008,2.0043 l -0.0221,-0.0051 -0.0221,0.0051 c -3.0209,0 -5.1476,-0.6562 -6.5008,-2.0043 -0.2465,-0.2448 -0.2465,-0.6443 0,-0.8891 0.2465,-0.2465 0.6477,-0.2465 0.8942,0 1.105,1.0999 2.9393,1.6337 5.6066,1.6337 l 0.0221,0.0051 0.0221,-0.0051 c 2.6673,0 4.5016,-0.5355 5.6066,-1.6354 0.2465,-0.2465 0.6477,-0.2448 0.8942,0 0.2465,0.2465 0.2465,0.6443 0,0.8908 z m -0.3213,-5.2615 c -1.4824,0 -2.6877,-1.2002 -2.6877,-2.6758 0,-1.4756 1.2053,-2.6775 2.6877,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 z" fill="white"></path></svg></button></div></section><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2022/07/07/weekly-report-0630/"><div class="pagination-nav__sublabel sublabel_M5Gs">Newer Post</div><div class="pagination-nav__label">Biweekly Report (Jun 16 - Jun 30)</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2022/07/05/use-dataant-to-monitor-apisix/"><div class="pagination-nav__sublabel sublabel_M5Gs">Older Post</div><div class="pagination-nav__label">How to monitor Apache APISIX with DataAnt</div></a></div></nav></div></div></div></div><footer class="container_N-4m"><div class="linksRow_U0oR"><div class="linksCol_R6VE"><div>ASF</div><ul><li class="footer__item"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer"><span></span><span>Foundation</span></a></li><li class="footer__item"><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer"><span></span><span>License</span></a></li><li class="footer__item"><a href="https://www.apache.org/events/" target="_blank" rel="noopener noreferrer"><span></span><span>Events</span></a></li><li class="footer__item"><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer"><span></span><span>Security</span></a></li><li class="footer__item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer"><span></span><span>Sponsorship</span></a></li><li class="footer__item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer"><span></span><span>Thanks</span></a></li></ul></div><div class="linksCol_R6VE"><div>Community</div><ul><li class="footer__item"><a href="https://github.com/apache/apisix/issues" target="_blank" rel="noopener noreferrer"><span></span><span>GitHub</span></a></li><li class="footer__item"><a href="/docs/general/join/"><span></span><span>Slack</span></a></li><li class="footer__item"><a href="https://twitter.com/ApacheAPISIX" target="_blank" rel="noopener noreferrer"><span></span><span>Twitter</span></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCgPD18cMhOg5rmPVnQhAC8g" target="_blank" rel="noopener noreferrer"><span></span><span>YouTube</span></a></li></ul></div><div class="linksCol_R6VE"><div>More</div><ul><li class="footer__item"><a target="_parent" href="/blog/"><span></span><span>Blog</span></a></li><li class="footer__item"><a target="_parent" href="/showcase/"><span></span><span>Showcase</span></a></li><li class="footer__item"><a target="_parent" href="/plugins/"><span></span><span>Plugin Hub</span></a></li><li class="footer__item"><a href="https://github.com/apache/apisix/milestones" target="_parent" rel="noopener noreferrer"><span></span><span>Roadmap</span></a></li></ul></div></div><div class="copyright_Bdi1"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer"><span style="display:inline-block;width:231.25px;height:40px"></span></a><div>Copyright © 2019-2025 The Apache Software Foundation. Apache APISIX, APISIX®, Apache, the Apache feather logo, and the Apache APISIX project logo are either registered trademarks or trademarks of the Apache Software Foundation.</div></div></footer></div>
<script src="https://apisix-website-static.apiseven.com/assets/js/runtime~main.57eaa0fa.js"></script>
<script src="https://apisix-website-static.apiseven.com/assets/js/main.84c0a2cc.js"></script>
</body>
</html>