"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[74481],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>f});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),u=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},p=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=u(r),f=a,h=d["".concat(l,".").concat(f)]||d[f]||c[f]||o;return r?n.createElement(h,s(s({ref:t},p),{},{components:r})):n.createElement(h,s({ref:t},p))}));function f(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,s=new Array(o);s[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:a,s[1]=i;for(var u=2;u<o;u++)s[u]=r[u];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},26144:(e,t,r)=>{r.r(t),r.d(t,{contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var n=r(87462),a=(r(67294),r(3905));const o={title:"Status API"},s=void 0,i={unversionedId:"status-api",id:"version-3.15/status-api",isDocsHomePage:!1,title:"Status API",description:"In Apache APISIX, the status API is used to:",source:"@site/docs-apisix_versioned_docs/version-3.15/status-api.md",sourceDirName:".",slug:"/status-api",permalink:"/docs/apisix/status-api",editUrl:"/edit#https://github.com/apache/apisix/edit/release/3.15/docs/en/latest/status-api.md",tags:[],version:"3.15",frontMatter:{title:"Status API"},sidebar:"version-3.15/docs",previous:{title:"Control API",permalink:"/docs/apisix/control-api"},next:{title:"Apache APISIX Dashboard",permalink:"/docs/apisix/dashboard"}},l=[{value:"GET /status",id:"get-status",children:[]},{value:"GET /status/ready",id:"get-statusready",children:[]}],u={toc:l};function p(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"In Apache APISIX, the status API is used to:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Check if APISIX has successfully started and running correctly."),(0,a.kt)("li",{parentName:"ul"},"Check if all of the workers have received and loaded the configuration.")),(0,a.kt)("p",null,"To change the default endpoint (",(0,a.kt)("inlineCode",{parentName:"p"},"127.0.0.1:7085"),") of the Status API server, change the ",(0,a.kt)("inlineCode",{parentName:"p"},"ip")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"port")," in the ",(0,a.kt)("inlineCode",{parentName:"p"},"status")," section in your configuration file (",(0,a.kt)("inlineCode",{parentName:"p"},"conf/config.yaml"),"):"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'apisix:\n  status:\n    ip: "127.0.0.1"\n    port: 7085\n')),(0,a.kt)("p",null,"This API can be used to perform readiness probes on APISIX before APISIX starts receiving user requests."),(0,a.kt)("h3",{id:"get-status"},"GET /status"),(0,a.kt)("p",null,"Returns a JSON reporting the status of APISIX workers. If APISIX is not running, the request will error out while establishing TCP connection. Otherwise this endpoint will always return ok if request reaches a running worker."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "status": "ok"\n}\n')),(0,a.kt)("h3",{id:"get-statusready"},"GET /status/ready"),(0,a.kt)("p",null,"Returns ",(0,a.kt)("inlineCode",{parentName:"p"},"ok")," when all workers have loaded the configuration, otherwise returns the specific error with ",(0,a.kt)("inlineCode",{parentName:"p"},"503")," error code. Below are specific examples."),(0,a.kt)("p",null,"When all workers have loaded the configuration:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "status": "ok"\n}\n')),(0,a.kt)("p",null,"When 1 workers has't been initialised:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "status": "error",\n  "error": "worker count: 16 but status report count: 15"\n}\n')),(0,a.kt)("p",null,"When a particular worker hasn't loaded the configuration:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "error": "worker id: 9 has not received configuration",\n  "status": "error"\n}\n')))}p.isMDXComponent=!0}}]);