"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[7697],{35318:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var a=n(27378);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),s=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),d=s(n),h=i,m=d["".concat(l,".").concat(h)]||d[h]||c[h]||r;return n?a.createElement(m,o(o({ref:t},u),{},{components:n})):a.createElement(m,o({ref:t},u))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=d;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:i,o[1]=p;for(var s=2;s<r;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},70413:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>r,metadata:()=>p,toc:()=>s});var a=n(25773),i=(n(27378),n(35318));const r={title:"Release Apache APISIX 3.11.0",authors:[{name:"Abhishek Choudhary",title:"Author",url:"https://github.com/shreemaan-abhishek",image_url:"https://github.com/shreemaan-abhishek.png"},{name:"Traky Deng",title:"Technical Writer",url:"https://github.com/kayx23",image_url:"https://github.com/kayx23.png"}],keywords:["Apache APISIX","API Gateway","API Management Platform","New Release","Cloud Native"],description:"The Apache APISIX 3.11.0 version is released on October 17, 2024. This release includes a few changes, new features, bug fixes, and other improvements to user experiences.",tags:["Community"]},o=void 0,p={permalink:"/blog/2024/10/17/release-apache-apisix-3.11.0",source:"@site/blog/2024/10/17/release-apache-apisix-3.11.0.md",title:"Release Apache APISIX 3.11.0",description:"The Apache APISIX 3.11.0 version is released on October 17, 2024. This release includes a few changes, new features, bug fixes, and other improvements to user experiences.",date:"2024-10-17T00:00:00.000Z",formattedDate:"October 17, 2024",tags:[{label:"Community",permalink:"/blog/tags/community"}],readingTime:3.505,truncated:!0,authors:[{name:"Abhishek Choudhary",title:"Author",url:"https://github.com/shreemaan-abhishek",image_url:"https://github.com/shreemaan-abhishek.png",imageURL:"https://github.com/shreemaan-abhishek.png"},{name:"Traky Deng",title:"Technical Writer",url:"https://github.com/kayx23",image_url:"https://github.com/kayx23.png",imageURL:"https://github.com/kayx23.png"}],prevItem:{title:"Announcing Integration between Apache APISIX and open-appsec WAF",permalink:"/blog/2024/10/22/apisix-integrates-with-open-appsec"},nextItem:{title:"Monthly Report (September 01 - September 30)",permalink:"/blog/2024/09/30/monthly-report"}},l={authorsImageUrls:[void 0,void 0]},s=[{value:"Breaking Changes",id:"breaking-changes",children:[{value:"Remove JWT signing endpoint and private key configuration",id:"remove-jwt-signing-endpoint-and-private-key-configuration",children:[],level:3},{value:"Refactor <code>hmac-auth</code> plugin per RFC",id:"refactor-hmac-auth-plugin-per-rfc",children:[],level:3}],level:2},{value:"New Features",id:"new-features",children:[{value:"Add Consumer credentials resource and introduce consumer identifiable headers",id:"add-consumer-credentials-resource-and-introduce-consumer-identifiable-headers",children:[],level:3},{value:"Add new plugin <code>attach-consmer-label</code>",id:"add-new-plugin-attach-consmer-label",children:[],level:3},{value:"Add new plugin <code>ai-proxy</code>",id:"add-new-plugin-ai-proxy",children:[],level:3},{value:"Add new plugin <code>ai-prompt-decorator</code>",id:"add-new-plugin-ai-prompt-decorator",children:[],level:3},{value:"Add new plugin <code>ai-prompt-template</code>",id:"add-new-plugin-ai-prompt-template",children:[],level:3},{value:"Support customizing keepalive timeout in <code>splunk-logger</code> plugin",id:"support-customizing-keepalive-timeout-in-splunk-logger-plugin",children:[],level:3},{value:"Support AWS and GCP secret managers",id:"support-aws-and-gcp-secret-managers",children:[],level:3}],level:2},{value:"Other Updates",id:"other-updates",children:[],level:2},{value:"Changelog",id:"changelog",children:[],level:2}],u={toc:s};function c(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"We are glad to present Apache APISIX 3.11.0 with exciting new features, bug fixes, and other improvements to user experiences."),(0,i.kt)("p",null,"This new release adds a number of new features, including the addition of AI plugins to integrate with LLM providers, the support for AWS and GCP Secret Managers for secret management, and more."),(0,i.kt)("p",null,"There are a few breaking changes included in this release. Should you find these changes impacting your operations, please plan accordingly for a seamless upgrade."),(0,i.kt)("h2",{id:"breaking-changes"},"Breaking Changes"),(0,i.kt)("h3",{id:"remove-jwt-signing-endpoint-and-private-key-configuration"},"Remove JWT signing endpoint and private key configuration"),(0,i.kt)("p",null,"Remove the ",(0,i.kt)("inlineCode",{parentName:"p"},"/apisix/plugin/jwt/sign")," JWT signing endpoint previously added by the ",(0,i.kt)("inlineCode",{parentName:"p"},"jwt-auth")," plugin for enhanced security. The plugin now does not require users to upload private keys for issuing JWTs. Please sign JWT with other utilities."),(0,i.kt)("p",null,"For more details, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/11597"},"PR #11597"),"."),(0,i.kt)("h3",{id:"refactor-hmac-auth-plugin-per-rfc"},"Refactor ",(0,i.kt)("inlineCode",{parentName:"h3"},"hmac-auth")," plugin per RFC"),(0,i.kt)("p",null,"The plugin implementation is now based on ",(0,i.kt)("a",{parentName:"p",href:"https://www.ietf.org/archive/id/draft-cavage-http-signatures-12.txt"},"draft-cavage-http-signatures")," and the configurable parameters have changed."),(0,i.kt)("p",null,"For more details, see the latest ",(0,i.kt)("a",{parentName:"p",href:"https://apisix.apache.org/docs/apisix/plugins/hmac-auth/"},"plugin doc")," and ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/11581"},"PR #11581")),(0,i.kt)("h2",{id:"new-features"},"New Features"),(0,i.kt)("h3",{id:"add-consumer-credentials-resource-and-introduce-consumer-identifiable-headers"},"Add Consumer credentials resource and introduce consumer identifiable headers"),(0,i.kt)("p",null,"Add the credential resource to store authentication configurations associated with consumers. A consumer can be associated with one or more credentials from a designated list of authentication plugins, including ",(0,i.kt)("inlineCode",{parentName:"p"},"key-auth"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"basic-auth"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"jwt-auth"),", and ",(0,i.kt)("inlineCode",{parentName:"p"},"hmac-auth"),". The decoupling of credentials facilitates credential reuse and rotation as well as enhanced security."),(0,i.kt)("p",null,"For instance, suppose you have a consumer ",(0,i.kt)("inlineCode",{parentName:"p"},"tom"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'curl -i "http://127.0.0.1:9180/apisix/admin/consumers" -X PUT \\\n  -H "X-API-KEY: ${ADMIN_API_KEY}" \\\n  -d \'{\n    "username": "tom"\n  }\'\n')),(0,i.kt)("p",null,"To configure the consumer ",(0,i.kt)("inlineCode",{parentName:"p"},"key-auth")," credential for ",(0,i.kt)("inlineCode",{parentName:"p"},"tom"),", you can use the credential object:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'curl "http://127.0.0.1:9180/apisix/admin/consumers/tom/credentials" -X PUT \\\n  -H "X-API-KEY: ${ADMIN_API_KEY}" \\\n  -d \'{\n    "id": "cred-tom-key-auth",\n    "plugins": {\n      "key-auth": {\n        "key": "secret-key"\n      }\n    }\n  }\'\n')),(0,i.kt)("p",null,"This feature does not introduce any breaking change. You may still configure the authentication plugin and their credential on consumer."),(0,i.kt)("p",null,"Additionally, APISIX will add additional headers, including ",(0,i.kt)("inlineCode",{parentName:"p"},"X-Consumer-Username"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"X-Credential-Identifier"),", and optionally, ",(0,i.kt)("inlineCode",{parentName:"p"},"X-Consumer-Custom-ID")," if configured, to the authenticated requests."),(0,i.kt)("p",null,"For more information, see the ",(0,i.kt)("a",{parentName:"p",href:"https://apisix.apache.org/docs/apisix/next/terminology/credential/"},"credential doc")," and ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/11601"},"PR #11601"),"."),(0,i.kt)("h3",{id:"add-new-plugin-attach-consmer-label"},"Add new plugin ",(0,i.kt)("inlineCode",{parentName:"h3"},"attach-consmer-label")),(0,i.kt)("p",null,"The new ",(0,i.kt)("inlineCode",{parentName:"p"},"attach-consumer-label")," plugin attaches custom consumer-related labels, in addition to ",(0,i.kt)("inlineCode",{parentName:"p"},"X-Consumer-Username")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"X-Credential-Indentifier"),", to authenticated requests, for upstream services to differentiate between consumers and implement additional logics."),(0,i.kt)("p",null,"For more information, see the ",(0,i.kt)("a",{parentName:"p",href:"https://apisix.apache.org/docs/apisix/next/plugins/attach-consumer-label/"},"plugin doc")," and ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/11604"},"PR #11604"),"."),(0,i.kt)("h3",{id:"add-new-plugin-ai-proxy"},"Add new plugin ",(0,i.kt)("inlineCode",{parentName:"h3"},"ai-proxy")),(0,i.kt)("p",null,"The new ",(0,i.kt)("inlineCode",{parentName:"p"},"ai-proxy")," plugin simplifies access to LLM providers and models by transforming plugin configurations into the designated request format."),(0,i.kt)("p",null,"The plugin currently only supports transforming plugin configurations to the request format required by OpenAI and contributions are welcomed."),(0,i.kt)("p",null,"For more information, see the ",(0,i.kt)("a",{parentName:"p",href:"https://apisix.apache.org/docs/apisix/next/plugins/ai-proxy/"},"plugin doc")," and ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/11604"},"PR #11499"),"."),(0,i.kt)("h3",{id:"add-new-plugin-ai-prompt-decorator"},"Add new plugin ",(0,i.kt)("inlineCode",{parentName:"h3"},"ai-prompt-decorator")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"ai-prompt-template"),' plugin supports the pre-configurations of prompt templates that only accept user inputs in designated template variables, in a "fill in the blank" fashion. The plugin is used when proxying to LLM services.'),(0,i.kt)("p",null,"For more information, see the ",(0,i.kt)("a",{parentName:"p",href:"https://apisix.apache.org/docs/apisix/next/plugins/ai-prompt-decorator/"},"plugin doc")," and ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/11515"},"PR #11515"),"."),(0,i.kt)("h3",{id:"add-new-plugin-ai-prompt-template"},"Add new plugin ",(0,i.kt)("inlineCode",{parentName:"h3"},"ai-prompt-template")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"ai-prompt-decorator")," plugin decorates user input prompts by prefixing and appending pre-engineered prompts, to provide pre-set contexts in content generation. The practice helps shape how the model should operate within desired guidelines during the interactions. The plugin is used when proxying to LLM services."),(0,i.kt)("p",null,"For more information, see the ",(0,i.kt)("a",{parentName:"p",href:"https://apisix.apache.org/docs/apisix/next/plugins/ai-prompt-template/"},"plugin doc")," and ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/11517"},"PR #11517"),"."),(0,i.kt)("h3",{id:"support-customizing-keepalive-timeout-in-splunk-logger-plugin"},"Support customizing keepalive timeout in ",(0,i.kt)("inlineCode",{parentName:"h3"},"splunk-logger")," plugin"),(0,i.kt)("p",null,"Support the configuration of keepalive timeout in ",(0,i.kt)("inlineCode",{parentName:"p"},"splunk-logger")," plugin parameter to avoid sockets left open in high scale. If unconfigured, the default keepalive timeout will be 60000 milliseconds."),(0,i.kt)("p",null,"For more information, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/11611"},"PR #11611"),"."),(0,i.kt)("h3",{id:"support-aws-and-gcp-secret-managers"},"Support AWS and GCP secret managers"),(0,i.kt)("p",null,"Support the integration with ",(0,i.kt)("a",{parentName:"p",href:"https://aws.amazon.com/secrets-manager/"},"AWS Secrets Manager")," and ",(0,i.kt)("a",{parentName:"p",href:"https://cloud.google.com/security/products/secret-manager?hl=en"},"GCP Secret Manager")," for secrets management."),(0,i.kt)("p",null,"For more information on the support for AWS Secrets Manager, see ",(0,i.kt)("a",{parentName:"p",href:"https://apisix.apache.org/docs/apisix/next/terminology/secret/#use-aws-secrets-manager-to-manage-secrets"},"use AWS Secrets Manager to manage secrets")," and ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/11417"},"PR #11417"),"."),(0,i.kt)("p",null,"For more information on the support for GCP Secret Manager, see ",(0,i.kt)("a",{parentName:"p",href:"https://apisix.apache.org/docs/apisix/next/terminology/secret/#use-gcp-secrets-manager-to-manage-secrets"},"use GCP Secret Manager to manage secrets")," and ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/11436"},"PR #11436"),"."),(0,i.kt)("h2",{id:"other-updates"},"Other Updates"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Correct the position of enums in ",(0,i.kt)("inlineCode",{parentName:"li"},"pb_option_def")," of the ",(0,i.kt)("inlineCode",{parentName:"li"},"grpc-transcode")," plugin (",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/apisix/pull/11448"},"PR #11448"),")"),(0,i.kt)("li",{parentName:"ul"},"Fix encryption/decryption errors when non-auth plugins are configured on consumers (",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/apisix/pull/11600"},"PR #11600"),")"),(0,i.kt)("li",{parentName:"ul"},"Fix issues when substituting environment variables in config file (",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/apisix/pull/11545"},"PR #11545"),")")),(0,i.kt)("h2",{id:"changelog"},"Changelog"),(0,i.kt)("p",null,"For a complete list of changes in this release, please see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/blob/master/CHANGELOG.md#3110"},"CHANGELOG"),"."))}c.isMDXComponent=!0}}]);