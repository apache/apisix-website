"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[61475],{35318:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var i=n(27378);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=i.createContext({}),s=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=s(e.components);return i.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},h=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),h=s(n),m=r,d=h["".concat(l,".").concat(m)]||h[m]||c[m]||a;return n?i.createElement(d,o(o({ref:t},u),{},{components:n})):i.createElement(d,o({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,o=new Array(a);o[0]=h;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:r,o[1]=p;for(var s=2;s<a;s++)o[s]=n[s];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}h.displayName="MDXCreateElement"},88692:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>a,metadata:()=>p,toc:()=>s});var i=n(25773),r=(n(27378),n(35318));const a={title:"Release Apache APISIX 3.8.0",authors:[{name:"Xin Rong",title:"Author",url:"https://github.com/AlinsRan",image_url:"https://github.com/AlinsRan.png"},{name:"Traky Deng",title:"Technical Writer",url:"https://github.com/kayx23",image_url:"https://github.com/kayx23.png"}],keywords:["Apache APISIX","API Gateway","API Management Platform","New Release","Cloud Native"],description:"The Apache APISIX 3.8.0 version is released on January 15, 2024. This release includes a few new features, bug fixes, and other improvements to user experiences.",tags:["Community"]},o=void 0,p={permalink:"/blog/2024/01/15/release-apache-apisix-3.8.0",source:"@site/blog/2024/01/15/release-apache-apisix-3.8.0.md",title:"Release Apache APISIX 3.8.0",description:"The Apache APISIX 3.8.0 version is released on January 15, 2024. This release includes a few new features, bug fixes, and other improvements to user experiences.",date:"2024-01-15T00:00:00.000Z",formattedDate:"January 15, 2024",tags:[{label:"Community",permalink:"/blog/tags/community"}],readingTime:3.345,truncated:!0,authors:[{name:"Xin Rong",title:"Author",url:"https://github.com/AlinsRan",image_url:"https://github.com/AlinsRan.png",imageURL:"https://github.com/AlinsRan.png"},{name:"Traky Deng",title:"Technical Writer",url:"https://github.com/kayx23",image_url:"https://github.com/kayx23.png",imageURL:"https://github.com/kayx23.png"}],prevItem:{title:"Biweekly Report (January 01 - January 14)",permalink:"/blog/2024/01/18/bi-weekly-report"},nextItem:{title:"Biweekly Report (December 18 - December 31)",permalink:"/blog/2024/01/03/bi-weekly-report"}},l={authorsImageUrls:[void 0,void 0]},s=[{value:"New Features",id:"new-features",children:[{value:"Support decrypting JWE in requests using <code>jwe-decrypt</code> plugin",id:"support-decrypting-jwe-in-requests-using-jwe-decrypt-plugin",children:[],level:3},{value:"Support multiple authentication methods on routes and services",id:"support-multiple-authentication-methods-on-routes-and-services",children:[],level:3},{value:"Support the use of <code>filters.regex</code> with compressed data in <code>response-rewrite</code> plugin",id:"support-the-use-of-filtersregex-with-compressed-data-in-response-rewrite-plugin",children:[],level:3},{value:"Support specifying the required scopes in <code>openid-connect</code> plugin",id:"support-specifying-the-required-scopes-in-openid-connect-plugin",children:[],level:3},{value:"Support <code>Timing-Allow-Origin</code> header in <code>cors</code> plugin",id:"support-timing-allow-origin-header-in-cors-plugin",children:[],level:3},{value:"Support brotli compression algorithm",id:"support-brotli-compression-algorithm",children:[],level:3},{value:"Expand capability of parameter parsing in <code>body-transformer</code> plugin",id:"expand-capability-of-parameter-parsing-in-body-transformer-plugin",children:[],level:3},{value:"Support the use of variables for sensitive information in <code>limit-count</code> plugin attributes",id:"support-the-use-of-variables-for-sensitive-information-in-limit-count-plugin-attributes",children:[],level:3}],level:2},{value:"Other Updates",id:"other-updates",children:[],level:2},{value:"Changelog",id:"changelog",children:[],level:2}],u={toc:s};function c(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,i.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"We are glad to present Apache APISIX 3.8.0 with exciting new features, bug fixes, and other improvements to user experiences."),(0,r.kt)("p",null,"This new release adds a number of new features, including the support for JWE decryption, brotli compression, multiple authentication methods on routes and services, required scopes in ",(0,r.kt)("inlineCode",{parentName:"p"},"openid-connect")," plugin, and more."),(0,r.kt)("h2",{id:"new-features"},"New Features"),(0,r.kt)("h3",{id:"support-decrypting-jwe-in-requests-using-jwe-decrypt-plugin"},"Support decrypting JWE in requests using ",(0,r.kt)("inlineCode",{parentName:"h3"},"jwe-decrypt")," plugin"),(0,r.kt)("p",null,"Support the decryption of ",(0,r.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc7516"},"JWE")," authorization headers in requests with the new ",(0,r.kt)("inlineCode",{parentName:"p"},"jwe-decrypt")," plugin."),(0,r.kt)("p",null,"The plugin creates an internal endpoint ",(0,r.kt)("inlineCode",{parentName:"p"},"/apisix/plugin/jwe/encrypt")," for JWE encryption, which can be exposed using the ",(0,r.kt)("inlineCode",{parentName:"p"},"public-api")," plugin. You will also configure the decryption key in Consumers."),(0,r.kt)("p",null,"For more information, see ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/10252"},"PR #10252")," and ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/blob/master/docs/en/latest/plugins/jwe-decrypt.md"},"plugin documentation"),"."),(0,r.kt)("h3",{id:"support-multiple-authentication-methods-on-routes-and-services"},"Support multiple authentication methods on routes and services"),(0,r.kt)("p",null,"Support multiple authentication methods on routes and services with the new ",(0,r.kt)("inlineCode",{parentName:"p"},"multi-auth")," plugin. The plugin iterates through the list of authentication plugins configured in the ",(0,r.kt)("inlineCode",{parentName:"p"},"auth_plugins")," attribute. It allows consumers using different authentication methods to share the same route or service."),(0,r.kt)("p",null,"For example, you can have one consumer using basic authentication:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl http://127.0.0.1:9180/apisix/admin/consumers -X PUT \\\n  -H "X-API-KEY: ${ADMIN_API_KEY}" \\\n  -d \'{\n    "username": "consumer1",\n    "plugins": {\n      "basic-auth": {\n        "username": "consumer1",\n        "password": "consumer1_pwd"\n      }\n    }\n  }\'\n')),(0,r.kt)("p",null,"And another consumer using key authentication:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl http://127.0.0.1:9180/apisix/admin/consumers -X PUT \\\n  -H "X-API-KEY: ${ADMIN_API_KEY}" \\\n  -d \'{\n    "username": "consumer2",\n    "plugins": {\n      "key-auth": {\n        "key": "consumer2_s3cr3t"\n      }\n    }\n  }\'\n')),(0,r.kt)("p",null,"Both consumers can access the route below upon successful authentication using their respective authentication method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl http://127.0.0.1:9180/apisix/admin/routes/1 -X PUT \\\n  -H "X-API-KEY: ${ADMIN_API_KEY}" \\\n  -d \'{\n    "methods": ["GET"],\n    "uri": "/get",\n    "plugins": {\n      "multi-auth":{\n        "auth_plugins":[\n          {\n            "basic-auth":{ }\n          },\n          {\n            "key-auth":{\n              "query":"apikey",\n              "hide_credentials":true,\n              "header":"apikey"\n             }\n          }\n        ]\n      }\n    },\n    "upstream": {\n      "type": "roundrobin",\n      "nodes": {\n        "httpbin.org": 1\n      }\n    }\n  }\'\n')),(0,r.kt)("p",null,"For more information, see ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/10482"},"PR #10482")," and ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/blob/master/docs/en/latest/plugins/multi-auth.md"},"plugin documentation"),"."),(0,r.kt)("h3",{id:"support-the-use-of-filtersregex-with-compressed-data-in-response-rewrite-plugin"},"Support the use of ",(0,r.kt)("inlineCode",{parentName:"h3"},"filters.regex")," with compressed data in ",(0,r.kt)("inlineCode",{parentName:"h3"},"response-rewrite")," plugin"),(0,r.kt)("p",null,"Support the use of ",(0,r.kt)("inlineCode",{parentName:"p"},"filters.regex")," with brotli and gzip compressed data in ",(0,r.kt)("inlineCode",{parentName:"p"},"response-rewrite")," plugin."),(0,r.kt)("p",null,"For more information, see ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/10588"},"PR #10588")," and ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/10637"},"PR #10637"),"."),(0,r.kt)("h3",{id:"support-specifying-the-required-scopes-in-openid-connect-plugin"},"Support specifying the required scopes in ",(0,r.kt)("inlineCode",{parentName:"h3"},"openid-connect")," plugin"),(0,r.kt)("p",null,"Support specifying the required scopes in ",(0,r.kt)("inlineCode",{parentName:"p"},"openid-connect")," plugin in the ",(0,r.kt)("inlineCode",{parentName:"p"},"required_scopes")," attribute. When configured, the plugin will check if all required scopes are present in the scopes returned by the introspection endpoint."),(0,r.kt)("p",null,"For more information, see ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/10493"},"PR #10493"),"."),(0,r.kt)("h3",{id:"support-timing-allow-origin-header-in-cors-plugin"},"Support ",(0,r.kt)("inlineCode",{parentName:"h3"},"Timing-Allow-Origin")," header in ",(0,r.kt)("inlineCode",{parentName:"h3"},"cors")," plugin"),(0,r.kt)("p",null,"New attributes ",(0,r.kt)("inlineCode",{parentName:"p"},"timing_allow_origins")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"timing_allow_origins_by_regex")," are available in the cors plugin to support selective viewing of timing by origin."),(0,r.kt)("p",null,"For more information, see ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/9365"},"PR #9365"),"."),(0,r.kt)("h3",{id:"support-brotli-compression-algorithm"},"Support brotli compression algorithm"),(0,r.kt)("p",null,"Support brotli compression algorithm in the new ",(0,r.kt)("inlineCode",{parentName:"p"},"brotli")," plugin, which dynamically sets the behavior of ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/google/ngx_brotli"},"brotli in NGINX"),". Before using the plugin, you should first build and install brotli shared libraries."),(0,r.kt)("p",null,"For more information, see ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/10515"},"PR #10515")," and ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/blob/master/docs/en/latest/plugins/brotli.md"},"plugin documentation"),"."),(0,r.kt)("h3",{id:"expand-capability-of-parameter-parsing-in-body-transformer-plugin"},"Expand capability of parameter parsing in ",(0,r.kt)("inlineCode",{parentName:"h3"},"body-transformer")," plugin"),(0,r.kt)("p",null,"Support parsing parameters from POST requests of ",(0,r.kt)("inlineCode",{parentName:"p"},"application/x-www-form-urlencoded")," content type and URI parameters from GET requests in ",(0,r.kt)("inlineCode",{parentName:"p"},"body-transformer")," plugin."),(0,r.kt)("p",null,"For more information, see ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/10496"},"PR #10496"),"."),(0,r.kt)("h3",{id:"support-the-use-of-variables-for-sensitive-information-in-limit-count-plugin-attributes"},"Support the use of variables for sensitive information in ",(0,r.kt)("inlineCode",{parentName:"h3"},"limit-count")," plugin attributes"),(0,r.kt)("p",null,"Support the use of variables for sensitive information in ",(0,r.kt)("inlineCode",{parentName:"p"},"limit-count")," plugin attributes. For example, you could save ",(0,r.kt)("inlineCode",{parentName:"p"},"redis_password")," to an environment variable and configure the value in the plugin as ",(0,r.kt)("inlineCode",{parentName:"p"},"$ENV://REDIS_PASSWORD"),"."),(0,r.kt)("p",null,"For more information, see ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/10597"},"PR #10597"),"."),(0,r.kt)("h2",{id:"other-updates"},"Other Updates"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Improve performance with lua-resty-events module (",(0,r.kt)("a",{parentName:"li",href:"https://github.com/apache/apisix/pull/10550"},"PR #10550")," and ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/apache/apisix/pull/10558"},"PR #10558"),")"),(0,r.kt)("li",{parentName:"ul"},"Upgrade OpenSSL 1.1.1 to OpenSSL 3 (",(0,r.kt)("a",{parentName:"li",href:"https://github.com/apache/apisix/pull/10724"},"PR #10724"),")"),(0,r.kt)("li",{parentName:"ul"},"Reduce the required number of ",(0,r.kt)("inlineCode",{parentName:"li"},"redis_cluster_nodes")," from 2 to 1 in ",(0,r.kt)("inlineCode",{parentName:"li"},"limit-count")," plugin  (",(0,r.kt)("a",{parentName:"li",href:"https://github.com/apache/apisix/pull/10612"},"PR #10612"),")"),(0,r.kt)("li",{parentName:"ul"},"Allow port to be an optional field when upstream nodes are of array type (",(0,r.kt)("a",{parentName:"li",href:"https://github.com/apache/apisix/pull/10477"},"PR #10477"),")"),(0,r.kt)("li",{parentName:"ul"},"Fix counter sharing among consumers when using the ",(0,r.kt)("inlineCode",{parentName:"li"},"limit-count")," plugin (",(0,r.kt)("a",{parentName:"li",href:"https://github.com/apache/apisix/pull/10540"},"PR #10540"),")"),(0,r.kt)("li",{parentName:"ul"},"Add ",(0,r.kt)("inlineCode",{parentName:"li"},"redirect_after_logout_uri")," attribute for ",(0,r.kt)("inlineCode",{parentName:"li"},"openid-connect")," plugin, used when ",(0,r.kt)("inlineCode",{parentName:"li"},"end_session_endpoint")," is not provided (",(0,r.kt)("a",{parentName:"li",href:"https://github.com/apache/apisix/pull/10653"},"PR #10653"),")"),(0,r.kt)("li",{parentName:"ul"},"Fix counter sharing among consumers when using the ",(0,r.kt)("inlineCode",{parentName:"li"},"limit-count")," plugin (",(0,r.kt)("a",{parentName:"li",href:"https://github.com/apache/apisix/pull/10540"},"PR #10540"),")"),(0,r.kt)("li",{parentName:"ul"},"Fix ",(0,r.kt)("inlineCode",{parentName:"li"},"forward-auth")," plugin 403 error when POST request body is too large (",(0,r.kt)("a",{parentName:"li",href:"https://github.com/apache/apisix/pull/10589"},"PR #10589"),")")),(0,r.kt)("h2",{id:"changelog"},"Changelog"),(0,r.kt)("p",null,"For a complete list of changes in this release, please see ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/blob/master/CHANGELOG.md#380"},"CHANGELOG"),"."))}c.isMDXComponent=!0}}]);