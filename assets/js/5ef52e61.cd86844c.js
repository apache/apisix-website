"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[4324],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>u});var i=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=i.createContext({}),c=function(e){var t=i.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},l=function(e){var t=c(e.components);return i.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},m=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,p=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),m=c(n),u=a,v=m["".concat(p,".").concat(u)]||m[u]||d[u]||o;return n?i.createElement(v,r(r({ref:t},l),{},{components:n})):i.createElement(v,r({ref:t},l))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=m;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var c=2;c<o;c++)r[c]=n[c];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}m.displayName="MDXCreateElement"},61593:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>r,default:()=>l,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var i=n(87462),a=(n(67294),n(3905));const o={id:"build-apisix-dev-environment-on-mac",title:"Build development environment on Mac",description:"This paper introduces how to use Docker to quickly build the development environment of API gateway Apache APISIX on Mac."},r=void 0,s={unversionedId:"build-apisix-dev-environment-on-mac",id:"version-3.10/build-apisix-dev-environment-on-mac",isDocsHomePage:!1,title:"Build development environment on Mac",description:"This paper introduces how to use Docker to quickly build the development environment of API gateway Apache APISIX on Mac.",source:"@site/docs-apisix_versioned_docs/version-3.10/build-apisix-dev-environment-on-mac.md",sourceDirName:".",slug:"/build-apisix-dev-environment-on-mac",permalink:"/docs/apisix/3.10/build-apisix-dev-environment-on-mac",editUrl:"/edit#https://github.com/apache/apisix/edit/release/3.10/docs/en/latest/build-apisix-dev-environment-on-mac.md",tags:[],version:"3.10",frontMatter:{id:"build-apisix-dev-environment-on-mac",title:"Build development environment on Mac",description:"This paper introduces how to use Docker to quickly build the development environment of API gateway Apache APISIX on Mac."},sidebar:"version-3.10/docs",previous:{title:"Building APISIX from source",permalink:"/docs/apisix/3.10/building-apisix"},next:{title:"Support FIPS in APISIX",permalink:"/docs/apisix/3.10/support-fips-in-apisix"}},p=[{value:"Quick Setup of Apache APISIX Development Environment",id:"quick-setup-of-apache-apisix-development-environment",children:[{value:"Implementation Idea",id:"implementation-idea",children:[]},{value:"Implementation Steps",id:"implementation-steps",children:[]},{value:"Run and Stop APISIX",id:"run-and-stop-apisix",children:[]},{value:"Run Specific Test Cases",id:"run-specific-test-cases",children:[]}]}],c={toc:p};function l(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,i.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"If you want to quickly build and develop APISIX on your Mac platform, you can refer to this tutorial."),(0,a.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"This tutorial is suitable for situations where you need to quickly start development on the Mac platform, if you want to go further and have a better development experience, the better choice is the Linux-based virtual machine, or directly use this kind of system as your development environment."),(0,a.kt)("p",{parentName:"div"},"You can see the specific supported systems ",(0,a.kt)("a",{parentName:"p",href:"/docs/apisix/3.10/install-dependencies#install"},"here"),"."))),(0,a.kt)("h2",{id:"quick-setup-of-apache-apisix-development-environment"},"Quick Setup of Apache APISIX Development Environment"),(0,a.kt)("h3",{id:"implementation-idea"},"Implementation Idea"),(0,a.kt)("p",null,"We use Docker to build the test environment of Apache APISIX. When the container starts, we can mount the source code of Apache APISIX into the container, and then we can build and run test cases in the container."),(0,a.kt)("h3",{id:"implementation-steps"},"Implementation Steps"),(0,a.kt)("p",null,"First, clone the APISIX source code, build an image that can run test cases, and compile the Apache APISIX."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"git clone https://github.com/apache/apisix.git\ncd apisix\ndocker build -t apisix-dev-env -f example/build-dev-image.dockerfile .\n")),(0,a.kt)("p",null,"Next, start Etcd:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"docker run -d --name etcd-apisix --net=host pachyderm/etcd:v3.5.2\n")),(0,a.kt)("p",null,"Mount the APISIX directory and start the development environment container:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"docker run -d --name apisix-dev-env --net=host -v $(pwd):/apisix:rw apisix-dev-env:latest\n")),(0,a.kt)("p",null,"Finally, enter the container, build the Apache APISIX runtime, and configure the test environment:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"docker exec -it apisix-dev-env make deps\ndocker exec -it apisix-dev-env ln -s /usr/bin/openresty /usr/bin/nginx\n")),(0,a.kt)("h3",{id:"run-and-stop-apisix"},"Run and Stop APISIX"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"docker exec -it apisix-dev-env make run\ndocker exec -it apisix-dev-env make stop\n")),(0,a.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"If you encounter an error message like ",(0,a.kt)("inlineCode",{parentName:"p"},"nginx: [emerg] bind() to unix:/apisix/logs/worker_events.sock failed (95: Operation not supported)")," while running ",(0,a.kt)("inlineCode",{parentName:"p"},"make run"),", please use this solution."),(0,a.kt)("p",{parentName:"div"},"Change the ",(0,a.kt)("inlineCode",{parentName:"p"},"File Sharing")," settings of your Docker-Desktop:"),(0,a.kt)("p",{parentName:"div"},(0,a.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/apache/apisix/release/3.10/docs/assets/images/update-docker-desktop-file-sharing.png",alt:"Docker-Desktop File Sharing Setting"})),(0,a.kt)("p",{parentName:"div"},"Changing to either ",(0,a.kt)("inlineCode",{parentName:"p"},"gRPC FUSE")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"osxfs")," can resolve this issue."))),(0,a.kt)("h3",{id:"run-specific-test-cases"},"Run Specific Test Cases"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"docker exec -it apisix-dev-env prove t/admin/routes.t\n")))}l.isMDXComponent=!0}}]);