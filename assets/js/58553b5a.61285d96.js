"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[25033],{35318:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>m});var n=r(27378);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),p=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),h=p(r),m=a,d=h["".concat(s,".").concat(m)]||h[m]||u[m]||o;return r?n.createElement(d,i(i({ref:t},c),{},{components:r})):n.createElement(d,i({ref:t},c))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=r[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}h.displayName="MDXCreateElement"},64428:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var n=r(25773),a=(r(27378),r(35318));const o={title:"Release Apache APISIX 3.6.0",authors:[{name:"Xin Rong",title:"Author",url:"https://github.com/AlinsRan",image_url:"https://avatars.githubusercontent.com/u/79972061?v=4"},{name:"Traky Deng",title:"Technical Writer",url:"https://github.com/kayx23",image_url:"https://avatars.githubusercontent.com/u/39619599?v=4"}],keywords:["Apache APISIX","API Gateway","API Management Platform","New Release","Cloud Native"],description:"The Apache APISIX 3.6.0 version is released on October 5, 2023. This release includes a few new features, bug fixes, and continuous improvements to user experiences.",tags:["Community"]},i=void 0,l={permalink:"/blog/2023/10/05/release-apache-apisix-3.6.0",source:"@site/blog/2023/10/05/release-apache-apisix-3.6.0.md",title:"Release Apache APISIX 3.6.0",description:"The Apache APISIX 3.6.0 version is released on October 5, 2023. This release includes a few new features, bug fixes, and continuous improvements to user experiences.",date:"2023-10-05T00:00:00.000Z",formattedDate:"October 5, 2023",tags:[{label:"Community",permalink:"/blog/tags/community"}],readingTime:2.965,truncated:!0,authors:[{name:"Xin Rong",title:"Author",url:"https://github.com/AlinsRan",image_url:"https://avatars.githubusercontent.com/u/79972061?v=4",imageURL:"https://avatars.githubusercontent.com/u/79972061?v=4"},{name:"Traky Deng",title:"Technical Writer",url:"https://github.com/kayx23",image_url:"https://avatars.githubusercontent.com/u/39619599?v=4",imageURL:"https://avatars.githubusercontent.com/u/39619599?v=4"}],prevItem:{title:"Embracing GitOps: APISIX's New Feature for Declarative Configuration",permalink:"/blog/2023/10/07/apisix-gitops-adc"},nextItem:{title:"Resizing images on-the-fly",permalink:"/blog/2023/10/05/resize-images-on-the-fly"}},s={authorsImageUrls:[void 0,void 0]},p=[{value:"Breaking Changes",id:"breaking-changes",children:[{value:"Remove gRPC support between APISIX and etcd",id:"remove-grpc-support-between-apisix-and-etcd",children:[],level:3},{value:"Remove Conf Server",id:"remove-conf-server",children:[],level:3},{value:"Enforce strict schema validation of the APISIX core resources",id:"enforce-strict-schema-validation-of-the-apisix-core-resources",children:[],level:3}],level:2},{value:"New Features",id:"new-features",children:[{value:"Support the use of local DNS resolvers for service discovery",id:"support-the-use-of-local-dns-resolvers-for-service-discovery",children:[],level:3},{value:"Support direct forwarding of Dubbo traffic",id:"support-direct-forwarding-of-dubbo-traffic",children:[],level:3},{value:"Support the use of NGINX variables in <code>opentelemetry</code> plugin",id:"support-the-use-of-nginx-variables-in-opentelemetry-plugin",children:[],level:3},{value:"Support rewriting request body in external plugins",id:"support-rewriting-request-body-in-external-plugins",children:[],level:3}],level:2},{value:"Other Updates",id:"other-updates",children:[],level:2},{value:"Changelog",id:"changelog",children:[],level:2}],c={toc:p};function u(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"We are glad to present Apache APISIX 3.6.0 with exciting new features, bug fixes, and other improvements to user experiences."),(0,a.kt)("p",null,"This new release adds a number of new features, including the support for using local DNS resolvers in service discovery, forwarding Dubbo traffic, the use of NGINX variables in ",(0,a.kt)("inlineCode",{parentName:"p"},"opentelemetry")," plugin, and more."),(0,a.kt)("p",null,"There are also a few important changes included in this release. Should you find these changes impacting your operations, please plan your upgrade accordingly."),(0,a.kt)("h2",{id:"breaking-changes"},"Breaking Changes"),(0,a.kt)("h3",{id:"remove-grpc-support-between-apisix-and-etcd"},"Remove gRPC support between APISIX and etcd"),(0,a.kt)("p",null,"The support of gPRC communication between APISIX and etcd is removed in this release, which removes ",(0,a.kt)("inlineCode",{parentName:"p"},"etcd.use_grpc")," option in the configuration files. The change resolves a few bugs."),(0,a.kt)("p",null,"If you are currently using gRPC between APISIX and etcd, please plan for a change to use HTTP."),(0,a.kt)("p",null,"For more information, see ",(0,a.kt)("a",{parentName:"p",href:"https://lists.apache.org/thread/b69vjkbdszdtk9y30k45c2tvg4f3hqwt"},"change proposal")," and ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/10015"},"PR #10015"),"."),(0,a.kt)("h3",{id:"remove-conf-server"},"Remove Conf Server"),(0,a.kt)("p",null,"Conf server is removed following the removal of gRPC support between APISIX and etcd. The change resolves a few bugs."),(0,a.kt)("p",null,"If you are currently deploying APISIX in decoupled mode, please note that in this release, data plane (DP) APISIX instance no longer directly communicates with the control plane (CP) APISIX instance. Both instances now communicate with etcd. Please plan for a change to update the configurations accordingly as per the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/blob/release/3.6/docs/en/latest/deployment-modes.md#decoupled"},"decoupled mode documentation"),"."),(0,a.kt)("p",null,"For more information, see ",(0,a.kt)("a",{parentName:"p",href:"https://lists.apache.org/thread/b69vjkbdszdtk9y30k45c2tvg4f3hqwt"},"change proposal")," and ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/10012"},"PR #10012"),"."),(0,a.kt)("h3",{id:"enforce-strict-schema-validation-of-the-apisix-core-resources"},"Enforce strict schema validation of the APISIX core resources"),(0,a.kt)("p",null,"Enforce strict schema validation on the APISIX core resources."),(0,a.kt)("p",null,"For example, if you configure a custom field to the upstream:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'curl http://127.0.0.1:9180/apisix/admin/upstreams/1 -X PUT \\\n  -H "X-API-KEY: ${ADMIN_API_KEY}" \\\n  -d \'{\n    "type": "roundrobin",\n    "nodes": {\n      "127.0.0.1:8080": 1\n    },\n    "custom_field": "this_is_not_allowed"\n  }\'\n')),(0,a.kt)("p",null,"You should receive a ",(0,a.kt)("inlineCode",{parentName:"p"},"400")," response of the following:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},'{"error_msg":"invalid configuration: additional properties forbidden found .*"\\}\n')),(0,a.kt)("p",null,"For more information, see ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/10233"},"PR #10233"),"."),(0,a.kt)("h2",{id:"new-features"},"New Features"),(0,a.kt)("h3",{id:"support-the-use-of-local-dns-resolvers-for-service-discovery"},"Support the use of local DNS resolvers for service discovery"),(0,a.kt)("p",null,"Support the configuration of local DNS resolvers for service discovery. The configuration files now offer a new option ",(0,a.kt)("inlineCode",{parentName:"p"},"resolv_conf"),", where you can specify the path to the file with a list of local DNS resolvers."),(0,a.kt)("p",null,"You should configure only one of the ",(0,a.kt)("inlineCode",{parentName:"p"},"servers")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"resolv_conf"),", such as the following:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="conf/config.yaml"',title:'"conf/config.yaml"'},'discovery:\n  dns:\n    # servers:\n    #  - "127.0.0.1:8600"          # Address of DNS server.\n    resolv_conf: /etc/resolv.conf  # Path to the local DNS resolver config.\n')),(0,a.kt)("p",null,"For more information, see ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/9770"},"PR #9770"),"."),(0,a.kt)("h3",{id:"support-direct-forwarding-of-dubbo-traffic"},"Support direct forwarding of Dubbo traffic"),(0,a.kt)("p",null,"Support Dubbo protocol in xRPC, which allows APISIX to directly forward Dubbo traffic."),(0,a.kt)("p",null,"For more information, see ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/9660"},"PR #9660"),"."),(0,a.kt)("h3",{id:"support-the-use-of-nginx-variables-in-opentelemetry-plugin"},"Support the use of NGINX variables in ",(0,a.kt)("inlineCode",{parentName:"h3"},"opentelemetry")," plugin"),(0,a.kt)("p",null,"Support the use of NGINX variables in ",(0,a.kt)("inlineCode",{parentName:"p"},"opentelemetry")," plugin. For example, you can configure the configuration file as follows:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="conf/config.yaml"',title:'"conf/config.yaml"'},'http:\n  enable_access_log: true\n  access_log: "/dev/stdout"\n  access_log_format: \'{"time": "$time_iso8601","opentelemetry_context_traceparent": "$opentelemetry_context_traceparent","opentelemetry_trace_id": "$opentelemetry_trace_id","opentelemetry_span_id": "$opentelemetry_span_id","remote_addr": "$remote_addr","uri": "$uri"}\'\n  access_log_format_escape: json\nplugins:\n  - opentelemetry\nplugin_attr:\n  opentelemetry:\n    set_ngx_var: true\n')),(0,a.kt)("p",null,"For more information, see ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/8871"},"PR #8871"),"."),(0,a.kt)("h3",{id:"support-rewriting-request-body-in-external-plugins"},"Support rewriting request body in external plugins"),(0,a.kt)("p",null,"Support the rewrite of request body in external (i.e. non-Lua) plugins."),(0,a.kt)("p",null,"For more information, see ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/9990"},"PR #9990"),"."),(0,a.kt)("h2",{id:"other-updates"},"Other Updates"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Support configuring the buffer size for the access log (",(0,a.kt)("a",{parentName:"li",href:"https://github.com/apache/apisix/pull/10225"},"PR #10225"),")"),(0,a.kt)("li",{parentName:"ul"},"Remove Rust dependency to simplify installation (",(0,a.kt)("a",{parentName:"li",href:"https://github.com/apache/apisix/pull/10121"},"PR #10121"),")"),(0,a.kt)("li",{parentName:"ul"},"Support HTTPS in ",(0,a.kt)("inlineCode",{parentName:"li"},"traffic-split")," plugin (",(0,a.kt)("a",{parentName:"li",href:"https://github.com/apache/apisix/pull/9115"},"PR #9115"),")"),(0,a.kt)("li",{parentName:"ul"},"Support UNIX sock host pattern in the ",(0,a.kt)("inlineCode",{parentName:"li"},"chaitin-waf")," plugin (",(0,a.kt)("a",{parentName:"li",href:"https://github.com/apache/apisix/pull/10161"},"PR #10161"),")"),(0,a.kt)("li",{parentName:"ul"},"Fix GraphQL POST request route matching exception (",(0,a.kt)("a",{parentName:"li",href:"https://github.com/apache/apisix/pull/10198"},"PR #10198"),")"),(0,a.kt)("li",{parentName:"ul"},"Add error handlers for invalid ",(0,a.kt)("inlineCode",{parentName:"li"},"cache_zone")," in the ",(0,a.kt)("inlineCode",{parentName:"li"},"proxy-cache")," plugin (",(0,a.kt)("a",{parentName:"li",href:"https://github.com/apache/apisix/pull/10138"},"PR #10138"),")")),(0,a.kt)("h2",{id:"changelog"},"Changelog"),(0,a.kt)("p",null,"For a complete list of changes in this release, please see ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/blob/master/CHANGELOG.md#360"},"CHANGELOG"),"."))}u.isMDXComponent=!0}}]);