"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[47669],{35318:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>h});var n=a(27378);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(a),h=i,m=u["".concat(l,".").concat(h)]||u[h]||d[h]||r;return a?n.createElement(m,o(o({ref:t},p),{},{components:a})):n.createElement(m,o({ref:t},p))}));function h(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,o=new Array(r);o[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var c=2;c<r;c++)o[c]=a[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},24392:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var n=a(25773),i=(a(27378),a(35318));const r={title:"APISIX Boosts Lenovo to Build Lightweight and Decentralized Gateway",authors:[{name:"Leon Yang",title:"Author",url:"https://github.com/leonyaa",image_url:"https://avatars.githubusercontent.com/u/2486554?v=4"},{name:"Yilia Lin",title:"Technical Writer",url:"https://github.com/Yilialinn",image_url:"https://avatars.githubusercontent.com/u/114121331?v=4"}],keywords:["APISIX","Lenovo","Full API Lifecycle Management","Kong Alternatives"],description:"Lenovo established a decentralized gateway and centralized dev portal based on APISIX, resolving the bottlenecks of its previous system.",tags:["Case Studies"],image:"https://static.apiseven.com/uploads/2023/06/02/pRRqKigM_img_v2_d8efd0f7-2a28-46c2-8ed3-6e59f17cafag.png"},o=void 0,s={permalink:"/blog/2023/06/02/lenovo-uses-apisix",source:"@site/blog/2023/06/02/lenovo-uses-apisix.md",title:"APISIX Boosts Lenovo to Build Lightweight and Decentralized Gateway",description:"Lenovo established a decentralized gateway and centralized dev portal based on APISIX, resolving the bottlenecks of its previous system.",date:"2023-06-02T00:00:00.000Z",formattedDate:"June 2, 2023",tags:[{label:"Case Studies",permalink:"/blog/tags/case-studies"}],readingTime:9.55,truncated:!0,authors:[{name:"Leon Yang",title:"Author",url:"https://github.com/leonyaa",image_url:"https://avatars.githubusercontent.com/u/2486554?v=4",imageURL:"https://avatars.githubusercontent.com/u/2486554?v=4"},{name:"Yilia Lin",title:"Technical Writer",url:"https://github.com/Yilialinn",image_url:"https://avatars.githubusercontent.com/u/114121331?v=4",imageURL:"https://avatars.githubusercontent.com/u/114121331?v=4"}],prevItem:{title:"Biweekly Report (May 23 - June 5)",permalink:"/blog/2023/06/08/weekly-report"},nextItem:{title:"Release Apache APISIX 3.2.1",permalink:"/blog/2023/06/01/release-apache-apisix-3.2.1"}},l={authorsImageUrls:[void 0,void 0]},c=[{value:"Overview",id:"overview",children:[],level:2},{value:"Background",id:"background",children:[],level:2},{value:"Challenges of Centralized API Gateway Architecture in Complex Enterprise Environments",id:"challenges-of-centralized-api-gateway-architecture-in-complex-enterprise-environments",children:[],level:2},{value:"Why Lenovo Opted for APISIX",id:"why-lenovo-opted-for-apisix",children:[],level:2},{value:"Decentralized Gateway and Centralized Dev Portal based on APISIX",id:"decentralized-gateway-and-centralized-dev-portal-based-on-apisix",children:[{value:"Build Centralized API Dev Portal",id:"build-centralized-api-dev-portal",children:[],level:3},{value:"Build Centralized Registry Center",id:"build-centralized-registry-center",children:[],level:3},{value:"Provide Lightweight Gateway",id:"provide-lightweight-gateway",children:[],level:3},{value:"Offload Authorization of API Provision Services",id:"offload-authorization-of-api-provision-services",children:[],level:3}],level:2},{value:"Achievements after Using APISIX",id:"achievements-after-using-apisix",children:[{value:"Improved Performance with Flexible Configuration",id:"improved-performance-with-flexible-configuration",children:[],level:3},{value:"Inreased Security and Scalability",id:"inreased-security-and-scalability",children:[],level:3},{value:"Realized Full API Lifecycle Management",id:"realized-full-api-lifecycle-management",children:[],level:3},{value:"Provided Unified API Management Marketplace",id:"provided-unified-api-management-marketplace",children:[],level:3},{value:"Achieved Enhanced Monitoring",id:"achieved-enhanced-monitoring",children:[],level:3}],level:2},{value:"Summary and Outlook",id:"summary-and-outlook",children:[],level:2}],p={toc:c};function d(e){let{components:t,...a}=e;return(0,i.kt)("wrapper",(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Lenovo established a decentralized gateway and centralized dev portal based on APISIX, resolving the bottlenecks of its previous system.")),(0,i.kt)("h2",{id:"overview"},"Overview"),(0,i.kt)("p",null,"I'm Leon Yang, a Senior IT Architect at Lenovo, dedicated to promoting the reuse of software engineering components and building a sharing technology ecosystem. In the past two years, I have published more than 20 patents in enterprise software, big data, and artificial intelligence."),(0,i.kt)("p",null,"Lenovo Group Limited, which was founded on November 1, 1984, as Legend and is commonly referred to as Lenovo, is an American-Chinese multinational technology company specializing in designing, manufacturing, and marketing consumer electronics, personal computers, software, business solutions, and related services."),(0,i.kt)("h2",{id:"background"},"Background"),(0,i.kt)("p",null,"Nowadays, businesses are becoming more and more complex. Technologies are changing with each passing day, which has greatly impacted software development. We have been looking for a more efficient way for project delivery at a lower cost, that is reusing original system resources by componentization."),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://static.apiseven.com/uploads/2023/06/05/qTyereco_Lenovo-system-architecture.jpeg",alt:"Lenovo-system-architecture"})),(0,i.kt)("p",null,"The first step is to build an out-of-the-box reusable internal API ecosystem with a large number of components. Therefore, our team can reuse existing software assets by componentizing technical functions and standardizing the architecture. It is an effective way for enterprises, enabling developers no longer need to face a variety of technology selections."),(0,i.kt)("p",null,"Consequently, our team started developing its internal applications based on component-based patterns, reducing engineering application development costs, and improving software delivery with quality and efficiency. Meantime, we established a high-quality enterprise API service ecosystem for fully reusing the capabilities of internal systems and external partners, thus constructing powerful business solutions."),(0,i.kt)("h2",{id:"challenges-of-centralized-api-gateway-architecture-in-complex-enterprise-environments"},"Challenges of Centralized API Gateway Architecture in Complex Enterprise Environments"),(0,i.kt)("p",null,"The API gateway plays a vital role in the API ecosystem. The following picture shows how we use the API gateway in different scenarios."),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://static.apiseven.com/uploads/2023/06/05/gI5G0TAE_Challenges-of-Centralized-API-Gateway.jpeg",alt:"Challenges-of-Centralized-API-Gateway"})),(0,i.kt)("p",null,"In a large enterprise, there will be an intranet and a DMZ (demilitarized zone). In the intranet, if hundreds of application systems need to implement API calls through the API gateway, a centralized intranet gateway will be established to be responsible for API routing, authentication, WAF control, etc. If the API service is to provide external network services, according to the strict architecture design, a centralized gateway needs to be deployed in the DMZ. The API call goes through the DMZ and then will be exposed to the public network through the relevant firewall."),(0,i.kt)("p",null,"There are many challenges in this process."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Distributed API information and incorrect use of API bring ",(0,i.kt)("strong",{parentName:"p"},"high operational costs"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Limited scalability and availability")," because of a single point of failure. If the gateway fails, all requests will be blocked, resulting in downtime and disruption of services (centralized team resource).")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Too many API scenarios and routes deployed in one gateway node can ",(0,i.kt)("strong",{parentName:"p"},"easily become overwhelming and cause latency issues"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Excessive resource usage or failure")," by an API can negatively impact the performance of all APIs.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Installing an etcd / ZK for each API gateway makes the ",(0,i.kt)("strong",{parentName:"p"},"architecture too heavy"),". (using admin console)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Heterogeneous system architecture has ",(0,i.kt)("strong",{parentName:"p"},"multiple API authorizations")," from API gateway and API service providers, which adds complexity to API usage."))),(0,i.kt)("h2",{id:"why-lenovo-opted-for-apisix"},"Why Lenovo Opted for APISIX"),(0,i.kt)("p",null,"We chose APISIX mainly because APISIX has merits in the below aspects."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Built with NGINX and LuaJIT, APISIX has ",(0,i.kt)("strong",{parentName:"p"},"high performance, rich OpenResty library, and is easy for customization"),". In the past, we adopted multiple commercial API gateway products that were positioned in the leading quadrant of Gartner. However, these products posed challenges in meeting the unique needs of enterprises, such as customizing authorization flows and dashboards.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"APISIX Provides lightweight deployment architecture"),". We need a lightweight gateway that can function as a component embedded within an application. However, most commercial or open-source API gateway products are too heavy for our system.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Dynamic hot reloading")," allows for publishing APIs without the need to restart systems, reducing downtime and improving business system operation SLA.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Flexible plugin customization")," enables developers to create personalized processes that meet the unique needs of the enterprise.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"With the strong support of an ",(0,i.kt)("strong",{parentName:"p"},"active community ecosystem and a wide range of high-quality plugins like kafka-logger and authz-keycloak"),", we benefit from enhanced functionality and extensive customization options.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"The enabled Web Application Firewall (WAF) provides essential security measures and traffic control features")," to enhance the overall protection and performance of our system.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Friendly open-source license: Apache License 2.0.")," Lenovo only considers using two protocols, Apache License 2.0 and MIT in terms of security compliance."))),(0,i.kt)("h2",{id:"decentralized-gateway-and-centralized-dev-portal-based-on-apisix"},"Decentralized Gateway and Centralized Dev Portal based on APISIX"),(0,i.kt)("p",null,"Our team adopted several measures to integrate its architecture with APISIX."),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://static.apiseven.com/uploads/2023/06/05/hkkTZixS_API%20Dev%20Portal.jpeg",alt:"API-Dev-Portal"})),(0,i.kt)("h3",{id:"build-centralized-api-dev-portal"},"Build Centralized API Dev Portal"),(0,i.kt)("p",null,"We established its Centralized API Dev Portal to improve the efficiency and quality of API management and use of API."),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://static.apiseven.com/uploads/2023/06/05/3V2Xea7k_Build%20Centralized%20API%20Dev%20Portal.jpeg",alt:"Build-Centralized-API-Dev-Portal"})),(0,i.kt)("p",null,"The Dev Portal has the following features."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Provide unified API service catalog management and API information publishing, including API specifications, use cases & samples, and access control policies")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Provide developers with an easy-to-use API marketplace to search, test, and subscribe to APIs efficiently")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Provide a convenient way for tracking gateway status and notifying the changes of API subscription and policies")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Use API analytics to track API usage, measure the performance of API gateways and API services (exception, throughput, latency, etc.)"))),(0,i.kt)("h3",{id:"build-centralized-registry-center"},"Build Centralized Registry Center"),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://static.apiseven.com/uploads/2023/06/05/CvfRTSda_Build%20Centralized%20Registry%20Center.jpeg",alt:"Build-Centralized-Registry-Center"})),(0,i.kt)("p",null,"Set up a Centralized Registry Center (etcd) for gateway health-check and API subscription synchronization to deploy multiple registry centers."),(0,i.kt)("p",null,"API Dev Portal publishes API subscriptions to the Registry Center when developers subscribe to API under a specified gateway."),(0,i.kt)("p",null,"Gateway sends a heartbeat to the Registry Center regularly, usually every 10 seconds, to inform the Registry Center that it is still alive. When the subscription under the gateway changes, the Registry Center will trigger the gateway to pull the updates of API subscriptions and deploy them locally. This process ensures that the gateway is always up-to-date with the latest API subscription information."),(0,i.kt)("p",null,"The API log & metrics reporter running as a daemon in the gateway can be configured to regularly post key metrics of the API to the Kafka topic. And the metrics then be consumed by the log receiver of API Analytics."),(0,i.kt)("h3",{id:"provide-lightweight-gateway"},"Provide Lightweight Gateway"),(0,i.kt)("p",null,"Lenovo provided a lightweight gateway delegated in business applications or domains that provides secure access to applications and services without a centralized gateway. This approach allows more granular control over access and authentication, improves scalability and performance, and reduces the risk of a single point of failure."),(0,i.kt)("h3",{id:"offload-authorization-of-api-provision-services"},"Offload Authorization of API Provision Services"),(0,i.kt)("p",null,"By offloading the authorization of API provision services and delegating the authorization of API consumers to the business applications or domains, Lenovo can better manage their API security and improve the developer experience."),(0,i.kt)("h2",{id:"achievements-after-using-apisix"},"Achievements after Using APISIX"),(0,i.kt)("p",null,"After implementing APISIX, a significant number of changes were made within Lenovo."),(0,i.kt)("h3",{id:"improved-performance-with-flexible-configuration"},"Improved Performance with Flexible Configuration"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"APISIX's remarkable scalability offers Lenovo the necessary flexibility for customization.")," With APISIX,  Lenovo's decentralized gateway architecture provides high-performance and highly scalable enterprise-level API gateway solutions, effectively eliminating the bottleneck caused by centralization."),(0,i.kt)("p",null,"Previously, the system resources constrain the number of APIs that can be deployed in a single cluster to less than 1,000. The gateway performance is bottlenecked by some resource-intensive APIs, resulting in an average throughput of ",(0,i.kt)("strong",{parentName:"p"},"less than 4,000 TPS"),". Furthermore, any API failure will degrade the overall API routing performance and affect all clients."),(0,i.kt)("p",null,"However, by leveraging APISIX, Lenovo's decentralized gateway architecture enables the efficient deployment of gateway nodes and APIs based on specific business scenarios. Each gateway node can be configured and optimized independently according to its system resources and workload. Consequently, there is no longer a limit on the total number of APIs that can be deployed across the network. Moreover, with proper tuning, ",(0,i.kt)("strong",{parentName:"p"},"the gateway performance can be significantly improved to exceed 20,000 TPS"),"."),(0,i.kt)("h3",{id:"inreased-security-and-scalability"},"Inreased Security and Scalability"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Deploying a lightweight gateway as a component of an application or business domain improved the application security, as well as greatly enhanced the flexibility of deploying API by scenarios.")),(0,i.kt)("p",null,"Each business scenario can benefit from independent API routing and customized security policies, which provide complete isolation between different scenarios. This enables each business scenario to perform API changes and start-stop operations according to specific plans."),(0,i.kt)("p",null,"So far, ",(0,i.kt)("strong",{parentName:"p"},"more than 100 low-code business applications have leveraged this lightweight API gateway component architecture, which has enhanced their performance and resilience")," without being hampered by the unified gateway operation and maintenance challenges. This lightweight API gateway component architecture is projected to encompass most of the business scenarios in the next 2 to 3 years."),(0,i.kt)("h3",{id:"realized-full-api-lifecycle-management"},"Realized Full API Lifecycle Management"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Centralized API Dev Portal enables API providers to efficiently manage the full API lifecycle in a unified manner for all gateways.")),(0,i.kt)("p",null,"Utilizing an API Dev Portal to manage API information can effectively prevent various business teams from duplicating their API admin tools. Additionally, it enables the possibility of establishing unified API technical standards, documentation standards, and security standards. To integrate complex heterogeneous systems or legacy systems from different business domains, the API Dev Portal also provides various ",(0,i.kt)("a",{parentName:"p",href:"https://api7.ai/blog/apisix-permission-policy"},"authorization")," processes extended from the APISIX plugin for the backend services of APIs, such as Basic Authorization, oAuth2, Customized Header, and so on. So far, ",(0,i.kt)("strong",{parentName:"p"},"100+ developers are using the API Dev Portal for API management"),"."),(0,i.kt)("h3",{id:"provided-unified-api-management-marketplace"},"Provided Unified API Management Marketplace"),(0,i.kt)("p",null,"API Marketplaces, such as the one facilitated by APISIX, play a vital role in simplifying the process of finding the required APIs for developers. These marketplaces also facilitate efficient sharing and discovery of API information across departments in large enterprises, thereby reducing the time spent on searching for APIs."),(0,i.kt)("p",null,"Currently, ",(0,i.kt)("strong",{parentName:"p"},"the API market is already being leveraged by over 1000 developers from various business domains to search and access the necessary API information"),". It has proven to be an indispensable tool for streamlining the development process and ensuring access to the most up-to-date and accurate API information."),(0,i.kt)("p",null,"As APISIX continues to expand its functionality and coverage within the API market, more developers are expected to rely on it as a valuable resource for their development needs. ",(0,i.kt)("strong",{parentName:"p"},"APISIX provides developers with a centralized platform to search for and access the APIs they require, significantly saving them time and effort during the development process.")," Furthermore, the API market powered by APISIX offers developers a collaborative environment to share their own APIs, fostering innovation and collaboration within the development community."),(0,i.kt)("h3",{id:"achieved-enhanced-monitoring"},"Achieved Enhanced Monitoring"),(0,i.kt)("p",null,"API Analytics and ",(0,i.kt)("a",{parentName:"p",href:"https://api7.ai/blog/apache-apisix-datadog-integration"},"Monitoring")," provides businesses with valuable insights into the performance of their APIs. ",(0,i.kt)("strong",{parentName:"p"},"APISIX plays a crucial role in assisting Lenovo in monitoring its platforms, enabling developers to optimize APIs for enhanced performance, scalability, and reliability.")," Additionally, it aids in the early detection of potential risks, such as errors and latency, preventing them from becoming significant problems."),(0,i.kt)("h2",{id:"summary-and-outlook"},"Summary and Outlook"),(0,i.kt)("p",null,"I believe that the combination of a high-performance tech stack and a flexible open-source architecture empowers organizations, including ours, to create robust and efficient solutions. This powerful combination equips us with the necessary tools and capabilities to tackle complex challenges and deliver exceptional outcomes."),(0,i.kt)("p",null,"Considering these remarkable capabilities, we at Lenovo have immense confidence in APISIX and its vibrant community. With the unwavering support of APISIX, we are in a favorable position to achieve remarkable milestones and maintain our leadership in technological advancements within the industry. By leveraging the strengths of APISIX, we can drive innovation, foster growth, and continue to lead the way in delivering cutting-edge solutions that cater to the evolving needs of the market."))}d.isMDXComponent=!0}}]);