"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[73512],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>u});var i=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=i.createContext({}),c=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=c(e.components);return i.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},m=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),m=c(n),u=a,h=m["".concat(l,".").concat(u)]||m[u]||p[u]||o;return n?i.createElement(h,r(r({ref:t},d),{},{components:n})):i.createElement(h,r({ref:t},d))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var c=2;c<o;c++)r[c]=n[c];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}m.displayName="MDXCreateElement"},40560:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var i=n(87462),a=(n(67294),n(3905));const o={id:"build-apisix-dev-environment-devcontainers",title:"Build development environment with Dev Containers",description:"This paper introduces how to quickly start the APISIX API Gateway development environment using Dev Containers."},r=void 0,s={unversionedId:"build-apisix-dev-environment-devcontainers",id:"version-3.13/build-apisix-dev-environment-devcontainers",isDocsHomePage:!1,title:"Build development environment with Dev Containers",description:"This paper introduces how to quickly start the APISIX API Gateway development environment using Dev Containers.",source:"@site/docs-apisix_versioned_docs/version-3.13/build-apisix-dev-environment-devcontainers.md",sourceDirName:".",slug:"/build-apisix-dev-environment-devcontainers",permalink:"/docs/apisix/3.13/build-apisix-dev-environment-devcontainers",editUrl:"/edit#https://github.com/apache/apisix/edit/release/3.13/docs/en/latest/build-apisix-dev-environment-devcontainers.md",tags:[],version:"3.13",frontMatter:{id:"build-apisix-dev-environment-devcontainers",title:"Build development environment with Dev Containers",description:"This paper introduces how to quickly start the APISIX API Gateway development environment using Dev Containers."},sidebar:"version-3.13/docs",previous:{title:"Status API",permalink:"/docs/apisix/3.13/status-api"},next:{title:"Building APISIX from source",permalink:"/docs/apisix/3.13/building-apisix"}},l=[{value:"Supported systems and CPU ISA",id:"supported-systems-and-cpu-isa",children:[]},{value:"Quick Setup of Apache APISIX Development Environment",id:"quick-setup-of-apache-apisix-development-environment",children:[{value:"Implementation Idea",id:"implementation-idea",children:[]},{value:"Steps",id:"steps",children:[]}]},{value:"FAQ",id:"faq",children:[{value:"Where&#39;s the code? When I delete the container, are the changes lost?",id:"wheres-the-code-when-i-delete-the-container-are-the-changes-lost",children:[]}]}],c={toc:l};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,i.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Previously, building and developing APISIX on Linux or macOS required developers to install its runtime environment and toolchain themselves, and developers might not be familiar with them."),(0,a.kt)("p",null,"As it needs to support multiple operating systems and CPU ISAs, the process has inherent complexities in how to find and install dependencies and toolchains."),(0,a.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"The tutorial can be used as an alternative to a ",(0,a.kt)("a",{parentName:"p",href:"/docs/apisix/3.13/building-apisix"},"bare-metal environment")," or a ",(0,a.kt)("a",{parentName:"p",href:"/docs/apisix/3.13/build-apisix-dev-environment-on-mac"},"macOS container development environment"),"."),(0,a.kt)("p",{parentName:"div"},"It only requires that you have an environment running Docker or a similar alternative (the docker/docker compose command is required), and no other dependent components need to be installed on your host machine."))),(0,a.kt)("h2",{id:"supported-systems-and-cpu-isa"},"Supported systems and CPU ISA"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Linux",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"AMD64"),(0,a.kt)("li",{parentName:"ul"},"ARM64"))),(0,a.kt)("li",{parentName:"ul"},"Windows (with WSL2 supported)",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"AMD64"))),(0,a.kt)("li",{parentName:"ul"},"macOS",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"ARM64"),(0,a.kt)("li",{parentName:"ul"},"AMD64")))),(0,a.kt)("h2",{id:"quick-setup-of-apache-apisix-development-environment"},"Quick Setup of Apache APISIX Development Environment"),(0,a.kt)("h3",{id:"implementation-idea"},"Implementation Idea"),(0,a.kt)("p",null,"We use Dev Containers to build development environment, and when we open an APISIX project using the IDE, we have access to the container-driven runtime environment."),(0,a.kt)("p",null,"There the etcd is ready and we can start APISIX directly."),(0,a.kt)("h3",{id:"steps"},"Steps"),(0,a.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"The following uses Visual Studio Code, which has built-in integration with Dev Containers."),(0,a.kt)("p",{parentName:"div"},"In theory you could also use any other editor or IDE that integrates with Dev Containers."))),(0,a.kt)("p",null,"First, clone the APISIX source code, open project in Visual Studio Code."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"git clone https://github.com/apache/apisix.git\ncd apisix\ncode . # VSCode needs to be in the PATH environment variable, you can also open the project directory manually in the UI.\n")),(0,a.kt)("p",null,"Next, switch to Dev Containers. Open the VSCode Command Palette, and execute ",(0,a.kt)("inlineCode",{parentName:"p"},"Dev Containers: Reopen in Container"),"."),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/apache/apisix/release/3.13/docs/assets/images/build-devcontainers-vscode-command.png",alt:"VSCode Command open in container"})),(0,a.kt)("p",null,"VSCode will open the Dev Containers project in a new window, where it will build the runtime and install the toolchain according to the Dockerfile before starting the connection and finally installing the APISIX dependencies."),(0,a.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"This process requires a reliable network connection, and it will access Docker Hub, GitHub, and some other sites. You will need to ensure the network connection yourself, otherwise the container build may fail."))),(0,a.kt)("p",null,"Wait some minutes, depending on the internet connection or computer performance, it may take from a few minutes to tens of minutes, you can click on the Progress Bar in the bottom right corner to view a live log where you will be able to check unusual stuck."),(0,a.kt)("p",null,"If you encounter any problems, you can search or ask questions in ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/issues"},"GitHub Issues")," or ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/discussions"},"GitHub Discussions"),", and community members will respond as promptly as possible."),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/apache/apisix/release/3.13/docs/assets/images/build-devcontainers-vscode-progressbar.png",alt:"VSCode dev containers building progress bar"})),(0,a.kt)("p",null,"When the process in the terminal is complete, the development environment is ready, and even etcd is ready."),(0,a.kt)("p",null,"Start APISIX with the following command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"make run\n")),(0,a.kt)("p",null,"Now you can start writing code and test cases, and testing tools are available:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"export TEST_NGINX_BINARY=openresty\n\n# run all tests\nmake test\n\n# or run a specify test case file\nFLUSH_ETCD=1 prove -Itest-nginx/lib -I. -r t/admin/api.t\n")),(0,a.kt)("h2",{id:"faq"},"FAQ"),(0,a.kt)("h3",{id:"wheres-the-code-when-i-delete-the-container-are-the-changes-lost"},"Where's the code? When I delete the container, are the changes lost?"),(0,a.kt)("p",null,"It will be on your host, which is where you cloned the APISIX source code, and the container uses the volume to mount the code into the container. Containers contain only the runtime environment, not the source code, so no changes will be lost whether you close or delete the container."),(0,a.kt)("p",null,"And, the ",(0,a.kt)("inlineCode",{parentName:"p"},"git")," is already installed in the container, so you can commit a change directly there."))}d.isMDXComponent=!0}}]);