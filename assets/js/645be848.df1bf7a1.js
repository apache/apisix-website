"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[95556],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>c});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),m=p(n),c=r,h=m["".concat(s,".").concat(c)]||m[c]||u[c]||i;return n?a.createElement(h,l(l({ref:t},d),{},{components:n})):a.createElement(h,l({ref:t},d))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var p=2;p<i;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},92209:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>s});var a=n(87462),r=(n(67294),n(3905));const i={title:"request-validation",keywords:["Apache APISIX","API Gateway","Request Validation"],description:"The request-validation Plugin validates requests before forwarding them to Upstream services. This Plugin uses JSON Schema for validation and can validate headers and body of a request."},l=void 0,o={unversionedId:"plugins/request-validation",id:"plugins/request-validation",isDocsHomePage:!1,title:"request-validation",description:"The request-validation Plugin validates requests before forwarding them to Upstream services. This Plugin uses JSON Schema for validation and can validate headers and body of a request.",source:"@site/docs/apisix/plugins/request-validation.md",sourceDirName:"plugins",slug:"/plugins/request-validation",permalink:"/docs/apisix/next/plugins/request-validation",editUrl:"/edit#https://github.com/apache/apisix/edit/master/docs/en/latest/plugins/request-validation.md",tags:[],version:"current",frontMatter:{title:"request-validation",keywords:["Apache APISIX","API Gateway","Request Validation"],description:"The request-validation Plugin validates requests before forwarding them to Upstream services. This Plugin uses JSON Schema for validation and can validate headers and body of a request."},sidebar:"docs",previous:{title:"proxy-cache",permalink:"/docs/apisix/next/plugins/proxy-cache"},next:{title:"proxy-mirror",permalink:"/docs/apisix/next/plugins/proxy-mirror"}},s=[{value:"Description",id:"description",children:[]},{value:"Attributes",id:"attributes",children:[]},{value:"Examples",id:"examples",children:[{value:"Validate Request Header",id:"validate-request-header",children:[]},{value:"Customize Rejection Message and Status Code",id:"customize-rejection-message-and-status-code",children:[]},{value:"Validate Request Body",id:"validate-request-body",children:[]}]},{value:"Appendix: JSON Schema",id:"appendix-json-schema",children:[{value:"Enumerated Values",id:"enumerated-values",children:[]},{value:"Boolean Values",id:"boolean-values",children:[]},{value:"Numeric Values",id:"numeric-values",children:[]},{value:"Strings",id:"strings",children:[]},{value:"RegEx for Strings",id:"regex-for-strings",children:[]},{value:"Arrays",id:"arrays",children:[]}]}],p={toc:s};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("head",null,(0,r.kt)("link",{rel:"canonical",href:"https://docs.api7.ai/hub/request-validation"})),(0,r.kt)("h2",{id:"description"},"Description"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"request-validation")," Plugin validates requests before forwarding them to Upstream services. This Plugin uses ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/api7/jsonschema"},"JSON Schema")," for validation and can validate headers and body of a request."),(0,r.kt)("p",null,"See ",(0,r.kt)("a",{parentName:"p",href:"https://json-schema.org/specification"},"JSON schema specification")," to learn more about the syntax."),(0,r.kt)("h2",{id:"attributes"},"Attributes"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"),(0,r.kt)("th",{parentName:"tr",align:null},"Valid values"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"header_schema"),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"False"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Schema for the request header data.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"body_schema"),(0,r.kt)("td",{parentName:"tr",align:null},"object"),(0,r.kt)("td",{parentName:"tr",align:null},"False"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Schema for the request body data.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"rejected_code"),(0,r.kt)("td",{parentName:"tr",align:null},"integer"),(0,r.kt)("td",{parentName:"tr",align:null},"False"),(0,r.kt)("td",{parentName:"tr",align:null},"400"),(0,r.kt)("td",{parentName:"tr",align:null},"[200,...,599]"),(0,r.kt)("td",{parentName:"tr",align:null},"Status code to return when rejecting requests.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"rejected_msg"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"False"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Message to return when rejecting requests.")))),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"At least one of ",(0,r.kt)("inlineCode",{parentName:"p"},"header_schema")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"body_schema")," should be filled in."))),(0,r.kt)("h2",{id:"examples"},"Examples"),(0,r.kt)("p",null,"The examples below demonstrate how you can configure ",(0,r.kt)("inlineCode",{parentName:"p"},"request-validation")," for different scenarios."),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"You can fetch the ",(0,r.kt)("inlineCode",{parentName:"p"},"admin_key")," from ",(0,r.kt)("inlineCode",{parentName:"p"},"config.yaml")," and save to an environment variable with the following command:"),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"admin_key=$(yq '.deployment.admin.admin_key[0].key' conf/config.yaml | sed 's/\"//g')\n")))),(0,r.kt)("h3",{id:"validate-request-header"},"Validate Request Header"),(0,r.kt)("p",null,"The following example demonstrates how to validate request headers against a defined JSON schema, which requires two specific headers and the header value to conform to specified requirements."),(0,r.kt)("p",null,"Create a Route with ",(0,r.kt)("inlineCode",{parentName:"p"},"request-validation")," Plugin as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl "http://127.0.0.1:9180/apisix/admin/routes" -X PUT \\\n  -H "X-API-KEY: ${admin_key}" \\\n  -d \'{\n    "id": "request-validation-route",\n    "uri": "/get",\n    "plugins": {\n      "request-validation": {\n        "header_schema": {\n          "type": "object",\n          "required": ["User-Agent", "Host"],\n          "properties": {\n            "User-Agent": {\n              "type": "string",\n              "pattern": "^curl\\/"\n            },\n            "Host": {\n              "type": "string",\n              "enum": ["httpbin.org", "httpbin"]\n            }\n          }\n        }\n      }\n    },\n    "upstream": {\n      "type": "roundrobin",\n      "nodes": {\n        "httpbin.org:80": 1\n      }\n    }\n  }\'\n')),(0,r.kt)("h4",{id:"verify-with-request-conforming-to-the-schema"},"Verify with Request Conforming to the Schema"),(0,r.kt)("p",null,"Send a request with header ",(0,r.kt)("inlineCode",{parentName:"p"},"Host: httpbin"),", which complies with the schema:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl -i "http://127.0.0.1:9080/get" -H "Host: httpbin"\n')),(0,r.kt)("p",null,"You should receive an ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTP/1.1 200 OK")," response similar to the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "args": {},\n  "headers": {\n    "Accept": "*/*",\n    "Host": "httpbin",\n    "User-Agent": "curl/7.74.0",\n    "X-Amzn-Trace-Id": "Root=1-6509ae35-63d1e0fd3934e3f221a95dd8",\n    "X-Forwarded-Host": "httpbin"\n  },\n  "origin": "127.0.0.1, 183.17.233.107",\n  "url": "http://httpbin/get"\n}\n')),(0,r.kt)("h4",{id:"verify-with-request-not-conforming-to-the-schema"},"Verify with Request Not Conforming to the Schema"),(0,r.kt)("p",null,"Send a request without any header:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl -i "http://127.0.0.1:9080/get"\n')),(0,r.kt)("p",null,"You should receive an ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTP/1.1 400 Bad Request")," response, showing that the request fails to pass validation:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},'property "Host" validation failed: matches none of the enum value\n')),(0,r.kt)("p",null,"Send a request with the required headers but with non-conformant header value:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl -i "http://127.0.0.1:9080/get" -H "Host: httpbin" -H "User-Agent: cli-mock"\n')),(0,r.kt)("p",null,"You should receive an ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTP/1.1 400 Bad Request")," response showing the ",(0,r.kt)("inlineCode",{parentName:"p"},"User-Agent")," header value does not match the expected pattern:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},'property "User-Agent" validation failed: failed to match pattern "^curl/" with "cli-mock"\n')),(0,r.kt)("h3",{id:"customize-rejection-message-and-status-code"},"Customize Rejection Message and Status Code"),(0,r.kt)("p",null,"The following example demonstrates how to customize response status and message when the validation fails."),(0,r.kt)("p",null,"Configure the Route with ",(0,r.kt)("inlineCode",{parentName:"p"},"request-validation")," as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl "http://127.0.0.1:9180/apisix/admin/routes" -X PUT \\\n  -H "X-API-KEY: ${admin_key}" \\\n  -d \'{\n    "id": "request-validation-route",\n    "uri": "/get",\n    "plugins": {\n      "request-validation": {\n        "header_schema": {\n          "type": "object",\n          "required": ["Host"],\n          "properties": {\n            "Host": {\n              "type": "string",\n              "enum": ["httpbin.org", "httpbin"]\n            }\n          }\n        },\n        "rejected_code": 403,\n        "rejected_msg": "Request header validation failed."\n      }\n    },\n    "upstream": {\n      "type": "roundrobin",\n      "nodes": {\n        "httpbin.org:80": 1\n      }\n    }\n  }\'\n')),(0,r.kt)("p",null,"Send a request with a misconfigured ",(0,r.kt)("inlineCode",{parentName:"p"},"Host")," in the header:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl -i "http://127.0.0.1:9080/get" -H "Host: httpbin2"\n')),(0,r.kt)("p",null,"You should receive an ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTP/1.1 403 Forbidden")," response with the custom message:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"Request header validation failed.\n")),(0,r.kt)("h3",{id:"validate-request-body"},"Validate Request Body"),(0,r.kt)("p",null,"The following example demonstrates how to validate request body against a defined JSON schema."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"request-validation")," Plugin supports validation of two types of media types:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"application/json")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"application/x-www-form-urlencoded"))),(0,r.kt)("h4",{id:"validate-json-request-body"},"Validate JSON Request Body"),(0,r.kt)("p",null,"Create a Route with ",(0,r.kt)("inlineCode",{parentName:"p"},"request-validation")," Plugin as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl "http://127.0.0.1:9180/apisix/admin/routes" -X PUT \\\n  -H "X-API-KEY: ${admin_key}" \\\n  -d \'{\n    "id": "request-validation-route",\n    "uri": "/post",\n    "plugins": {\n      "request-validation": {\n        "header_schema": {\n          "type": "object",\n          "required": ["Content-Type"],\n          "properties": {\n            "Content-Type": {\n            "type": "string",\n            "pattern": "^application\\/json$"\n            }\n          }\n        },\n        "body_schema": {\n          "type": "object",\n          "required": ["required_payload"],\n          "properties": {\n            "required_payload": {"type": "string"},\n            "boolean_payload": {"type": "boolean"},\n            "array_payload": {\n              "type": "array",\n              "minItems": 1,\n              "items": {\n                "type": "integer",\n                "minimum": 200,\n                "maximum": 599\n              },\n              "uniqueItems": true,\n              "default": [200]\n            }\n          }\n        }\n      }\n    },\n    "upstream": {\n      "type": "roundrobin",\n      "nodes": {\n        "httpbin.org:80": 1\n      }\n    }\n  }\'\n')),(0,r.kt)("p",null,"Send a request with JSON body that conforms to the schema to verify:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl -i "http://127.0.0.1:9080/post" -X POST \\\n  -H "Content-Type: application/json" \\\n  -d \'{"required_payload":"hello", "array_payload":[301]}\'\n')),(0,r.kt)("p",null,"You should receive an ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTP/1.1 200 OK")," response similar to the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "args": {},\n  "data": "{\\"array_payload\\":[301],\\"required_payload\\":\\"hello\\"}",\n  "files": {},\n  "form": {},\n  "headers": {\n    ...\n  },\n  "json": {\n    "array_payload": [\n      301\n    ],\n    "required_payload": "hello"\n  },\n  "origin": "127.0.0.1, 183.17.233.107",\n  "url": "http://127.0.0.1/post"\n}\n')),(0,r.kt)("p",null,"If you send a request without specifying ",(0,r.kt)("inlineCode",{parentName:"p"},"Content-Type: application/json"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl -i "http://127.0.0.1:9080/post" -X POST \\\n  -d \'{"required_payload":"hello,world"}\'\n')),(0,r.kt)("p",null,"You should receive an ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTP/1.1 400 Bad Request")," response similar to the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},'property "Content-Type" validation failed: failed to match pattern "^application/json$" with "application/x-www-form-urlencoded"\n')),(0,r.kt)("p",null,"Similarly, if you send a request without the required JSON field ",(0,r.kt)("inlineCode",{parentName:"p"},"required_payload"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl -i "http://127.0.0.1:9080/post" -X POST \\\n  -H "Content-Type: application/json" \\\n  -d \'{}\'\n')),(0,r.kt)("p",null,"You should receive an ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTP/1.1 400 Bad Request")," response:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},'property "required_payload" is required\n')),(0,r.kt)("h4",{id:"validate-url-encoded-form-body"},"Validate URL-Encoded Form Body"),(0,r.kt)("p",null,"Create a Route with ",(0,r.kt)("inlineCode",{parentName:"p"},"request-validation")," Plugin as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl "http://127.0.0.1:9180/apisix/admin/routes" -X PUT \\\n  -H "X-API-KEY: ${admin_key}" \\\n  -d \'{\n    "id": "request-validation-route",\n    "uri": "/post",\n    "plugins": {\n      "request-validation": {\n        "header_schema": {\n          "type": "object",\n          "required": ["Content-Type"],\n          "properties": {\n            "Content-Type": {\n              "type": "string",\n              "pattern": "^application\\/x-www-form-urlencoded$"\n            }\n          }\n        },\n        "body_schema": {\n          "type": "object",\n          "required": ["required_payload","enum_payload"],\n          "properties": {\n            "required_payload": {"type": "string"},\n            "enum_payload": {\n              "type": "string",\n              "enum": ["enum_string_1", "enum_string_2"],\n              "default": "enum_string_1"\n            }\n          }\n        }\n      }\n    },\n    "upstream": {\n      "type": "roundrobin",\n      "nodes": {\n        "httpbin.org:80": 1\n      }\n    }\n  }\'\n')),(0,r.kt)("p",null,"Send a request with URL-encoded form data to verify:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl -i "http://127.0.0.1:9080/post" -X POST \\\n  -H "Content-Type: application/x-www-form-urlencoded" \\\n  -d "required_payload=hello&enum_payload=enum_string_1"\n')),(0,r.kt)("p",null,"You should receive an ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTP/1.1 400 Bad Request")," response similar to the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "args": {},\n  "data": "",\n  "files": {},\n  "form": {\n    "enum_payload": "enum_string_1",\n    "required_payload": "hello"\n  },\n  "headers": {\n    ...\n  },\n  "json": null,\n  "origin": "127.0.0.1, 183.17.233.107",\n  "url": "http://127.0.0.1/post"\n}\n')),(0,r.kt)("p",null,"Send a request without the URL-encoded field ",(0,r.kt)("inlineCode",{parentName:"p"},"enum_payload"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl -i "http://127.0.0.1:9080/post" -X POST \\\n  -H "Content-Type: application/x-www-form-urlencoded" \\\n  -d "required_payload=hello"\n')),(0,r.kt)("p",null,"You should receive an ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTP/1.1 400 Bad Request")," of the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},'property "enum_payload" is required\n')),(0,r.kt)("h2",{id:"appendix-json-schema"},"Appendix: JSON Schema"),(0,r.kt)("p",null,"The following section provides boilerplate JSON schema for you to adjust, combine, and use with this Plugin. For a complete reference, see ",(0,r.kt)("a",{parentName:"p",href:"https://json-schema.org/specification"},"JSON schema specification"),"."),(0,r.kt)("h3",{id:"enumerated-values"},"Enumerated Values"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "body_schema": {\n    "type": "object",\n    "required": ["enum_payload"],\n    "properties": {\n      "enum_payload": {\n        "type": "string",\n        "enum": ["enum_string_1", "enum_string_2"],\n        "default": "enum_string_1"\n      }\n    }\n  }\n}\n')),(0,r.kt)("h3",{id:"boolean-values"},"Boolean Values"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "body_schema": {\n    "type": "object",\n    "required": ["bool_payload"],\n    "properties": {\n      "bool_payload": {\n        "type": "boolean",\n        "default": true\n      }\n    }\n  }\n}\n')),(0,r.kt)("h3",{id:"numeric-values"},"Numeric Values"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "body_schema": {\n    "type": "object",\n    "required": ["integer_payload"],\n    "properties": {\n      "integer_payload": {\n        "type": "integer",\n        "minimum": 1,\n        "maximum": 65535\n      }\n    }\n  }\n}\n')),(0,r.kt)("h3",{id:"strings"},"Strings"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "body_schema": {\n    "type": "object",\n    "required": ["string_payload"],\n    "properties": {\n      "string_payload": {\n        "type": "string",\n        "minLength": 1,\n        "maxLength": 32\n      }\n    }\n  }\n}\n')),(0,r.kt)("h3",{id:"regex-for-strings"},"RegEx for Strings"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "body_schema": {\n    "type": "object",\n    "required": ["regex_payload"],\n    "properties": {\n      "regex_payload": {\n        "type": "string",\n        "minLength": 1,\n        "maxLength": 32,\n        "pattern": "[[^[a-zA-Z0-9_]+$]]"\n      }\n    }\n  }\n}\n')),(0,r.kt)("h3",{id:"arrays"},"Arrays"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "body_schema": {\n    "type": "object",\n    "required": ["array_payload"],\n    "properties": {\n      "array_payload": {\n        "type": "array",\n        "minItems": 1,\n        "items": {\n          "type": "integer",\n          "minimum": 200,\n          "maximum": 599\n        },\n        "uniqueItems": true,\n        "default": [200, 302]\n      }\n    }\n  }\n}\n')))}d.isMDXComponent=!0}}]);